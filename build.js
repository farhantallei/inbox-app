// @bun
var ac=Object.create;var{defineProperty:ZK,getPrototypeOf:oc,getOwnPropertyNames:tc}=Object;var rc=Object.prototype.hasOwnProperty;var PU=(z,V,K)=>{K=z!=null?ac(oc(z)):{};const J=V||!z||!z.__esModule?ZK(K,"default",{value:z,enumerable:!0}):K;for(let Z of tc(z))if(!rc.call(J,Z))ZK(J,Z,{get:()=>z[Z],enumerable:!0});return J};var Q=(z,V)=>()=>(V||z((V={exports:{}}).exports,V),V.exports);var u6=(z)=>{return import.meta.require(z)};var sc=(z,V)=>{for(var K in V)ZK(z,K,{get:V[K],enumerable:!0,configurable:!0,set:(J)=>V[K]=()=>J})};var ZD=Q((KD)=>{var yp=function(z,V){return["APPEND",z,V]};Object.defineProperty(KD,"__esModule",{value:!0});KD.transformArguments=KD.FIRST_KEY_INDEX=void 0;KD.FIRST_KEY_INDEX=1;KD.transformArguments=yp});var HD=Q((UD)=>{var $p=function(z,V){const K=["BITCOUNT",z];if(V){if(K.push(V.start.toString(),V.end.toString()),V.mode)K.push(V.mode)}return K};Object.defineProperty(UD,"__esModule",{value:!0});UD.transformArguments=UD.IS_READ_ONLY=UD.FIRST_KEY_INDEX=void 0;UD.FIRST_KEY_INDEX=1;UD.IS_READ_ONLY=!0;UD.transformArguments=$p});var BD=Q((QD)=>{var dp=function(z,V){const K=["BITFIELD_RO",z];for(let J of V)K.push("GET",J.encoding,J.offset.toString());return K};Object.defineProperty(QD,"__esModule",{value:!0});QD.transformArguments=QD.IS_READ_ONLY=QD.FIRST_KEY_INDEX=void 0;QD.FIRST_KEY_INDEX=1;QD.IS_READ_ONLY=!0;QD.transformArguments=dp});var OD=Q((MD)=>{var pp=function(z,V){const K=["BITFIELD",z];for(let J of V)switch(J.operation){case"GET":K.push("GET",J.encoding,J.offset.toString());break;case"SET":K.push("SET",J.encoding,J.offset.toString(),J.value.toString());break;case"INCRBY":K.push("INCRBY",J.encoding,J.offset.toString(),J.increment.toString());break;case"OVERFLOW":K.push("OVERFLOW",J.behavior);break}return K};Object.defineProperty(MD,"__esModule",{value:!0});MD.transformArguments=MD.FIRST_KEY_INDEX=void 0;MD.FIRST_KEY_INDEX=1;MD.transformArguments=pp});var m=Q((CD)=>{var wD=function(z){return z===1},np=function(z){return z.map(wD)},ip=function(z,V,K){if(z.push(V.toString()),K?.MATCH)z.push("MATCH",K.MATCH);if(K?.COUNT)z.push("COUNT",K.COUNT.toString());return z},Uz=function(z){switch(z.toString()){case"+inf":return Infinity;case"-inf":return (-Infinity);default:return Number(z)}},ND=function(z){if(z===null)return null;return Uz(z)},ap=function(z){return z.map(ND)},qD=function(z){switch(z){case Infinity:return"+inf";case (-Infinity):return"-inf";default:return z.toString()}},op=function(z){if(typeof z!=="number")return z;return qD(z)},PD=function(z){const V=Object.create(null);for(let K=0;K<z.length;K+=2)V[z[K].toString()]=z[K+1];return V},NK=function([z,V]){return{id:z,message:PD(V)}},TD=function(z){if(z===null)return null;return NK(z)},AD=function(z){return z.map(NK)},tp=function(z){return z.map(TD)},rp=function(z){if(z===null)return null;return z.map(([V,K])=>({name:V,messages:AD(K)}))},sp=function(z){if(!z.length)return null;return ED(z)},ED=function(z){return{value:z[0],score:Uz(z[1])}},ep=function(z){const V=[];for(let K=0;K<z.length;K+=2)V.push({value:z[K],score:Uz(z[K+1])});return V},zl=function(z,V,K,J){if(Dz(z,V),z.push(K),J?.COUNT)z.push("COUNT",J.COUNT.toString());return z},Vl=function(z,V,K,J){if(Dz(z,V),z.push(K),J?.COUNT)z.push("COUNT",J.COUNT.toString());return z},qK=function(z,V){if(typeof V==="number")z.push("COUNT",V.toString());else if(V){if(z.push("COUNT",V.value.toString()),V.ANY)z.push("ANY")}return z},Kl=function(z,V,K,J,Z){if(z.push(V),typeof K==="string")z.push("FROMMEMBER",K);else z.push("FROMLONLAT",K.longitude.toString(),K.latitude.toString());if("radius"in J)z.push("BYRADIUS",J.radius.toString());else z.push("BYBOX",J.width.toString(),J.height.toString());if(z.push(J.unit),Z?.SORT)z.push(Z.SORT);return qK(z,Z?.COUNT),z},vD=function(z,V,K,J,Z,D){if(z.push(V),typeof K==="string")z.push(K);else z.push(K.longitude.toString(),K.latitude.toString());if(z.push(J.toString(),Z),D?.SORT)z.push(D.SORT);return qK(z,D?.COUNT),z},Jl=function(z,V,K,J,Z,D,U){if(vD(z,V,K,J,Z,U),U?.STOREDIST)z.push("STOREDIST",D);else z.push("STORE",D);return z},Zl=function(z,V){const K=new Set(V);let J=0;const Z=K.has(v7.DISTANCE)&&++J,D=K.has(v7.HASH)&&++J,U=K.has(v7.COORDINATES)&&++J;return z.map((j)=>{const B={member:j[0]};if(Z)B.distance=j[Z];if(D)B.hash=j[D];if(U){const[H,G]=j[U];B.coordinates={longitude:H,latitude:G}}return B})},Ul=function(z){return(typeof z==="number"?z:Math.floor(z.getTime()/1000)).toString()},Dl=function(z){return(typeof z==="number"?z:z.getTime()).toString()},Hl=function(z){return z?.keys?.[0]},Ql=function(z,V){if(V?.keys)z.push(V.keys.length.toString(),...V.keys);else z.push("0");if(V?.arguments)z.push(...V.arguments);return z},jl=function(z,V){if(Array.isArray(V))z=z.concat(V);else z.push(V);return z},Bl=function(z,V){if(Array.isArray(V))for(let K of V)z.push(K.toString());else z.push(V.toString());return z},Dz=function(z,V){if(Array.isArray(V))z.push(V.length.toString(),...V);else z.push("1",V);return z},Ml=function(z,V,K){if(K===void 0)return z;return z.push(V),Dz(z,K)},Gl=function([z,V,K,J,Z,D,U]){return{name:z,arity:V,flags:new Set(K),firstKeyIndex:J,lastKeyIndex:Z,step:D,categories:new Set(U)}},Ol=function(z){return{libraryName:z[1],engine:z[3],functions:z[5].map((V)=>({name:V[1],description:V[3],flags:V[5]}))}},Fl=function(z,V){if(V?.BY)z.push("BY",V.BY);if(V?.LIMIT)z.push("LIMIT",V.LIMIT.offset.toString(),V.LIMIT.count.toString());if(V?.GET)for(let K of typeof V.GET==="string"?[V.GET]:V.GET)z.push("GET",K);if(V?.DIRECTION)z.push(V.DIRECTION);if(V?.ALPHA)z.push("ALPHA");return z},LD=function(z,V){z.push(V.start.toString(),V.end.toString())},Il=function(z,V){if(Array.isArray(V))for(let K of V)LD(z,K);else LD(z,V);return z},Xl=function([z,V]){return{start:z,end:V}};Object.defineProperty(CD,"__esModule",{value:!0});CD.transformRangeReply=CD.pushSlotRangesArguments=CD.pushSortArguments=CD.transformFunctionListItemReply=CD.RedisFunctionFlags=CD.transformCommandReply=CD.CommandCategories=CD.CommandFlags=CD.pushOptionalVerdictArgument=CD.pushVerdictArgument=CD.pushVerdictNumberArguments=CD.pushVerdictArguments=CD.pushEvalArguments=CD.evalFirstKeyIndex=CD.transformPXAT=CD.transformEXAT=CD.transformGeoMembersWithReply=CD.GeoReplyWith=CD.pushGeoRadiusStoreArguments=CD.pushGeoRadiusArguments=CD.pushGeoSearchArguments=CD.pushGeoCountArgument=CD.transformLMPopArguments=CD.transformZMPopArguments=CD.transformSortedSetWithScoresReply=CD.transformSortedSetMemberReply=CD.transformSortedSetMemberNullReply=CD.transformStreamsMessagesReply=CD.transformStreamMessagesNullReply=CD.transformStreamMessagesReply=CD.transformStreamMessageNullReply=CD.transformStreamMessageReply=CD.transformTuplesReply=CD.transformStringNumberInfinityArgument=CD.transformNumberInfinityArgument=CD.transformNumberInfinityNullArrayReply=CD.transformNumberInfinityNullReply=CD.transformNumberInfinityReply=CD.pushScanArguments=CD.transformBooleanArrayReply=CD.transformBooleanReply=void 0;CD.transformBooleanReply=wD;CD.transformBooleanArrayReply=np;CD.pushScanArguments=ip;CD.transformNumberInfinityReply=Uz;CD.transformNumberInfinityNullReply=ND;CD.transformNumberInfinityNullArrayReply=ap;CD.transformNumberInfinityArgument=qD;CD.transformStringNumberInfinityArgument=op;CD.transformTuplesReply=PD;CD.transformStreamMessageReply=NK;CD.transformStreamMessageNullReply=TD;CD.transformStreamMessagesReply=AD;CD.transformStreamMessagesNullReply=tp;CD.transformStreamsMessagesReply=rp;CD.transformSortedSetMemberNullReply=sp;CD.transformSortedSetMemberReply=ED;CD.transformSortedSetWithScoresReply=ep;CD.transformZMPopArguments=zl;CD.transformLMPopArguments=Vl;CD.pushGeoCountArgument=qK;CD.pushGeoSearchArguments=Kl;CD.pushGeoRadiusArguments=vD;CD.pushGeoRadiusStoreArguments=Jl;var v7;(function(z){z.DISTANCE="WITHDIST",z.HASH="WITHHASH",z.COORDINATES="WITHCOORD"})(v7||(CD.GeoReplyWith=v7={}));CD.transformGeoMembersWithReply=Zl;CD.transformEXAT=Ul;CD.transformPXAT=Dl;CD.evalFirstKeyIndex=Hl;CD.pushEvalArguments=Ql;CD.pushVerdictArguments=jl;CD.pushVerdictNumberArguments=Bl;CD.pushVerdictArgument=Dz;CD.pushOptionalVerdictArgument=Ml;var FD;(function(z){z.WRITE="write",z.READONLY="readonly",z.DENYOOM="denyoom",z.ADMIN="admin",z.PUBSUB="pubsub",z.NOSCRIPT="noscript",z.RANDOM="random",z.SORT_FOR_SCRIPT="sort_for_script",z.LOADING="loading",z.STALE="stale",z.SKIP_MONITOR="skip_monitor",z.ASKING="asking",z.FAST="fast",z.MOVABLEKEYS="movablekeys"})(FD||(CD.CommandFlags=FD={}));var ID;(function(z){z.KEYSPACE="@keyspace",z.READ="@read",z.WRITE="@write",z.SET="@set",z.SORTEDSET="@sortedset",z.LIST="@list",z.HASH="@hash",z.STRING="@string",z.BITMAP="@bitmap",z.HYPERLOGLOG="@hyperloglog",z.GEO="@geo",z.STREAM="@stream",z.PUBSUB="@pubsub",z.ADMIN="@admin",z.FAST="@fast",z.SLOW="@slow",z.BLOCKING="@blocking",z.DANGEROUS="@dangerous",z.CONNECTION="@connection",z.TRANSACTION="@transaction",z.SCRIPTING="@scripting"})(ID||(CD.CommandCategories=ID={}));CD.transformCommandReply=Gl;var XD;(function(z){z.NO_WRITES="no-writes",z.ALLOW_OOM="allow-oom",z.ALLOW_STALE="allow-stale",z.NO_CLUSTER="no-cluster"})(XD||(CD.RedisFunctionFlags=XD={}));CD.transformFunctionListItemReply=Ol;CD.pushSortArguments=Fl;CD.pushSlotRangesArguments=Il;CD.transformRangeReply=Xl});var kD=Q((WD)=>{var Zn=function(z,V,K){return(0,Jn.pushVerdictArguments)(["BITOP",z,V],K)};Object.defineProperty(WD,"__esModule",{value:!0});WD.transformArguments=WD.FIRST_KEY_INDEX=void 0;var Jn=m();WD.FIRST_KEY_INDEX=2;WD.transformArguments=Zn});var fD=Q((YD)=>{var Dn=function(z,V,K,J,Z){const D=["BITPOS",z,V.toString()];if(typeof K==="number")D.push(K.toString());if(typeof J==="number")D.push(J.toString());if(Z)D.push(Z);return D};Object.defineProperty(YD,"__esModule",{value:!0});YD.transformArguments=YD.IS_READ_ONLY=YD.FIRST_KEY_INDEX=void 0;YD.FIRST_KEY_INDEX=1;YD.IS_READ_ONLY=!0;YD.transformArguments=Dn});var yD=Q((xD)=>{var jn=function(z,V,K,J,Z){return["BLMOVE",z,V,K,J,Z.toString()]};Object.defineProperty(xD,"__esModule",{value:!0});xD.transformArguments=xD.FIRST_KEY_INDEX=void 0;xD.FIRST_KEY_INDEX=1;xD.transformArguments=jn});var PK=Q((_D)=>{var Gn=function(z,V,K){return(0,Mn.transformLMPopArguments)(["LMPOP"],z,V,K)};Object.defineProperty(_D,"__esModule",{value:!0});_D.transformArguments=_D.FIRST_KEY_INDEX=void 0;var Mn=m();_D.FIRST_KEY_INDEX=2;_D.transformArguments=Gn});var gD=Q((TK)=>{var In=function(z,V,K,J){return(0,Fn.transformLMPopArguments)(["BLMPOP",z.toString()],V,K,J)};Object.defineProperty(TK,"__esModule",{value:!0});TK.transformReply=TK.transformArguments=TK.FIRST_KEY_INDEX=void 0;var Fn=m();TK.FIRST_KEY_INDEX=3;TK.transformArguments=In;var Xn=PK();Object.defineProperty(TK,"transformReply",{enumerable:!0,get:function(){return Xn.transformReply}})});var AK=Q((uD)=>{var Pn=function(z,V){const K=(0,qn.pushVerdictArguments)(["BLPOP"],z);return K.push(V.toString()),K},Tn=function(z){if(z===null)return null;return{key:z[0],element:z[1]}};Object.defineProperty(uD,"__esModule",{value:!0});uD.transformReply=uD.transformArguments=uD.FIRST_KEY_INDEX=void 0;var qn=m();uD.FIRST_KEY_INDEX=1;uD.transformArguments=Pn;uD.transformReply=Tn});var mD=Q((EK)=>{var Cn=function(z,V){const K=(0,vn.pushVerdictArguments)(["BRPOP"],z);return K.push(V.toString()),K};Object.defineProperty(EK,"__esModule",{value:!0});EK.transformReply=EK.transformArguments=EK.FIRST_KEY_INDEX=void 0;var vn=m();EK.FIRST_KEY_INDEX=1;EK.transformArguments=Cn;var hn=AK();Object.defineProperty(EK,"transformReply",{enumerable:!0,get:function(){return hn.transformReply}})});var lD=Q((cD)=>{var Yn=function(z,V,K){return["BRPOPLPUSH",z,V,K.toString()]};Object.defineProperty(cD,"__esModule",{value:!0});cD.transformArguments=cD.FIRST_KEY_INDEX=void 0;cD.FIRST_KEY_INDEX=1;cD.transformArguments=Yn});var vK=Q((iD)=>{var fn=function(z,V,K){return(0,nD.transformZMPopArguments)(["ZMPOP"],z,V,K)},xn=function(z){return z===null?null:{key:z[0],elements:z[1].map(nD.transformSortedSetMemberReply)}};Object.defineProperty(iD,"__esModule",{value:!0});iD.transformReply=iD.transformArguments=iD.FIRST_KEY_INDEX=void 0;var nD=m();iD.FIRST_KEY_INDEX=2;iD.transformArguments=fn;iD.transformReply=xn});var oD=Q((CK)=>{var $n=function(z,V,K,J){return(0,_n.transformZMPopArguments)(["BZMPOP",z.toString()],V,K,J)};Object.defineProperty(CK,"__esModule",{value:!0});CK.transformReply=CK.transformArguments=CK.FIRST_KEY_INDEX=void 0;var _n=m();CK.FIRST_KEY_INDEX=3;CK.transformArguments=$n;var gn=vK();Object.defineProperty(CK,"transformReply",{enumerable:!0,get:function(){return gn.transformReply}})});var hK=Q((rD)=>{var cn=function(z,V){const K=(0,tD.pushVerdictArguments)(["BZPOPMAX"],z);return K.push(V.toString()),K},pn=function(z){if(!z)return null;return{key:z[0],value:z[1],score:(0,tD.transformNumberInfinityReply)(z[2])}};Object.defineProperty(rD,"__esModule",{value:!0});rD.transformReply=rD.transformArguments=rD.FIRST_KEY_INDEX=void 0;var tD=m();rD.FIRST_KEY_INDEX=1;rD.transformArguments=cn;rD.transformReply=pn});var eD=Q((WK)=>{var on=function(z,V){const K=(0,an.pushVerdictArguments)(["BZPOPMIN"],z);return K.push(V.toString()),K};Object.defineProperty(WK,"__esModule",{value:!0});WK.transformReply=WK.transformArguments=WK.FIRST_KEY_INDEX=void 0;var an=m();WK.FIRST_KEY_INDEX=1;WK.transformArguments=on;var tn=hK();Object.defineProperty(WK,"transformReply",{enumerable:!0,get:function(){return tn.transformReply}})});var z1=Q((RK)=>{var zi=function(z,V,K){const J=["COPY",z,V];if(K?.destinationDb)J.push("DB",K.destinationDb.toString());if(K?.replace)J.push("REPLACE");return J};Object.defineProperty(RK,"__esModule",{value:!0});RK.transformReply=RK.transformArguments=RK.FIRST_KEY_INDEX=void 0;RK.FIRST_KEY_INDEX=1;RK.transformArguments=zi;var Vi=m();Object.defineProperty(RK,"transformReply",{enumerable:!0,get:function(){return Vi.transformBooleanReply}})});var J1=Q((V1)=>{var Ui=function(z){return["DECR",z]};Object.defineProperty(V1,"__esModule",{value:!0});V1.transformArguments=V1.FIRST_KEY_INDEX=void 0;V1.FIRST_KEY_INDEX=1;V1.transformArguments=Ui});var D1=Q((Z1)=>{var Hi=function(z,V){return["DECRBY",z,V.toString()]};Object.defineProperty(Z1,"__esModule",{value:!0});Z1.transformArguments=Z1.FIRST_KEY_INDEX=void 0;Z1.FIRST_KEY_INDEX=1;Z1.transformArguments=Hi});var j1=Q((H1)=>{var Bi=function(z){return(0,ji.pushVerdictArguments)(["DEL"],z)};Object.defineProperty(H1,"__esModule",{value:!0});H1.transformArguments=H1.FIRST_KEY_INDEX=void 0;var ji=m();H1.FIRST_KEY_INDEX=1;H1.transformArguments=Bi});var G1=Q((B1)=>{var Gi=function(z){return["DUMP",z]};Object.defineProperty(B1,"__esModule",{value:!0});B1.transformArguments=B1.FIRST_KEY_INDEX=void 0;B1.FIRST_KEY_INDEX=1;B1.transformArguments=Gi});var X1=Q((F1)=>{var Fi=function(z,V){return(0,O1.pushEvalArguments)(["EVAL_RO",z],V)};Object.defineProperty(F1,"__esModule",{value:!0});F1.transformArguments=F1.IS_READ_ONLY=F1.FIRST_KEY_INDEX=void 0;var O1=m();F1.FIRST_KEY_INDEX=O1.evalFirstKeyIndex;F1.IS_READ_ONLY=!0;F1.transformArguments=Fi});var q1=Q((w1)=>{var Li=function(z,V){return(0,L1.pushEvalArguments)(["EVAL",z],V)};Object.defineProperty(w1,"__esModule",{value:!0});w1.transformArguments=w1.FIRST_KEY_INDEX=void 0;var L1=m();w1.FIRST_KEY_INDEX=L1.evalFirstKeyIndex;w1.transformArguments=Li});var E1=Q((T1)=>{var Ni=function(z,V){return(0,P1.pushEvalArguments)(["EVALSHA_RO",z],V)};Object.defineProperty(T1,"__esModule",{value:!0});T1.transformArguments=T1.IS_READ_ONLY=T1.FIRST_KEY_INDEX=void 0;var P1=m();T1.FIRST_KEY_INDEX=P1.evalFirstKeyIndex;T1.IS_READ_ONLY=!0;T1.transformArguments=Ni});var W1=Q((C1)=>{var Ti=function(z,V){return(0,v1.pushEvalArguments)(["EVALSHA",z],V)};Object.defineProperty(C1,"__esModule",{value:!0});C1.transformArguments=C1.FIRST_KEY_INDEX=void 0;var v1=m();C1.FIRST_KEY_INDEX=v1.evalFirstKeyIndex;C1.transformArguments=Ti});var Y1=Q((R1)=>{var vi=function(z){return(0,Ei.pushVerdictArguments)(["EXISTS"],z)};Object.defineProperty(R1,"__esModule",{value:!0});R1.transformArguments=R1.IS_READ_ONLY=R1.FIRST_KEY_INDEX=void 0;var Ei=m();R1.FIRST_KEY_INDEX=1;R1.IS_READ_ONLY=!0;R1.transformArguments=vi});var b1=Q((kK)=>{var Wi=function(z,V,K){const J=["EXPIRE",z,V.toString()];if(K)J.push(K);return J};Object.defineProperty(kK,"__esModule",{value:!0});kK.transformReply=kK.transformArguments=kK.FIRST_KEY_INDEX=void 0;kK.FIRST_KEY_INDEX=1;kK.transformArguments=Wi;var Ri=m();Object.defineProperty(kK,"transformReply",{enumerable:!0,get:function(){return Ri.transformBooleanReply}})});var f1=Q((YK)=>{var xi=function(z,V,K){const J=["EXPIREAT",z,(0,fi.transformEXAT)(V)];if(K)J.push(K);return J};Object.defineProperty(YK,"__esModule",{value:!0});YK.transformReply=YK.transformArguments=YK.FIRST_KEY_INDEX=void 0;var fi=m();YK.FIRST_KEY_INDEX=1;YK.transformArguments=xi;var Si=m();Object.defineProperty(YK,"transformReply",{enumerable:!0,get:function(){return Si.transformBooleanReply}})});var y1=Q((x1)=>{var gi=function(z){return["EXPIRETIME",z]};Object.defineProperty(x1,"__esModule",{value:!0});x1.transformArguments=x1.FIRST_KEY_INDEX=void 0;x1.FIRST_KEY_INDEX=1;x1.transformArguments=gi});var u1=Q(($1)=>{var di=function(z,V){return(0,_1.pushEvalArguments)(["FCALL_RO",z],V)};Object.defineProperty($1,"__esModule",{value:!0});$1.transformArguments=$1.IS_READ_ONLY=$1.FIRST_KEY_INDEX=void 0;var _1=m();$1.FIRST_KEY_INDEX=_1.evalFirstKeyIndex;$1.IS_READ_ONLY=!0;$1.transformArguments=di});var p1=Q((m1)=>{var pi=function(z,V){return(0,d1.pushEvalArguments)(["FCALL",z],V)};Object.defineProperty(m1,"__esModule",{value:!0});m1.transformArguments=m1.FIRST_KEY_INDEX=void 0;var d1=m();m1.FIRST_KEY_INDEX=d1.evalFirstKeyIndex;m1.transformArguments=pi});var i1=Q((l1)=>{var ni=function(z,V,K){const J=["GEOADD",z];if(K?.NX)J.push("NX");else if(K?.XX)J.push("XX");if(K?.CH)J.push("CH");for(let{longitude:Z,latitude:D,member:U}of Array.isArray(V)?V:[V])J.push(Z.toString(),D.toString(),U);return J};Object.defineProperty(l1,"__esModule",{value:!0});l1.transformArguments=l1.FIRST_KEY_INDEX=void 0;l1.FIRST_KEY_INDEX=1;l1.transformArguments=ni});var t1=Q((a1)=>{var ai=function(z,V,K,J){const Z=["GEODIST",z,V,K];if(J)Z.push(J);return Z},oi=function(z){return z===null?null:Number(z)};Object.defineProperty(a1,"__esModule",{value:!0});a1.transformReply=a1.transformArguments=a1.IS_READ_ONLY=a1.FIRST_KEY_INDEX=void 0;a1.FIRST_KEY_INDEX=1;a1.IS_READ_ONLY=!0;a1.transformArguments=ai;a1.transformReply=oi});var e1=Q((r1)=>{var za=function(z,V){return(0,ei.pushVerdictArguments)(["GEOHASH",z],V)};Object.defineProperty(r1,"__esModule",{value:!0});r1.transformArguments=r1.IS_READ_ONLY=r1.FIRST_KEY_INDEX=void 0;var ei=m();r1.FIRST_KEY_INDEX=1;r1.IS_READ_ONLY=!0;r1.transformArguments=za});var K2=Q((z2)=>{var Za=function(z,V){return(0,Ja.pushVerdictArguments)(["GEOPOS",z],V)},Ua=function(z){return z.map((V)=>V===null?null:{longitude:V[0],latitude:V[1]})};Object.defineProperty(z2,"__esModule",{value:!0});z2.transformReply=z2.transformArguments=z2.IS_READ_ONLY=z2.FIRST_KEY_INDEX=void 0;var Ja=m();z2.FIRST_KEY_INDEX=1;z2.IS_READ_ONLY=!0;z2.transformArguments=Za;z2.transformReply=Ua});var Hz=Q((J2)=>{var Ba=function(z,V,K,J,Z){return(0,ja.pushGeoRadiusArguments)(["GEORADIUS_RO"],z,V,K,J,Z)};Object.defineProperty(J2,"__esModule",{value:!0});J2.transformArguments=J2.IS_READ_ONLY=J2.FIRST_KEY_INDEX=void 0;var ja=m();J2.FIRST_KEY_INDEX=1;J2.IS_READ_ONLY=!0;J2.transformArguments=Ba});var D2=Q((C7)=>{var Fa=function(z,V,K,J,Z,D){const U=(0,Oa.transformArguments)(z,V,K,J,D);return U.push(...Z),U.preserve=Z,U};Object.defineProperty(C7,"__esModule",{value:!0});C7.transformReply=C7.transformArguments=C7.IS_READ_ONLY=C7.FIRST_KEY_INDEX=void 0;var Oa=Hz(),U2=Hz();Object.defineProperty(C7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return U2.FIRST_KEY_INDEX}});Object.defineProperty(C7,"IS_READ_ONLY",{enumerable:!0,get:function(){return U2.IS_READ_ONLY}});C7.transformArguments=Fa;var Ia=m();Object.defineProperty(C7,"transformReply",{enumerable:!0,get:function(){return Ia.transformGeoMembersWithReply}})});var h7=Q((H2)=>{var Na=function(z,V,K,J,Z){return(0,wa.pushGeoRadiusArguments)(["GEORADIUS"],z,V,K,J,Z)};Object.defineProperty(H2,"__esModule",{value:!0});H2.transformArguments=H2.IS_READ_ONLY=H2.FIRST_KEY_INDEX=void 0;var wa=m();H2.FIRST_KEY_INDEX=1;H2.IS_READ_ONLY=!0;H2.transformArguments=Na});var B2=Q((W7)=>{var Aa=function(z,V,K,J,Z,D){const U=(0,Ta.transformArguments)(z,V,K,J,D);return U.push(...Z),U.preserve=Z,U};Object.defineProperty(W7,"__esModule",{value:!0});W7.transformReply=W7.transformArguments=W7.IS_READ_ONLY=W7.FIRST_KEY_INDEX=void 0;var Ta=h7(),j2=h7();Object.defineProperty(W7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return j2.FIRST_KEY_INDEX}});Object.defineProperty(W7,"IS_READ_ONLY",{enumerable:!0,get:function(){return j2.IS_READ_ONLY}});W7.transformArguments=Aa;var Ea=m();Object.defineProperty(W7,"transformReply",{enumerable:!0,get:function(){return Ea.transformGeoMembersWithReply}})});var Qz=Q((M2)=>{var Wa=function(z,V,K,J,Z){return(0,ha.pushGeoRadiusArguments)(["GEORADIUSBYMEMBER_RO"],z,V,K,J,Z)};Object.defineProperty(M2,"__esModule",{value:!0});M2.transformArguments=M2.IS_READ_ONLY=M2.FIRST_KEY_INDEX=void 0;var ha=m();M2.FIRST_KEY_INDEX=1;M2.IS_READ_ONLY=!0;M2.transformArguments=Wa});var F2=Q((R7)=>{var ba=function(z,V,K,J,Z,D){const U=(0,Ya.transformArguments)(z,V,K,J,D);return U.push(...Z),U.preserve=Z,U};Object.defineProperty(R7,"__esModule",{value:!0});R7.transformReply=R7.transformArguments=R7.IS_READ_ONLY=R7.FIRST_KEY_INDEX=void 0;var Ya=Qz(),O2=Qz();Object.defineProperty(R7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return O2.FIRST_KEY_INDEX}});Object.defineProperty(R7,"IS_READ_ONLY",{enumerable:!0,get:function(){return O2.IS_READ_ONLY}});R7.transformArguments=ba;var fa=m();Object.defineProperty(R7,"transformReply",{enumerable:!0,get:function(){return fa.transformGeoMembersWithReply}})});var k7=Q((I2)=>{var _a=function(z,V,K,J,Z){return(0,ya.pushGeoRadiusArguments)(["GEORADIUSBYMEMBER"],z,V,K,J,Z)};Object.defineProperty(I2,"__esModule",{value:!0});I2.transformArguments=I2.IS_READ_ONLY=I2.FIRST_KEY_INDEX=void 0;var ya=m();I2.FIRST_KEY_INDEX=1;I2.IS_READ_ONLY=!0;I2.transformArguments=_a});var w2=Q((Y7)=>{var da=function(z,V,K,J,Z,D){const U=(0,ua.transformArguments)(z,V,K,J,D);return U.push(...Z),U.preserve=Z,U};Object.defineProperty(Y7,"__esModule",{value:!0});Y7.transformReply=Y7.transformArguments=Y7.IS_READ_ONLY=Y7.FIRST_KEY_INDEX=void 0;var ua=k7(),L2=k7();Object.defineProperty(Y7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return L2.FIRST_KEY_INDEX}});Object.defineProperty(Y7,"IS_READ_ONLY",{enumerable:!0,get:function(){return L2.IS_READ_ONLY}});Y7.transformArguments=da;var ma=m();Object.defineProperty(Y7,"transformReply",{enumerable:!0,get:function(){return ma.transformGeoMembersWithReply}})});var P2=Q((jz)=>{var na=function(z,V,K,J,Z,D){return(0,la.pushGeoRadiusStoreArguments)(["GEORADIUSBYMEMBER"],z,V,K,J,Z,D)};Object.defineProperty(jz,"__esModule",{value:!0});jz.transformArguments=jz.IS_READ_ONLY=jz.FIRST_KEY_INDEX=void 0;var la=m(),N2=k7();Object.defineProperty(jz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return N2.FIRST_KEY_INDEX}});Object.defineProperty(jz,"IS_READ_ONLY",{enumerable:!0,get:function(){return N2.IS_READ_ONLY}});jz.transformArguments=na});var E2=Q((Bz)=>{var aa=function(z,V,K,J,Z,D){return(0,ia.pushGeoRadiusStoreArguments)(["GEORADIUS"],z,V,K,J,Z,D)};Object.defineProperty(Bz,"__esModule",{value:!0});Bz.transformArguments=Bz.IS_READ_ONLY=Bz.FIRST_KEY_INDEX=void 0;var ia=m(),T2=h7();Object.defineProperty(Bz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return T2.FIRST_KEY_INDEX}});Object.defineProperty(Bz,"IS_READ_ONLY",{enumerable:!0,get:function(){return T2.IS_READ_ONLY}});Bz.transformArguments=aa});var b7=Q((v2)=>{var ta=function(z,V,K,J){return(0,oa.pushGeoSearchArguments)(["GEOSEARCH"],z,V,K,J)};Object.defineProperty(v2,"__esModule",{value:!0});v2.transformArguments=v2.IS_READ_ONLY=v2.FIRST_KEY_INDEX=void 0;var oa=m();v2.FIRST_KEY_INDEX=1;v2.IS_READ_ONLY=!0;v2.transformArguments=ta});var W2=Q((f7)=>{var zo=function(z,V,K,J,Z){const D=(0,ea.transformArguments)(z,V,K,Z);return D.push(...J),D.preserve=J,D};Object.defineProperty(f7,"__esModule",{value:!0});f7.transformReply=f7.transformArguments=f7.IS_READ_ONLY=f7.FIRST_KEY_INDEX=void 0;var ea=b7(),h2=b7();Object.defineProperty(f7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return h2.FIRST_KEY_INDEX}});Object.defineProperty(f7,"IS_READ_ONLY",{enumerable:!0,get:function(){return h2.IS_READ_ONLY}});f7.transformArguments=zo;var Vo=m();Object.defineProperty(f7,"transformReply",{enumerable:!0,get:function(){return Vo.transformGeoMembersWithReply}})});var Y2=Q((Mz)=>{var Uo=function(z,V,K,J,Z){const D=(0,Zo.pushGeoSearchArguments)(["GEOSEARCHSTORE",z],V,K,J,Z);if(Z?.STOREDIST)D.push("STOREDIST");return D},Do=function(z){if(typeof z!=="number")throw new TypeError("https://github.com/redis/redis/issues/9261");return z};Object.defineProperty(Mz,"__esModule",{value:!0});Mz.transformReply=Mz.transformArguments=Mz.IS_READ_ONLY=Mz.FIRST_KEY_INDEX=void 0;var Zo=m(),R2=b7();Object.defineProperty(Mz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return R2.FIRST_KEY_INDEX}});Object.defineProperty(Mz,"IS_READ_ONLY",{enumerable:!0,get:function(){return R2.IS_READ_ONLY}});Mz.transformArguments=Uo;Mz.transformReply=Do});var x2=Q((b2)=>{var Qo=function(z){return["GET",z]};Object.defineProperty(b2,"__esModule",{value:!0});b2.transformArguments=b2.IS_READ_ONLY=b2.FIRST_KEY_INDEX=void 0;b2.FIRST_KEY_INDEX=1;b2.IS_READ_ONLY=!0;b2.transformArguments=Qo});var _2=Q((S2)=>{var Mo=function(z,V){return["GETBIT",z,V.toString()]};Object.defineProperty(S2,"__esModule",{value:!0});S2.transformArguments=S2.IS_READ_ONLY=S2.FIRST_KEY_INDEX=void 0;S2.FIRST_KEY_INDEX=1;S2.IS_READ_ONLY=!0;S2.transformArguments=Mo});var u2=Q(($2)=>{var Fo=function(z){return["GETDEL",z]};Object.defineProperty($2,"__esModule",{value:!0});$2.transformArguments=$2.FIRST_KEY_INDEX=void 0;$2.FIRST_KEY_INDEX=1;$2.transformArguments=Fo});var p2=Q((m2)=>{var Xo=function(z,V){const K=["GETEX",z];if("EX"in V)K.push("EX",V.EX.toString());else if("PX"in V)K.push("PX",V.PX.toString());else if("EXAT"in V)K.push("EXAT",(0,d2.transformEXAT)(V.EXAT));else if("PXAT"in V)K.push("PXAT",(0,d2.transformPXAT)(V.PXAT));else K.push("PERSIST");return K};Object.defineProperty(m2,"__esModule",{value:!0});m2.transformArguments=m2.FIRST_KEY_INDEX=void 0;var d2=m();m2.FIRST_KEY_INDEX=1;m2.transformArguments=Xo});var i2=Q((l2)=>{var wo=function(z,V,K){return["GETRANGE",z,V.toString(),K.toString()]};Object.defineProperty(l2,"__esModule",{value:!0});l2.transformArguments=l2.IS_READ_ONLY=l2.FIRST_KEY_INDEX=void 0;l2.FIRST_KEY_INDEX=1;l2.IS_READ_ONLY=!0;l2.transformArguments=wo});var t2=Q((a2)=>{var Po=function(z,V){return["GETSET",z,V]};Object.defineProperty(a2,"__esModule",{value:!0});a2.transformArguments=a2.FIRST_KEY_INDEX=void 0;a2.FIRST_KEY_INDEX=1;a2.transformArguments=Po});var e2=Q((r2)=>{var Eo=function(z,V){return(0,Ao.pushVerdictArguments)(["HDEL",z],V)};Object.defineProperty(r2,"__esModule",{value:!0});r2.transformArguments=r2.FIRST_KEY_INDEX=void 0;var Ao=m();r2.FIRST_KEY_INDEX=1;r2.transformArguments=Eo});var zH=Q((bK)=>{var Co=function(z,V){return["HEXISTS",z,V]};Object.defineProperty(bK,"__esModule",{value:!0});bK.transformReply=bK.transformArguments=bK.FIRST_KEY_INDEX=void 0;bK.FIRST_KEY_INDEX=1;bK.transformArguments=Co;var ho=m();Object.defineProperty(bK,"transformReply",{enumerable:!0,get:function(){return ho.transformBooleanReply}})});var JH=Q((VH)=>{var Yo=function(z,V){return["HGET",z,V]};Object.defineProperty(VH,"__esModule",{value:!0});VH.transformArguments=VH.IS_READ_ONLY=VH.FIRST_KEY_INDEX=void 0;VH.FIRST_KEY_INDEX=1;VH.IS_READ_ONLY=!0;VH.transformArguments=Yo});var ZH=Q((fK)=>{var xo=function(z){return["HGETALL",z]};Object.defineProperty(fK,"__esModule",{value:!0});fK.transformReply=fK.transformArguments=fK.TRANSFORM_LEGACY_REPLY=fK.IS_READ_ONLY=fK.FIRST_KEY_INDEX=void 0;fK.FIRST_KEY_INDEX=1;fK.IS_READ_ONLY=!0;fK.TRANSFORM_LEGACY_REPLY=!0;fK.transformArguments=xo;var So=m();Object.defineProperty(fK,"transformReply",{enumerable:!0,get:function(){return So.transformTuplesReply}})});var HH=Q((UH)=>{var mo=function(z,V,K){return["HINCRBY",z,V,K.toString()]};Object.defineProperty(UH,"__esModule",{value:!0});UH.transformArguments=UH.FIRST_KEY_INDEX=void 0;UH.FIRST_KEY_INDEX=1;UH.transformArguments=mo});var BH=Q((QH)=>{var po=function(z,V,K){return["HINCRBYFLOAT",z,V,K.toString()]};Object.defineProperty(QH,"__esModule",{value:!0});QH.transformArguments=QH.FIRST_KEY_INDEX=void 0;QH.FIRST_KEY_INDEX=1;QH.transformArguments=po});var OH=Q((MH)=>{var no=function(z){return["HKEYS",z]};Object.defineProperty(MH,"__esModule",{value:!0});MH.transformArguments=MH.FIRST_KEY_INDEX=void 0;MH.FIRST_KEY_INDEX=1;MH.transformArguments=no});var XH=Q((FH)=>{var ao=function(z){return["HLEN",z]};Object.defineProperty(FH,"__esModule",{value:!0});FH.transformArguments=FH.FIRST_KEY_INDEX=void 0;FH.FIRST_KEY_INDEX=1;FH.transformArguments=ao});var NH=Q((LH)=>{var ro=function(z,V){return(0,to.pushVerdictArguments)(["HMGET",z],V)};Object.defineProperty(LH,"__esModule",{value:!0});LH.transformArguments=LH.IS_READ_ONLY=LH.FIRST_KEY_INDEX=void 0;var to=m();LH.FIRST_KEY_INDEX=1;LH.IS_READ_ONLY=!0;LH.transformArguments=ro});var Gz=Q((qH)=>{var zt=function(z){return["HRANDFIELD",z]};Object.defineProperty(qH,"__esModule",{value:!0});qH.transformArguments=qH.IS_READ_ONLY=qH.FIRST_KEY_INDEX=void 0;qH.FIRST_KEY_INDEX=1;qH.IS_READ_ONLY=!0;qH.transformArguments=zt});var Fz=Q((Oz)=>{var Zt=function(z,V){return[...(0,Jt.transformArguments)(z),V.toString()]};Object.defineProperty(Oz,"__esModule",{value:!0});Oz.transformArguments=Oz.IS_READ_ONLY=Oz.FIRST_KEY_INDEX=void 0;var Jt=Gz(),TH=Gz();Object.defineProperty(Oz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return TH.FIRST_KEY_INDEX}});Object.defineProperty(Oz,"IS_READ_ONLY",{enumerable:!0,get:function(){return TH.IS_READ_ONLY}});Oz.transformArguments=Zt});var vH=Q((x7)=>{var Dt=function(z,V){return[...(0,Ut.transformArguments)(z,V),"WITHVALUES"]};Object.defineProperty(x7,"__esModule",{value:!0});x7.transformReply=x7.transformArguments=x7.IS_READ_ONLY=x7.FIRST_KEY_INDEX=void 0;var Ut=Fz(),EH=Fz();Object.defineProperty(x7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return EH.FIRST_KEY_INDEX}});Object.defineProperty(x7,"IS_READ_ONLY",{enumerable:!0,get:function(){return EH.IS_READ_ONLY}});x7.transformArguments=Dt;var Ht=m();Object.defineProperty(x7,"transformReply",{enumerable:!0,get:function(){return Ht.transformTuplesReply}})});var WH=Q((CH)=>{var Mt=function(z,V,K){return(0,Bt.pushScanArguments)(["HSCAN",z],V,K)},Gt=function([z,V]){const K=[];for(let J=0;J<V.length;J+=2)K.push({field:V[J],value:V[J+1]});return{cursor:Number(z),tuples:K}};Object.defineProperty(CH,"__esModule",{value:!0});CH.transformReply=CH.transformArguments=CH.IS_READ_ONLY=CH.FIRST_KEY_INDEX=void 0;var Bt=m();CH.FIRST_KEY_INDEX=1;CH.IS_READ_ONLY=!0;CH.transformArguments=Mt;CH.transformReply=Gt});var bH=Q((kH)=>{var Xt=function(...[z,V,K]){const J=["HSET",z];if(typeof V==="string"||typeof V==="number"||Buffer.isBuffer(V))J.push(_4(V),_4(K));else if(V instanceof Map)Lt(J,V);else if(Array.isArray(V))RH(J,V);else wt(J,V);return J},Lt=function(z,V){for(let[K,J]of V.entries())z.push(_4(K),_4(J))},RH=function(z,V){for(let K of V){if(Array.isArray(K)){RH(z,K);continue}z.push(_4(K))}},wt=function(z,V){for(let K of Object.keys(V))z.push(_4(K),_4(V[K]))},_4=function(z){return typeof z==="number"?z.toString():z};Object.defineProperty(kH,"__esModule",{value:!0});kH.transformArguments=kH.FIRST_KEY_INDEX=void 0;kH.FIRST_KEY_INDEX=1;kH.transformArguments=Xt});var fH=Q((xK)=>{var qt=function(z,V,K){return["HSETNX",z,V,K]};Object.defineProperty(xK,"__esModule",{value:!0});xK.transformReply=xK.transformArguments=xK.FIRST_KEY_INDEX=void 0;xK.FIRST_KEY_INDEX=1;xK.transformArguments=qt;var Pt=m();Object.defineProperty(xK,"transformReply",{enumerable:!0,get:function(){return Pt.transformBooleanReply}})});var yH=Q((xH)=>{var vt=function(z,V){return["HSTRLEN",z,V]};Object.defineProperty(xH,"__esModule",{value:!0});xH.transformArguments=xH.FIRST_KEY_INDEX=void 0;xH.FIRST_KEY_INDEX=1;xH.transformArguments=vt});var gH=Q((_H)=>{var ht=function(z){return["HVALS",z]};Object.defineProperty(_H,"__esModule",{value:!0});_H.transformArguments=_H.FIRST_KEY_INDEX=void 0;_H.FIRST_KEY_INDEX=1;_H.transformArguments=ht});var mH=Q((uH)=>{var Rt=function(z){return["INCR",z]};Object.defineProperty(uH,"__esModule",{value:!0});uH.transformArguments=uH.FIRST_KEY_INDEX=void 0;uH.FIRST_KEY_INDEX=1;uH.transformArguments=Rt});var lH=Q((cH)=>{var Yt=function(z,V){return["INCRBY",z,V.toString()]};Object.defineProperty(cH,"__esModule",{value:!0});cH.transformArguments=cH.FIRST_KEY_INDEX=void 0;cH.FIRST_KEY_INDEX=1;cH.transformArguments=Yt});var aH=Q((nH)=>{var ft=function(z,V){return["INCRBYFLOAT",z,V.toString()]};Object.defineProperty(nH,"__esModule",{value:!0});nH.transformArguments=nH.FIRST_KEY_INDEX=void 0;nH.FIRST_KEY_INDEX=1;nH.transformArguments=ft});var U4=Q((oH)=>{var St=function(z,V){return["LCS",z,V]};Object.defineProperty(oH,"__esModule",{value:!0});oH.transformArguments=oH.IS_READ_ONLY=oH.FIRST_KEY_INDEX=void 0;oH.FIRST_KEY_INDEX=1;oH.IS_READ_ONLY=!0;oH.transformArguments=St});var zQ=Q((Iz)=>{var gt=function(z,V){const K=(0,$t.transformArguments)(z,V);return K.push("IDX","WITHMATCHLEN"),K},ut=function(z){return{matches:z[1].map(([V,K,J])=>({key1:(0,rH.transformRangeReply)(V),key2:(0,rH.transformRangeReply)(K),length:J})),length:z[3]}};Object.defineProperty(Iz,"__esModule",{value:!0});Iz.transformReply=Iz.transformArguments=Iz.IS_READ_ONLY=Iz.FIRST_KEY_INDEX=void 0;var rH=m(),$t=U4(),sH=U4();Object.defineProperty(Iz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return sH.FIRST_KEY_INDEX}});Object.defineProperty(Iz,"IS_READ_ONLY",{enumerable:!0,get:function(){return sH.IS_READ_ONLY}});Iz.transformArguments=gt;Iz.transformReply=ut});var ZQ=Q((Xz)=>{var ct=function(z,V){const K=(0,mt.transformArguments)(z,V);return K.push("IDX"),K},pt=function(z){return{matches:z[1].map(([V,K])=>({key1:(0,VQ.transformRangeReply)(V),key2:(0,VQ.transformRangeReply)(K)})),length:z[3]}};Object.defineProperty(Xz,"__esModule",{value:!0});Xz.transformReply=Xz.transformArguments=Xz.IS_READ_ONLY=Xz.FIRST_KEY_INDEX=void 0;var VQ=m(),mt=U4(),KQ=U4();Object.defineProperty(Xz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return KQ.FIRST_KEY_INDEX}});Object.defineProperty(Xz,"IS_READ_ONLY",{enumerable:!0,get:function(){return KQ.IS_READ_ONLY}});Xz.transformArguments=ct;Xz.transformReply=pt});var HQ=Q((Lz)=>{var it=function(z,V){const K=(0,nt.transformArguments)(z,V);return K.push("LEN"),K};Object.defineProperty(Lz,"__esModule",{value:!0});Lz.transformArguments=Lz.IS_READ_ONLY=Lz.FIRST_KEY_INDEX=void 0;var nt=U4(),UQ=U4();Object.defineProperty(Lz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return UQ.FIRST_KEY_INDEX}});Object.defineProperty(Lz,"IS_READ_ONLY",{enumerable:!0,get:function(){return UQ.IS_READ_ONLY}});Lz.transformArguments=it});var BQ=Q((QQ)=>{var at=function(z,V){return["LINDEX",z,V.toString()]};Object.defineProperty(QQ,"__esModule",{value:!0});QQ.transformArguments=QQ.IS_READ_ONLY=QQ.FIRST_KEY_INDEX=void 0;QQ.FIRST_KEY_INDEX=1;QQ.IS_READ_ONLY=!0;QQ.transformArguments=at});var OQ=Q((MQ)=>{var rt=function(z,V,K,J){return["LINSERT",z,V,K,J]};Object.defineProperty(MQ,"__esModule",{value:!0});MQ.transformArguments=MQ.FIRST_KEY_INDEX=void 0;MQ.FIRST_KEY_INDEX=1;MQ.transformArguments=rt});var XQ=Q((FQ)=>{var et=function(z){return["LLEN",z]};Object.defineProperty(FQ,"__esModule",{value:!0});FQ.transformArguments=FQ.IS_READ_ONLY=FQ.FIRST_KEY_INDEX=void 0;FQ.FIRST_KEY_INDEX=1;FQ.IS_READ_ONLY=!0;FQ.transformArguments=et});var NQ=Q((LQ)=>{var Kr=function(z,V,K,J){return["LMOVE",z,V,K,J]};Object.defineProperty(LQ,"__esModule",{value:!0});LQ.transformArguments=LQ.FIRST_KEY_INDEX=void 0;LQ.FIRST_KEY_INDEX=1;LQ.transformArguments=Kr});var TQ=Q((qQ)=>{var Zr=function(z,V){return["LPOP",z,V.toString()]};Object.defineProperty(qQ,"__esModule",{value:!0});qQ.transformArguments=qQ.FIRST_KEY_INDEX=void 0;qQ.FIRST_KEY_INDEX=1;qQ.transformArguments=Zr});var vQ=Q((AQ)=>{var Dr=function(z){return["LPOP",z]};Object.defineProperty(AQ,"__esModule",{value:!0});AQ.transformArguments=AQ.FIRST_KEY_INDEX=void 0;AQ.FIRST_KEY_INDEX=1;AQ.transformArguments=Dr});var SK=Q((CQ)=>{var Qr=function(z,V,K){const J=["LPOS",z,V];if(typeof K?.RANK==="number")J.push("RANK",K.RANK.toString());if(typeof K?.MAXLEN==="number")J.push("MAXLEN",K.MAXLEN.toString());return J};Object.defineProperty(CQ,"__esModule",{value:!0});CQ.transformArguments=CQ.IS_READ_ONLY=CQ.FIRST_KEY_INDEX=void 0;CQ.FIRST_KEY_INDEX=1;CQ.IS_READ_ONLY=!0;CQ.transformArguments=Qr});var kQ=Q((wz)=>{var Mr=function(z,V,K,J){const Z=["LPOS",z,V];if(typeof J?.RANK==="number")Z.push("RANK",J.RANK.toString());if(Z.push("COUNT",K.toString()),typeof J?.MAXLEN==="number")Z.push("MAXLEN",J.MAXLEN.toString());return Z};Object.defineProperty(wz,"__esModule",{value:!0});wz.transformArguments=wz.IS_READ_ONLY=wz.FIRST_KEY_INDEX=void 0;var WQ=SK();Object.defineProperty(wz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return WQ.FIRST_KEY_INDEX}});Object.defineProperty(wz,"IS_READ_ONLY",{enumerable:!0,get:function(){return WQ.IS_READ_ONLY}});wz.transformArguments=Mr});var fQ=Q((YQ)=>{var Or=function(z,V){return(0,Gr.pushVerdictArguments)(["LPUSH",z],V)};Object.defineProperty(YQ,"__esModule",{value:!0});YQ.transformArguments=YQ.FIRST_KEY_INDEX=void 0;var Gr=m();YQ.FIRST_KEY_INDEX=1;YQ.transformArguments=Or});var yQ=Q((xQ)=>{var Xr=function(z,V){return(0,Ir.pushVerdictArguments)(["LPUSHX",z],V)};Object.defineProperty(xQ,"__esModule",{value:!0});xQ.transformArguments=xQ.FIRST_KEY_INDEX=void 0;var Ir=m();xQ.FIRST_KEY_INDEX=1;xQ.transformArguments=Xr});var gQ=Q((_Q)=>{var wr=function(z,V,K){return["LRANGE",z,V.toString(),K.toString()]};Object.defineProperty(_Q,"__esModule",{value:!0});_Q.transformArguments=_Q.IS_READ_ONLY=_Q.FIRST_KEY_INDEX=void 0;_Q.FIRST_KEY_INDEX=1;_Q.IS_READ_ONLY=!0;_Q.transformArguments=wr});var mQ=Q((uQ)=>{var Pr=function(z,V,K){return["LREM",z,V.toString(),K]};Object.defineProperty(uQ,"__esModule",{value:!0});uQ.transformArguments=uQ.FIRST_KEY_INDEX=void 0;uQ.FIRST_KEY_INDEX=1;uQ.transformArguments=Pr});var lQ=Q((cQ)=>{var Ar=function(z,V,K){return["LSET",z,V.toString(),K]};Object.defineProperty(cQ,"__esModule",{value:!0});cQ.transformArguments=cQ.FIRST_KEY_INDEX=void 0;cQ.FIRST_KEY_INDEX=1;cQ.transformArguments=Ar});var aQ=Q((nQ)=>{var vr=function(z,V,K){return["LTRIM",z,V.toString(),K.toString()]};Object.defineProperty(nQ,"__esModule",{value:!0});nQ.transformArguments=nQ.FIRST_KEY_INDEX=void 0;nQ.FIRST_KEY_INDEX=1;nQ.transformArguments=vr});var rQ=Q((oQ)=>{var hr=function(z){return["MGET",...z]};Object.defineProperty(oQ,"__esModule",{value:!0});oQ.transformArguments=oQ.IS_READ_ONLY=oQ.FIRST_KEY_INDEX=void 0;oQ.FIRST_KEY_INDEX=1;oQ.IS_READ_ONLY=!0;oQ.transformArguments=hr});var zj=Q((sQ)=>{var kr=function(z,V,K,J,Z,D){const U=["MIGRATE",z,V.toString()],j=Array.isArray(K);if(j)U.push("");else U.push(K);if(U.push(J.toString(),Z.toString()),D?.COPY)U.push("COPY");if(D?.REPLACE)U.push("REPLACE");if(D?.AUTH)if(D.AUTH.username)U.push("AUTH2",D.AUTH.username,D.AUTH.password);else U.push("AUTH",D.AUTH.password);if(j)U.push("KEYS",...K);return U};Object.defineProperty(sQ,"__esModule",{value:!0});sQ.transformArguments=void 0;sQ.transformArguments=kr});var Jj=Q((Vj)=>{var Yr=function(z){const V=["MSET"];if(Array.isArray(z))V.push(...z.flat());else for(let K of Object.keys(z))V.push(K,z[K]);return V};Object.defineProperty(Vj,"__esModule",{value:!0});Vj.transformArguments=Vj.FIRST_KEY_INDEX=void 0;Vj.FIRST_KEY_INDEX=1;Vj.transformArguments=Yr});var Zj=Q((yK)=>{var fr=function(z){const V=["MSETNX"];if(Array.isArray(z))V.push(...z.flat());else for(let K of Object.keys(z))V.push(K,z[K]);return V};Object.defineProperty(yK,"__esModule",{value:!0});yK.transformReply=yK.transformArguments=yK.FIRST_KEY_INDEX=void 0;yK.FIRST_KEY_INDEX=1;yK.transformArguments=fr;var xr=m();Object.defineProperty(yK,"transformReply",{enumerable:!0,get:function(){return xr.transformBooleanReply}})});var Hj=Q((Uj)=>{var $r=function(z){return["OBJECT","ENCODING",z]};Object.defineProperty(Uj,"__esModule",{value:!0});Uj.transformArguments=Uj.IS_READ_ONLY=Uj.FIRST_KEY_INDEX=void 0;Uj.FIRST_KEY_INDEX=2;Uj.IS_READ_ONLY=!0;Uj.transformArguments=$r});var Bj=Q((Qj)=>{var dr=function(z){return["OBJECT","FREQ",z]};Object.defineProperty(Qj,"__esModule",{value:!0});Qj.transformArguments=Qj.IS_READ_ONLY=Qj.FIRST_KEY_INDEX=void 0;Qj.FIRST_KEY_INDEX=2;Qj.IS_READ_ONLY=!0;Qj.transformArguments=dr});var Oj=Q((Mj)=>{var pr=function(z){return["OBJECT","IDLETIME",z]};Object.defineProperty(Mj,"__esModule",{value:!0});Mj.transformArguments=Mj.IS_READ_ONLY=Mj.FIRST_KEY_INDEX=void 0;Mj.FIRST_KEY_INDEX=2;Mj.IS_READ_ONLY=!0;Mj.transformArguments=pr});var Xj=Q((Fj)=>{var ir=function(z){return["OBJECT","REFCOUNT",z]};Object.defineProperty(Fj,"__esModule",{value:!0});Fj.transformArguments=Fj.IS_READ_ONLY=Fj.FIRST_KEY_INDEX=void 0;Fj.FIRST_KEY_INDEX=2;Fj.IS_READ_ONLY=!0;Fj.transformArguments=ir});var Lj=Q((_K)=>{var tr=function(z){return["PERSIST",z]};Object.defineProperty(_K,"__esModule",{value:!0});_K.transformReply=_K.transformArguments=_K.FIRST_KEY_INDEX=void 0;_K.FIRST_KEY_INDEX=1;_K.transformArguments=tr;var rr=m();Object.defineProperty(_K,"transformReply",{enumerable:!0,get:function(){return rr.transformBooleanReply}})});var wj=Q(($K)=>{var Vs=function(z,V,K){const J=["PEXPIRE",z,V.toString()];if(K)J.push(K);return J};Object.defineProperty($K,"__esModule",{value:!0});$K.transformReply=$K.transformArguments=$K.FIRST_KEY_INDEX=void 0;$K.FIRST_KEY_INDEX=1;$K.transformArguments=Vs;var Ks=m();Object.defineProperty($K,"transformReply",{enumerable:!0,get:function(){return Ks.transformBooleanReply}})});var Nj=Q((gK)=>{var Hs=function(z,V,K){const J=["PEXPIREAT",z,(0,Ds.transformPXAT)(V)];if(K)J.push(K);return J};Object.defineProperty(gK,"__esModule",{value:!0});gK.transformReply=gK.transformArguments=gK.FIRST_KEY_INDEX=void 0;var Ds=m();gK.FIRST_KEY_INDEX=1;gK.transformArguments=Hs;var Qs=m();Object.defineProperty(gK,"transformReply",{enumerable:!0,get:function(){return Qs.transformBooleanReply}})});var Tj=Q((qj)=>{var Gs=function(z){return["PEXPIRETIME",z]};Object.defineProperty(qj,"__esModule",{value:!0});qj.transformArguments=qj.FIRST_KEY_INDEX=void 0;qj.FIRST_KEY_INDEX=1;qj.transformArguments=Gs});var Aj=Q((uK)=>{var Is=function(z,V){return(0,Fs.pushVerdictArguments)(["PFADD",z],V)};Object.defineProperty(uK,"__esModule",{value:!0});uK.transformReply=uK.transformArguments=uK.FIRST_KEY_INDEX=void 0;var Fs=m();uK.FIRST_KEY_INDEX=1;uK.transformArguments=Is;var Xs=m();Object.defineProperty(uK,"transformReply",{enumerable:!0,get:function(){return Xs.transformBooleanReply}})});var Cj=Q((Ej)=>{var Ps=function(z){return(0,qs.pushVerdictArguments)(["PFCOUNT"],z)};Object.defineProperty(Ej,"__esModule",{value:!0});Ej.transformArguments=Ej.FIRST_KEY_INDEX=void 0;var qs=m();Ej.FIRST_KEY_INDEX=1;Ej.transformArguments=Ps});var Rj=Q((hj)=>{var Es=function(z,V){return(0,As.pushVerdictArguments)(["PFMERGE",z],V)};Object.defineProperty(hj,"__esModule",{value:!0});hj.transformArguments=hj.FIRST_KEY_INDEX=void 0;var As=m();hj.FIRST_KEY_INDEX=1;hj.transformArguments=Es});var bj=Q((kj)=>{var Cs=function(z,V,K){return["PSETEX",z,V.toString(),K]};Object.defineProperty(kj,"__esModule",{value:!0});kj.transformArguments=kj.FIRST_KEY_INDEX=void 0;kj.FIRST_KEY_INDEX=1;kj.transformArguments=Cs});var Sj=Q((fj)=>{var Ws=function(z){return["PTTL",z]};Object.defineProperty(fj,"__esModule",{value:!0});fj.transformArguments=fj.IS_READ_ONLY=fj.FIRST_KEY_INDEX=void 0;fj.FIRST_KEY_INDEX=1;fj.IS_READ_ONLY=!0;fj.transformArguments=Ws});var $j=Q((yj)=>{var Ys=function(z,V){return["PUBLISH",z,V]};Object.defineProperty(yj,"__esModule",{value:!0});yj.transformArguments=yj.IS_READ_ONLY=void 0;yj.IS_READ_ONLY=!0;yj.transformArguments=Ys});var dj=Q((gj)=>{var fs=function(z,V){return["RENAME",z,V]};Object.defineProperty(gj,"__esModule",{value:!0});gj.transformArguments=gj.FIRST_KEY_INDEX=void 0;gj.FIRST_KEY_INDEX=1;gj.transformArguments=fs});var mj=Q((dK)=>{var Ss=function(z,V){return["RENAMENX",z,V]};Object.defineProperty(dK,"__esModule",{value:!0});dK.transformReply=dK.transformArguments=dK.FIRST_KEY_INDEX=void 0;dK.FIRST_KEY_INDEX=1;dK.transformArguments=Ss;var ys=m();Object.defineProperty(dK,"transformReply",{enumerable:!0,get:function(){return ys.transformBooleanReply}})});var lj=Q((cj)=>{var us=function(z,V,K,J){const Z=["RESTORE",z,V.toString(),K];if(J?.REPLACE)Z.push("REPLACE");if(J?.ABSTTL)Z.push("ABSTTL");if(J?.IDLETIME)Z.push("IDLETIME",J.IDLETIME.toString());if(J?.FREQ)Z.push("FREQ",J.FREQ.toString());return Z};Object.defineProperty(cj,"__esModule",{value:!0});cj.transformArguments=cj.FIRST_KEY_INDEX=void 0;cj.FIRST_KEY_INDEX=1;cj.transformArguments=us});var aj=Q((nj)=>{var ms=function(z,V){return["RPOP",z,V.toString()]};Object.defineProperty(nj,"__esModule",{value:!0});nj.transformArguments=nj.FIRST_KEY_INDEX=void 0;nj.FIRST_KEY_INDEX=1;nj.transformArguments=ms});var rj=Q((oj)=>{var ps=function(z){return["RPOP",z]};Object.defineProperty(oj,"__esModule",{value:!0});oj.transformArguments=oj.FIRST_KEY_INDEX=void 0;oj.FIRST_KEY_INDEX=1;oj.transformArguments=ps});var zB=Q((sj)=>{var ns=function(z,V){return["RPOPLPUSH",z,V]};Object.defineProperty(sj,"__esModule",{value:!0});sj.transformArguments=sj.FIRST_KEY_INDEX=void 0;sj.FIRST_KEY_INDEX=1;sj.transformArguments=ns});var JB=Q((VB)=>{var os=function(z,V){return(0,as.pushVerdictArguments)(["RPUSH",z],V)};Object.defineProperty(VB,"__esModule",{value:!0});VB.transformArguments=VB.FIRST_KEY_INDEX=void 0;var as=m();VB.FIRST_KEY_INDEX=1;VB.transformArguments=os});var DB=Q((ZB)=>{var ss=function(z,V){return(0,rs.pushVerdictArguments)(["RPUSHX",z],V)};Object.defineProperty(ZB,"__esModule",{value:!0});ZB.transformArguments=ZB.FIRST_KEY_INDEX=void 0;var rs=m();ZB.FIRST_KEY_INDEX=1;ZB.transformArguments=ss});var jB=Q((HB)=>{var Ve=function(z,V){return(0,ze.pushVerdictArguments)(["SADD",z],V)};Object.defineProperty(HB,"__esModule",{value:!0});HB.transformArguments=HB.FIRST_KEY_INDEX=void 0;var ze=m();HB.FIRST_KEY_INDEX=1;HB.transformArguments=Ve});var GB=Q((BB)=>{var Je=function(z){return["SCARD",z]};Object.defineProperty(BB,"__esModule",{value:!0});BB.transformArguments=BB.FIRST_KEY_INDEX=void 0;BB.FIRST_KEY_INDEX=1;BB.transformArguments=Je});var IB=Q((OB)=>{var De=function(z){return(0,Ue.pushVerdictArguments)(["SDIFF"],z)};Object.defineProperty(OB,"__esModule",{value:!0});OB.transformArguments=OB.IS_READ_ONLY=OB.FIRST_KEY_INDEX=void 0;var Ue=m();OB.FIRST_KEY_INDEX=1;OB.IS_READ_ONLY=!0;OB.transformArguments=De});var wB=Q((XB)=>{var Be=function(z,V){return(0,je.pushVerdictArguments)(["SDIFFSTORE",z],V)};Object.defineProperty(XB,"__esModule",{value:!0});XB.transformArguments=XB.FIRST_KEY_INDEX=void 0;var je=m();XB.FIRST_KEY_INDEX=1;XB.transformArguments=Be});var PB=Q((NB)=>{var Ge=function(z,V,K){const J=["SET",z,typeof V==="number"?V.toString():V];if(K?.EX!==void 0)J.push("EX",K.EX.toString());else if(K?.PX!==void 0)J.push("PX",K.PX.toString());else if(K?.EXAT!==void 0)J.push("EXAT",K.EXAT.toString());else if(K?.PXAT!==void 0)J.push("PXAT",K.PXAT.toString());else if(K?.KEEPTTL)J.push("KEEPTTL");if(K?.NX)J.push("NX");else if(K?.XX)J.push("XX");if(K?.GET)J.push("GET");return J};Object.defineProperty(NB,"__esModule",{value:!0});NB.transformArguments=NB.FIRST_KEY_INDEX=void 0;NB.FIRST_KEY_INDEX=1;NB.transformArguments=Ge});var EB=Q((TB)=>{var Fe=function(z,V,K){return["SETBIT",z,V.toString(),K.toString()]};Object.defineProperty(TB,"__esModule",{value:!0});TB.transformArguments=TB.FIRST_KEY_INDEX=void 0;TB.FIRST_KEY_INDEX=1;TB.transformArguments=Fe});var hB=Q((vB)=>{var Xe=function(z,V,K){return["SETEX",z,V.toString(),K]};Object.defineProperty(vB,"__esModule",{value:!0});vB.transformArguments=vB.FIRST_KEY_INDEX=void 0;vB.FIRST_KEY_INDEX=1;vB.transformArguments=Xe});var WB=Q((mK)=>{var we=function(z,V){return["SETNX",z,V]};Object.defineProperty(mK,"__esModule",{value:!0});mK.transformReply=mK.transformArguments=mK.FIRST_KEY_INDEX=void 0;mK.FIRST_KEY_INDEX=1;mK.transformArguments=we;var Ne=m();Object.defineProperty(mK,"transformReply",{enumerable:!0,get:function(){return Ne.transformBooleanReply}})});var YB=Q((RB)=>{var Ae=function(z,V,K){return["SETRANGE",z,V.toString(),K]};Object.defineProperty(RB,"__esModule",{value:!0});RB.transformArguments=RB.FIRST_KEY_INDEX=void 0;RB.FIRST_KEY_INDEX=1;RB.transformArguments=Ae});var xB=Q((bB)=>{var Ce=function(z){return(0,ve.pushVerdictArguments)(["SINTER"],z)};Object.defineProperty(bB,"__esModule",{value:!0});bB.transformArguments=bB.IS_READ_ONLY=bB.FIRST_KEY_INDEX=void 0;var ve=m();bB.FIRST_KEY_INDEX=1;bB.IS_READ_ONLY=!0;bB.transformArguments=Ce});var _B=Q((SB)=>{var ke=function(z,V){const K=(0,Re.pushVerdictArgument)(["SINTERCARD"],z);if(V)K.push("LIMIT",V.toString());return K};Object.defineProperty(SB,"__esModule",{value:!0});SB.transformArguments=SB.IS_READ_ONLY=SB.FIRST_KEY_INDEX=void 0;var Re=m();SB.FIRST_KEY_INDEX=2;SB.IS_READ_ONLY=!0;SB.transformArguments=ke});var uB=Q(($B)=>{var xe=function(z,V){return(0,fe.pushVerdictArguments)(["SINTERSTORE",z],V)};Object.defineProperty($B,"__esModule",{value:!0});$B.transformArguments=$B.FIRST_KEY_INDEX=void 0;var fe=m();$B.FIRST_KEY_INDEX=1;$B.transformArguments=xe});var dB=Q((cK)=>{var ye=function(z,V){return["SISMEMBER",z,V]};Object.defineProperty(cK,"__esModule",{value:!0});cK.transformReply=cK.transformArguments=cK.FIRST_KEY_INDEX=void 0;cK.FIRST_KEY_INDEX=1;cK.transformArguments=ye;var _e=m();Object.defineProperty(cK,"transformReply",{enumerable:!0,get:function(){return _e.transformBooleanReply}})});var pB=Q((mB)=>{var de=function(z){return["SMEMBERS",z]};Object.defineProperty(mB,"__esModule",{value:!0});mB.transformArguments=mB.FIRST_KEY_INDEX=void 0;mB.FIRST_KEY_INDEX=1;mB.transformArguments=de});var lB=Q((pK)=>{var ce=function(z,V){return["SMISMEMBER",z,...V]};Object.defineProperty(pK,"__esModule",{value:!0});pK.transformReply=pK.transformArguments=pK.FIRST_KEY_INDEX=void 0;pK.FIRST_KEY_INDEX=1;pK.transformArguments=ce;var pe=m();Object.defineProperty(pK,"transformReply",{enumerable:!0,get:function(){return pe.transformBooleanArrayReply}})});var nB=Q((lK)=>{var ae=function(z,V,K){return["SMOVE",z,V,K]};Object.defineProperty(lK,"__esModule",{value:!0});lK.transformReply=lK.transformArguments=lK.FIRST_KEY_INDEX=void 0;lK.FIRST_KEY_INDEX=1;lK.transformArguments=ae;var oe=m();Object.defineProperty(lK,"transformReply",{enumerable:!0,get:function(){return oe.transformBooleanReply}})});var oB=Q((iB)=>{var z00=function(z,V){return(0,ee.pushSortArguments)(["SORT_RO",z],V)};Object.defineProperty(iB,"__esModule",{value:!0});iB.transformArguments=iB.IS_READ_ONLY=iB.FIRST_KEY_INDEX=void 0;var ee=m();iB.FIRST_KEY_INDEX=1;iB.IS_READ_ONLY=!0;iB.transformArguments=z00});var nK=Q((tB)=>{var Z00=function(z,V){return(0,J00.pushSortArguments)(["SORT",z],V)};Object.defineProperty(tB,"__esModule",{value:!0});tB.transformArguments=tB.FIRST_KEY_INDEX=void 0;var J00=m();tB.FIRST_KEY_INDEX=1;tB.transformArguments=Z00});var zM=Q((sB)=>{var H00=function(z,V,K){const J=(0,D00.transformArguments)(z,K);return J.push("STORE",V),J};Object.defineProperty(sB,"__esModule",{value:!0});sB.transformArguments=sB.FIRST_KEY_INDEX=void 0;var D00=nK();sB.FIRST_KEY_INDEX=1;sB.transformArguments=H00});var JM=Q((VM)=>{var j00=function(z,V){const K=["SPOP",z];if(typeof V==="number")K.push(V.toString());return K};Object.defineProperty(VM,"__esModule",{value:!0});VM.transformArguments=VM.FIRST_KEY_INDEX=void 0;VM.FIRST_KEY_INDEX=1;VM.transformArguments=j00});var DM=Q((ZM)=>{var M00=function(z,V){return["SPUBLISH",z,V]};Object.defineProperty(ZM,"__esModule",{value:!0});ZM.transformArguments=ZM.FIRST_KEY_INDEX=ZM.IS_READ_ONLY=void 0;ZM.IS_READ_ONLY=!0;ZM.FIRST_KEY_INDEX=1;ZM.transformArguments=M00});var Nz=Q((HM)=>{var F00=function(z){return["SRANDMEMBER",z]};Object.defineProperty(HM,"__esModule",{value:!0});HM.transformArguments=HM.FIRST_KEY_INDEX=void 0;HM.FIRST_KEY_INDEX=1;HM.transformArguments=F00});var BM=Q((iK)=>{var w00=function(z,V){return[...(0,X00.transformArguments)(z),V.toString()]};Object.defineProperty(iK,"__esModule",{value:!0});iK.transformArguments=iK.FIRST_KEY_INDEX=void 0;var X00=Nz(),L00=Nz();Object.defineProperty(iK,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return L00.FIRST_KEY_INDEX}});iK.transformArguments=w00});var OM=Q((MM)=>{var q00=function(z,V){return(0,N00.pushVerdictArguments)(["SREM",z],V)};Object.defineProperty(MM,"__esModule",{value:!0});MM.transformArguments=MM.FIRST_KEY_INDEX=void 0;var N00=m();MM.FIRST_KEY_INDEX=1;MM.transformArguments=q00});var XM=Q((FM)=>{var A00=function(z,V,K){return(0,T00.pushScanArguments)(["SSCAN",z],V,K)},E00=function([z,V]){return{cursor:Number(z),members:V}};Object.defineProperty(FM,"__esModule",{value:!0});FM.transformReply=FM.transformArguments=FM.IS_READ_ONLY=FM.FIRST_KEY_INDEX=void 0;var T00=m();FM.FIRST_KEY_INDEX=1;FM.IS_READ_ONLY=!0;FM.transformArguments=A00;FM.transformReply=E00});var NM=Q((LM)=>{var W00=function(z){return["STRLEN",z]};Object.defineProperty(LM,"__esModule",{value:!0});LM.transformArguments=LM.IS_READ_ONLY=LM.FIRST_KEY_INDEX=void 0;LM.FIRST_KEY_INDEX=1;LM.IS_READ_ONLY=!0;LM.transformArguments=W00});var TM=Q((qM)=>{var b00=function(z){return(0,Y00.pushVerdictArguments)(["SUNION"],z)};Object.defineProperty(qM,"__esModule",{value:!0});qM.transformArguments=qM.IS_READ_ONLY=qM.FIRST_KEY_INDEX=void 0;var Y00=m();qM.FIRST_KEY_INDEX=1;qM.IS_READ_ONLY=!0;qM.transformArguments=b00});var vM=Q((AM)=>{var y00=function(z,V){return(0,S00.pushVerdictArguments)(["SUNIONSTORE",z],V)};Object.defineProperty(AM,"__esModule",{value:!0});AM.transformArguments=AM.FIRST_KEY_INDEX=void 0;var S00=m();AM.FIRST_KEY_INDEX=1;AM.transformArguments=y00});var WM=Q((CM)=>{var g00=function(z){return(0,$00.pushVerdictArguments)(["TOUCH"],z)};Object.defineProperty(CM,"__esModule",{value:!0});CM.transformArguments=CM.FIRST_KEY_INDEX=void 0;var $00=m();CM.FIRST_KEY_INDEX=1;CM.transformArguments=g00});var YM=Q((RM)=>{var d00=function(z){return["TTL",z]};Object.defineProperty(RM,"__esModule",{value:!0});RM.transformArguments=RM.IS_READ_ONLY=RM.FIRST_KEY_INDEX=void 0;RM.FIRST_KEY_INDEX=1;RM.IS_READ_ONLY=!0;RM.transformArguments=d00});var xM=Q((bM)=>{var p00=function(z){return["TYPE",z]};Object.defineProperty(bM,"__esModule",{value:!0});bM.transformArguments=bM.IS_READ_ONLY=bM.FIRST_KEY_INDEX=void 0;bM.FIRST_KEY_INDEX=1;bM.IS_READ_ONLY=!0;bM.transformArguments=p00});var _M=Q((SM)=>{var a00=function(z){return(0,i00.pushVerdictArguments)(["UNLINK"],z)};Object.defineProperty(SM,"__esModule",{value:!0});SM.transformArguments=SM.FIRST_KEY_INDEX=void 0;var i00=m();SM.FIRST_KEY_INDEX=1;SM.transformArguments=a00});var uM=Q(($M)=>{var r00=function(z){return(0,t00.pushVerdictArguments)(["WATCH"],z)};Object.defineProperty($M,"__esModule",{value:!0});$M.transformArguments=$M.FIRST_KEY_INDEX=void 0;var t00=m();$M.FIRST_KEY_INDEX=1;$M.transformArguments=r00});var cM=Q((dM)=>{var z60=function(z,V,K){return(0,e00.pushVerdictArguments)(["XACK",z,V],K)};Object.defineProperty(dM,"__esModule",{value:!0});dM.transformArguments=dM.FIRST_KEY_INDEX=void 0;var e00=m();dM.FIRST_KEY_INDEX=1;dM.transformArguments=z60});var nM=Q((pM)=>{var K60=function(z,V,K,J){const Z=["XADD",z];if(J?.NOMKSTREAM)Z.push("NOMKSTREAM");if(J?.TRIM){if(J.TRIM.strategy)Z.push(J.TRIM.strategy);if(J.TRIM.strategyModifier)Z.push(J.TRIM.strategyModifier);if(Z.push(J.TRIM.threshold.toString()),J.TRIM.limit)Z.push("LIMIT",J.TRIM.limit.toString())}Z.push(V);for(let[D,U]of Object.entries(K))Z.push(D,U);return Z};Object.defineProperty(pM,"__esModule",{value:!0});pM.transformArguments=pM.FIRST_KEY_INDEX=void 0;pM.FIRST_KEY_INDEX=1;pM.transformArguments=K60});var qz=Q((iM)=>{var U60=function(z,V,K,J,Z,D){const U=["XAUTOCLAIM",z,V,K,J.toString(),Z];if(D?.COUNT)U.push("COUNT",D.COUNT.toString());return U},D60=function(z){return{nextId:z[0],messages:(0,Z60.transformStreamMessagesNullReply)(z[1])}};Object.defineProperty(iM,"__esModule",{value:!0});iM.transformReply=iM.transformArguments=iM.FIRST_KEY_INDEX=void 0;var Z60=m();iM.FIRST_KEY_INDEX=1;iM.transformArguments=U60;iM.transformReply=D60});var tM=Q((aK)=>{var M60=function(...z){return[...(0,j60.transformArguments)(...z),"JUSTID"]},G60=function(z){return{nextId:z[0],messages:z[1]}};Object.defineProperty(aK,"__esModule",{value:!0});aK.transformReply=aK.transformArguments=aK.FIRST_KEY_INDEX=void 0;var j60=qz(),B60=qz();Object.defineProperty(aK,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return B60.FIRST_KEY_INDEX}});aK.transformArguments=M60;aK.transformReply=G60});var Pz=Q((oK)=>{var I60=function(z,V,K,J,Z,D){const U=(0,F60.pushVerdictArguments)(["XCLAIM",z,V,K,J.toString()],Z);if(D?.IDLE)U.push("IDLE",D.IDLE.toString());if(D?.TIME)U.push("TIME",(typeof D.TIME==="number"?D.TIME:D.TIME.getTime()).toString());if(D?.RETRYCOUNT)U.push("RETRYCOUNT",D.RETRYCOUNT.toString());if(D?.FORCE)U.push("FORCE");return U};Object.defineProperty(oK,"__esModule",{value:!0});oK.transformReply=oK.transformArguments=oK.FIRST_KEY_INDEX=void 0;var F60=m();oK.FIRST_KEY_INDEX=1;oK.transformArguments=I60;var X60=m();Object.defineProperty(oK,"transformReply",{enumerable:!0,get:function(){return X60.transformStreamMessagesNullReply}})});var sM=Q((tK)=>{var T60=function(...z){return[...(0,q60.transformArguments)(...z),"JUSTID"]};Object.defineProperty(tK,"__esModule",{value:!0});tK.transformArguments=tK.FIRST_KEY_INDEX=void 0;var q60=Pz(),P60=Pz();Object.defineProperty(tK,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return P60.FIRST_KEY_INDEX}});tK.transformArguments=T60});var VG=Q((eM)=>{var E60=function(z,V){return(0,A60.pushVerdictArguments)(["XDEL",z],V)};Object.defineProperty(eM,"__esModule",{value:!0});eM.transformArguments=eM.FIRST_KEY_INDEX=void 0;var A60=m();eM.FIRST_KEY_INDEX=1;eM.transformArguments=E60});var ZG=Q((KG)=>{var C60=function(z,V,K,J){const Z=["XGROUP","CREATE",z,V,K];if(J?.MKSTREAM)Z.push("MKSTREAM");return Z};Object.defineProperty(KG,"__esModule",{value:!0});KG.transformArguments=KG.FIRST_KEY_INDEX=void 0;KG.FIRST_KEY_INDEX=2;KG.transformArguments=C60});var UG=Q((rK)=>{var W60=function(z,V,K){return["XGROUP","CREATECONSUMER",z,V,K]};Object.defineProperty(rK,"__esModule",{value:!0});rK.transformReply=rK.transformArguments=rK.FIRST_KEY_INDEX=void 0;rK.FIRST_KEY_INDEX=2;rK.transformArguments=W60;var R60=m();Object.defineProperty(rK,"transformReply",{enumerable:!0,get:function(){return R60.transformBooleanReply}})});var QG=Q((DG)=>{var f60=function(z,V,K){return["XGROUP","DELCONSUMER",z,V,K]};Object.defineProperty(DG,"__esModule",{value:!0});DG.transformArguments=DG.FIRST_KEY_INDEX=void 0;DG.FIRST_KEY_INDEX=2;DG.transformArguments=f60});var jG=Q((sK)=>{var S60=function(z,V){return["XGROUP","DESTROY",z,V]};Object.defineProperty(sK,"__esModule",{value:!0});sK.transformReply=sK.transformArguments=sK.FIRST_KEY_INDEX=void 0;sK.FIRST_KEY_INDEX=2;sK.transformArguments=S60;var y60=m();Object.defineProperty(sK,"transformReply",{enumerable:!0,get:function(){return y60.transformBooleanReply}})});var GG=Q((BG)=>{var u60=function(z,V,K){return["XGROUP","SETID",z,V,K]};Object.defineProperty(BG,"__esModule",{value:!0});BG.transformArguments=BG.FIRST_KEY_INDEX=void 0;BG.FIRST_KEY_INDEX=2;BG.transformArguments=u60});var IG=Q((OG)=>{var m60=function(z,V){return["XINFO","CONSUMERS",z,V]},c60=function(z){return z.map((V)=>({name:V[1],pending:V[3],idle:V[5],inactive:V[7]}))};Object.defineProperty(OG,"__esModule",{value:!0});OG.transformReply=OG.transformArguments=OG.IS_READ_ONLY=OG.FIRST_KEY_INDEX=void 0;OG.FIRST_KEY_INDEX=2;OG.IS_READ_ONLY=!0;OG.transformArguments=m60;OG.transformReply=c60});var wG=Q((XG)=>{var i60=function(z){return["XINFO","GROUPS",z]},a60=function(z){return z.map((V)=>({name:V[1],consumers:V[3],pending:V[5],lastDeliveredId:V[7]}))};Object.defineProperty(XG,"__esModule",{value:!0});XG.transformReply=XG.transformArguments=XG.IS_READ_ONLY=XG.FIRST_KEY_INDEX=void 0;XG.FIRST_KEY_INDEX=2;XG.IS_READ_ONLY=!0;XG.transformArguments=i60;XG.transformReply=a60});var TG=Q((qG)=>{var s60=function(z){return["XINFO","STREAM",z]},e60=function(z){const V={};for(let K=0;K<z.length;K+=2)switch(z[K]){case"length":V.length=z[K+1];break;case"radix-tree-keys":V.radixTreeKeys=z[K+1];break;case"radix-tree-nodes":V.radixTreeNodes=z[K+1];break;case"groups":V.groups=z[K+1];break;case"last-generated-id":V.lastGeneratedId=z[K+1];break;case"first-entry":V.firstEntry=z[K+1]?{id:z[K+1][0],message:(0,NG.transformTuplesReply)(z[K+1][1])}:null;break;case"last-entry":V.lastEntry=z[K+1]?{id:z[K+1][0],message:(0,NG.transformTuplesReply)(z[K+1][1])}:null;break}return V};Object.defineProperty(qG,"__esModule",{value:!0});qG.transformReply=qG.transformArguments=qG.IS_READ_ONLY=qG.FIRST_KEY_INDEX=void 0;var NG=m();qG.FIRST_KEY_INDEX=2;qG.IS_READ_ONLY=!0;qG.transformArguments=s60;qG.transformReply=e60});var vG=Q((AG)=>{var J80=function(z){return["XLEN",z]};Object.defineProperty(AG,"__esModule",{value:!0});AG.transformArguments=AG.IS_READ_ONLY=AG.FIRST_KEY_INDEX=void 0;AG.FIRST_KEY_INDEX=1;AG.IS_READ_ONLY=!0;AG.transformArguments=J80});var WG=Q((CG)=>{var D80=function(z,V,K,J,Z,D){const U=["XPENDING",z,V];if(D?.IDLE)U.push("IDLE",D.IDLE.toString());if(U.push(K,J,Z.toString()),D?.consumer)U.push(D.consumer);return U},H80=function(z){return z.map(([V,K,J,Z])=>({id:V,owner:K,millisecondsSinceLastDelivery:J,deliveriesCounter:Z}))};Object.defineProperty(CG,"__esModule",{value:!0});CG.transformReply=CG.transformArguments=CG.IS_READ_ONLY=CG.FIRST_KEY_INDEX=void 0;CG.FIRST_KEY_INDEX=1;CG.IS_READ_ONLY=!0;CG.transformArguments=D80;CG.transformReply=H80});var YG=Q((RG)=>{var M80=function(z,V){return["XPENDING",z,V]},G80=function(z){return{pending:z[0],firstId:z[1],lastId:z[2],consumers:z[3]===null?null:z[3].map(([V,K])=>({name:V,deliveriesCounter:Number(K)}))}};Object.defineProperty(RG,"__esModule",{value:!0});RG.transformReply=RG.transformArguments=RG.IS_READ_ONLY=RG.FIRST_KEY_INDEX=void 0;RG.FIRST_KEY_INDEX=1;RG.IS_READ_ONLY=!0;RG.transformArguments=M80;RG.transformReply=G80});var bG=Q((eK)=>{var X80=function(z,V,K,J){const Z=["XRANGE",z,V,K];if(J?.COUNT)Z.push("COUNT",J.COUNT.toString());return Z};Object.defineProperty(eK,"__esModule",{value:!0});eK.transformReply=eK.transformArguments=eK.IS_READ_ONLY=eK.FIRST_KEY_INDEX=void 0;eK.FIRST_KEY_INDEX=1;eK.IS_READ_ONLY=!0;eK.transformArguments=X80;var L80=m();Object.defineProperty(eK,"transformReply",{enumerable:!0,get:function(){return L80.transformStreamMessagesReply}})});var fG=Q((z9)=>{var A80=function(z,V){const K=["XREAD"];if(V?.COUNT)K.push("COUNT",V.COUNT.toString());if(typeof V?.BLOCK==="number")K.push("BLOCK",V.BLOCK.toString());K.push("STREAMS");const J=Array.isArray(z)?z:[z],Z=K.length;for(let D=0;D<J.length;D++){const U=J[D];K[Z+D]=U.key,K[Z+J.length+D]=U.id}return K};Object.defineProperty(z9,"__esModule",{value:!0});z9.transformReply=z9.transformArguments=z9.IS_READ_ONLY=z9.FIRST_KEY_INDEX=void 0;var T80=(z)=>{return Array.isArray(z)?z[0].key:z.key};z9.FIRST_KEY_INDEX=T80;z9.IS_READ_ONLY=!0;z9.transformArguments=A80;var E80=m();Object.defineProperty(z9,"transformReply",{enumerable:!0,get:function(){return E80.transformStreamsMessagesReply}})});var xG=Q((V9)=>{var k80=function(z,V,K,J){const Z=["XREADGROUP","GROUP",z,V];if(J?.COUNT)Z.push("COUNT",J.COUNT.toString());if(typeof J?.BLOCK==="number")Z.push("BLOCK",J.BLOCK.toString());if(J?.NOACK)Z.push("NOACK");Z.push("STREAMS");const D=Array.isArray(K)?K:[K],U=Z.length;for(let j=0;j<D.length;j++){const B=D[j];Z[U+j]=B.key,Z[U+D.length+j]=B.id}return Z};Object.defineProperty(V9,"__esModule",{value:!0});V9.transformReply=V9.transformArguments=V9.IS_READ_ONLY=V9.FIRST_KEY_INDEX=void 0;var R80=(z,V,K)=>{return Array.isArray(K)?K[0].key:K.key};V9.FIRST_KEY_INDEX=R80;V9.IS_READ_ONLY=!0;V9.transformArguments=k80;var Y80=m();Object.defineProperty(V9,"transformReply",{enumerable:!0,get:function(){return Y80.transformStreamsMessagesReply}})});var SG=Q((K9)=>{var y80=function(z,V,K,J){const Z=["XREVRANGE",z,V,K];if(J?.COUNT)Z.push("COUNT",J.COUNT.toString());return Z};Object.defineProperty(K9,"__esModule",{value:!0});K9.transformReply=K9.transformArguments=K9.IS_READ_ONLY=K9.FIRST_KEY_INDEX=void 0;K9.FIRST_KEY_INDEX=1;K9.IS_READ_ONLY=!0;K9.transformArguments=y80;var _80=m();Object.defineProperty(K9,"transformReply",{enumerable:!0,get:function(){return _80.transformStreamMessagesReply}})});var $G=Q((yG)=>{var m80=function(z,V,K){const J=["XSETID",z,V];if(K?.ENTRIESADDED)J.push("ENTRIESADDED",K.ENTRIESADDED.toString());if(K?.MAXDELETEDID)J.push("MAXDELETEDID",K.MAXDELETEDID);return J};Object.defineProperty(yG,"__esModule",{value:!0});yG.transformArguments=yG.FIRST_KEY_INDEX=void 0;yG.FIRST_KEY_INDEX=1;yG.transformArguments=m80});var dG=Q((gG)=>{var p80=function(z,V,K,J){const Z=["XTRIM",z,V];if(J?.strategyModifier)Z.push(J.strategyModifier);if(Z.push(K.toString()),J?.LIMIT)Z.push("LIMIT",J.LIMIT.toString());return Z};Object.defineProperty(gG,"__esModule",{value:!0});gG.transformArguments=gG.FIRST_KEY_INDEX=void 0;gG.FIRST_KEY_INDEX=1;gG.transformArguments=p80});var mG=Q((J9)=>{var i80=function(z,V,K){const J=["ZADD",z];if(K?.NX)J.push("NX");else{if(K?.XX)J.push("XX");if(K?.GT)J.push("GT");else if(K?.LT)J.push("LT")}if(K?.CH)J.push("CH");if(K?.INCR)J.push("INCR");for(let{score:Z,value:D}of Array.isArray(V)?V:[V])J.push((0,n80.transformNumberInfinityArgument)(Z),D);return J};Object.defineProperty(J9,"__esModule",{value:!0});J9.transformReply=J9.transformArguments=J9.FIRST_KEY_INDEX=void 0;var n80=m();J9.FIRST_KEY_INDEX=1;J9.transformArguments=i80;var a80=m();Object.defineProperty(J9,"transformReply",{enumerable:!0,get:function(){return a80.transformNumberInfinityReply}})});var lG=Q((cG)=>{var s80=function(z){return["ZCARD",z]};Object.defineProperty(cG,"__esModule",{value:!0});cG.transformArguments=cG.IS_READ_ONLY=cG.FIRST_KEY_INDEX=void 0;cG.FIRST_KEY_INDEX=1;cG.IS_READ_ONLY=!0;cG.transformArguments=s80});var oG=Q((iG)=>{var V40=function(z,V,K){return["ZCOUNT",z,(0,nG.transformStringNumberInfinityArgument)(V),(0,nG.transformStringNumberInfinityArgument)(K)]};Object.defineProperty(iG,"__esModule",{value:!0});iG.transformArguments=iG.IS_READ_ONLY=iG.FIRST_KEY_INDEX=void 0;var nG=m();iG.FIRST_KEY_INDEX=1;iG.IS_READ_ONLY=!0;iG.transformArguments=V40});var Tz=Q((tG)=>{var U40=function(z){return(0,Z40.pushVerdictArgument)(["ZDIFF"],z)};Object.defineProperty(tG,"__esModule",{value:!0});tG.transformArguments=tG.IS_READ_ONLY=tG.FIRST_KEY_INDEX=void 0;var Z40=m();tG.FIRST_KEY_INDEX=2;tG.IS_READ_ONLY=!0;tG.transformArguments=U40});var eG=Q((S7)=>{var j40=function(...z){return[...(0,Q40.transformArguments)(...z),"WITHSCORES"]};Object.defineProperty(S7,"__esModule",{value:!0});S7.transformReply=S7.transformArguments=S7.IS_READ_ONLY=S7.FIRST_KEY_INDEX=void 0;var Q40=Tz(),sG=Tz();Object.defineProperty(S7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return sG.FIRST_KEY_INDEX}});Object.defineProperty(S7,"IS_READ_ONLY",{enumerable:!0,get:function(){return sG.IS_READ_ONLY}});S7.transformArguments=j40;var B40=m();Object.defineProperty(S7,"transformReply",{enumerable:!0,get:function(){return B40.transformSortedSetWithScoresReply}})});var KO=Q((zO)=>{var F40=function(z,V){return(0,O40.pushVerdictArgument)(["ZDIFFSTORE",z],V)};Object.defineProperty(zO,"__esModule",{value:!0});zO.transformArguments=zO.FIRST_KEY_INDEX=void 0;var O40=m();zO.FIRST_KEY_INDEX=1;zO.transformArguments=F40});var JO=Q((Z9)=>{var L40=function(z,V,K){return["ZINCRBY",z,(0,X40.transformNumberInfinityArgument)(V),K]};Object.defineProperty(Z9,"__esModule",{value:!0});Z9.transformReply=Z9.transformArguments=Z9.FIRST_KEY_INDEX=void 0;var X40=m();Z9.FIRST_KEY_INDEX=1;Z9.transformArguments=L40;var w40=m();Object.defineProperty(Z9,"transformReply",{enumerable:!0,get:function(){return w40.transformNumberInfinityReply}})});var Az=Q((ZO)=>{var A40=function(z,V){const K=(0,T40.pushVerdictArgument)(["ZINTER"],z);if(V?.WEIGHTS)K.push("WEIGHTS",...V.WEIGHTS.map((J)=>J.toString()));if(V?.AGGREGATE)K.push("AGGREGATE",V.AGGREGATE);return K};Object.defineProperty(ZO,"__esModule",{value:!0});ZO.transformArguments=ZO.IS_READ_ONLY=ZO.FIRST_KEY_INDEX=void 0;var T40=m();ZO.FIRST_KEY_INDEX=2;ZO.IS_READ_ONLY=!0;ZO.transformArguments=A40});var HO=Q((y7)=>{var h40=function(...z){return[...(0,C40.transformArguments)(...z),"WITHSCORES"]};Object.defineProperty(y7,"__esModule",{value:!0});y7.transformReply=y7.transformArguments=y7.IS_READ_ONLY=y7.FIRST_KEY_INDEX=void 0;var C40=Az(),DO=Az();Object.defineProperty(y7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return DO.FIRST_KEY_INDEX}});Object.defineProperty(y7,"IS_READ_ONLY",{enumerable:!0,get:function(){return DO.IS_READ_ONLY}});y7.transformArguments=h40;var W40=m();Object.defineProperty(y7,"transformReply",{enumerable:!0,get:function(){return W40.transformSortedSetWithScoresReply}})});var BO=Q((QO)=>{var b40=function(z,V){const K=(0,Y40.pushVerdictArgument)(["ZINTERCARD"],z);if(V)K.push("LIMIT",V.toString());return K};Object.defineProperty(QO,"__esModule",{value:!0});QO.transformArguments=QO.IS_READ_ONLY=QO.FIRST_KEY_INDEX=void 0;var Y40=m();QO.FIRST_KEY_INDEX=2;QO.IS_READ_ONLY=!0;QO.transformArguments=b40});var OO=Q((MO)=>{var y40=function(z,V,K){const J=(0,S40.pushVerdictArgument)(["ZINTERSTORE",z],V);if(K?.WEIGHTS)J.push("WEIGHTS",...K.WEIGHTS.map((Z)=>Z.toString()));if(K?.AGGREGATE)J.push("AGGREGATE",K.AGGREGATE);return J};Object.defineProperty(MO,"__esModule",{value:!0});MO.transformArguments=MO.FIRST_KEY_INDEX=void 0;var S40=m();MO.FIRST_KEY_INDEX=1;MO.transformArguments=y40});var XO=Q((FO)=>{var $40=function(z,V,K){return["ZLEXCOUNT",z,V,K]};Object.defineProperty(FO,"__esModule",{value:!0});FO.transformArguments=FO.IS_READ_ONLY=FO.FIRST_KEY_INDEX=void 0;FO.FIRST_KEY_INDEX=1;FO.IS_READ_ONLY=!0;FO.transformArguments=$40});var LO=Q((U9)=>{var m40=function(z,V){return(0,d40.pushVerdictArguments)(["ZMSCORE",z],V)};Object.defineProperty(U9,"__esModule",{value:!0});U9.transformReply=U9.transformArguments=U9.IS_READ_ONLY=U9.FIRST_KEY_INDEX=void 0;var d40=m();U9.FIRST_KEY_INDEX=1;U9.IS_READ_ONLY=!0;U9.transformArguments=m40;var c40=m();Object.defineProperty(U9,"transformReply",{enumerable:!0,get:function(){return c40.transformNumberInfinityNullArrayReply}})});var Ez=Q((D9)=>{var a40=function(z){return["ZPOPMAX",z]};Object.defineProperty(D9,"__esModule",{value:!0});D9.transformReply=D9.transformArguments=D9.FIRST_KEY_INDEX=void 0;D9.FIRST_KEY_INDEX=1;D9.transformArguments=a40;var o40=m();Object.defineProperty(D9,"transformReply",{enumerable:!0,get:function(){return o40.transformSortedSetMemberNullReply}})});var wO=Q((vz)=>{var V50=function(z,V){return[...(0,e40.transformArguments)(z),V.toString()]};Object.defineProperty(vz,"__esModule",{value:!0});vz.transformReply=vz.transformArguments=vz.FIRST_KEY_INDEX=void 0;var e40=Ez(),z50=Ez();Object.defineProperty(vz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return z50.FIRST_KEY_INDEX}});vz.transformArguments=V50;var K50=m();Object.defineProperty(vz,"transformReply",{enumerable:!0,get:function(){return K50.transformSortedSetWithScoresReply}})});var Cz=Q((H9)=>{var U50=function(z){return["ZPOPMIN",z]};Object.defineProperty(H9,"__esModule",{value:!0});H9.transformReply=H9.transformArguments=H9.FIRST_KEY_INDEX=void 0;H9.FIRST_KEY_INDEX=1;H9.transformArguments=U50;var D50=m();Object.defineProperty(H9,"transformReply",{enumerable:!0,get:function(){return D50.transformSortedSetMemberNullReply}})});var NO=Q((hz)=>{var G50=function(z,V){return[...(0,B50.transformArguments)(z),V.toString()]};Object.defineProperty(hz,"__esModule",{value:!0});hz.transformReply=hz.transformArguments=hz.FIRST_KEY_INDEX=void 0;var B50=Cz(),M50=Cz();Object.defineProperty(hz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return M50.FIRST_KEY_INDEX}});hz.transformArguments=G50;var O50=m();Object.defineProperty(hz,"transformReply",{enumerable:!0,get:function(){return O50.transformSortedSetWithScoresReply}})});var Wz=Q((qO)=>{var X50=function(z){return["ZRANDMEMBER",z]};Object.defineProperty(qO,"__esModule",{value:!0});qO.transformArguments=qO.IS_READ_ONLY=qO.FIRST_KEY_INDEX=void 0;qO.FIRST_KEY_INDEX=1;qO.IS_READ_ONLY=!0;qO.transformArguments=X50});var kz=Q((Rz)=>{var q50=function(z,V){return[...(0,N50.transformArguments)(z),V.toString()]};Object.defineProperty(Rz,"__esModule",{value:!0});Rz.transformArguments=Rz.IS_READ_ONLY=Rz.FIRST_KEY_INDEX=void 0;var N50=Wz(),TO=Wz();Object.defineProperty(Rz,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return TO.FIRST_KEY_INDEX}});Object.defineProperty(Rz,"IS_READ_ONLY",{enumerable:!0,get:function(){return TO.IS_READ_ONLY}});Rz.transformArguments=q50});var vO=Q((_7)=>{var T50=function(...z){return[...(0,P50.transformArguments)(...z),"WITHSCORES"]};Object.defineProperty(_7,"__esModule",{value:!0});_7.transformReply=_7.transformArguments=_7.IS_READ_ONLY=_7.FIRST_KEY_INDEX=void 0;var P50=kz(),EO=kz();Object.defineProperty(_7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return EO.FIRST_KEY_INDEX}});Object.defineProperty(_7,"IS_READ_ONLY",{enumerable:!0,get:function(){return EO.IS_READ_ONLY}});_7.transformArguments=T50;var A50=m();Object.defineProperty(_7,"transformReply",{enumerable:!0,get:function(){return A50.transformSortedSetWithScoresReply}})});var Yz=Q((hO)=>{var C50=function(z,V,K,J){const Z=["ZRANGE",z,(0,CO.transformStringNumberInfinityArgument)(V),(0,CO.transformStringNumberInfinityArgument)(K)];switch(J?.BY){case"SCORE":Z.push("BYSCORE");break;case"LEX":Z.push("BYLEX");break}if(J?.REV)Z.push("REV");if(J?.LIMIT)Z.push("LIMIT",J.LIMIT.offset.toString(),J.LIMIT.count.toString());return Z};Object.defineProperty(hO,"__esModule",{value:!0});hO.transformArguments=hO.IS_READ_ONLY=hO.FIRST_KEY_INDEX=void 0;var CO=m();hO.FIRST_KEY_INDEX=1;hO.IS_READ_ONLY=!0;hO.transformArguments=C50});var kO=Q(($7)=>{var k50=function(...z){return[...(0,R50.transformArguments)(...z),"WITHSCORES"]};Object.defineProperty($7,"__esModule",{value:!0});$7.transformReply=$7.transformArguments=$7.IS_READ_ONLY=$7.FIRST_KEY_INDEX=void 0;var R50=Yz(),RO=Yz();Object.defineProperty($7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return RO.FIRST_KEY_INDEX}});Object.defineProperty($7,"IS_READ_ONLY",{enumerable:!0,get:function(){return RO.IS_READ_ONLY}});$7.transformArguments=k50;var Y50=m();Object.defineProperty($7,"transformReply",{enumerable:!0,get:function(){return Y50.transformSortedSetWithScoresReply}})});var xO=Q((bO)=>{var x50=function(z,V,K,J){const Z=["ZRANGEBYLEX",z,(0,YO.transformStringNumberInfinityArgument)(V),(0,YO.transformStringNumberInfinityArgument)(K)];if(J?.LIMIT)Z.push("LIMIT",J.LIMIT.offset.toString(),J.LIMIT.count.toString());return Z};Object.defineProperty(bO,"__esModule",{value:!0});bO.transformArguments=bO.IS_READ_ONLY=bO.FIRST_KEY_INDEX=void 0;var YO=m();bO.FIRST_KEY_INDEX=1;bO.IS_READ_ONLY=!0;bO.transformArguments=x50});var bz=Q((yO)=>{var _50=function(z,V,K,J){const Z=["ZRANGEBYSCORE",z,(0,SO.transformStringNumberInfinityArgument)(V),(0,SO.transformStringNumberInfinityArgument)(K)];if(J?.LIMIT)Z.push("LIMIT",J.LIMIT.offset.toString(),J.LIMIT.count.toString());return Z};Object.defineProperty(yO,"__esModule",{value:!0});yO.transformArguments=yO.IS_READ_ONLY=yO.FIRST_KEY_INDEX=void 0;var SO=m();yO.FIRST_KEY_INDEX=1;yO.IS_READ_ONLY=!0;yO.transformArguments=_50});var gO=Q((g7)=>{var d50=function(z,V,K,J){return[...(0,u50.transformArguments)(z,V,K,J),"WITHSCORES"]};Object.defineProperty(g7,"__esModule",{value:!0});g7.transformReply=g7.transformArguments=g7.IS_READ_ONLY=g7.FIRST_KEY_INDEX=void 0;var u50=bz(),$O=bz();Object.defineProperty(g7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return $O.FIRST_KEY_INDEX}});Object.defineProperty(g7,"IS_READ_ONLY",{enumerable:!0,get:function(){return $O.IS_READ_ONLY}});g7.transformArguments=d50;var m50=m();Object.defineProperty(g7,"transformReply",{enumerable:!0,get:function(){return m50.transformSortedSetWithScoresReply}})});var cO=Q((dO)=>{var l50=function(z,V,K,J,Z){const D=["ZRANGESTORE",z,V,(0,uO.transformStringNumberInfinityArgument)(K),(0,uO.transformStringNumberInfinityArgument)(J)];switch(Z?.BY){case"SCORE":D.push("BYSCORE");break;case"LEX":D.push("BYLEX");break}if(Z?.REV)D.push("REV");if(Z?.LIMIT)D.push("LIMIT",Z.LIMIT.offset.toString(),Z.LIMIT.count.toString());if(Z?.WITHSCORES)D.push("WITHSCORES");return D},n50=function(z){if(typeof z!=="number")throw new TypeError("Upgrade to Redis 6.2.5 and up (https://github.com/redis/redis/pull/9089)");return z};Object.defineProperty(dO,"__esModule",{value:!0});dO.transformReply=dO.transformArguments=dO.FIRST_KEY_INDEX=void 0;var uO=m();dO.FIRST_KEY_INDEX=1;dO.transformArguments=l50;dO.transformReply=n50});var nO=Q((pO)=>{var o50=function(z,V){return["ZRANK",z,V]};Object.defineProperty(pO,"__esModule",{value:!0});pO.transformArguments=pO.IS_READ_ONLY=pO.FIRST_KEY_INDEX=void 0;pO.FIRST_KEY_INDEX=1;pO.IS_READ_ONLY=!0;pO.transformArguments=o50});var oO=Q((iO)=>{var e50=function(z,V){return(0,s50.pushVerdictArguments)(["ZREM",z],V)};Object.defineProperty(iO,"__esModule",{value:!0});iO.transformArguments=iO.FIRST_KEY_INDEX=void 0;var s50=m();iO.FIRST_KEY_INDEX=1;iO.transformArguments=e50});var eO=Q((rO)=>{var V70=function(z,V,K){return["ZREMRANGEBYLEX",z,(0,tO.transformStringNumberInfinityArgument)(V),(0,tO.transformStringNumberInfinityArgument)(K)]};Object.defineProperty(rO,"__esModule",{value:!0});rO.transformArguments=rO.FIRST_KEY_INDEX=void 0;var tO=m();rO.FIRST_KEY_INDEX=1;rO.transformArguments=V70});var KF=Q((zF)=>{var J70=function(z,V,K){return["ZREMRANGEBYRANK",z,V.toString(),K.toString()]};Object.defineProperty(zF,"__esModule",{value:!0});zF.transformArguments=zF.FIRST_KEY_INDEX=void 0;zF.FIRST_KEY_INDEX=1;zF.transformArguments=J70});var DF=Q((ZF)=>{var U70=function(z,V,K){return["ZREMRANGEBYSCORE",z,(0,JF.transformStringNumberInfinityArgument)(V),(0,JF.transformStringNumberInfinityArgument)(K)]};Object.defineProperty(ZF,"__esModule",{value:!0});ZF.transformArguments=ZF.FIRST_KEY_INDEX=void 0;var JF=m();ZF.FIRST_KEY_INDEX=1;ZF.transformArguments=U70});var jF=Q((HF)=>{var H70=function(z,V){return["ZREVRANK",z,V]};Object.defineProperty(HF,"__esModule",{value:!0});HF.transformArguments=HF.IS_READ_ONLY=HF.FIRST_KEY_INDEX=void 0;HF.FIRST_KEY_INDEX=1;HF.IS_READ_ONLY=!0;HF.transformArguments=H70});var OF=Q((MF)=>{var B70=function(z,V,K){return(0,BF.pushScanArguments)(["ZSCAN",z],V,K)},M70=function([z,V]){const K=[];for(let J=0;J<V.length;J+=2)K.push({value:V[J],score:(0,BF.transformNumberInfinityReply)(V[J+1])});return{cursor:Number(z),members:K}};Object.defineProperty(MF,"__esModule",{value:!0});MF.transformReply=MF.transformArguments=MF.IS_READ_ONLY=MF.FIRST_KEY_INDEX=void 0;var BF=m();MF.FIRST_KEY_INDEX=1;MF.IS_READ_ONLY=!0;MF.transformArguments=B70;MF.transformReply=M70});var FF=Q((Q9)=>{var I70=function(z,V){return["ZSCORE",z,V]};Object.defineProperty(Q9,"__esModule",{value:!0});Q9.transformReply=Q9.transformArguments=Q9.IS_READ_ONLY=Q9.FIRST_KEY_INDEX=void 0;Q9.FIRST_KEY_INDEX=1;Q9.IS_READ_ONLY=!0;Q9.transformArguments=I70;var X70=m();Object.defineProperty(Q9,"transformReply",{enumerable:!0,get:function(){return X70.transformNumberInfinityNullReply}})});var fz=Q((IF)=>{var T70=function(z,V){const K=(0,P70.pushVerdictArgument)(["ZUNION"],z);if(V?.WEIGHTS)K.push("WEIGHTS",...V.WEIGHTS.map((J)=>J.toString()));if(V?.AGGREGATE)K.push("AGGREGATE",V.AGGREGATE);return K};Object.defineProperty(IF,"__esModule",{value:!0});IF.transformArguments=IF.IS_READ_ONLY=IF.FIRST_KEY_INDEX=void 0;var P70=m();IF.FIRST_KEY_INDEX=2;IF.IS_READ_ONLY=!0;IF.transformArguments=T70});var wF=Q((u7)=>{var C70=function(...z){return[...(0,v70.transformArguments)(...z),"WITHSCORES"]};Object.defineProperty(u7,"__esModule",{value:!0});u7.transformReply=u7.transformArguments=u7.IS_READ_ONLY=u7.FIRST_KEY_INDEX=void 0;var v70=fz(),LF=fz();Object.defineProperty(u7,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return LF.FIRST_KEY_INDEX}});Object.defineProperty(u7,"IS_READ_ONLY",{enumerable:!0,get:function(){return LF.IS_READ_ONLY}});u7.transformArguments=C70;var h70=m();Object.defineProperty(u7,"transformReply",{enumerable:!0,get:function(){return h70.transformSortedSetWithScoresReply}})});var PF=Q((NF)=>{var Y70=function(z,V,K){const J=(0,k70.pushVerdictArgument)(["ZUNIONSTORE",z],V);if(K?.WEIGHTS)J.push("WEIGHTS",...K.WEIGHTS.map((Z)=>Z.toString()));if(K?.AGGREGATE)J.push("AGGREGATE",K.AGGREGATE);return J};Object.defineProperty(NF,"__esModule",{value:!0});NF.transformArguments=NF.FIRST_KEY_INDEX=void 0;var k70=m();NF.FIRST_KEY_INDEX=1;NF.transformArguments=Y70});var xz=Q((ww)=>{Object.defineProperty(ww,"__esModule",{value:!0});var TF=ZD(),AF=HD(),EF=BD(),vF=OD(),CF=kD(),hF=fD(),WF=yD(),RF=gD(),kF=AK(),YF=mD(),bF=lD(),fF=oD(),xF=hK(),SF=eD(),yF=z1(),_F=J1(),$F=D1(),gF=j1(),uF=G1(),dF=X1(),mF=q1(),cF=E1(),pF=W1(),lF=Y1(),nF=b1(),iF=f1(),aF=y1(),oF=u1(),tF=p1(),rF=i1(),sF=t1(),eF=e1(),zI=K2(),VI=D2(),KI=Hz(),JI=B2(),ZI=h7(),UI=F2(),DI=Qz(),HI=w2(),QI=k7(),jI=P2(),BI=E2(),MI=W2(),GI=b7(),OI=Y2(),FI=x2(),II=_2(),XI=u2(),LI=p2(),wI=i2(),NI=t2(),qI=e2(),PI=zH(),TI=JH(),AI=ZH(),EI=HH(),vI=BH(),CI=OH(),hI=XH(),WI=NH(),RI=vH(),kI=Fz(),YI=Gz(),bI=WH(),fI=bH(),xI=fH(),SI=yH(),yI=gH(),_I=mH(),$I=lH(),gI=aH(),uI=zQ(),dI=ZQ(),mI=HQ(),cI=U4(),pI=BQ(),lI=OQ(),nI=XQ(),iI=NQ(),aI=PK(),oI=TQ(),tI=vQ(),rI=kQ(),sI=SK(),eI=fQ(),zX=yQ(),VX=gQ(),KX=mQ(),JX=lQ(),ZX=aQ(),UX=rQ(),DX=zj(),HX=Jj(),QX=Zj(),jX=Hj(),BX=Bj(),MX=Oj(),GX=Xj(),OX=Lj(),FX=wj(),IX=Nj(),XX=Tj(),LX=Aj(),wX=Cj(),NX=Rj(),qX=bj(),PX=Sj(),TX=$j(),AX=dj(),EX=mj(),vX=lj(),CX=aj(),hX=rj(),WX=zB(),RX=JB(),kX=DB(),YX=jB(),bX=GB(),fX=IB(),xX=wB(),SX=PB(),yX=EB(),_X=hB(),$X=WB(),gX=YB(),uX=xB(),dX=_B(),mX=uB(),cX=dB(),pX=pB(),lX=lB(),nX=nB(),iX=oB(),aX=zM(),oX=nK(),tX=JM(),rX=DM(),sX=BM(),eX=Nz(),zL=OM(),VL=XM(),KL=NM(),JL=TM(),ZL=vM(),UL=WM(),DL=YM(),HL=xM(),QL=_M(),jL=uM(),BL=cM(),ML=nM(),GL=tM(),OL=qz(),FL=sM(),IL=Pz(),XL=VG(),LL=ZG(),wL=UG(),NL=QG(),qL=jG(),PL=GG(),TL=IG(),AL=wG(),EL=TG(),vL=vG(),CL=WG(),hL=YG(),WL=bG(),RL=fG(),kL=xG(),YL=SG(),bL=$G(),fL=dG(),xL=mG(),SL=lG(),yL=oG(),_L=eG(),$L=Tz(),gL=KO(),uL=JO(),dL=HO(),mL=Az(),cL=BO(),pL=OO(),lL=XO(),nL=vK(),iL=LO(),aL=wO(),oL=Ez(),tL=NO(),rL=Cz(),sL=vO(),eL=kz(),zw=Wz(),Vw=kO(),Kw=Yz(),Jw=xO(),Zw=gO(),Uw=bz(),Dw=cO(),Hw=nO(),Qw=oO(),jw=eO(),Bw=KF(),Mw=DF(),Gw=jF(),Ow=OF(),Fw=FF(),Iw=wF(),Xw=fz(),Lw=PF();ww.default={APPEND:TF,append:TF,BITCOUNT:AF,bitCount:AF,BITFIELD_RO:EF,bitFieldRo:EF,BITFIELD:vF,bitField:vF,BITOP:CF,bitOp:CF,BITPOS:hF,bitPos:hF,BLMOVE:WF,blMove:WF,BLMPOP:RF,blmPop:RF,BLPOP:kF,blPop:kF,BRPOP:YF,brPop:YF,BRPOPLPUSH:bF,brPopLPush:bF,BZMPOP:fF,bzmPop:fF,BZPOPMAX:xF,bzPopMax:xF,BZPOPMIN:SF,bzPopMin:SF,COPY:yF,copy:yF,DECR:_F,decr:_F,DECRBY:$F,decrBy:$F,DEL:gF,del:gF,DUMP:uF,dump:uF,EVAL_RO:dF,evalRo:dF,EVAL:mF,eval:mF,EVALSHA:pF,evalSha:pF,EVALSHA_RO:cF,evalShaRo:cF,EXISTS:lF,exists:lF,EXPIRE:nF,expire:nF,EXPIREAT:iF,expireAt:iF,EXPIRETIME:aF,expireTime:aF,FCALL_RO:oF,fCallRo:oF,FCALL:tF,fCall:tF,GEOADD:rF,geoAdd:rF,GEODIST:sF,geoDist:sF,GEOHASH:eF,geoHash:eF,GEOPOS:zI,geoPos:zI,GEORADIUS_RO_WITH:VI,geoRadiusRoWith:VI,GEORADIUS_RO:KI,geoRadiusRo:KI,GEORADIUS_WITH:JI,geoRadiusWith:JI,GEORADIUS:ZI,geoRadius:ZI,GEORADIUSBYMEMBER_RO_WITH:UI,geoRadiusByMemberRoWith:UI,GEORADIUSBYMEMBER_RO:DI,geoRadiusByMemberRo:DI,GEORADIUSBYMEMBER_WITH:HI,geoRadiusByMemberWith:HI,GEORADIUSBYMEMBER:QI,geoRadiusByMember:QI,GEORADIUSBYMEMBERSTORE:jI,geoRadiusByMemberStore:jI,GEORADIUSSTORE:BI,geoRadiusStore:BI,GEOSEARCH_WITH:MI,geoSearchWith:MI,GEOSEARCH:GI,geoSearch:GI,GEOSEARCHSTORE:OI,geoSearchStore:OI,GET:FI,get:FI,GETBIT:II,getBit:II,GETDEL:XI,getDel:XI,GETEX:LI,getEx:LI,GETRANGE:wI,getRange:wI,GETSET:NI,getSet:NI,HDEL:qI,hDel:qI,HEXISTS:PI,hExists:PI,HGET:TI,hGet:TI,HGETALL:AI,hGetAll:AI,HINCRBY:EI,hIncrBy:EI,HINCRBYFLOAT:vI,hIncrByFloat:vI,HKEYS:CI,hKeys:CI,HLEN:hI,hLen:hI,HMGET:WI,hmGet:WI,HRANDFIELD_COUNT_WITHVALUES:RI,hRandFieldCountWithValues:RI,HRANDFIELD_COUNT:kI,hRandFieldCount:kI,HRANDFIELD:YI,hRandField:YI,HSCAN:bI,hScan:bI,HSET:fI,hSet:fI,HSETNX:xI,hSetNX:xI,HSTRLEN:SI,hStrLen:SI,HVALS:yI,hVals:yI,INCR:_I,incr:_I,INCRBY:$I,incrBy:$I,INCRBYFLOAT:gI,incrByFloat:gI,LCS_IDX_WITHMATCHLEN:uI,lcsIdxWithMatchLen:uI,LCS_IDX:dI,lcsIdx:dI,LCS_LEN:mI,lcsLen:mI,LCS:cI,lcs:cI,LINDEX:pI,lIndex:pI,LINSERT:lI,lInsert:lI,LLEN:nI,lLen:nI,LMOVE:iI,lMove:iI,LMPOP:aI,lmPop:aI,LPOP_COUNT:oI,lPopCount:oI,LPOP:tI,lPop:tI,LPOS_COUNT:rI,lPosCount:rI,LPOS:sI,lPos:sI,LPUSH:eI,lPush:eI,LPUSHX:zX,lPushX:zX,LRANGE:VX,lRange:VX,LREM:KX,lRem:KX,LSET:JX,lSet:JX,LTRIM:ZX,lTrim:ZX,MGET:UX,mGet:UX,MIGRATE:DX,migrate:DX,MSET:HX,mSet:HX,MSETNX:QX,mSetNX:QX,OBJECT_ENCODING:jX,objectEncoding:jX,OBJECT_FREQ:BX,objectFreq:BX,OBJECT_IDLETIME:MX,objectIdleTime:MX,OBJECT_REFCOUNT:GX,objectRefCount:GX,PERSIST:OX,persist:OX,PEXPIRE:FX,pExpire:FX,PEXPIREAT:IX,pExpireAt:IX,PEXPIRETIME:XX,pExpireTime:XX,PFADD:LX,pfAdd:LX,PFCOUNT:wX,pfCount:wX,PFMERGE:NX,pfMerge:NX,PSETEX:qX,pSetEx:qX,PTTL:PX,pTTL:PX,PUBLISH:TX,publish:TX,RENAME:AX,rename:AX,RENAMENX:EX,renameNX:EX,RESTORE:vX,restore:vX,RPOP_COUNT:CX,rPopCount:CX,RPOP:hX,rPop:hX,RPOPLPUSH:WX,rPopLPush:WX,RPUSH:RX,rPush:RX,RPUSHX:kX,rPushX:kX,SADD:YX,sAdd:YX,SCARD:bX,sCard:bX,SDIFF:fX,sDiff:fX,SDIFFSTORE:xX,sDiffStore:xX,SINTER:uX,sInter:uX,SINTERCARD:dX,sInterCard:dX,SINTERSTORE:mX,sInterStore:mX,SET:SX,set:SX,SETBIT:yX,setBit:yX,SETEX:_X,setEx:_X,SETNX:$X,setNX:$X,SETRANGE:gX,setRange:gX,SISMEMBER:cX,sIsMember:cX,SMEMBERS:pX,sMembers:pX,SMISMEMBER:lX,smIsMember:lX,SMOVE:nX,sMove:nX,SORT_RO:iX,sortRo:iX,SORT_STORE:aX,sortStore:aX,SORT:oX,sort:oX,SPOP:tX,sPop:tX,SPUBLISH:rX,sPublish:rX,SRANDMEMBER_COUNT:sX,sRandMemberCount:sX,SRANDMEMBER:eX,sRandMember:eX,SREM:zL,sRem:zL,SSCAN:VL,sScan:VL,STRLEN:KL,strLen:KL,SUNION:JL,sUnion:JL,SUNIONSTORE:ZL,sUnionStore:ZL,TOUCH:UL,touch:UL,TTL:DL,ttl:DL,TYPE:HL,type:HL,UNLINK:QL,unlink:QL,WATCH:jL,watch:jL,XACK:BL,xAck:BL,XADD:ML,xAdd:ML,XAUTOCLAIM_JUSTID:GL,xAutoClaimJustId:GL,XAUTOCLAIM:OL,xAutoClaim:OL,XCLAIM:IL,xClaim:IL,XCLAIM_JUSTID:FL,xClaimJustId:FL,XDEL:XL,xDel:XL,XGROUP_CREATE:LL,xGroupCreate:LL,XGROUP_CREATECONSUMER:wL,xGroupCreateConsumer:wL,XGROUP_DELCONSUMER:NL,xGroupDelConsumer:NL,XGROUP_DESTROY:qL,xGroupDestroy:qL,XGROUP_SETID:PL,xGroupSetId:PL,XINFO_CONSUMERS:TL,xInfoConsumers:TL,XINFO_GROUPS:AL,xInfoGroups:AL,XINFO_STREAM:EL,xInfoStream:EL,XLEN:vL,xLen:vL,XPENDING_RANGE:CL,xPendingRange:CL,XPENDING:hL,xPending:hL,XRANGE:WL,xRange:WL,XREAD:RL,xRead:RL,XREADGROUP:kL,xReadGroup:kL,XREVRANGE:YL,xRevRange:YL,XSETID:bL,xSetId:bL,XTRIM:fL,xTrim:fL,ZADD:xL,zAdd:xL,ZCARD:SL,zCard:SL,ZCOUNT:yL,zCount:yL,ZDIFF_WITHSCORES:_L,zDiffWithScores:_L,ZDIFF:$L,zDiff:$L,ZDIFFSTORE:gL,zDiffStore:gL,ZINCRBY:uL,zIncrBy:uL,ZINTER_WITHSCORES:dL,zInterWithScores:dL,ZINTER:mL,zInter:mL,ZINTERCARD:cL,zInterCard:cL,ZINTERSTORE:pL,zInterStore:pL,ZLEXCOUNT:lL,zLexCount:lL,ZMPOP:nL,zmPop:nL,ZMSCORE:iL,zmScore:iL,ZPOPMAX_COUNT:aL,zPopMaxCount:aL,ZPOPMAX:oL,zPopMax:oL,ZPOPMIN_COUNT:tL,zPopMinCount:tL,ZPOPMIN:rL,zPopMin:rL,ZRANDMEMBER_COUNT_WITHSCORES:sL,zRandMemberCountWithScores:sL,ZRANDMEMBER_COUNT:eL,zRandMemberCount:eL,ZRANDMEMBER:zw,zRandMember:zw,ZRANGE_WITHSCORES:Vw,zRangeWithScores:Vw,ZRANGE:Kw,zRange:Kw,ZRANGEBYLEX:Jw,zRangeByLex:Jw,ZRANGEBYSCORE_WITHSCORES:Zw,zRangeByScoreWithScores:Zw,ZRANGEBYSCORE:Uw,zRangeByScore:Uw,ZRANGESTORE:Dw,zRangeStore:Dw,ZRANK:Hw,zRank:Hw,ZREM:Qw,zRem:Qw,ZREMRANGEBYLEX:jw,zRemRangeByLex:jw,ZREMRANGEBYRANK:Bw,zRemRangeByRank:Bw,ZREMRANGEBYSCORE:Mw,zRemRangeByScore:Mw,ZREVRANK:Gw,zRevRank:Gw,ZSCAN:Ow,zScan:Ow,ZSCORE:Fw,zScore:Fw,ZUNION_WITHSCORES:Iw,zUnionWithScores:Iw,ZUNION:Xw,zUnion:Xw,ZUNIONSTORE:Lw,zUnionStore:Lw}});var Pw=Q((Nw)=>{var x70=function(z){const V=["ACL","CAT"];if(z)V.push(z);return V};Object.defineProperty(Nw,"__esModule",{value:!0});Nw.transformArguments=void 0;Nw.transformArguments=x70});var Ew=Q((Tw)=>{var y70=function(z){return(0,S70.pushVerdictArguments)(["ACL","DELUSER"],z)};Object.defineProperty(Tw,"__esModule",{value:!0});Tw.transformArguments=void 0;var S70=m();Tw.transformArguments=y70});var hw=Q((vw)=>{var _70=function(z,V){return["ACL","DRYRUN",z,...V]};Object.defineProperty(vw,"__esModule",{value:!0});vw.transformArguments=vw.IS_READ_ONLY=void 0;vw.IS_READ_ONLY=!0;vw.transformArguments=_70});var kw=Q((Ww)=>{var g70=function(z){const V=["ACL","GENPASS"];if(z)V.push(z.toString());return V};Object.defineProperty(Ww,"__esModule",{value:!0});Ww.transformArguments=void 0;Ww.transformArguments=g70});var fw=Q((Yw)=>{var u70=function(z){return["ACL","GETUSER",z]},d70=function(z){return{flags:z[1],passwords:z[3],commands:z[5],keys:z[7],channels:z[9],selectors:z[11]}};Object.defineProperty(Yw,"__esModule",{value:!0});Yw.transformReply=Yw.transformArguments=void 0;Yw.transformArguments=u70;Yw.transformReply=d70});var yw=Q((xw)=>{var c70=function(){return["ACL","LIST"]};Object.defineProperty(xw,"__esModule",{value:!0});xw.transformArguments=void 0;xw.transformArguments=c70});var gw=Q((_w)=>{var p70=function(){return["ACL","LOAD"]};Object.defineProperty(_w,"__esModule",{value:!0});_w.transformArguments=void 0;_w.transformArguments=p70});var mw=Q((uw)=>{var l70=function(){return["ACL","LOG","RESET"]};Object.defineProperty(uw,"__esModule",{value:!0});uw.transformArguments=void 0;uw.transformArguments=l70});var lw=Q((cw)=>{var n70=function(z){const V=["ACL","LOG"];if(z)V.push(z.toString());return V},i70=function(z){return z.map((V)=>({count:V[1],reason:V[3],context:V[5],object:V[7],username:V[9],ageSeconds:Number(V[11]),clientInfo:V[13]}))};Object.defineProperty(cw,"__esModule",{value:!0});cw.transformReply=cw.transformArguments=void 0;cw.transformArguments=n70;cw.transformReply=i70});var aw=Q((nw)=>{var o70=function(){return["ACL","SAVE"]};Object.defineProperty(nw,"__esModule",{value:!0});nw.transformArguments=void 0;nw.transformArguments=o70});var rw=Q((ow)=>{var r70=function(z,V){return(0,t70.pushVerdictArguments)(["ACL","SETUSER",z],V)};Object.defineProperty(ow,"__esModule",{value:!0});ow.transformArguments=void 0;var t70=m();ow.transformArguments=r70});var zN=Q((sw)=>{var s70=function(){return["ACL","USERS"]};Object.defineProperty(sw,"__esModule",{value:!0});sw.transformArguments=void 0;sw.transformArguments=s70});var JN=Q((VN)=>{var e70=function(){return["ACL","WHOAMI"]};Object.defineProperty(VN,"__esModule",{value:!0});VN.transformArguments=void 0;VN.transformArguments=e70});var DN=Q((ZN)=>{var z30=function(){return["ASKING"]};Object.defineProperty(ZN,"__esModule",{value:!0});ZN.transformArguments=void 0;ZN.transformArguments=z30});var jN=Q((HN)=>{var V30=function({username:z,password:V}){if(!z)return["AUTH",V];return["AUTH",z,V]};Object.defineProperty(HN,"__esModule",{value:!0});HN.transformArguments=void 0;HN.transformArguments=V30});var GN=Q((BN)=>{var K30=function(){return["BGREWRITEAOF"]};Object.defineProperty(BN,"__esModule",{value:!0});BN.transformArguments=void 0;BN.transformArguments=K30});var IN=Q((ON)=>{var J30=function(z){const V=["BGSAVE"];if(z?.SCHEDULE)V.push("SCHEDULE");return V};Object.defineProperty(ON,"__esModule",{value:!0});ON.transformArguments=void 0;ON.transformArguments=J30});var wN=Q((XN)=>{var Z30=function(z){return["CLIENT","CACHING",z?"YES":"NO"]};Object.defineProperty(XN,"__esModule",{value:!0});XN.transformArguments=void 0;XN.transformArguments=Z30});var PN=Q((NN)=>{var U30=function(){return["CLIENT","GETNAME"]};Object.defineProperty(NN,"__esModule",{value:!0});NN.transformArguments=void 0;NN.transformArguments=U30});var EN=Q((TN)=>{var D30=function(){return["CLIENT","GETREDIR"]};Object.defineProperty(TN,"__esModule",{value:!0});TN.transformArguments=void 0;TN.transformArguments=D30});var hN=Q((vN)=>{var H30=function(){return["CLIENT","ID"]};Object.defineProperty(vN,"__esModule",{value:!0});vN.transformArguments=vN.IS_READ_ONLY=void 0;vN.IS_READ_ONLY=!0;vN.transformArguments=H30});var YN=Q((RN)=>{var j30=function(z){const V=["CLIENT","KILL"];if(Array.isArray(z))for(let K of z)WN(V,K);else WN(V,z);return V},WN=function(z,V){if(V===u8.SKIP_ME){z.push("SKIPME");return}switch(z.push(V.filter),V.filter){case u8.ADDRESS:z.push(V.address);break;case u8.LOCAL_ADDRESS:z.push(V.localAddress);break;case u8.ID:z.push(typeof V.id==="number"?V.id.toString():V.id);break;case u8.TYPE:z.push(V.type);break;case u8.USER:z.push(V.username);break;case u8.SKIP_ME:z.push(V.skipMe?"yes":"no");break}};Object.defineProperty(RN,"__esModule",{value:!0});RN.transformArguments=RN.ClientKillFilters=void 0;var u8;(function(z){z.ADDRESS="ADDR",z.LOCAL_ADDRESS="LADDR",z.ID="ID",z.TYPE="TYPE",z.USER="USER",z.SKIP_ME="SKIPME"})(u8||(RN.ClientKillFilters=u8={}));RN.transformArguments=j30});var j9=Q((bN)=>{var M30=function(){return["CLIENT","INFO"]},O30=function(z){const V={};for(let J of z.matchAll(G30))V[J[1]]=J[2];const K={id:Number(V.id),addr:V.addr,fd:Number(V.fd),name:V.name,age:Number(V.age),idle:Number(V.idle),flags:V.flags,db:Number(V.db),sub:Number(V.sub),psub:Number(V.psub),multi:Number(V.multi),qbuf:Number(V.qbuf),qbufFree:Number(V["qbuf-free"]),argvMem:Number(V["argv-mem"]),obl:Number(V.obl),oll:Number(V.oll),omem:Number(V.omem),totMem:Number(V["tot-mem"]),events:V.events,cmd:V.cmd,user:V.user};if(V.laddr!==void 0)K.laddr=V.laddr;if(V.redir!==void 0)K.redir=Number(V.redir);if(V.ssub!==void 0)K.ssub=Number(V.ssub);if(V["multi-mem"]!==void 0)K.multiMem=Number(V["multi-mem"]);if(V.resp!==void 0)K.resp=Number(V.resp);return K};Object.defineProperty(bN,"__esModule",{value:!0});bN.transformReply=bN.transformArguments=bN.IS_READ_ONLY=void 0;bN.IS_READ_ONLY=!0;bN.transformArguments=M30;var G30=/([^\s=]+)=([^\s]*)/g;bN.transformReply=O30});var yN=Q((xN)=>{var w30=function(z){let V=["CLIENT","LIST"];if(z)if(z.TYPE!==void 0)V.push("TYPE",z.TYPE);else V.push("ID"),V=(0,X30.pushVerdictArguments)(V,z.ID);return V},N30=function(z){const V=z.split("\n"),K=V.length-1,J=[];for(let Z=0;Z<K;Z++)J.push((0,L30.transformReply)(V[Z]));return J};Object.defineProperty(xN,"__esModule",{value:!0});xN.transformReply=xN.transformArguments=xN.IS_READ_ONLY=void 0;var X30=m(),L30=j9();xN.IS_READ_ONLY=!0;xN.transformArguments=w30;xN.transformReply=N30});var gN=Q((_N)=>{var T30=function(z){return["CLIENT","NO-EVICT",z?"ON":"OFF"]};Object.defineProperty(_N,"__esModule",{value:!0});_N.transformArguments=void 0;_N.transformArguments=T30});var mN=Q((uN)=>{var A30=function(z){return["CLIENT","NO-TOUCH",z?"ON":"OFF"]};Object.defineProperty(uN,"__esModule",{value:!0});uN.transformArguments=void 0;uN.transformArguments=A30});var lN=Q((cN)=>{var E30=function(z,V){const K=["CLIENT","PAUSE",z.toString()];if(V)K.push(V);return K};Object.defineProperty(cN,"__esModule",{value:!0});cN.transformArguments=void 0;cN.transformArguments=E30});var aN=Q((nN)=>{var v30=function(z){return["CLIENT","SETNAME",z]};Object.defineProperty(nN,"__esModule",{value:!0});nN.transformArguments=void 0;nN.transformArguments=v30});var rN=Q((oN)=>{var C30=function(z,V){const K=["CLIENT","TRACKING",z?"ON":"OFF"];if(z){if(V?.REDIRECT)K.push("REDIRECT",V.REDIRECT.toString());if(h30(V)){if(K.push("BCAST"),V?.PREFIX)if(Array.isArray(V.PREFIX))for(let J of V.PREFIX)K.push("PREFIX",J);else K.push("PREFIX",V.PREFIX)}else if(W30(V))K.push("OPTIN");else if(R30(V))K.push("OPTOUT");if(V?.NOLOOP)K.push("NOLOOP")}return K},h30=function(z){return z?.BCAST===!0},W30=function(z){return z?.OPTIN===!0},R30=function(z){return z?.OPTOUT===!0};Object.defineProperty(oN,"__esModule",{value:!0});oN.transformArguments=void 0;oN.transformArguments=C30});var zq=Q((sN)=>{var k30=function(){return["CLIENT","TRACKINGINFO"]},Y30=function(z){return{flags:new Set(z[1]),redirect:z[3],prefixes:z[5]}};Object.defineProperty(sN,"__esModule",{value:!0});sN.transformReply=sN.transformArguments=void 0;sN.transformArguments=k30;sN.transformReply=Y30});var Jq=Q((Vq)=>{var f30=function(){return["CLIENT","UNPAUSE"]};Object.defineProperty(Vq,"__esModule",{value:!0});Vq.transformArguments=void 0;Vq.transformArguments=f30});var Dq=Q((Zq)=>{var S30=function(z){return(0,x30.pushVerdictNumberArguments)(["CLUSTER","ADDSLOTS"],z)};Object.defineProperty(Zq,"__esModule",{value:!0});Zq.transformArguments=void 0;var x30=m();Zq.transformArguments=S30});var jq=Q((Hq)=>{var _30=function(z){return(0,y30.pushSlotRangesArguments)(["CLUSTER","ADDSLOTSRANGE"],z)};Object.defineProperty(Hq,"__esModule",{value:!0});Hq.transformArguments=void 0;var y30=m();Hq.transformArguments=_30});var Gq=Q((Bq)=>{var $30=function(){return["CLUSTER","BUMPEPOCH"]};Object.defineProperty(Bq,"__esModule",{value:!0});Bq.transformArguments=void 0;Bq.transformArguments=$30});var Iq=Q((Oq)=>{var g30=function(z){return["CLUSTER","COUNT-FAILURE-REPORTS",z]};Object.defineProperty(Oq,"__esModule",{value:!0});Oq.transformArguments=void 0;Oq.transformArguments=g30});var wq=Q((Xq)=>{var u30=function(z){return["CLUSTER","COUNTKEYSINSLOT",z.toString()]};Object.defineProperty(Xq,"__esModule",{value:!0});Xq.transformArguments=void 0;Xq.transformArguments=u30});var Pq=Q((Nq)=>{var m30=function(z){return(0,d30.pushVerdictNumberArguments)(["CLUSTER","DELSLOTS"],z)};Object.defineProperty(Nq,"__esModule",{value:!0});Nq.transformArguments=void 0;var d30=m();Nq.transformArguments=m30});var Eq=Q((Tq)=>{var p30=function(z){return(0,c30.pushSlotRangesArguments)(["CLUSTER","DELSLOTSRANGE"],z)};Object.defineProperty(Tq,"__esModule",{value:!0});Tq.transformArguments=void 0;var c30=m();Tq.transformArguments=p30});var Wq=Q((Cq)=>{var l30=function(z){const V=["CLUSTER","FAILOVER"];if(z)V.push(z);return V};Object.defineProperty(Cq,"__esModule",{value:!0});Cq.transformArguments=Cq.FailoverModes=void 0;var vq;(function(z){z.FORCE="FORCE",z.TAKEOVER="TAKEOVER"})(vq||(Cq.FailoverModes=vq={}));Cq.transformArguments=l30});var Yq=Q((Rq)=>{var i30=function(){return["CLUSTER","FLUSHSLOTS"]};Object.defineProperty(Rq,"__esModule",{value:!0});Rq.transformArguments=void 0;Rq.transformArguments=i30});var xq=Q((bq)=>{var a30=function(z){return["CLUSTER","FORGET",z]};Object.defineProperty(bq,"__esModule",{value:!0});bq.transformArguments=void 0;bq.transformArguments=a30});var _q=Q((Sq)=>{var o30=function(z,V){return["CLUSTER","GETKEYSINSLOT",z.toString(),V.toString()]};Object.defineProperty(Sq,"__esModule",{value:!0});Sq.transformArguments=void 0;Sq.transformArguments=o30});var uq=Q(($q)=>{var t30=function(){return["CLUSTER","INFO"]},r30=function(z){const V=z.split("\r\n");return{state:D8(V[0]),slots:{assigned:Number(D8(V[1])),ok:Number(D8(V[2])),pfail:Number(D8(V[3])),fail:Number(D8(V[4]))},knownNodes:Number(D8(V[5])),size:Number(D8(V[6])),currentEpoch:Number(D8(V[7])),myEpoch:Number(D8(V[8])),stats:{messagesSent:Number(D8(V[9])),messagesReceived:Number(D8(V[10]))}}},D8=function(z){return z.substring(z.indexOf(":")+1)};Object.defineProperty($q,"__esModule",{value:!0});$q.extractLineValue=$q.transformReply=$q.transformArguments=void 0;$q.transformArguments=t30;$q.transformReply=r30;$q.extractLineValue=D8});var cq=Q((dq)=>{var zz0=function(z){return["CLUSTER","KEYSLOT",z]};Object.defineProperty(dq,"__esModule",{value:!0});dq.transformArguments=void 0;dq.transformArguments=zz0});var nq=Q((pq)=>{var Vz0=function(){return["CLUSTER","LINKS"]},Kz0=function(z){return z.map((V)=>({direction:V[1],node:V[3],createTime:Number(V[5]),events:V[7],sendBufferAllocated:Number(V[9]),sendBufferUsed:Number(V[11])}))};Object.defineProperty(pq,"__esModule",{value:!0});pq.transformReply=pq.transformArguments=void 0;pq.transformArguments=Vz0;pq.transformReply=Kz0});var oq=Q((iq)=>{var Zz0=function(z,V){return["CLUSTER","MEET",z,V.toString()]};Object.defineProperty(iq,"__esModule",{value:!0});iq.transformArguments=void 0;iq.transformArguments=Zz0});var sq=Q((tq)=>{var Uz0=function(){return["CLUSTER","MYID"]};Object.defineProperty(tq,"__esModule",{value:!0});tq.transformArguments=void 0;tq.transformArguments=Uz0});var VP=Q((eq)=>{var Dz0=function(){return["CLUSTER","MYSHARDID"]};Object.defineProperty(eq,"__esModule",{value:!0});eq.transformArguments=eq.IS_READ_ONLY=void 0;eq.IS_READ_ONLY=!0;eq.transformArguments=Dz0});var B9=Q((JP)=>{var Qz0=function(){return["CLUSTER","NODES"]},jz0=function(z){const V=z.split("\n");V.pop();const K=new Map,J=new Map;for(let Z of V){const[D,U,j,B,H,G,A,b,...w]=Z.split(" "),v={id:D,address:U,...Bz0(U),flags:j.split(","),pingSent:Number(H),pongRecv:Number(G),configEpoch:Number(A),linkState:b};if(B==="-"){let W=J.get(D);if(!W)W=[],J.set(D,W);K.set(D,{...v,slots:w.map((f)=>{const[L,i]=f.split("-",2),n=Number(L);return{from:n,to:i?Number(i):n}}),replicas:W})}else{const W=J.get(B);if(!W)J.set(B,[v]);else W.push(v)}}return[...K.values()]},Bz0=function(z){const V=z.lastIndexOf(":"),K=z.indexOf("@",V),J=z.substring(0,V);if(K===-1)return{host:J,port:Number(z.substring(V+1)),cport:null};return{host:z.substring(0,V),port:Number(z.substring(V+1,K)),cport:Number(z.substring(K+1))}};Object.defineProperty(JP,"__esModule",{value:!0});JP.transformReply=JP.RedisClusterNodeLinkStates=JP.transformArguments=void 0;JP.transformArguments=Qz0;var KP;(function(z){z.CONNECTED="connected",z.DISCONNECTED="disconnected"})(KP||(JP.RedisClusterNodeLinkStates=KP={}));JP.transformReply=jz0});var UP=Q((M9)=>{var Oz0=function(z){return["CLUSTER","REPLICAS",z]};Object.defineProperty(M9,"__esModule",{value:!0});M9.transformReply=M9.transformArguments=void 0;M9.transformArguments=Oz0;var Fz0=B9();Object.defineProperty(M9,"transformReply",{enumerable:!0,get:function(){return Fz0.transformReply}})});var QP=Q((DP)=>{var Lz0=function(z){return["CLUSTER","REPLICATE",z]};Object.defineProperty(DP,"__esModule",{value:!0});DP.transformArguments=void 0;DP.transformArguments=Lz0});var MP=Q((jP)=>{var wz0=function(z){const V=["CLUSTER","RESET"];if(z)V.push(z);return V};Object.defineProperty(jP,"__esModule",{value:!0});jP.transformArguments=void 0;jP.transformArguments=wz0});var FP=Q((GP)=>{var Nz0=function(){return["CLUSTER","SAVECONFIG"]};Object.defineProperty(GP,"__esModule",{value:!0});GP.transformArguments=void 0;GP.transformArguments=Nz0});var LP=Q((IP)=>{var qz0=function(z){return["CLUSTER","SET-CONFIG-EPOCH",z.toString()]};Object.defineProperty(IP,"__esModule",{value:!0});IP.transformArguments=void 0;IP.transformArguments=qz0});var PP=Q((NP)=>{var Pz0=function(z,V,K){const J=["CLUSTER","SETSLOT",z.toString(),V];if(K)J.push(K);return J};Object.defineProperty(NP,"__esModule",{value:!0});NP.transformArguments=NP.ClusterSlotStates=void 0;var wP;(function(z){z.IMPORTING="IMPORTING",z.MIGRATING="MIGRATING",z.STABLE="STABLE",z.NODE="NODE"})(wP||(NP.ClusterSlotStates=wP={}));NP.transformArguments=Pz0});var vP=Q((AP)=>{var Az0=function(){return["CLUSTER","SLOTS"]},Ez0=function(z){return z.map(([V,K,J,...Z])=>{return{from:V,to:K,master:TP(J),replicas:Z.map(TP)}})},TP=function([z,V,K]){return{ip:z,port:V,id:K}};Object.defineProperty(AP,"__esModule",{value:!0});AP.transformReply=AP.transformArguments=void 0;AP.transformArguments=Az0;AP.transformReply=Ez0});var WP=Q((CP)=>{var Cz0=function(){return["COMMAND","COUNT"]};Object.defineProperty(CP,"__esModule",{value:!0});CP.transformArguments=CP.IS_READ_ONLY=void 0;CP.IS_READ_ONLY=!0;CP.transformArguments=Cz0});var YP=Q((RP)=>{var Wz0=function(z){return["COMMAND","GETKEYS",...z]};Object.defineProperty(RP,"__esModule",{value:!0});RP.transformArguments=RP.IS_READ_ONLY=void 0;RP.IS_READ_ONLY=!0;RP.transformArguments=Wz0});var xP=Q((bP)=>{var kz0=function(z){return["COMMAND","GETKEYSANDFLAGS",...z]},Yz0=function(z){return z.map(([V,K])=>({key:V,flags:K}))};Object.defineProperty(bP,"__esModule",{value:!0});bP.transformReply=bP.transformArguments=bP.IS_READ_ONLY=void 0;bP.IS_READ_ONLY=!0;bP.transformArguments=kz0;bP.transformReply=Yz0});var _P=Q((SP)=>{var Sz0=function(z){return["COMMAND","INFO",...z]},yz0=function(z){return z.map((V)=>V?(0,xz0.transformCommandReply)(V):null)};Object.defineProperty(SP,"__esModule",{value:!0});SP.transformReply=SP.transformArguments=SP.IS_READ_ONLY=void 0;var xz0=m();SP.IS_READ_ONLY=!0;SP.transformArguments=Sz0;SP.transformReply=yz0});var dP=Q((gP)=>{var gz0=function(z){const V=["COMMAND","LIST"];if(z)V.push("FILTERBY",z.filterBy,z.value);return V};Object.defineProperty(gP,"__esModule",{value:!0});gP.transformArguments=gP.FilterBy=gP.IS_READ_ONLY=void 0;gP.IS_READ_ONLY=!0;var $P;(function(z){z.MODULE="MODULE",z.ACLCAT="ACLCAT",z.PATTERN="PATTERN"})($P||(gP.FilterBy=$P={}));gP.transformArguments=gz0});var pP=Q((mP)=>{var cz0=function(){return["COMMAND"]},pz0=function(z){return z.map(mz0.transformCommandReply)};Object.defineProperty(mP,"__esModule",{value:!0});mP.transformReply=mP.transformArguments=mP.IS_READ_ONLY=void 0;var mz0=m();mP.IS_READ_ONLY=!0;mP.transformArguments=cz0;mP.transformReply=pz0});var lP=Q((G9)=>{var iz0=function(z){return["CONFIG","GET",z]};Object.defineProperty(G9,"__esModule",{value:!0});G9.transformReply=G9.transformArguments=void 0;G9.transformArguments=iz0;var az0=m();Object.defineProperty(G9,"transformReply",{enumerable:!0,get:function(){return az0.transformTuplesReply}})});var aP=Q((nP)=>{var rz0=function(){return["CONFIG","RESETSTAT"]};Object.defineProperty(nP,"__esModule",{value:!0});nP.transformArguments=void 0;nP.transformArguments=rz0});var rP=Q((oP)=>{var sz0=function(){return["CONFIG","REWRITE"]};Object.defineProperty(oP,"__esModule",{value:!0});oP.transformArguments=void 0;oP.transformArguments=sz0});var zT=Q((sP)=>{var ez0=function(...[z,V]){const K=["CONFIG","SET"];if(typeof z==="string")K.push(z,V);else for(let[J,Z]of Object.entries(z))K.push(J,Z);return K};Object.defineProperty(sP,"__esModule",{value:!0});sP.transformArguments=void 0;sP.transformArguments=ez0});var JT=Q((VT)=>{var zV0=function(){return["DBSIZE"]};Object.defineProperty(VT,"__esModule",{value:!0});VT.transformArguments=VT.IS_READ_ONLY=void 0;VT.IS_READ_ONLY=!0;VT.transformArguments=zV0});var DT=Q((ZT)=>{var KV0=function(){return["DISCARD"]};Object.defineProperty(ZT,"__esModule",{value:!0});ZT.transformArguments=void 0;ZT.transformArguments=KV0});var jT=Q((HT)=>{var JV0=function(z){return["ECHO",z]};Object.defineProperty(HT,"__esModule",{value:!0});HT.transformArguments=HT.IS_READ_ONLY=void 0;HT.IS_READ_ONLY=!0;HT.transformArguments=JV0});var GT=Q((BT)=>{var UV0=function(z){const V=["FAILOVER"];if(z?.TO){if(V.push("TO",z.TO.host,z.TO.port.toString()),z.TO.FORCE)V.push("FORCE")}if(z?.ABORT)V.push("ABORT");if(z?.TIMEOUT)V.push("TIMEOUT",z.TIMEOUT.toString());return V};Object.defineProperty(BT,"__esModule",{value:!0});BT.transformArguments=void 0;BT.transformArguments=UV0});var O9=Q((FT)=>{var DV0=function(z){const V=["FLUSHALL"];if(z)V.push(z);return V};Object.defineProperty(FT,"__esModule",{value:!0});FT.transformArguments=FT.RedisFlushModes=void 0;var OT;(function(z){z.ASYNC="ASYNC",z.SYNC="SYNC"})(OT||(FT.RedisFlushModes=OT={}));FT.transformArguments=DV0});var wT=Q((XT)=>{var QV0=function(z){const V=["FLUSHDB"];if(z)V.push(z);return V};Object.defineProperty(XT,"__esModule",{value:!0});XT.transformArguments=void 0;XT.transformArguments=QV0});var PT=Q((NT)=>{var jV0=function(z){return["FUNCTION","DELETE",z]};Object.defineProperty(NT,"__esModule",{value:!0});NT.transformArguments=void 0;NT.transformArguments=jV0});var ET=Q((TT)=>{var BV0=function(){return["FUNCTION","DUMP"]};Object.defineProperty(TT,"__esModule",{value:!0});TT.transformArguments=void 0;TT.transformArguments=BV0});var hT=Q((vT)=>{var MV0=function(z){const V=["FUNCTION","FLUSH"];if(z)V.push(z);return V};Object.defineProperty(vT,"__esModule",{value:!0});vT.transformArguments=void 0;vT.transformArguments=MV0});var kT=Q((WT)=>{var GV0=function(){return["FUNCTION","KILL"]};Object.defineProperty(WT,"__esModule",{value:!0});WT.transformArguments=void 0;WT.transformArguments=GV0});var F9=Q((YT)=>{var FV0=function(z){const V=["FUNCTION","LIST"];if(z)V.push(z);return V},IV0=function(z){return z.map(OV0.transformFunctionListItemReply)};Object.defineProperty(YT,"__esModule",{value:!0});YT.transformReply=YT.transformArguments=void 0;var OV0=m();YT.transformArguments=FV0;YT.transformReply=IV0});var ST=Q((fT)=>{var NV0=function(z){const V=(0,LV0.transformArguments)(z);return V.push("WITHCODE"),V},qV0=function(z){return z.map((V)=>({...(0,wV0.transformFunctionListItemReply)(V),libraryCode:V[7]}))};Object.defineProperty(fT,"__esModule",{value:!0});fT.transformReply=fT.transformArguments=void 0;var LV0=F9(),wV0=m();fT.transformArguments=NV0;fT.transformReply=qV0});var $T=Q((yT)=>{var TV0=function(z,V){const K=["FUNCTION","LOAD"];if(V?.REPLACE)K.push("REPLACE");return K.push(z),K};Object.defineProperty(yT,"__esModule",{value:!0});yT.transformArguments=void 0;yT.transformArguments=TV0});var dT=Q((gT)=>{var AV0=function(z,V){const K=["FUNCTION","RESTORE",z];if(V)K.push(V);return K};Object.defineProperty(gT,"__esModule",{value:!0});gT.transformArguments=void 0;gT.transformArguments=AV0});var pT=Q((mT)=>{var EV0=function(){return["FUNCTION","STATS"]},vV0=function(z){const V=Object.create(null);for(let K=0;K<z[3].length;K++)V[z[3][K]]={librariesCount:z[3][++K][1],functionsCount:z[3][K][3]};return{runningScript:z[1]===null?null:{name:z[1][1],command:z[1][3],durationMs:z[1][5]},engines:V}};Object.defineProperty(mT,"__esModule",{value:!0});mT.transformReply=mT.transformArguments=void 0;mT.transformArguments=EV0;mT.transformReply=vV0});var iT=Q((lT)=>{var hV0=function(z){const V=["HELLO"];if(z){if(V.push(z.protover.toString()),z.auth)V.push("AUTH",z.auth.username,z.auth.password);if(z.clientName)V.push("SETNAME",z.clientName)}return V},WV0=function(z){return{server:z[1],version:z[3],proto:z[5],id:z[7],mode:z[9],role:z[11],modules:z[13]}};Object.defineProperty(lT,"__esModule",{value:!0});lT.transformReply=lT.transformArguments=void 0;lT.transformArguments=hV0;lT.transformReply=WV0});var tT=Q((aT)=>{var kV0=function(z){const V=["INFO"];if(z)V.push(z);return V};Object.defineProperty(aT,"__esModule",{value:!0});aT.transformArguments=aT.IS_READ_ONLY=void 0;aT.IS_READ_ONLY=!0;aT.transformArguments=kV0});var eT=Q((rT)=>{var bV0=function(z){return["KEYS",z]};Object.defineProperty(rT,"__esModule",{value:!0});rT.transformArguments=void 0;rT.transformArguments=bV0});var KA=Q((zA)=>{var fV0=function(){return["LASTSAVE"]},xV0=function(z){return new Date(z)};Object.defineProperty(zA,"__esModule",{value:!0});zA.transformReply=zA.transformArguments=zA.IS_READ_ONLY=void 0;zA.IS_READ_ONLY=!0;zA.transformArguments=fV0;zA.transformReply=xV0});var UA=Q((JA)=>{var _V0=function(){return["LATENCY","DOCTOR"]};Object.defineProperty(JA,"__esModule",{value:!0});JA.transformArguments=void 0;JA.transformArguments=_V0});var QA=Q((DA)=>{var $V0=function(z){return["LATENCY","GRAPH",z]};Object.defineProperty(DA,"__esModule",{value:!0});DA.transformArguments=void 0;DA.transformArguments=$V0});var MA=Q((jA)=>{var gV0=function(z){return["LATENCY","HISTORY",z]};Object.defineProperty(jA,"__esModule",{value:!0});jA.transformArguments=void 0;jA.transformArguments=gV0});var FA=Q((GA)=>{var uV0=function(){return["LATENCY","LATEST"]};Object.defineProperty(GA,"__esModule",{value:!0});GA.transformArguments=void 0;GA.transformArguments=uV0});var LA=Q((IA)=>{var dV0=function(z,...V){const K=["LOLWUT"];if(z)K.push("VERSION",z.toString(),...V.map(String));return K};Object.defineProperty(IA,"__esModule",{value:!0});IA.transformArguments=IA.IS_READ_ONLY=void 0;IA.IS_READ_ONLY=!0;IA.transformArguments=dV0});var qA=Q((wA)=>{var cV0=function(){return["MEMORY","DOCTOR"]};Object.defineProperty(wA,"__esModule",{value:!0});wA.transformArguments=void 0;wA.transformArguments=cV0});var AA=Q((PA)=>{var pV0=function(){return["MEMORY","MALLOC-STATS"]};Object.defineProperty(PA,"__esModule",{value:!0});PA.transformArguments=void 0;PA.transformArguments=pV0});var CA=Q((EA)=>{var lV0=function(){return["MEMORY","PURGE"]};Object.defineProperty(EA,"__esModule",{value:!0});EA.transformArguments=void 0;EA.transformArguments=lV0});var RA=Q((hA)=>{var nV0=function(){return["MEMORY","STATS"]},oV0=function(z){const V={db:{}};for(let K=0;K<z.length;K+=2){const J=z[K];if(J.startsWith("db.")){const Z=z[K+1],D={};for(let U=0;U<Z.length;U+=2)D[aV0[Z[U]]]=Z[U+1];V.db[J.substring(3)]=D;continue}V[iV0[J]]=Number(z[K+1])}return V};Object.defineProperty(hA,"__esModule",{value:!0});hA.transformReply=hA.transformArguments=void 0;hA.transformArguments=nV0;var iV0={"peak.allocated":"peakAllocated","total.allocated":"totalAllocated","startup.allocated":"startupAllocated","replication.backlog":"replicationBacklog","clients.slaves":"clientsReplicas","clients.normal":"clientsNormal","aof.buffer":"aofBuffer","lua.caches":"luaCaches","overhead.total":"overheadTotal","keys.count":"keysCount","keys.bytes-per-key":"keysBytesPerKey","dataset.bytes":"datasetBytes","dataset.percentage":"datasetPercentage","peak.percentage":"peakPercentage","allocator.allocated":"allocatorAllocated","allocator.active":"allocatorActive","allocator.resident":"allocatorResident","allocator-fragmentation.ratio":"allocatorFragmentationRatio","allocator-fragmentation.bytes":"allocatorFragmentationBytes","allocator-rss.ratio":"allocatorRssRatio","allocator-rss.bytes":"allocatorRssBytes","rss-overhead.ratio":"rssOverheadRatio","rss-overhead.bytes":"rssOverheadBytes",fragmentation:"fragmentation","fragmentation.bytes":"fragmentationBytes"},aV0={"overhead.hashtable.main":"overheadHashtableMain","overhead.hashtable.expires":"overheadHashtableExpires"};hA.transformReply=oV0});var bA=Q((kA)=>{var rV0=function(z,V){const K=["MEMORY","USAGE",z];if(V?.SAMPLES)K.push("SAMPLES",V.SAMPLES.toString());return K};Object.defineProperty(kA,"__esModule",{value:!0});kA.transformArguments=kA.IS_READ_ONLY=kA.FIRST_KEY_INDEX=void 0;kA.FIRST_KEY_INDEX=1;kA.IS_READ_ONLY=!0;kA.transformArguments=rV0});var SA=Q((fA)=>{var zK0=function(){return["MODULE","LIST"]};Object.defineProperty(fA,"__esModule",{value:!0});fA.transformArguments=void 0;fA.transformArguments=zK0});var $A=Q((yA)=>{var VK0=function(z,V){const K=["MODULE","LOAD",z];if(V)K.push(...V);return K};Object.defineProperty(yA,"__esModule",{value:!0});yA.transformArguments=void 0;yA.transformArguments=VK0});var dA=Q((gA)=>{var KK0=function(z){return["MODULE","UNLOAD",z]};Object.defineProperty(gA,"__esModule",{value:!0});gA.transformArguments=void 0;gA.transformArguments=KK0});var mA=Q((I9)=>{var JK0=function(z,V){return["MOVE",z,V.toString()]};Object.defineProperty(I9,"__esModule",{value:!0});I9.transformReply=I9.transformArguments=I9.FIRST_KEY_INDEX=void 0;I9.FIRST_KEY_INDEX=1;I9.transformArguments=JK0;var ZK0=m();Object.defineProperty(I9,"transformReply",{enumerable:!0,get:function(){return ZK0.transformBooleanReply}})});var lA=Q((cA)=>{var QK0=function(z){const V=["PING"];if(z)V.push(z);return V};Object.defineProperty(cA,"__esModule",{value:!0});cA.transformArguments=void 0;cA.transformArguments=QK0});var aA=Q((nA)=>{var jK0=function(z){const V=["PUBSUB","CHANNELS"];if(z)V.push(z);return V};Object.defineProperty(nA,"__esModule",{value:!0});nA.transformArguments=nA.IS_READ_ONLY=void 0;nA.IS_READ_ONLY=!0;nA.transformArguments=jK0});var rA=Q((oA)=>{var MK0=function(){return["PUBSUB","NUMPAT"]};Object.defineProperty(oA,"__esModule",{value:!0});oA.transformArguments=oA.IS_READ_ONLY=void 0;oA.IS_READ_ONLY=!0;oA.transformArguments=MK0});var zE=Q((sA)=>{var FK0=function(z){const V=["PUBSUB","NUMSUB"];if(z)return(0,OK0.pushVerdictArguments)(V,z);return V},IK0=function(z){const V=Object.create(null);for(let K=0;K<z.length;K+=2)V[z[K]]=z[K+1];return V};Object.defineProperty(sA,"__esModule",{value:!0});sA.transformReply=sA.transformArguments=sA.IS_READ_ONLY=void 0;var OK0=m();sA.IS_READ_ONLY=!0;sA.transformArguments=FK0;sA.transformReply=IK0});var JE=Q((VE)=>{var wK0=function(z){const V=["PUBSUB","SHARDCHANNELS"];if(z)V.push(z);return V};Object.defineProperty(VE,"__esModule",{value:!0});VE.transformArguments=VE.IS_READ_ONLY=void 0;VE.IS_READ_ONLY=!0;VE.transformArguments=wK0});var DE=Q((ZE)=>{var PK0=function(z){const V=["PUBSUB","SHARDNUMSUB"];if(z)return(0,qK0.pushVerdictArguments)(V,z);return V},TK0=function(z){const V=Object.create(null);for(let K=0;K<z.length;K+=2)V[z[K]]=z[K+1];return V};Object.defineProperty(ZE,"__esModule",{value:!0});ZE.transformReply=ZE.transformArguments=ZE.IS_READ_ONLY=void 0;var qK0=m();ZE.IS_READ_ONLY=!0;ZE.transformArguments=PK0;ZE.transformReply=TK0});var jE=Q((HE)=>{var vK0=function(){return["RANDOMKEY"]};Object.defineProperty(HE,"__esModule",{value:!0});HE.transformArguments=HE.IS_READ_ONLY=void 0;HE.IS_READ_ONLY=!0;HE.transformArguments=vK0});var GE=Q((BE)=>{var hK0=function(){return["READONLY"]};Object.defineProperty(BE,"__esModule",{value:!0});BE.transformArguments=void 0;BE.transformArguments=hK0});var IE=Q((OE)=>{var WK0=function(){return["READWRITE"]};Object.defineProperty(OE,"__esModule",{value:!0});OE.transformArguments=void 0;OE.transformArguments=WK0});var wE=Q((XE)=>{var RK0=function(z,V){return["REPLICAOF",z,V.toString()]};Object.defineProperty(XE,"__esModule",{value:!0});XE.transformArguments=void 0;XE.transformArguments=RK0});var PE=Q((NE)=>{var kK0=function(){return["RESTORE-ASKING"]};Object.defineProperty(NE,"__esModule",{value:!0});NE.transformArguments=void 0;NE.transformArguments=kK0});var EE=Q((TE)=>{var YK0=function(){return["ROLE"]},bK0=function(z){switch(z[0]){case"master":return{role:"master",replicationOffest:z[1],replicas:z[2].map(([V,K,J])=>({ip:V,port:Number(K),replicationOffest:Number(J)}))};case"slave":return{role:"slave",master:{ip:z[1],port:z[2]},state:z[3],dataReceived:z[4]};case"sentinel":return{role:"sentinel",masterNames:z[1]}}};Object.defineProperty(TE,"__esModule",{value:!0});TE.transformReply=TE.transformArguments=TE.IS_READ_ONLY=void 0;TE.IS_READ_ONLY=!0;TE.transformArguments=YK0;TE.transformReply=bK0});var hE=Q((vE)=>{var SK0=function(){return["SAVE"]};Object.defineProperty(vE,"__esModule",{value:!0});vE.transformArguments=void 0;vE.transformArguments=SK0});var kE=Q((WE)=>{var _K0=function(z,V){const K=(0,yK0.pushScanArguments)(["SCAN"],z,V);if(V?.TYPE)K.push("TYPE",V.TYPE);return K},$K0=function([z,V]){return{cursor:Number(z),keys:V}};Object.defineProperty(WE,"__esModule",{value:!0});WE.transformReply=WE.transformArguments=WE.IS_READ_ONLY=void 0;var yK0=m();WE.IS_READ_ONLY=!0;WE.transformArguments=_K0;WE.transformReply=$K0});var fE=Q((YE)=>{var dK0=function(z){return["SCRIPT","DEBUG",z]};Object.defineProperty(YE,"__esModule",{value:!0});YE.transformArguments=void 0;YE.transformArguments=dK0});var xE=Q((X9)=>{var cK0=function(z){return(0,mK0.pushVerdictArguments)(["SCRIPT","EXISTS"],z)};Object.defineProperty(X9,"__esModule",{value:!0});X9.transformReply=X9.transformArguments=void 0;var mK0=m();X9.transformArguments=cK0;var pK0=m();Object.defineProperty(X9,"transformReply",{enumerable:!0,get:function(){return pK0.transformBooleanArrayReply}})});var _E=Q((SE)=>{var iK0=function(z){const V=["SCRIPT","FLUSH"];if(z)V.push(z);return V};Object.defineProperty(SE,"__esModule",{value:!0});SE.transformArguments=void 0;SE.transformArguments=iK0});var uE=Q(($E)=>{var aK0=function(){return["SCRIPT","KILL"]};Object.defineProperty($E,"__esModule",{value:!0});$E.transformArguments=void 0;$E.transformArguments=aK0});var cE=Q((dE)=>{var oK0=function(z){return["SCRIPT","LOAD",z]};Object.defineProperty(dE,"__esModule",{value:!0});dE.transformArguments=void 0;dE.transformArguments=oK0});var nE=Q((pE)=>{var tK0=function(z){const V=["SHUTDOWN"];if(z)V.push(z);return V};Object.defineProperty(pE,"__esModule",{value:!0});pE.transformArguments=void 0;pE.transformArguments=tK0});var oE=Q((iE)=>{var rK0=function(z,V){return["SWAPDB",z.toString(),V.toString()]};Object.defineProperty(iE,"__esModule",{value:!0});iE.transformArguments=void 0;iE.transformArguments=rK0});var sE=Q((tE)=>{var sK0=function(){return["TIME"]},eK0=function(z){const V=Number(z[0]),K=Number(z[1]),J=new Date(V*1000+K/1000);return J.microseconds=K,J};Object.defineProperty(tE,"__esModule",{value:!0});tE.transformReply=tE.transformArguments=void 0;tE.transformArguments=sK0;tE.transformReply=eK0});var Vv=Q((eE)=>{var V90=function(){return["UNWATCH"]};Object.defineProperty(eE,"__esModule",{value:!0});eE.transformArguments=void 0;eE.transformArguments=V90});var Zv=Q((Kv)=>{var K90=function(z,V){return["WAIT",z.toString(),V.toString()]};Object.defineProperty(Kv,"__esModule",{value:!0});Kv.transformArguments=Kv.FIRST_KEY_INDEX=void 0;Kv.FIRST_KEY_INDEX=1;Kv.transformArguments=K90});var L9=Q((qh)=>{Object.defineProperty(qh,"__esModule",{value:!0});var Z90=xz(),Uv=Pw(),Dv=Ew(),Hv=hw(),Qv=kw(),jv=fw(),Bv=yw(),Mv=gw(),Gv=mw(),Ov=lw(),Fv=aw(),Iv=rw(),Xv=zN(),Lv=JN(),wv=DN(),Nv=jN(),qv=GN(),Pv=IN(),Tv=wN(),Av=PN(),Ev=EN(),vv=hN(),Cv=YN(),hv=yN(),Wv=gN(),Rv=mN(),kv=lN(),Yv=aN(),bv=rN(),fv=zq(),xv=Jq(),Sv=j9(),yv=Dq(),_v=jq(),$v=Gq(),gv=Iq(),uv=wq(),dv=Pq(),mv=Eq(),cv=Wq(),pv=Yq(),lv=xq(),nv=_q(),iv=uq(),av=cq(),ov=nq(),tv=oq(),rv=sq(),sv=VP(),ev=B9(),zC=UP(),VC=QP(),KC=MP(),JC=FP(),ZC=LP(),UC=PP(),DC=vP(),HC=WP(),QC=YP(),jC=xP(),BC=_P(),MC=dP(),GC=pP(),OC=lP(),FC=aP(),IC=rP(),XC=zT(),LC=JT(),wC=DT(),NC=jT(),qC=GT(),PC=O9(),TC=wT(),AC=PT(),EC=ET(),vC=hT(),CC=kT(),hC=ST(),WC=F9(),RC=$T(),kC=dT(),YC=pT(),bC=iT(),fC=tT(),xC=eT(),SC=KA(),yC=UA(),_C=QA(),$C=MA(),gC=FA(),uC=LA(),dC=qA(),mC=AA(),cC=CA(),pC=RA(),lC=bA(),nC=SA(),iC=$A(),aC=dA(),oC=mA(),tC=lA(),rC=aA(),sC=rA(),eC=zE(),zh=JE(),Vh=DE(),Kh=jE(),Jh=GE(),Zh=IE(),Uh=wE(),Dh=PE(),Hh=EE(),Qh=hE(),jh=kE(),Bh=fE(),Mh=xE(),Gh=_E(),Oh=uE(),Fh=cE(),Ih=nE(),Xh=oE(),Lh=sE(),wh=Vv(),Nh=Zv();qh.default={...Z90.default,ACL_CAT:Uv,aclCat:Uv,ACL_DELUSER:Dv,aclDelUser:Dv,ACL_DRYRUN:Hv,aclDryRun:Hv,ACL_GENPASS:Qv,aclGenPass:Qv,ACL_GETUSER:jv,aclGetUser:jv,ACL_LIST:Bv,aclList:Bv,ACL_LOAD:Mv,aclLoad:Mv,ACL_LOG_RESET:Gv,aclLogReset:Gv,ACL_LOG:Ov,aclLog:Ov,ACL_SAVE:Fv,aclSave:Fv,ACL_SETUSER:Iv,aclSetUser:Iv,ACL_USERS:Xv,aclUsers:Xv,ACL_WHOAMI:Lv,aclWhoAmI:Lv,ASKING:wv,asking:wv,AUTH:Nv,auth:Nv,BGREWRITEAOF:qv,bgRewriteAof:qv,BGSAVE:Pv,bgSave:Pv,CLIENT_CACHING:Tv,clientCaching:Tv,CLIENT_GETNAME:Av,clientGetName:Av,CLIENT_GETREDIR:Ev,clientGetRedir:Ev,CLIENT_ID:vv,clientId:vv,CLIENT_KILL:Cv,clientKill:Cv,"CLIENT_NO-EVICT":Wv,clientNoEvict:Wv,"CLIENT_NO-TOUCH":Rv,clientNoTouch:Rv,CLIENT_LIST:hv,clientList:hv,CLIENT_PAUSE:kv,clientPause:kv,CLIENT_SETNAME:Yv,clientSetName:Yv,CLIENT_TRACKING:bv,clientTracking:bv,CLIENT_TRACKINGINFO:fv,clientTrackingInfo:fv,CLIENT_UNPAUSE:xv,clientUnpause:xv,CLIENT_INFO:Sv,clientInfo:Sv,CLUSTER_ADDSLOTS:yv,clusterAddSlots:yv,CLUSTER_ADDSLOTSRANGE:_v,clusterAddSlotsRange:_v,CLUSTER_BUMPEPOCH:$v,clusterBumpEpoch:$v,CLUSTER_COUNT_FAILURE_REPORTS:gv,clusterCountFailureReports:gv,CLUSTER_COUNTKEYSINSLOT:uv,clusterCountKeysInSlot:uv,CLUSTER_DELSLOTS:dv,clusterDelSlots:dv,CLUSTER_DELSLOTSRANGE:mv,clusterDelSlotsRange:mv,CLUSTER_FAILOVER:cv,clusterFailover:cv,CLUSTER_FLUSHSLOTS:pv,clusterFlushSlots:pv,CLUSTER_FORGET:lv,clusterForget:lv,CLUSTER_GETKEYSINSLOT:nv,clusterGetKeysInSlot:nv,CLUSTER_INFO:iv,clusterInfo:iv,CLUSTER_KEYSLOT:av,clusterKeySlot:av,CLUSTER_LINKS:ov,clusterLinks:ov,CLUSTER_MEET:tv,clusterMeet:tv,CLUSTER_MYID:rv,clusterMyId:rv,CLUSTER_MYSHARDID:sv,clusterMyShardId:sv,CLUSTER_NODES:ev,clusterNodes:ev,CLUSTER_REPLICAS:zC,clusterReplicas:zC,CLUSTER_REPLICATE:VC,clusterReplicate:VC,CLUSTER_RESET:KC,clusterReset:KC,CLUSTER_SAVECONFIG:JC,clusterSaveConfig:JC,CLUSTER_SET_CONFIG_EPOCH:ZC,clusterSetConfigEpoch:ZC,CLUSTER_SETSLOT:UC,clusterSetSlot:UC,CLUSTER_SLOTS:DC,clusterSlots:DC,COMMAND_COUNT:HC,commandCount:HC,COMMAND_GETKEYS:QC,commandGetKeys:QC,COMMAND_GETKEYSANDFLAGS:jC,commandGetKeysAndFlags:jC,COMMAND_INFO:BC,commandInfo:BC,COMMAND_LIST:MC,commandList:MC,COMMAND:GC,command:GC,CONFIG_GET:OC,configGet:OC,CONFIG_RESETASTAT:FC,configResetStat:FC,CONFIG_REWRITE:IC,configRewrite:IC,CONFIG_SET:XC,configSet:XC,DBSIZE:LC,dbSize:LC,DISCARD:wC,discard:wC,ECHO:NC,echo:NC,FAILOVER:qC,failover:qC,FLUSHALL:PC,flushAll:PC,FLUSHDB:TC,flushDb:TC,FUNCTION_DELETE:AC,functionDelete:AC,FUNCTION_DUMP:EC,functionDump:EC,FUNCTION_FLUSH:vC,functionFlush:vC,FUNCTION_KILL:CC,functionKill:CC,FUNCTION_LIST_WITHCODE:hC,functionListWithCode:hC,FUNCTION_LIST:WC,functionList:WC,FUNCTION_LOAD:RC,functionLoad:RC,FUNCTION_RESTORE:kC,functionRestore:kC,FUNCTION_STATS:YC,functionStats:YC,HELLO:bC,hello:bC,INFO:fC,info:fC,KEYS:xC,keys:xC,LASTSAVE:SC,lastSave:SC,LATENCY_DOCTOR:yC,latencyDoctor:yC,LATENCY_GRAPH:_C,latencyGraph:_C,LATENCY_HISTORY:$C,latencyHistory:$C,LATENCY_LATEST:gC,latencyLatest:gC,LOLWUT:uC,lolwut:uC,MEMORY_DOCTOR:dC,memoryDoctor:dC,"MEMORY_MALLOC-STATS":mC,memoryMallocStats:mC,MEMORY_PURGE:cC,memoryPurge:cC,MEMORY_STATS:pC,memoryStats:pC,MEMORY_USAGE:lC,memoryUsage:lC,MODULE_LIST:nC,moduleList:nC,MODULE_LOAD:iC,moduleLoad:iC,MODULE_UNLOAD:aC,moduleUnload:aC,MOVE:oC,move:oC,PING:tC,ping:tC,PUBSUB_CHANNELS:rC,pubSubChannels:rC,PUBSUB_NUMPAT:sC,pubSubNumPat:sC,PUBSUB_NUMSUB:eC,pubSubNumSub:eC,PUBSUB_SHARDCHANNELS:zh,pubSubShardChannels:zh,PUBSUB_SHARDNUMSUB:Vh,pubSubShardNumSub:Vh,RANDOMKEY:Kh,randomKey:Kh,READONLY:Jh,readonly:Jh,READWRITE:Zh,readwrite:Zh,REPLICAOF:Uh,replicaOf:Uh,"RESTORE-ASKING":Dh,restoreAsking:Dh,ROLE:Hh,role:Hh,SAVE:Qh,save:Qh,SCAN:jh,scan:jh,SCRIPT_DEBUG:Bh,scriptDebug:Bh,SCRIPT_EXISTS:Mh,scriptExists:Mh,SCRIPT_FLUSH:Gh,scriptFlush:Gh,SCRIPT_KILL:Oh,scriptKill:Oh,SCRIPT_LOAD:Fh,scriptLoad:Fh,SHUTDOWN:Ih,shutdown:Ih,SWAPDB:Xh,swapDb:Xh,TIME:Lh,time:Lh,UNWATCH:wh,unwatch:wh,WAIT:Nh,wait:Nh}});var d8=Q((Yh)=>{Object.defineProperty(Yh,"__esModule",{value:!0});Yh.ErrorReply=Yh.ReconnectStrategyError=Yh.RootNodesUnavailableError=Yh.SocketClosedUnexpectedlyError=Yh.DisconnectsClientError=Yh.ClientOfflineError=Yh.ClientClosedError=Yh.ConnectionTimeoutError=Yh.WatchError=Yh.AbortError=void 0;class Ph extends Error{constructor(){super("The command was aborted")}}Yh.AbortError=Ph;class Th extends Error{constructor(){super("One (or more) of the watched keys has been changed")}}Yh.WatchError=Th;class Ah extends Error{constructor(){super("Connection timeout")}}Yh.ConnectionTimeoutError=Ah;class Eh extends Error{constructor(){super("The client is closed")}}Yh.ClientClosedError=Eh;class vh extends Error{constructor(){super("The client is offline")}}Yh.ClientOfflineError=vh;class Ch extends Error{constructor(){super("Disconnects client")}}Yh.DisconnectsClientError=Ch;class hh extends Error{constructor(){super("Socket closed unexpectedly")}}Yh.SocketClosedUnexpectedlyError=hh;class Wh extends Error{constructor(){super("All the root nodes are unavailable")}}Yh.RootNodesUnavailableError=Wh;class Rh extends Error{constructor(z,V){super(z.message);Object.defineProperty(this,"originalError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"socketError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.originalError=z,this.socketError=V}}Yh.ReconnectStrategyError=Rh;class kh extends Error{constructor(z){super(z);this.stack=void 0}}Yh.ErrorReply=kh});var Sh=Q((fh)=>{var I90=function(z){return new Promise((V)=>setTimeout(V,z))};Object.defineProperty(fh,"__esModule",{value:!0});fh.promiseTimeout=void 0;fh.promiseTimeout=I90});var mh=Q((g4)=>{var L0=g4&&g4.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},H6=g4&&g4.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},d6,$4,dh,yh,Sz,E6,v6,r6,D4,v5,m7,_h,w9,q9,$h,gh,uh,N9,P9,d7;Object.defineProperty(g4,"__esModule",{value:!0});var X90=import.meta.require("events"),L90=import.meta.require("net"),w90=import.meta.require("tls"),C5=d8(),N90=Sh();class T9 extends X90.EventEmitter{get isOpen(){return L0(this,r6,"f")}get isReady(){return L0(this,D4,"f")}get writableNeedDrain(){return L0(this,v5,"f")}constructor(z,V){super();d6.add(this),Sz.set(this,void 0),E6.set(this,void 0),v6.set(this,void 0),r6.set(this,!1),D4.set(this,!1),v5.set(this,!1),m7.set(this,!1),d7.set(this,!1),H6(this,Sz,z,"f"),H6(this,E6,L0($4,$4,"m",dh).call($4,V),"f")}async connect(){if(L0(this,r6,"f"))throw new Error("Socket already opened");return H6(this,r6,!0,"f"),L0(this,d6,"m",q9).call(this)}writeCommand(z){if(!L0(this,v6,"f"))throw new C5.ClientClosedError;for(let V of z)H6(this,v5,!L0(this,v6,"f").write(V),"f")}disconnect(){if(!L0(this,r6,"f"))throw new C5.ClientClosedError;H6(this,r6,!1,"f"),L0(this,d6,"m",P9).call(this)}async quit(z){if(!L0(this,r6,"f"))throw new C5.ClientClosedError;H6(this,r6,!1,"f");const V=await z();return L0(this,d6,"m",P9).call(this),V}cork(){if(!L0(this,v6,"f")||L0(this,d7,"f"))return;L0(this,v6,"f").cork(),H6(this,d7,!0,"f"),setImmediate(()=>{L0(this,v6,"f")?.uncork(),H6(this,d7,!1,"f")})}ref(){H6(this,m7,!1,"f"),L0(this,v6,"f")?.ref()}unref(){H6(this,m7,!0,"f"),L0(this,v6,"f")?.unref()}}$4=T9,Sz=new WeakMap,E6=new WeakMap,v6=new WeakMap,r6=new WeakMap,D4=new WeakMap,v5=new WeakMap,m7=new WeakMap,d7=new WeakMap,d6=new WeakSet,dh=function z(V){var K,J;if(V??(V={}),!V.path)(K=V).port??(K.port=6379),(J=V).host??(J.host="localhost");return V.connectTimeout??(V.connectTimeout=5000),V.keepAlive??(V.keepAlive=5000),V.noDelay??(V.noDelay=!0),V},yh=function z(V){return V.tls===!0},_h=function z(V,K){if(L0(this,E6,"f").reconnectStrategy===!1)return!1;else if(typeof L0(this,E6,"f").reconnectStrategy==="number")return L0(this,E6,"f").reconnectStrategy;else if(L0(this,E6,"f").reconnectStrategy)try{const J=L0(this,E6,"f").reconnectStrategy(V,K);if(J!==!1&&!(J instanceof Error)&&typeof J!=="number")throw new TypeError(`Reconnect strategy should return \`false | Error | number\`, got ${J} instead`);return J}catch(J){this.emit("error",J)}return Math.min(V*50,500)},w9=function z(V,K){const J=L0(this,d6,"m",_h).call(this,V,K);if(J===!1)return H6(this,r6,!1,"f"),this.emit("error",K),K;else if(J instanceof Error)return H6(this,r6,!1,"f"),this.emit("error",K),new C5.ReconnectStrategyError(J,K);return J},q9=async function z(){let V=0;do try{H6(this,v6,await L0(this,d6,"m",$h).call(this),"f"),H6(this,v5,!1,"f"),this.emit("connect");try{await L0(this,Sz,"f").call(this)}catch(K){throw L0(this,v6,"f").destroy(),H6(this,v6,void 0,"f"),K}H6(this,D4,!0,"f"),this.emit("ready")}catch(K){const J=L0(this,d6,"m",w9).call(this,V++,K);if(typeof J!=="number")throw J;this.emit("error",K),await(0,N90.promiseTimeout)(J),this.emit("reconnecting")}while(L0(this,r6,"f")&&!L0(this,D4,"f"))},$h=function z(){return new Promise((V,K)=>{const{connectEvent:J,socket:Z}=L0($4,$4,"m",yh).call($4,L0(this,E6,"f"))?L0(this,d6,"m",uh).call(this):L0(this,d6,"m",gh).call(this);if(L0(this,E6,"f").connectTimeout)Z.setTimeout(L0(this,E6,"f").connectTimeout,()=>Z.destroy(new C5.ConnectionTimeoutError));if(L0(this,m7,"f"))Z.unref();Z.setNoDelay(L0(this,E6,"f").noDelay).once("error",K).once(J,()=>{Z.setTimeout(0).setKeepAlive(L0(this,E6,"f").keepAlive!==!1,L0(this,E6,"f").keepAlive||0).off("error",K).once("error",(D)=>L0(this,d6,"m",N9).call(this,D)).once("close",(D)=>{if(!D&&L0(this,D4,"f")&&L0(this,v6,"f")===Z)L0(this,d6,"m",N9).call(this,new C5.SocketClosedUnexpectedlyError)}).on("drain",()=>{H6(this,v5,!1,"f"),this.emit("drain")}).on("data",(D)=>this.emit("data",D)),V(Z)})})},gh=function z(){return{connectEvent:"connect",socket:L90.connect(L0(this,E6,"f"))}},uh=function z(){return{connectEvent:"secureConnect",socket:w90.connect(L0(this,E6,"f"))}},N9=function z(V){if(H6(this,D4,!1,"f"),this.emit("error",V),!L0(this,r6,"f")||typeof L0(this,d6,"m",w9).call(this,0,V)!=="number")return;this.emit("reconnecting"),L0(this,d6,"m",q9).call(this).catch(()=>{})},P9=function z(){if(H6(this,D4,!1,"f"),L0(this,v6,"f"))L0(this,v6,"f").destroy(),H6(this,v6,void 0,"f");this.emit("end")};g4.default=T9});var ph=Q((AE0,ch)=>{ch.exports=function(z){z.prototype[Symbol.iterator]=function*(){for(let V=this.head;V;V=V.next)yield V.value}}});var nh=Q((EE0,lh)=>{var k0=function(z){var V=this;if(!(V instanceof k0))V=new k0;if(V.tail=null,V.head=null,V.length=0,z&&typeof z.forEach==="function")z.forEach(function(Z){V.push(Z)});else if(arguments.length>0)for(var K=0,J=arguments.length;K<J;K++)V.push(arguments[K]);return V},q90=function(z,V,K){var J=V===z.head?new u4(K,null,V,z):new u4(K,V,V.next,z);if(J.next===null)z.tail=J;if(J.prev===null)z.head=J;return z.length++,J},P90=function(z,V){if(z.tail=new u4(V,z.tail,null,z),!z.head)z.head=z.tail;z.length++},T90=function(z,V){if(z.head=new u4(V,null,z.head,z),!z.tail)z.tail=z.head;z.length++},u4=function(z,V,K,J){if(!(this instanceof u4))return new u4(z,V,K,J);if(this.list=J,this.value=z,V)V.next=this,this.prev=V;else this.prev=null;if(K)K.prev=this,this.next=K;else this.next=null};lh.exports=k0;k0.Node=u4;k0.create=k0;k0.prototype.removeNode=function(z){if(z.list!==this)throw new Error("removing node which does not belong to this list");var{next:V,prev:K}=z;if(V)V.prev=K;if(K)K.next=V;if(z===this.head)this.head=V;if(z===this.tail)this.tail=K;return z.list.length--,z.next=null,z.prev=null,z.list=null,V};k0.prototype.unshiftNode=function(z){if(z===this.head)return;if(z.list)z.list.removeNode(z);var V=this.head;if(z.list=this,z.next=V,V)V.prev=z;if(this.head=z,!this.tail)this.tail=z;this.length++};k0.prototype.pushNode=function(z){if(z===this.tail)return;if(z.list)z.list.removeNode(z);var V=this.tail;if(z.list=this,z.prev=V,V)V.next=z;if(this.tail=z,!this.head)this.head=z;this.length++};k0.prototype.push=function(){for(var z=0,V=arguments.length;z<V;z++)P90(this,arguments[z]);return this.length};k0.prototype.unshift=function(){for(var z=0,V=arguments.length;z<V;z++)T90(this,arguments[z]);return this.length};k0.prototype.pop=function(){if(!this.tail)return;var z=this.tail.value;if(this.tail=this.tail.prev,this.tail)this.tail.next=null;else this.head=null;return this.length--,z};k0.prototype.shift=function(){if(!this.head)return;var z=this.head.value;if(this.head=this.head.next,this.head)this.head.prev=null;else this.tail=null;return this.length--,z};k0.prototype.forEach=function(z,V){V=V||this;for(var K=this.head,J=0;K!==null;J++)z.call(V,K.value,J,this),K=K.next};k0.prototype.forEachReverse=function(z,V){V=V||this;for(var K=this.tail,J=this.length-1;K!==null;J--)z.call(V,K.value,J,this),K=K.prev};k0.prototype.get=function(z){for(var V=0,K=this.head;K!==null&&V<z;V++)K=K.next;if(V===z&&K!==null)return K.value};k0.prototype.getReverse=function(z){for(var V=0,K=this.tail;K!==null&&V<z;V++)K=K.prev;if(V===z&&K!==null)return K.value};k0.prototype.map=function(z,V){V=V||this;var K=new k0;for(var J=this.head;J!==null;)K.push(z.call(V,J.value,this)),J=J.next;return K};k0.prototype.mapReverse=function(z,V){V=V||this;var K=new k0;for(var J=this.tail;J!==null;)K.push(z.call(V,J.value,this)),J=J.prev;return K};k0.prototype.reduce=function(z,V){var K,J=this.head;if(arguments.length>1)K=V;else if(this.head)J=this.head.next,K=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var Z=0;J!==null;Z++)K=z(K,J.value,Z),J=J.next;return K};k0.prototype.reduceReverse=function(z,V){var K,J=this.tail;if(arguments.length>1)K=V;else if(this.tail)J=this.tail.prev,K=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var Z=this.length-1;J!==null;Z--)K=z(K,J.value,Z),J=J.prev;return K};k0.prototype.toArray=function(){var z=new Array(this.length);for(var V=0,K=this.head;K!==null;V++)z[V]=K.value,K=K.next;return z};k0.prototype.toArrayReverse=function(){var z=new Array(this.length);for(var V=0,K=this.tail;K!==null;V++)z[V]=K.value,K=K.prev;return z};k0.prototype.slice=function(z,V){if(V=V||this.length,V<0)V+=this.length;if(z=z||0,z<0)z+=this.length;var K=new k0;if(V<z||V<0)return K;if(z<0)z=0;if(V>this.length)V=this.length;for(var J=0,Z=this.head;Z!==null&&J<z;J++)Z=Z.next;for(;Z!==null&&J<V;J++,Z=Z.next)K.push(Z.value);return K};k0.prototype.sliceReverse=function(z,V){if(V=V||this.length,V<0)V+=this.length;if(z=z||0,z<0)z+=this.length;var K=new k0;if(V<z||V<0)return K;if(z<0)z=0;if(V>this.length)V=this.length;for(var J=this.length,Z=this.tail;Z!==null&&J>V;J--)Z=Z.prev;for(;Z!==null&&J>z;J--,Z=Z.prev)K.push(Z.value);return K};k0.prototype.splice=function(z,V,...K){if(z>this.length)z=this.length-1;if(z<0)z=this.length+z;for(var J=0,Z=this.head;Z!==null&&J<z;J++)Z=Z.next;var D=[];for(var J=0;Z&&J<V;J++)D.push(Z.value),Z=this.removeNode(Z);if(Z===null)Z=this.tail;if(Z!==this.head&&Z!==this.tail)Z=Z.prev;for(var J=0;J<K.length;J++)Z=q90(this,Z,K[J]);return D};k0.prototype.reverse=function(){var z=this.head,V=this.tail;for(var K=z;K!==null;K=K.prev){var J=K.prev;K.prev=K.next,K.next=J}return this.head=V,this.tail=z,this};try{ph()(k0)}catch(z){}});var oh=Q((ah)=>{Object.defineProperty(ah,"__esModule",{value:!0});class ih{constructor(){Object.defineProperty(this,"chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]})}write(z){this.chunks.push(z)}end(z){return this.write(z),Buffer.concat(this.chunks.splice(0))}reset(){this.chunks=[]}}ah.default=ih});var sh=Q((rh)=>{Object.defineProperty(rh,"__esModule",{value:!0});var E90=import.meta.require("string_decoder");class th{constructor(){Object.defineProperty(this,"decoder",{enumerable:!0,configurable:!0,writable:!0,value:new E90.StringDecoder}),Object.defineProperty(this,"string",{enumerable:!0,configurable:!0,writable:!0,value:""})}write(z){this.string+=this.decoder.write(z)}end(z){const V=this.string+this.decoder.end(z);return this.string="",V}reset(){this.string=""}}rh.default=th});var VW=Q((zW)=>{Object.defineProperty(zW,"__esModule",{value:!0});var C90=d8(),h90=oh(),W90=sh(),d4;(function(z){z[z.SIMPLE_STRING=43]="SIMPLE_STRING",z[z.ERROR=45]="ERROR",z[z.INTEGER=58]="INTEGER",z[z.BULK_STRING=36]="BULK_STRING",z[z.ARRAY=42]="ARRAY"})(d4||(d4={}));var h5;(function(z){z[z.CR=13]="CR",z[z.ZERO=48]="ZERO",z[z.MINUS=45]="MINUS"})(h5||(h5={}));class eh{constructor(z){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:z}),Object.defineProperty(this,"cursor",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bufferComposer",{enumerable:!0,configurable:!0,writable:!0,value:new h90.default}),Object.defineProperty(this,"stringComposer",{enumerable:!0,configurable:!0,writable:!0,value:new W90.default}),Object.defineProperty(this,"currentStringComposer",{enumerable:!0,configurable:!0,writable:!0,value:this.stringComposer}),Object.defineProperty(this,"integer",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isNegativeInteger",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bulkStringRemainingLength",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"arraysInProcess",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"initializeArray",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"arrayItemType",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}reset(){this.cursor=0,this.type=void 0,this.bufferComposer.reset(),this.stringComposer.reset(),this.currentStringComposer=this.stringComposer}write(z){while(this.cursor<z.length){if(!this.type){if(this.currentStringComposer=this.options.returnStringsAsBuffers()?this.bufferComposer:this.stringComposer,this.type=z[this.cursor],++this.cursor>=z.length)break}const V=this.parseType(z,this.type);if(V===void 0)break;this.type=void 0,this.options.onReply(V)}this.cursor-=z.length}parseType(z,V,K){switch(V){case d4.SIMPLE_STRING:return this.parseSimpleString(z);case d4.ERROR:return this.parseError(z);case d4.INTEGER:return this.parseInteger(z);case d4.BULK_STRING:return this.parseBulkString(z);case d4.ARRAY:return this.parseArray(z,K)}}compose(z,V){for(let J=this.cursor;J<z.length;J++)if(z[J]===h5.CR){const Z=V.end(z.subarray(this.cursor,J));return this.cursor=J+2,Z}const K=z.subarray(this.cursor);V.write(K),this.cursor=z.length}parseSimpleString(z){return this.compose(z,this.currentStringComposer)}parseError(z){const V=this.compose(z,this.stringComposer);if(V!==void 0)return new C90.ErrorReply(V)}parseInteger(z){if(this.isNegativeInteger===void 0){if(this.isNegativeInteger=z[this.cursor]===h5.MINUS,this.isNegativeInteger&&++this.cursor===z.length)return}do{const V=z[this.cursor];if(V===h5.CR){const K=this.isNegativeInteger?-this.integer:this.integer;return this.integer=0,this.isNegativeInteger=void 0,this.cursor+=2,K}this.integer=this.integer*10+V-h5.ZERO}while(++this.cursor<z.length)}parseBulkString(z){if(this.bulkStringRemainingLength===void 0){const J=this.parseInteger(z);if(J===void 0)return;if(J===-1)return null;if(this.bulkStringRemainingLength=J,this.cursor>=z.length)return}const V=this.cursor+this.bulkStringRemainingLength;if(z.length>=V){const J=this.currentStringComposer.end(z.subarray(this.cursor,V));return this.bulkStringRemainingLength=void 0,this.cursor=V+2,J}const K=z.subarray(this.cursor);this.currentStringComposer.write(K),this.bulkStringRemainingLength-=K.length,this.cursor=z.length}parseArray(z,V=0){if(this.initializeArray||this.arraysInProcess.length===V){const K=this.parseInteger(z);if(K===void 0){this.initializeArray=!0;return}if(this.initializeArray=!1,this.arrayItemType=void 0,K===-1)return this.returnArrayReply(null,V,z);else if(K===0)return this.returnArrayReply([],V,z);this.arraysInProcess.push({array:new Array(K),pushCounter:0})}while(this.cursor<z.length){if(!this.arrayItemType){if(this.arrayItemType=z[this.cursor],++this.cursor>=z.length)break}const K=this.parseType(z,this.arrayItemType,V+1);if(K===void 0)break;this.arrayItemType=void 0;const J=this.pushArrayItem(K,V);if(J!==void 0)return J}}returnArrayReply(z,V,K){if(this.arraysInProcess.length<=V)return z;return this.pushArrayItem(z,V,K)}pushArrayItem(z,V,K){const J=this.arraysInProcess[this.arraysInProcess.length-1];if(J.array[J.pushCounter]=z,++J.pushCounter===J.array.length)return this.returnArrayReply(this.arraysInProcess.pop().array,V,K);else if(K&&K.length>this.cursor)return this.parseArray(K,V)}}zW.default=eh});var JW=Q((KW)=>{var k90=function(z){const V=[];let K="*"+z.length+c7;for(let J=0;J<z.length;J++){const Z=z[J];if(typeof Z==="string")K+="$"+Buffer.byteLength(Z)+c7+Z+c7;else if(Z instanceof Buffer)V.push(K+"$"+Z.length.toString()+c7,Z),K=c7;else throw new TypeError("Invalid argument type")}return V.push(K),V};Object.defineProperty(KW,"__esModule",{value:!0});var c7="\r\n";KW.default=k90});var gz=Q((v8)=>{var P0=v8&&v8.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},X6=v8&&v8.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},x6,h6,A9,yz,m0,m8,w6,E9,_z,W5,$z;Object.defineProperty(v8,"__esModule",{value:!0});v8.PubSub=v8.PubSubType=void 0;var p0;(function(z){z.CHANNELS="CHANNELS",z.PATTERNS="PATTERNS",z.SHARDED="SHARDED"})(p0||(v8.PubSubType=p0={}));var C6={[p0.CHANNELS]:{subscribe:Buffer.from("subscribe"),unsubscribe:Buffer.from("unsubscribe"),message:Buffer.from("message")},[p0.PATTERNS]:{subscribe:Buffer.from("psubscribe"),unsubscribe:Buffer.from("punsubscribe"),message:Buffer.from("pmessage")},[p0.SHARDED]:{subscribe:Buffer.from("ssubscribe"),unsubscribe:Buffer.from("sunsubscribe"),message:Buffer.from("smessage")}};class v9{constructor(){x6.add(this),m0.set(this,0),m8.set(this,!1),w6.set(this,{[p0.CHANNELS]:new Map,[p0.PATTERNS]:new Map,[p0.SHARDED]:new Map})}static isStatusReply(z){return C6[p0.CHANNELS].subscribe.equals(z[0])||C6[p0.CHANNELS].unsubscribe.equals(z[0])||C6[p0.PATTERNS].subscribe.equals(z[0])||C6[p0.PATTERNS].unsubscribe.equals(z[0])||C6[p0.SHARDED].subscribe.equals(z[0])}static isShardedUnsubscribe(z){return C6[p0.SHARDED].unsubscribe.equals(z[0])}get isActive(){return P0(this,m8,"f")}subscribe(z,V,K,J){var Z;const D=[C6[z].subscribe],U=P0(h6,h6,"m",A9).call(h6,V);for(let j of U){let B=P0(this,w6,"f")[z].get(j);if(!B||B.unsubscribing)D.push(j)}if(D.length===1){for(let j of U)P0(h6,h6,"m",yz).call(h6,P0(this,w6,"f")[z].get(j),J).add(K);return}return X6(this,m8,!0,"f"),X6(this,m0,(Z=P0(this,m0,"f"),Z++,Z),"f"),{args:D,channelsCounter:D.length-1,resolve:()=>{var j;X6(this,m0,(j=P0(this,m0,"f"),j--,j),"f");for(let B of U){let H=P0(this,w6,"f")[z].get(B);if(!H)H={unsubscribing:!1,buffers:new Set,strings:new Set},P0(this,w6,"f")[z].set(B,H);P0(h6,h6,"m",yz).call(h6,H,J).add(K)}},reject:()=>{var j;X6(this,m0,(j=P0(this,m0,"f"),j--,j),"f"),P0(this,x6,"m",W5).call(this)}}}extendChannelListeners(z,V,K){var J;if(!P0(this,x6,"m",E9).call(this,z,V,K))return;return X6(this,m8,!0,"f"),X6(this,m0,(J=P0(this,m0,"f"),J++,J),"f"),{args:[C6[z].subscribe,V],channelsCounter:1,resolve:()=>{var Z,D;return X6(this,m0,(D=P0(this,m0,"f"),Z=D--,D),"f"),Z},reject:()=>{var Z;X6(this,m0,(Z=P0(this,m0,"f"),Z--,Z),"f"),P0(this,x6,"m",W5).call(this)}}}extendTypeListeners(z,V){var K;const J=[C6[z].subscribe];for(let[Z,D]of V)if(P0(this,x6,"m",E9).call(this,z,Z,D))J.push(Z);if(J.length===1)return;return X6(this,m8,!0,"f"),X6(this,m0,(K=P0(this,m0,"f"),K++,K),"f"),{args:J,channelsCounter:J.length-1,resolve:()=>{var Z,D;return X6(this,m0,(D=P0(this,m0,"f"),Z=D--,D),"f"),Z},reject:()=>{var Z;X6(this,m0,(Z=P0(this,m0,"f"),Z--,Z),"f"),P0(this,x6,"m",W5).call(this)}}}unsubscribe(z,V,K,J){const Z=P0(this,w6,"f")[z];if(!V)return P0(this,x6,"m",_z).call(this,[C6[z].unsubscribe],NaN,()=>Z.clear());const D=P0(h6,h6,"m",A9).call(h6,V);if(!K)return P0(this,x6,"m",_z).call(this,[C6[z].unsubscribe,...D],D.length,()=>{for(let j of D)Z.delete(j)});const U=[C6[z].unsubscribe];for(let j of D){const B=Z.get(j);if(B){let H,G;if(J)H=B.buffers,G=B.strings;else H=B.strings,G=B.buffers;if((H.has(K)?H.size-1:H.size)!==0||G.size!==0)continue;B.unsubscribing=!0}U.push(j)}if(U.length===1){for(let j of D)P0(h6,h6,"m",yz).call(h6,Z.get(j),J).delete(K);return}return P0(this,x6,"m",_z).call(this,U,U.length-1,()=>{for(let j of D){const B=Z.get(j);if(!B)continue;if((J?B.buffers:B.strings).delete(K),B.buffers.size===0&&B.strings.size===0)Z.delete(j)}})}reset(){X6(this,m8,!1,"f"),X6(this,m0,0,"f")}resubscribe(){var z;const V=[];for(let[K,J]of Object.entries(P0(this,w6,"f"))){if(!J.size)continue;X6(this,m8,!0,"f"),X6(this,m0,(z=P0(this,m0,"f"),z++,z),"f");const Z=()=>{var D,U;return X6(this,m0,(U=P0(this,m0,"f"),D=U--,U),"f"),D};V.push({args:[C6[K].subscribe,...J.keys()],channelsCounter:J.size,resolve:Z,reject:Z})}return V}handleMessageReply(z){if(C6[p0.CHANNELS].message.equals(z[0]))return P0(this,x6,"m",$z).call(this,p0.CHANNELS,z[2],z[1]),!0;else if(C6[p0.PATTERNS].message.equals(z[0]))return P0(this,x6,"m",$z).call(this,p0.PATTERNS,z[3],z[2],z[1]),!0;else if(C6[p0.SHARDED].message.equals(z[0]))return P0(this,x6,"m",$z).call(this,p0.SHARDED,z[2],z[1]),!0;return!1}removeShardedListeners(z){const V=P0(this,w6,"f")[p0.SHARDED].get(z);return P0(this,w6,"f")[p0.SHARDED].delete(z),P0(this,x6,"m",W5).call(this),V}getTypeListeners(z){return P0(this,w6,"f")[z]}}v8.PubSub=v9;h6=v9,m0=new WeakMap,m8=new WeakMap,w6=new WeakMap,x6=new WeakSet,A9=function z(V){return Array.isArray(V)?V:[V]},yz=function z(V,K){return K?V.buffers:V.strings},E9=function z(V,K,J){const Z=P0(this,w6,"f")[V].get(K);if(!Z)return P0(this,w6,"f")[V].set(K,J),!0;for(let D of J.buffers)Z.buffers.add(D);for(let D of J.strings)Z.strings.add(D);return!1},_z=function z(V,K,J){return{args:V,channelsCounter:K,resolve:()=>{J(),P0(this,x6,"m",W5).call(this)},reject:void 0}},W5=function z(){X6(this,m8,P0(this,w6,"f")[p0.CHANNELS].size!==0||P0(this,w6,"f")[p0.PATTERNS].size!==0||P0(this,w6,"f")[p0.SHARDED].size!==0||P0(this,m0,"f")!==0,"f")},$z=function z(V,K,J,Z){const D=(Z??J).toString(),U=P0(this,w6,"f")[V].get(D);if(!U)return;for(let H of U.buffers)H(K,J);if(!U.strings.size)return;const j=Z?J.toString():D,B=j==="__redis__:invalidate"?K===null?null:K.map((H)=>H.toString()):K.toString();for(let H of U.strings)H(B,j)}});var ZW=Q((c4)=>{var w0=c4&&c4.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},uz=c4&&c4.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},m4,C8,dz,p7,L8,H8,mz,S6,R5,l7,k5;Object.defineProperty(c4,"__esModule",{value:!0});var C9=nh(),h9=d8(),b90=VW(),f90=JW(),W9=gz(),x90=Buffer.from("pong");class R9{get isPubSubActive(){return w0(this,S6,"f").isActive}constructor(z,V){m4.add(this),p7.set(this,void 0),L8.set(this,new C9),H8.set(this,new C9),mz.set(this,void 0),S6.set(this,new W9.PubSub),R5.set(this,void 0),l7.set(this,new b90.default({returnStringsAsBuffers:()=>{return!!w0(this,H8,"f").head?.value.returnBuffers||w0(this,S6,"f").isActive},onReply:(K)=>{if(w0(this,S6,"f").isActive&&Array.isArray(K)){if(w0(this,S6,"f").handleMessageReply(K))return;const D=W9.PubSub.isShardedUnsubscribe(K);if(D&&!w0(this,H8,"f").length){const U=K[1].toString();w0(this,mz,"f").call(this,U,w0(this,S6,"f").removeShardedListeners(U));return}else if(D||W9.PubSub.isStatusReply(K)){const U=w0(this,H8,"f").head.value;if(Number.isNaN(U.channelsCounter)&&K[2]===0||--U.channelsCounter===0)w0(this,H8,"f").shift().resolve();return}if(x90.equals(K[0])){const{resolve:U,returnBuffers:j}=w0(this,H8,"f").shift(),B=K[1].length===0?K[0]:K[1];U(j?B:B.toString());return}}const{resolve:J,reject:Z}=w0(this,H8,"f").shift();if(K instanceof h9.ErrorReply)Z(K);else J(K)}})),uz(this,p7,z,"f"),uz(this,mz,V,"f")}addCommand(z,V){if(w0(this,p7,"f")&&w0(this,L8,"f").length+w0(this,H8,"f").length>=w0(this,p7,"f"))return Promise.reject(new Error("The queue is full"));else if(V?.signal?.aborted)return Promise.reject(new h9.AbortError);return new Promise((K,J)=>{const Z=new C9.Node({args:z,chainId:V?.chainId,returnBuffers:V?.returnBuffers,resolve:K,reject:J});if(V?.signal){const D=()=>{w0(this,L8,"f").removeNode(Z),Z.value.reject(new h9.AbortError)};Z.value.abort={signal:V.signal,listener:D},V.signal.addEventListener("abort",D,{once:!0})}if(V?.asap)w0(this,L8,"f").unshiftNode(Z);else w0(this,L8,"f").pushNode(Z)})}subscribe(z,V,K,J){return w0(this,m4,"m",k5).call(this,w0(this,S6,"f").subscribe(z,V,K,J))}unsubscribe(z,V,K,J){return w0(this,m4,"m",k5).call(this,w0(this,S6,"f").unsubscribe(z,V,K,J))}resubscribe(){const z=w0(this,S6,"f").resubscribe();if(!z.length)return;return Promise.all(z.map((V)=>w0(this,m4,"m",k5).call(this,V)))}extendPubSubChannelListeners(z,V,K){return w0(this,m4,"m",k5).call(this,w0(this,S6,"f").extendChannelListeners(z,V,K))}extendPubSubListeners(z,V){return w0(this,m4,"m",k5).call(this,w0(this,S6,"f").extendTypeListeners(z,V))}getPubSubListeners(z){return w0(this,S6,"f").getTypeListeners(z)}getCommandToSend(){const z=w0(this,L8,"f").shift();if(!z)return;let V;try{V=(0,f90.default)(z.args)}catch(K){z.reject(K);return}return w0(this,H8,"f").push({resolve:z.resolve,reject:z.reject,channelsCounter:z.channelsCounter,returnBuffers:z.returnBuffers}),uz(this,R5,z.chainId,"f"),V}onReplyChunk(z){w0(this,l7,"f").write(z)}flushWaitingForReply(z){if(w0(this,l7,"f").reset(),w0(this,S6,"f").reset(),w0(C8,C8,"m",dz).call(C8,w0(this,H8,"f"),z),!w0(this,R5,"f"))return;while(w0(this,L8,"f").head?.value.chainId===w0(this,R5,"f"))w0(this,L8,"f").shift();uz(this,R5,void 0,"f")}flushAll(z){w0(this,l7,"f").reset(),w0(this,S6,"f").reset(),w0(C8,C8,"m",dz).call(C8,w0(this,H8,"f"),z),w0(C8,C8,"m",dz).call(C8,w0(this,L8,"f"),z)}}C8=R9,p7=new WeakMap,L8=new WeakMap,H8=new WeakMap,mz=new WeakMap,S6=new WeakMap,R5=new WeakMap,l7=new WeakMap,m4=new WeakSet,dz=function z(V,K){while(V.length)V.shift().reject(K)},k5=function z(V){if(V===void 0)return;return new Promise((K,J)=>{w0(this,L8,"f").push({args:V.args,channelsCounter:V.channelsCounter,returnBuffers:!0,resolve:()=>{V.resolve(),K()},reject:(Z)=>{V.reject?.(),J(Z)}})})};c4.default=R9});var k9=Q((DW)=>{var S90=function(z){return z[UW]=!0,z},y90=function(z){return z?.[UW]===!0};Object.defineProperty(DW,"__esModule",{value:!0});DW.isCommandOptions=DW.commandOptions=void 0;var UW=Symbol("Command Options");DW.commandOptions=S90;DW.isCommandOptions=y90});var Y5=Q((BW)=>{var jW=function({BaseClass:z,commands:V,executor:K}){for(let[J,Z]of Object.entries(V))z.prototype[J]=function(...D){return K.call(this,Z,D,J)}},g90=function(z){let V;if(z.modules)V=QW({BaseClass:z.BaseClass,namespaces:z.modules,executor:z.modulesExecutor});if(z.functions)V=QW({BaseClass:V??z.BaseClass,namespaces:z.functions,executor:z.functionsExecutor});if(z.scripts)V??(V=class extends z.BaseClass{}),jW({BaseClass:V,commands:z.scripts,executor:z.scriptsExecutor});return V??z.BaseClass},QW=function({BaseClass:z,namespaces:V,executor:K}){const J=class extends z{constructor(...Z){super(...Z);for(let D of Object.keys(V))this[D]=Object.create(this[D],{self:{value:this}})}};for(let[Z,D]of Object.entries(V)){J.prototype[Z]={};for(let[U,j]of Object.entries(D))J.prototype[Z][U]=function(...B){return K.call(this.self,j,B,U)}}return J},u90=function(z,V){let K;if((0,$90.isCommandOptions)(V[0]))K=V[0],V=V.slice(1);return{jsArgs:V,args:z.transformArguments(...V),options:K}},d90=function(z){return z.flat().map((V)=>{return typeof V==="number"||V instanceof Date?V.toString():V})},m90=function(z,V,K){if(!z.transformReply)return V;return z.transformReply(V,K)},c90=function(z,V,K){const J=[V.IS_READ_ONLY?"FCALL_RO":"FCALL",z];if(V.NUMBER_OF_KEYS!==void 0)J.push(V.NUMBER_OF_KEYS.toString());return J.push(...K),J};Object.defineProperty(BW,"__esModule",{value:!0});BW.fCallArguments=BW.transformCommandReply=BW.transformLegacyCommandArguments=BW.transformCommandArguments=BW.attachExtensions=BW.attachCommands=void 0;var $90=k9();BW.attachCommands=jW;BW.attachExtensions=g90;BW.transformCommandArguments=u90;BW.transformLegacyCommandArguments=d90;BW.transformCommandReply=m90;BW.fCallArguments=c90});var Y9=Q((OW)=>{Object.defineProperty(OW,"__esModule",{value:!0});var o90=Y5(),t90=d8();class GW{constructor(){Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"scriptsInUse",{enumerable:!0,configurable:!0,writable:!0,value:new Set})}static generateChainId(){return Symbol("RedisMultiCommand Chain Id")}addCommand(z,V){this.queue.push({args:z,transformReply:V})}addFunction(z,V,K){const J=(0,o90.fCallArguments)(z,V,V.transformArguments(...K));return this.queue.push({args:J,transformReply:V.transformReply}),J}addScript(z,V){const K=[];if(this.scriptsInUse.has(z.SHA1))K.push("EVALSHA",z.SHA1);else this.scriptsInUse.add(z.SHA1),K.push("EVAL",z.SCRIPT);if(z.NUMBER_OF_KEYS!==void 0)K.push(z.NUMBER_OF_KEYS.toString());const J=z.transformArguments(...V);if(K.push(...J),J.preserve)K.preserve=J.preserve;return this.addCommand(K,z.transformReply),K}handleExecReplies(z){const V=z[z.length-1];if(V===null)throw new t90.WatchError;return this.transformReplies(V)}transformReplies(z){return z.map((V,K)=>{const{transformReply:J,args:Z}=this.queue[K];return J?J(V,Z.preserve):V})}}OW.default=GW});var NW=Q((p4)=>{var FW=p4&&p4.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},W6=p4&&p4.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},cz,Q8,n7,i7,LW,IW;Object.defineProperty(p4,"__esModule",{value:!0});var wW=L9(),XW=Y9(),pz=Y5();class H4{static extend(z){return(0,pz.attachExtensions)({BaseClass:H4,modulesExecutor:H4.prototype.commandsExecutor,modules:z?.modules,functionsExecutor:H4.prototype.functionsExecutor,functions:z?.functions,scriptsExecutor:H4.prototype.scriptsExecutor,scripts:z?.scripts})}constructor(z,V=!1){if(cz.add(this),Q8.set(this,new XW.default),n7.set(this,void 0),Object.defineProperty(this,"v4",{enumerable:!0,configurable:!0,writable:!0,value:{}}),i7.set(this,void 0),Object.defineProperty(this,"select",{enumerable:!0,configurable:!0,writable:!0,value:this.SELECT}),Object.defineProperty(this,"EXEC",{enumerable:!0,configurable:!0,writable:!0,value:this.exec}),FW(this,n7,z,"f"),V)W6(this,cz,"m",LW).call(this)}commandsExecutor(z,V){return this.addCommand(z.transformArguments(...V),z.transformReply)}SELECT(z,V){return FW(this,i7,z,"f"),this.addCommand(["SELECT",z.toString()],V)}addCommand(z,V){return W6(this,Q8,"f").addCommand(z,V),this}functionsExecutor(z,V,K){return W6(this,Q8,"f").addFunction(K,z,V),this}scriptsExecutor(z,V){return W6(this,Q8,"f").addScript(z,V),this}async exec(z=!1){if(z)return this.execAsPipeline();return W6(this,Q8,"f").handleExecReplies(await W6(this,n7,"f").call(this,W6(this,Q8,"f").queue,W6(this,i7,"f"),XW.default.generateChainId()))}async execAsPipeline(){if(W6(this,Q8,"f").queue.length===0)return[];return W6(this,Q8,"f").transformReplies(await W6(this,n7,"f").call(this,W6(this,Q8,"f").queue,W6(this,i7,"f")))}}Q8=new WeakMap,n7=new WeakMap,i7=new WeakMap,cz=new WeakSet,LW=function z(){var V,K;this.v4.addCommand=this.addCommand.bind(this),this.addCommand=(...J)=>{return W6(this,Q8,"f").addCommand((0,pz.transformLegacyCommandArguments)(J)),this},this.v4.exec=this.exec.bind(this),this.exec=(J)=>{this.v4.exec().then((Z)=>{if(!J)return;J(null,Z)}).catch((Z)=>{if(!J)return;J(Z)})};for(let[J,Z]of Object.entries(wW.default))W6(this,cz,"m",IW).call(this,J,Z),(V=this)[K=J.toLowerCase()]??(V[K]=this[J])},IW=function z(V,K){this.v4[V]=this[V].bind(this.v4),this[V]=K&&K.TRANSFORM_LEGACY_REPLY&&K.transformReply?(...J)=>{return W6(this,Q8,"f").addCommand([V,...(0,pz.transformLegacyCommandArguments)(J)],K.transformReply),this}:(...J)=>this.addCommand(V,...J)};p4.default=H4;(0,pz.attachCommands)({BaseClass:H4,commands:wW.default,executor:H4.prototype.commandsExecutor})});var PW=Q((_E0,qW)=>{qW.exports=function(z){if(typeof z.create!=="function")throw new TypeError("factory.create must be a function");if(typeof z.destroy!=="function")throw new TypeError("factory.destroy must be a function");if(typeof z.validate!=="undefined"&&typeof z.validate!=="function")throw new TypeError("factory.validate must be a function")}});var EW=Q(($E0,AW)=>{class TW{constructor(){this.fifo=!0,this.priorityRange=1,this.testOnBorrow=!1,this.testOnReturn=!1,this.autostart=!0,this.evictionRunIntervalMillis=0,this.numTestsPerEvictionRun=3,this.softIdleTimeoutMillis=-1,this.idleTimeoutMillis=30000,this.acquireTimeoutMillis=null,this.destroyTimeoutMillis=null,this.maxWaitingClients=null,this.min=null,this.max=null,this.Promise=Promise}}AW.exports=TW});var hW=Q((gE0,CW)=>{var s90=EW();class vW{constructor(z){const V=new s90;if(z=z||{},this.fifo=typeof z.fifo==="boolean"?z.fifo:V.fifo,this.priorityRange=z.priorityRange||V.priorityRange,this.testOnBorrow=typeof z.testOnBorrow==="boolean"?z.testOnBorrow:V.testOnBorrow,this.testOnReturn=typeof z.testOnReturn==="boolean"?z.testOnReturn:V.testOnReturn,this.autostart=typeof z.autostart==="boolean"?z.autostart:V.autostart,z.acquireTimeoutMillis)this.acquireTimeoutMillis=parseInt(z.acquireTimeoutMillis,10);if(z.destroyTimeoutMillis)this.destroyTimeoutMillis=parseInt(z.destroyTimeoutMillis,10);if(z.maxWaitingClients!==void 0)this.maxWaitingClients=parseInt(z.maxWaitingClients,10);this.max=parseInt(z.max,10),this.min=parseInt(z.min,10),this.max=Math.max(isNaN(this.max)?1:this.max,1),this.min=Math.min(isNaN(this.min)?0:this.min,this.max),this.evictionRunIntervalMillis=z.evictionRunIntervalMillis||V.evictionRunIntervalMillis,this.numTestsPerEvictionRun=z.numTestsPerEvictionRun||V.numTestsPerEvictionRun,this.softIdleTimeoutMillis=z.softIdleTimeoutMillis||V.softIdleTimeoutMillis,this.idleTimeoutMillis=z.idleTimeoutMillis||V.idleTimeoutMillis,this.Promise=z.Promise!=null?z.Promise:V.Promise}}CW.exports=vW});var lz=Q((uE0,WW)=>{class h8{constructor(z){this._state=h8.PENDING,this._resolve=void 0,this._reject=void 0,this._promise=new z((V,K)=>{this._resolve=V,this._reject=K})}get state(){return this._state}get promise(){return this._promise}reject(z){if(this._state!==h8.PENDING)return;this._state=h8.REJECTED,this._reject(z)}resolve(z){if(this._state!==h8.PENDING)return;this._state=h8.FULFILLED,this._resolve(z)}}h8.PENDING="PENDING";h8.FULFILLED="FULFILLED";h8.REJECTED="REJECTED";WW.exports=h8});var bW=Q((dE0,YW)=>{class RW extends Error{constructor(z){super(z);if(this.name=this.constructor.name,this.message=z,typeof Error.captureStackTrace==="function")Error.captureStackTrace(this,this.constructor);else this.stack=new Error(z).stack}}class kW extends RW{constructor(z){super(z)}}YW.exports={TimeoutError:kW}});var xW=Q((mE0,fW)=>{var VJ0=function(z,V){return function K(){return z.apply(V,arguments)}},e90=lz(),zJ0=bW();class b9 extends e90{constructor(z,V){super(V);if(this._creationTimestamp=Date.now(),this._timeout=null,z!==void 0)this.setTimeout(z)}setTimeout(z){if(this._state!==b9.PENDING)return;const V=parseInt(z,10);if(isNaN(V)||V<=0)throw new Error("delay must be a positive int");const K=Date.now()-this._creationTimestamp;if(this._timeout)this.removeTimeout();this._timeout=setTimeout(VJ0(this._fireTimeout,this),Math.max(V-K,0))}removeTimeout(){if(this._timeout)clearTimeout(this._timeout);this._timeout=null}_fireTimeout(){this.reject(new zJ0.TimeoutError("ResourceRequest timed out"))}reject(z){this.removeTimeout(),super.reject(z)}resolve(z){this.removeTimeout(),super.resolve(z)}}fW.exports=b9});var _W=Q((cE0,yW)=>{var KJ0=lz();class SW extends KJ0{constructor(z,V){super(V);this._creationTimestamp=Date.now(),this.pooledResource=z}reject(){}}yW.exports=SW});var gW=Q((pE0,$W)=>{var JJ0={ALLOCATED:"ALLOCATED",IDLE:"IDLE",INVALID:"INVALID",RETURNING:"RETURNING",VALIDATION:"VALIDATION"};$W.exports=JJ0});var mW=Q((lE0,dW)=>{var l4=gW();class uW{constructor(z){this.creationTime=Date.now(),this.lastReturnTime=null,this.lastBorrowTime=null,this.lastIdleTime=null,this.obj=z,this.state=l4.IDLE}allocate(){this.lastBorrowTime=Date.now(),this.state=l4.ALLOCATED}deallocate(){this.lastReturnTime=Date.now(),this.state=l4.IDLE}invalidate(){this.state=l4.INVALID}test(){this.state=l4.VALIDATION}idle(){this.lastIdleTime=Date.now(),this.state=l4.IDLE}returning(){this.state=l4.RETURNING}}dW.exports=uW});var f9=Q((nE0,pW)=>{class cW{evict(z,V,K){const J=Date.now()-V.lastIdleTime;if(z.softIdleTimeoutMillis>0&&z.softIdleTimeoutMillis<J&&z.min<K)return!0;if(z.idleTimeoutMillis<J)return!0;return!1}}pW.exports=cW});var x9=Q((iE0,nW)=>{class lW{constructor(){this.head=null,this.tail=null,this.length=0}insertBeginning(z){if(this.head===null)this.head=z,this.tail=z,z.prev=null,z.next=null,this.length++;else this.insertBefore(this.head,z)}insertEnd(z){if(this.tail===null)this.insertBeginning(z);else this.insertAfter(this.tail,z)}insertAfter(z,V){if(V.prev=z,V.next=z.next,z.next===null)this.tail=V;else z.next.prev=V;z.next=V,this.length++}insertBefore(z,V){if(V.prev=z.prev,V.next=z,z.prev===null)this.head=V;else z.prev.next=V;z.prev=V,this.length++}remove(z){if(z.prev===null)this.head=z.next;else z.prev.next=z.next;if(z.next===null)this.tail=z.prev;else z.next.prev=z.prev;z.prev=null,z.next=null,this.length--}static createNode(z){return{prev:null,next:null,data:z}}}nW.exports=lW});var oW=Q((aE0,aW)=>{class iW{constructor(z,V){this._list=z,this._direction=V===!0?"prev":"next",this._startPosition=V===!0?"tail":"head",this._started=!1,this._cursor=null,this._done=!1}_start(){this._cursor=this._list[this._startPosition],this._started=!0}_advanceCursor(){if(this._started===!1){this._started=!0,this._cursor=this._list[this._startPosition];return}this._cursor=this._cursor[this._direction]}reset(){this._done=!1,this._started=!1,this._cursor=null}remove(){if(this._started===!1||this._done===!0||this._isCursorDetached())return!1;this._list.remove(this._cursor)}next(){if(this._done===!0)return{done:!0};if(this._advanceCursor(),this._cursor===null||this._isCursorDetached())return this._done=!0,{done:!0};return{value:this._cursor,done:!1}}_isCursorDetached(){return this._cursor.prev===null&&this._cursor.next===null&&this._list.tail!==this._cursor&&this._list.head!==this._cursor}}aW.exports=iW});var S9=Q((oE0,rW)=>{var ZJ0=oW();class tW extends ZJ0{next(){const z=super.next();if(z.value)z.value=z.value.data;return z}}rW.exports=tW});var nz=Q((tE0,eW)=>{var y9=x9(),_9=S9();class sW{constructor(){this._list=new y9}shift(){if(this.length===0)return;const z=this._list.head;return this._list.remove(z),z.data}unshift(z){const V=y9.createNode(z);this._list.insertBeginning(V)}push(z){const V=y9.createNode(z);this._list.insertEnd(V)}pop(){if(this.length===0)return;const z=this._list.tail;return this._list.remove(z),z.data}[Symbol.iterator](){return new _9(this._list)}iterator(){return new _9(this._list)}reverseIterator(){return new _9(this._list,!0)}get head(){if(this.length===0)return;return this._list.head.data}get tail(){if(this.length===0)return;return this._list.tail.data}get length(){return this._list.length}}eW.exports=sW});var KR=Q((rE0,VR)=>{var UJ0=x9(),DJ0=nz();class zR extends DJ0{push(z){const V=UJ0.createNode(z);z.promise.catch(this._createTimeoutRejectionHandler(V)),this._list.insertEnd(V)}_createTimeoutRejectionHandler(z){return(V)=>{if(V.name==="TimeoutError")this._list.remove(z)}}}VR.exports=zR});var $9=Q((sE0,ZR)=>{var HJ0=KR();class JR{constructor(z){this._size=Math.max(+z|0,1),this._slots=[];for(let V=0;V<this._size;V++)this._slots.push(new HJ0)}get length(){let z=0;for(let V=0,K=this._slots.length;V<K;V++)z+=this._slots[V].length;return z}enqueue(z,V){if(V=V&&+V|0||0,V){if(V<0||V>=this._size)V=this._size-1}this._slots[V].push(z)}dequeue(){for(let z=0,V=this._slots.length;z<V;z+=1)if(this._slots[z].length)return this._slots[z].shift();return}get head(){for(let z=0,V=this._slots.length;z<V;z+=1)if(this._slots[z].length>0)return this._slots[z].head;return}get tail(){for(let z=this._slots.length-1;z>=0;z--)if(this._slots[z].length>0)return this._slots[z].tail;return}}ZR.exports=JR});var DR=Q((QJ0)=>{var UR=function(){};QJ0.reflector=function(z){return z.then(UR,UR)}});var jR=Q((Zv0,QR)=>{var BJ0=import.meta.require("events").EventEmitter,MJ0=PW(),GJ0=hW(),OJ0=xW(),FJ0=_W(),IJ0=mW(),zv0=f9(),Vv0=nz(),XJ0=lz(),Kv0=$9(),Jv0=S9(),a7=DR().reflector;class HR extends BJ0{constructor(z,V,K,J,Z){super();if(MJ0(J),this._config=new GJ0(Z),this._Promise=this._config.Promise,this._factory=J,this._draining=!1,this._started=!1,this._waitingClientsQueue=new K(this._config.priorityRange),this._factoryCreateOperations=new Set,this._factoryDestroyOperations=new Set,this._availableObjects=new V,this._testOnBorrowResources=new Set,this._testOnReturnResources=new Set,this._validationOperations=new Set,this._allObjects=new Set,this._resourceLoans=new Map,this._evictionIterator=this._availableObjects.iterator(),this._evictor=new z,this._scheduledEviction=null,this._config.autostart===!0)this.start()}_destroy(z){z.invalidate(),this._allObjects.delete(z);const V=this._factory.destroy(z.obj),K=this._config.destroyTimeoutMillis?this._Promise.resolve(this._applyDestroyTimeout(V)):this._Promise.resolve(V);this._trackOperation(K,this._factoryDestroyOperations).catch((J)=>{this.emit("factoryDestroyError",J)}),this._ensureMinimum()}_applyDestroyTimeout(z){const V=new this._Promise((K,J)=>{setTimeout(()=>{J(new Error("destroy timed out"))},this._config.destroyTimeoutMillis).unref()});return this._Promise.race([V,z])}_testOnBorrow(){if(this._availableObjects.length<1)return!1;const z=this._availableObjects.shift();z.test(),this._testOnBorrowResources.add(z);const V=this._factory.validate(z.obj),K=this._Promise.resolve(V);return this._trackOperation(K,this._validationOperations).then((J)=>{if(this._testOnBorrowResources.delete(z),J===!1){z.invalidate(),this._destroy(z),this._dispense();return}this._dispatchPooledResourceToNextWaitingClient(z)}),!0}_dispatchResource(){if(this._availableObjects.length<1)return!1;const z=this._availableObjects.shift();return this._dispatchPooledResourceToNextWaitingClient(z),!1}_dispense(){const z=this._waitingClientsQueue.length;if(z<1)return;const V=z-this._potentiallyAllocableResourceCount,K=Math.min(this.spareResourceCapacity,V);for(let J=0;K>J;J++)this._createResource();if(this._config.testOnBorrow===!0){const J=z-this._testOnBorrowResources.size,Z=Math.min(this._availableObjects.length,J);for(let D=0;Z>D;D++)this._testOnBorrow()}if(this._config.testOnBorrow===!1){const J=Math.min(this._availableObjects.length,z);for(let Z=0;J>Z;Z++)this._dispatchResource()}}_dispatchPooledResourceToNextWaitingClient(z){const V=this._waitingClientsQueue.dequeue();if(V===void 0||V.state!==XJ0.PENDING)return this._addPooledResourceToAvailableObjects(z),!1;const K=new FJ0(z,this._Promise);return this._resourceLoans.set(z.obj,K),z.allocate(),V.resolve(z.obj),!0}_trackOperation(z,V){return V.add(z),z.then((K)=>{return V.delete(z),this._Promise.resolve(K)},(K)=>{return V.delete(z),this._Promise.reject(K)})}_createResource(){const z=this._factory.create(),V=this._Promise.resolve(z).then((K)=>{const J=new IJ0(K);this._allObjects.add(J),this._addPooledResourceToAvailableObjects(J)});this._trackOperation(V,this._factoryCreateOperations).then(()=>{return this._dispense(),null}).catch((K)=>{this.emit("factoryCreateError",K),this._dispense()})}_ensureMinimum(){if(this._draining===!0)return;const z=this._config.min-this._count;for(let V=0;V<z;V++)this._createResource()}_evict(){const z=Math.min(this._config.numTestsPerEvictionRun,this._availableObjects.length),V={softIdleTimeoutMillis:this._config.softIdleTimeoutMillis,idleTimeoutMillis:this._config.idleTimeoutMillis,min:this._config.min};for(let K=0;K<z;){const J=this._evictionIterator.next();if(J.done===!0&&this._availableObjects.length<1){this._evictionIterator.reset();return}if(J.done===!0&&this._availableObjects.length>0){this._evictionIterator.reset();continue}const Z=J.value,D=this._evictor.evict(V,Z,this._availableObjects.length);if(K++,D===!0)this._evictionIterator.remove(),this._destroy(Z)}}_scheduleEvictorRun(){if(this._config.evictionRunIntervalMillis>0)this._scheduledEviction=setTimeout(()=>{this._evict(),this._scheduleEvictorRun()},this._config.evictionRunIntervalMillis).unref()}_descheduleEvictorRun(){if(this._scheduledEviction)clearTimeout(this._scheduledEviction);this._scheduledEviction=null}start(){if(this._draining===!0)return;if(this._started===!0)return;this._started=!0,this._scheduleEvictorRun(),this._ensureMinimum()}acquire(z){if(this._started===!1&&this._config.autostart===!1)this.start();if(this._draining)return this._Promise.reject(new Error("pool is draining and cannot accept work"));if(this.spareResourceCapacity<1&&this._availableObjects.length<1&&this._config.maxWaitingClients!==void 0&&this._waitingClientsQueue.length>=this._config.maxWaitingClients)return this._Promise.reject(new Error("max waitingClients count exceeded"));const V=new OJ0(this._config.acquireTimeoutMillis,this._Promise);return this._waitingClientsQueue.enqueue(V,z),this._dispense(),V.promise}use(z,V){return this.acquire(V).then((K)=>{return z(K).then((J)=>{return this.release(K),J},(J)=>{throw this.destroy(K),J})})}isBorrowedResource(z){return this._resourceLoans.has(z)}release(z){const V=this._resourceLoans.get(z);if(V===void 0)return this._Promise.reject(new Error("Resource not currently part of this pool"));this._resourceLoans.delete(z),V.resolve();const K=V.pooledResource;return K.deallocate(),this._addPooledResourceToAvailableObjects(K),this._dispense(),this._Promise.resolve()}destroy(z){const V=this._resourceLoans.get(z);if(V===void 0)return this._Promise.reject(new Error("Resource not currently part of this pool"));this._resourceLoans.delete(z),V.resolve();const K=V.pooledResource;return K.deallocate(),this._destroy(K),this._dispense(),this._Promise.resolve()}_addPooledResourceToAvailableObjects(z){if(z.idle(),this._config.fifo===!0)this._availableObjects.push(z);else this._availableObjects.unshift(z)}drain(){return this._draining=!0,this.__allResourceRequestsSettled().then(()=>{return this.__allResourcesReturned()}).then(()=>{this._descheduleEvictorRun()})}__allResourceRequestsSettled(){if(this._waitingClientsQueue.length>0)return a7(this._waitingClientsQueue.tail.promise);return this._Promise.resolve()}__allResourcesReturned(){const z=Array.from(this._resourceLoans.values()).map((V)=>V.promise).map(a7);return this._Promise.all(z)}clear(){const z=Array.from(this._factoryCreateOperations).map(a7);return this._Promise.all(z).then(()=>{for(let K of this._availableObjects)this._destroy(K);const V=Array.from(this._factoryDestroyOperations).map(a7);return a7(this._Promise.all(V))})}ready(){return new this._Promise((z)=>{const V=()=>{if(this.available>=this.min)z();else setTimeout(V,100)};V()})}get _potentiallyAllocableResourceCount(){return this._availableObjects.length+this._testOnBorrowResources.size+this._testOnReturnResources.size+this._factoryCreateOperations.size}get _count(){return this._allObjects.size+this._factoryCreateOperations.size}get spareResourceCapacity(){return this._config.max-(this._allObjects.size+this._factoryCreateOperations.size)}get size(){return this._count}get available(){return this._availableObjects.length}get borrowed(){return this._resourceLoans.size}get pending(){return this._waitingClientsQueue.length}get max(){return this._config.max}get min(){return this._config.min}}QR.exports=HR});var IR=Q((Uv0,FR)=>{var BR=jR(),MR=nz(),GR=$9(),OR=f9();FR.exports={Pool:BR,Deque:MR,PriorityQueue:GR,DefaultEvictor:OR,createPool:function(z,V){return new BR(OR,MR,GR,z,V)}}});var c9=Q((i4)=>{var J0=i4&&i4.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},R8=i4&&i4.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},X0,p8,z6,J6,_0,k8,t7,n4,wR,NR,qR,u9,PR,g9,m6,j4,XR,Y8,c8,Q4,d9,m9;Object.defineProperty(i4,"__esModule",{value:!0});var o7=L9(),LJ0=mh(),wJ0=ZW(),TR=NW(),NJ0=import.meta.require("events"),LR=k9(),W8=Y5(),qJ0=IR(),r7=d8(),PJ0=import.meta.require("url"),b5=gz();class f5 extends NJ0.EventEmitter{static commandOptions(z){return(0,LR.commandOptions)(z)}static extend(z){const V=(0,W8.attachExtensions)({BaseClass:p8,modulesExecutor:p8.prototype.commandsExecutor,modules:z?.modules,functionsExecutor:p8.prototype.functionsExecuter,functions:z?.functions,scriptsExecutor:p8.prototype.scriptsExecuter,scripts:z?.scripts});if(V!==p8)V.prototype.Multi=TR.default.extend(z);return V}static create(z){return new(p8.extend(z))(z)}static parseURL(z){const{hostname:V,port:K,protocol:J,username:Z,password:D,pathname:U}=new PJ0.URL(z),j={socket:{host:V}};if(J==="rediss:")j.socket.tls=!0;else if(J!=="redis:")throw new TypeError("Invalid protocol");if(K)j.socket.port=Number(K);if(Z)j.username=decodeURIComponent(Z);if(D)j.password=decodeURIComponent(D);if(U.length>1){const B=Number(U.substring(1));if(isNaN(B))throw new TypeError("Invalid pathname");j.database=B}return j}get options(){return J0(this,z6,"f")}get isOpen(){return J0(this,J6,"f").isOpen}get isReady(){return J0(this,J6,"f").isReady}get isPubSubActive(){return J0(this,_0,"f").isPubSubActive}get v4(){if(!J0(this,z6,"f")?.legacyMode)throw new Error('the client is not in "legacy mode"');return J0(this,t7,"f")}constructor(z){super();X0.add(this),Object.defineProperty(this,"commandOptions",{enumerable:!0,configurable:!0,writable:!0,value:p8.commandOptions}),z6.set(this,void 0),J6.set(this,void 0),_0.set(this,void 0),k8.set(this,void 0),t7.set(this,{}),n4.set(this,0),j4.set(this,void 0),Object.defineProperty(this,"select",{enumerable:!0,configurable:!0,writable:!0,value:this.SELECT}),Object.defineProperty(this,"subscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.SUBSCRIBE}),Object.defineProperty(this,"unsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.UNSUBSCRIBE}),Object.defineProperty(this,"pSubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.PSUBSCRIBE}),Object.defineProperty(this,"pUnsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.PUNSUBSCRIBE}),Object.defineProperty(this,"sSubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.SSUBSCRIBE}),Object.defineProperty(this,"sUnsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.SUNSUBSCRIBE}),Object.defineProperty(this,"quit",{enumerable:!0,configurable:!0,writable:!0,value:this.QUIT}),Object.defineProperty(this,"multi",{enumerable:!0,configurable:!0,writable:!0,value:this.MULTI}),R8(this,z6,J0(this,X0,"m",wR).call(this,z),"f"),R8(this,_0,J0(this,X0,"m",NR).call(this),"f"),R8(this,J6,J0(this,X0,"m",qR).call(this),"f"),R8(this,k8,J0(this,X0,"m",u9).call(this),"f"),J0(this,X0,"m",PR).call(this)}duplicate(z){return new(Object.getPrototypeOf(this)).constructor({...J0(this,z6,"f"),...z})}async connect(){return R8(this,k8,J0(this,k8,"f")??J0(this,X0,"m",u9).call(this),"f"),await J0(this,J6,"f").connect(),this}async commandsExecutor(z,V){const{args:K,options:J}=(0,W8.transformCommandArguments)(z,V);return(0,W8.transformCommandReply)(z,await J0(this,X0,"m",Y8).call(this,K,J),K.preserve)}sendCommand(z,V){return J0(this,X0,"m",Y8).call(this,z,V)}async functionsExecuter(z,V,K){const{args:J,options:Z}=(0,W8.transformCommandArguments)(z,V);return(0,W8.transformCommandReply)(z,await this.executeFunction(K,z,J,Z),J.preserve)}executeFunction(z,V,K,J){return J0(this,X0,"m",Y8).call(this,(0,W8.fCallArguments)(z,V,K),J)}async scriptsExecuter(z,V){const{args:K,options:J}=(0,W8.transformCommandArguments)(z,V);return(0,W8.transformCommandReply)(z,await this.executeScript(z,K,J),K.preserve)}async executeScript(z,V,K){const J=["EVALSHA",z.SHA1];if(z.NUMBER_OF_KEYS!==void 0)J.push(z.NUMBER_OF_KEYS.toString());J.push(...V);try{return await J0(this,X0,"m",Y8).call(this,J,K)}catch(Z){if(!Z?.message?.startsWith?.("NOSCRIPT"))throw Z;return J[0]="EVAL",J[1]=z.SCRIPT,J0(this,X0,"m",Y8).call(this,J,K)}}async SELECT(z,V){if(!(0,LR.isCommandOptions)(z))V=z,z=null;await J0(this,X0,"m",Y8).call(this,["SELECT",V.toString()],z),R8(this,n4,V,"f")}SUBSCRIBE(z,V,K){return J0(this,X0,"m",c8).call(this,J0(this,_0,"f").subscribe(b5.PubSubType.CHANNELS,z,V,K))}UNSUBSCRIBE(z,V,K){return J0(this,X0,"m",c8).call(this,J0(this,_0,"f").unsubscribe(b5.PubSubType.CHANNELS,z,V,K))}PSUBSCRIBE(z,V,K){return J0(this,X0,"m",c8).call(this,J0(this,_0,"f").subscribe(b5.PubSubType.PATTERNS,z,V,K))}PUNSUBSCRIBE(z,V,K){return J0(this,X0,"m",c8).call(this,J0(this,_0,"f").unsubscribe(b5.PubSubType.PATTERNS,z,V,K))}SSUBSCRIBE(z,V,K){return J0(this,X0,"m",c8).call(this,J0(this,_0,"f").subscribe(b5.PubSubType.SHARDED,z,V,K))}SUNSUBSCRIBE(z,V,K){return J0(this,X0,"m",c8).call(this,J0(this,_0,"f").unsubscribe(b5.PubSubType.SHARDED,z,V,K))}getPubSubListeners(z){return J0(this,_0,"f").getPubSubListeners(z)}extendPubSubChannelListeners(z,V,K){return J0(this,X0,"m",c8).call(this,J0(this,_0,"f").extendPubSubChannelListeners(z,V,K))}extendPubSubListeners(z,V){return J0(this,X0,"m",c8).call(this,J0(this,_0,"f").extendPubSubListeners(z,V))}QUIT(){return J0(this,J6,"f").quit(async()=>{if(J0(this,j4,"f"))clearTimeout(J0(this,j4,"f"));const z=J0(this,_0,"f").addCommand(["QUIT"]);J0(this,X0,"m",Q4).call(this);const[V]=await Promise.all([z,J0(this,X0,"m",m9).call(this)]);return V})}executeIsolated(z){if(!J0(this,k8,"f"))return Promise.reject(new r7.ClientClosedError);return J0(this,k8,"f").use(z)}MULTI(){return new this.Multi(this.multiExecutor.bind(this),J0(this,z6,"f")?.legacyMode)}async multiExecutor(z,V,K){if(!J0(this,J6,"f").isOpen)return Promise.reject(new r7.ClientClosedError);const J=K?Promise.all([J0(this,_0,"f").addCommand(["MULTI"],{chainId:K}),J0(this,X0,"m",d9).call(this,z,K),J0(this,_0,"f").addCommand(["EXEC"],{chainId:K})]):J0(this,X0,"m",d9).call(this,z);J0(this,X0,"m",Q4).call(this);const Z=await J;if(V!==void 0)R8(this,n4,V,"f");return Z}async*scanIterator(z){let V=0;do{const K=await this.scan(V,z);V=K.cursor;for(let J of K.keys)yield J}while(V!==0)}async*hScanIterator(z,V){let K=0;do{const J=await this.hScan(z,K,V);K=J.cursor;for(let Z of J.tuples)yield Z}while(K!==0)}async*sScanIterator(z,V){let K=0;do{const J=await this.sScan(z,K,V);K=J.cursor;for(let Z of J.members)yield Z}while(K!==0)}async*zScanIterator(z,V){let K=0;do{const J=await this.zScan(z,K,V);K=J.cursor;for(let Z of J.members)yield Z}while(K!==0)}async disconnect(){if(J0(this,j4,"f"))clearTimeout(J0(this,j4,"f"));J0(this,_0,"f").flushAll(new r7.DisconnectsClientError),J0(this,J6,"f").disconnect(),await J0(this,X0,"m",m9).call(this)}ref(){J0(this,J6,"f").ref()}unref(){J0(this,J6,"f").unref()}}p8=f5,z6=new WeakMap,J6=new WeakMap,_0=new WeakMap,k8=new WeakMap,t7=new WeakMap,n4=new WeakMap,j4=new WeakMap,X0=new WeakSet,wR=function z(V){if(V?.url){const K=p8.parseURL(V.url);if(V.socket)K.socket=Object.assign(V.socket,K.socket);Object.assign(V,K)}if(V?.database)R8(this,n4,V.database,"f");return V},NR=function z(){return new wJ0.default(J0(this,z6,"f")?.commandsQueueMaxLength,(V,K)=>this.emit("sharded-channel-moved",V,K))},qR=function z(){const V=async()=>{const K=[];if(J0(this,n4,"f")!==0)K.push(J0(this,_0,"f").addCommand(["SELECT",J0(this,n4,"f").toString()],{asap:!0}));if(J0(this,z6,"f")?.readonly)K.push(J0(this,_0,"f").addCommand(o7.default.READONLY.transformArguments(),{asap:!0}));if(J0(this,z6,"f")?.name)K.push(J0(this,_0,"f").addCommand(o7.default.CLIENT_SETNAME.transformArguments(J0(this,z6,"f").name),{asap:!0}));if(J0(this,z6,"f")?.username||J0(this,z6,"f")?.password)K.push(J0(this,_0,"f").addCommand(o7.default.AUTH.transformArguments({username:J0(this,z6,"f").username,password:J0(this,z6,"f").password??""}),{asap:!0}));const J=J0(this,_0,"f").resubscribe();if(J)K.push(J);if(K.length)J0(this,X0,"m",Q4).call(this,!0),await Promise.all(K)};return new LJ0.default(V,J0(this,z6,"f")?.socket).on("data",(K)=>J0(this,_0,"f").onReplyChunk(K)).on("error",(K)=>{if(this.emit("error",K),J0(this,J6,"f").isOpen&&!J0(this,z6,"f")?.disableOfflineQueue)J0(this,_0,"f").flushWaitingForReply(K);else J0(this,_0,"f").flushAll(K)}).on("connect",()=>{this.emit("connect")}).on("ready",()=>{this.emit("ready"),J0(this,X0,"m",XR).call(this),J0(this,X0,"m",Q4).call(this)}).on("reconnecting",()=>this.emit("reconnecting")).on("drain",()=>J0(this,X0,"m",Q4).call(this)).on("end",()=>this.emit("end"))},u9=function z(){return(0,qJ0.createPool)({create:async()=>{const V=this.duplicate({isolationPoolOptions:void 0}).on("error",(K)=>this.emit("error",K));return await V.connect(),V},destroy:(V)=>V.disconnect()},J0(this,z6,"f")?.isolationPoolOptions)},PR=function z(){var V,K;if(!J0(this,z6,"f")?.legacyMode)return;J0(this,t7,"f").sendCommand=J0(this,X0,"m",Y8).bind(this),this.sendCommand=(...J)=>{const Z=J0(this,X0,"m",g9).call(this,...J);if(Z)Z.promise.then((D)=>Z.callback(null,D)).catch((D)=>Z.callback(D))};for(let[J,Z]of Object.entries(o7.default))J0(this,X0,"m",m6).call(this,J,Z),(V=this)[K=J.toLowerCase()]??(V[K]=this[J]);J0(this,X0,"m",m6).call(this,"SELECT"),J0(this,X0,"m",m6).call(this,"select"),J0(this,X0,"m",m6).call(this,"SUBSCRIBE"),J0(this,X0,"m",m6).call(this,"subscribe"),J0(this,X0,"m",m6).call(this,"PSUBSCRIBE"),J0(this,X0,"m",m6).call(this,"pSubscribe"),J0(this,X0,"m",m6).call(this,"UNSUBSCRIBE"),J0(this,X0,"m",m6).call(this,"unsubscribe"),J0(this,X0,"m",m6).call(this,"PUNSUBSCRIBE"),J0(this,X0,"m",m6).call(this,"pUnsubscribe"),J0(this,X0,"m",m6).call(this,"QUIT"),J0(this,X0,"m",m6).call(this,"quit")},g9=function z(...V){const K=typeof V[V.length-1]==="function"?V.pop():void 0,J=J0(this,X0,"m",Y8).call(this,(0,W8.transformLegacyCommandArguments)(V));if(K)return{promise:J,callback:K};J.catch((Z)=>this.emit("error",Z))},m6=function z(V,K){J0(this,t7,"f")[V]=this[V].bind(this),this[V]=K&&K.TRANSFORM_LEGACY_REPLY&&K.transformReply?(...J)=>{const Z=J0(this,X0,"m",g9).call(this,V,...J);if(Z)Z.promise.then((D)=>Z.callback(null,K.transformReply(D))).catch((D)=>Z.callback(D))}:(...J)=>this.sendCommand(V,...J)},XR=function z(){if(!J0(this,z6,"f")?.pingInterval||!J0(this,J6,"f").isReady)return;clearTimeout(J0(this,j4,"f")),R8(this,j4,setTimeout(()=>{if(!J0(this,J6,"f").isReady)return;J0(this,X0,"m",Y8).call(this,["PING"]).then((V)=>this.emit("ping-interval",V)).catch((V)=>this.emit("error",V)).finally(()=>J0(this,X0,"m",z).call(this))},J0(this,z6,"f").pingInterval),"f")},Y8=function z(V,K){if(!J0(this,J6,"f").isOpen)return Promise.reject(new r7.ClientClosedError);else if(K?.isolated)return this.executeIsolated((Z)=>Z.sendCommand(V,{...K,isolated:!1}));else if(!J0(this,J6,"f").isReady&&J0(this,z6,"f")?.disableOfflineQueue)return Promise.reject(new r7.ClientOfflineError);const J=J0(this,_0,"f").addCommand(V,K);return J0(this,X0,"m",Q4).call(this),J},c8=function z(V){if(V===void 0)return Promise.resolve();return J0(this,X0,"m",Q4).call(this),V},Q4=function z(V=!1){if(J0(this,J6,"f").writableNeedDrain||!V&&!J0(this,J6,"f").isReady)return;J0(this,J6,"f").cork();while(!J0(this,J6,"f").writableNeedDrain){const K=J0(this,_0,"f").getCommandToSend();if(K===void 0)break;J0(this,J6,"f").writeCommand(K)}},d9=function z(V,K){return Promise.all(V.map(({args:J})=>J0(this,_0,"f").addCommand(J,{chainId:K})))},m9=async function z(){await J0(this,k8,"f").drain(),await J0(this,k8,"f").clear(),R8(this,k8,void 0,"f")};i4.default=f5;(0,W8.attachCommands)({BaseClass:f5,commands:o7.default,executor:f5.prototype.commandsExecutor});f5.prototype.Multi=TR.default});var vR=Q((Hv0,p9)=>{var AR=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],TJ0=function z(V){var K,J=0,Z=0,D=[],U=V.length;for(;J<U;J++)if(K=V.charCodeAt(J),K<128)D[Z++]=K;else if(K<2048)D[Z++]=K>>6|192,D[Z++]=K&63|128;else if((K&64512)===55296&&J+1<V.length&&(V.charCodeAt(J+1)&64512)===56320)K=65536+((K&1023)<<10)+(V.charCodeAt(++J)&1023),D[Z++]=K>>18|240,D[Z++]=K>>12&63|128,D[Z++]=K>>6&63|128,D[Z++]=K&63|128;else D[Z++]=K>>12|224,D[Z++]=K>>6&63|128,D[Z++]=K&63|128;return D},ER=p9.exports=function z(V){var K,J=0,Z=-1,D=0,U=0,j=typeof V==="string"?TJ0(V):V,B=j.length;while(J<B){if(K=j[J++],Z===-1){if(K===123)Z=J}else if(K!==125)U=AR[(K^U>>8)&255]^U<<8;else if(J-1!==Z)return U&16383;D=AR[(K^D>>8)&255]^D<<8}return D&16383};p9.exports.generateMulti=function z(V){var K=1,J=V.length,Z=ER(V[0]);while(K<J)if(ER(V[K++])!==Z)return-1;return Z}});var fR=Q((r4)=>{var F0=r4&&r4.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},b8=r4&&r4.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},W0,s7,e9,N6,e7,o4,t4,o9,l9,iz,CR,hR,n9,i9,az,t9,x5,RR,r9,a4,kR,S5,YR,s9,bR;Object.defineProperty(r4,"__esModule",{value:!0});var AJ0=c9(),EJ0=d8(),WR=import.meta.require("util"),l8=gz(),a9=vR();class zJ{get isOpen(){return F0(this,t4,"f")}constructor(z,V){W0.add(this),N6.set(this,void 0),e7.set(this,void 0),o4.set(this,void 0),Object.defineProperty(this,"slots",{enumerable:!0,configurable:!0,writable:!0,value:new Array(F0(s7,s7,"f",e9))}),Object.defineProperty(this,"shards",{enumerable:!0,configurable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"masters",{enumerable:!0,configurable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:new Array}),Object.defineProperty(this,"nodeByAddress",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"pubSubNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t4.set(this,!1),x5.set(this,void 0),S5.set(this,void 0),b8(this,N6,z,"f"),b8(this,e7,AJ0.default.extend(z),"f"),b8(this,o4,V,"f")}async connect(){if(F0(this,t4,"f"))throw new Error("Cluster already open");b8(this,t4,!0,"f");try{await F0(this,W0,"m",o9).call(this)}catch(z){throw b8(this,t4,!1,"f"),z}}nodeClient(z){return z.client??F0(this,W0,"m",t9).call(this,z)}async rediscover(z){return b8(this,x5,F0(this,x5,"f")??F0(this,W0,"m",RR).call(this,z).finally(()=>b8(this,x5,void 0,"f")),"f"),F0(this,x5,"f")}quit(){return F0(this,W0,"m",r9).call(this,(z)=>z.quit())}disconnect(){return F0(this,W0,"m",r9).call(this,(z)=>z.disconnect())}getClient(z,V){if(!z)return this.nodeClient(this.getRandomNode());const K=a9(z);if(!V)return this.nodeClient(this.slots[K].master);return this.nodeClient(this.getSlotRandomNode(K))}getRandomNode(){return b8(this,S5,F0(this,S5,"f")??F0(this,W0,"m",kR).call(this),"f"),F0(this,S5,"f").next().value}getSlotRandomNode(z){const V=this.slots[z];if(!V.replicas?.length)return V.master;return V.nodesIterator??(V.nodesIterator=F0(this,W0,"m",YR).call(this,V)),V.nodesIterator.next().value}getMasterByAddress(z){const V=this.nodeByAddress.get(z);if(!V)return;return this.nodeClient(V)}getPubSubClient(){return this.pubSubNode?this.pubSubNode.client:F0(this,W0,"m",s9).call(this)}async executeUnsubscribeCommand(z){const V=await this.getPubSubClient();if(await z(V),!V.isPubSubActive)await V.disconnect(),this.pubSubNode=void 0}getShardedPubSubClient(z){const{master:V}=this.slots[a9(z)];return V.pubSubClient??F0(this,W0,"m",bR).call(this,V)}async executeShardedUnsubscribeCommand(z,V){const{master:K}=this.slots[a9(z)];if(!K.pubSubClient)return Promise.resolve();const J=await K.pubSubClient;if(await V(J),!J.isPubSubActive)await J.disconnect(),K.pubSubClient=void 0}}s7=zJ,N6=new WeakMap,e7=new WeakMap,o4=new WeakMap,t4=new WeakMap,x5=new WeakMap,S5=new WeakMap,W0=new WeakSet,o9=async function z(){let V=Math.floor(Math.random()*F0(this,N6,"f").rootNodes.length);for(let K=V;K<F0(this,N6,"f").rootNodes.length;K++)if(await F0(this,W0,"m",iz).call(this,F0(this,N6,"f").rootNodes[K]))return;for(let K=0;K<V;K++)if(await F0(this,W0,"m",iz).call(this,F0(this,N6,"f").rootNodes[K]))return;throw new EJ0.RootNodesUnavailableError},l9=function z(){this.slots=new Array(F0(s7,s7,"f",e9)),this.shards=[],this.masters=[],this.replicas=[],b8(this,S5,void 0,"f")},iz=async function z(V){F0(this,W0,"m",l9).call(this);const K=new Set;try{const J=await F0(this,W0,"m",CR).call(this,V),Z=[],D=F0(this,N6,"f").minimizeConnections!==!0;for(let{from:U,to:j,master:B,replicas:H}of J){const G={master:F0(this,W0,"m",i9).call(this,B,!1,D,K,Z)};if(F0(this,N6,"f").useReplicas)G.replicas=H.map((A)=>F0(this,W0,"m",i9).call(this,A,!0,D,K,Z));this.shards.push(G);for(let A=U;A<=j;A++)this.slots[A]=G}if(this.pubSubNode&&!K.has(this.pubSubNode.address))if(WR.types.isPromise(this.pubSubNode.client))Z.push(this.pubSubNode.client.then((U)=>U.disconnect())),this.pubSubNode=void 0;else{Z.push(this.pubSubNode.client.disconnect());const U=this.pubSubNode.client.getPubSubListeners(l8.PubSubType.CHANNELS),j=this.pubSubNode.client.getPubSubListeners(l8.PubSubType.PATTERNS);if(U.size||j.size)Z.push(F0(this,W0,"m",s9).call(this,{[l8.PubSubType.CHANNELS]:U,[l8.PubSubType.PATTERNS]:j}))}for(let[U,j]of this.nodeByAddress.entries()){if(K.has(U))continue;if(j.client)Z.push(F0(this,W0,"m",a4).call(this,j.client,(H)=>H.disconnect()));const{pubSubClient:B}=j;if(B)Z.push(F0(this,W0,"m",a4).call(this,B,(H)=>H.disconnect()));this.nodeByAddress.delete(U)}return await Promise.all(Z),!0}catch(J){return F0(this,o4,"f").call(this,"error",J),!1}},CR=async function z(V){const K=new(F0(this,e7,"f"))(F0(this,W0,"m",n9).call(this,V,!0));K.on("error",(J)=>F0(this,o4,"f").call(this,"error",J)),await K.connect();try{return await K.clusterSlots()}finally{await K.disconnect()}},hR=function z(V){switch(typeof F0(this,N6,"f").nodeAddressMap){case"object":return F0(this,N6,"f").nodeAddressMap[V];case"function":return F0(this,N6,"f").nodeAddressMap(V)}},n9=function z(V,K){let J;if(F0(this,N6,"f").defaults){let Z;if(F0(this,N6,"f").defaults.socket)Z=V?.socket?{...F0(this,N6,"f").defaults.socket,...V.socket}:F0(this,N6,"f").defaults.socket;else Z=V?.socket;J={...F0(this,N6,"f").defaults,...V,socket:Z}}else J=V;if(K)J??(J={}),J.socket??(J.socket={}),J.socket.reconnectStrategy=!1;return J},i9=function z({id:V,ip:K,port:J},Z,D,U,j){const B=`${K}:${J}`;U.add(B);let H=this.nodeByAddress.get(B);if(!H){if(H={id:V,host:K,port:J,address:B,readonly:Z,client:void 0},D)j.push(F0(this,W0,"m",t9).call(this,H));this.nodeByAddress.set(B,H)}return(Z?this.replicas:this.masters).push(H),H},az=async function z(V,K=V.readonly){const J=new(F0(this,e7,"f"))(F0(this,W0,"m",n9).call(this,{socket:F0(this,W0,"m",hR).call(this,V.address)??{host:V.host,port:V.port},readonly:K}));return J.on("error",(Z)=>F0(this,o4,"f").call(this,"error",Z)),await J.connect(),J},t9=function z(V){const K=F0(this,W0,"m",az).call(this,V).then((J)=>{return V.client=J,J}).catch((J)=>{throw V.client=void 0,J});return V.client=K,K},RR=async function z(V){if(await F0(this,W0,"m",iz).call(this,V.options))return;return F0(this,W0,"m",o9).call(this)},r9=async function z(V){b8(this,t4,!1,"f");const K=[];for(let{master:J,replicas:Z}of this.shards){if(J.client)K.push(F0(this,W0,"m",a4).call(this,J.client,V));if(J.pubSubClient)K.push(F0(this,W0,"m",a4).call(this,J.pubSubClient,V));if(Z){for(let{client:D}of Z)if(D)K.push(F0(this,W0,"m",a4).call(this,D,V))}}if(this.pubSubNode)K.push(F0(this,W0,"m",a4).call(this,this.pubSubNode.client,V)),this.pubSubNode=void 0;F0(this,W0,"m",l9).call(this),this.nodeByAddress.clear(),await Promise.allSettled(K)},a4=function z(V,K){return WR.types.isPromise(V)?V.then(K):K(V)},kR=function*z(){let V=Math.floor(Math.random()*(this.masters.length+this.replicas.length));if(V<this.masters.length){do yield this.masters[V];while(++V<this.masters.length);for(let K of this.replicas)yield K}else{V-=this.masters.length;do yield this.replicas[V];while(++V<this.replicas.length)}while(!0){for(let K of this.masters)yield K;for(let K of this.replicas)yield K}},YR=function*z(V){let K=Math.floor(Math.random()*(1+V.replicas.length));if(K<V.replicas.length)do yield V.replicas[K];while(++K<V.replicas.length);while(!0){yield V.master;for(let J of V.replicas)yield J}},s9=async function z(V){const K=Math.floor(Math.random()*(this.masters.length+this.replicas.length)),J=K<this.masters.length?this.masters[K]:this.replicas[K-this.masters.length];return this.pubSubNode={address:J.address,client:F0(this,W0,"m",az).call(this,J,!0).then(async(Z)=>{if(V)await Promise.all([Z.extendPubSubListeners(l8.PubSubType.CHANNELS,V[l8.PubSubType.CHANNELS]),Z.extendPubSubListeners(l8.PubSubType.PATTERNS,V[l8.PubSubType.PATTERNS])]);return this.pubSubNode.client=Z,Z}).catch((Z)=>{throw this.pubSubNode=void 0,Z})},this.pubSubNode.client},bR=function z(V){const K=F0(this,W0,"m",az).call(this,V,!0).then((J)=>{return J.on("server-sunsubscribe",async(Z,D)=>{try{await this.rediscover(J),(await this.getShardedPubSubClient(Z)).extendPubSubChannelListeners(l8.PubSubType.SHARDED,Z,D)}catch(U){F0(this,o4,"f").call(this,"sharded-shannel-moved-error",U,Z,D)}}),V.pubSubClient=J,J}).catch((J)=>{throw V.pubSubClient=void 0,J});return V.pubSubClient=K,K};e9={value:16384};r4.default=zJ});var yR=Q((s4)=>{var y5=s4&&s4.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},y6=s4&&s4.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},n8,z3,s6;Object.defineProperty(s4,"__esModule",{value:!0});var vJ0=xz(),xR=Y9(),SR=Y5(),VJ=KJ();class B4{static extend(z){return(0,SR.attachExtensions)({BaseClass:B4,modulesExecutor:B4.prototype.commandsExecutor,modules:z?.modules,functionsExecutor:B4.prototype.functionsExecutor,functions:z?.functions,scriptsExecutor:B4.prototype.scriptsExecutor,scripts:z?.scripts})}constructor(z,V){n8.set(this,new xR.default),z3.set(this,void 0),s6.set(this,void 0),Object.defineProperty(this,"EXEC",{enumerable:!0,configurable:!0,writable:!0,value:this.exec}),y5(this,z3,z,"f"),y5(this,s6,V,"f")}commandsExecutor(z,V){const K=z.transformArguments(...V);return y5(this,s6,y6(this,s6,"f")??VJ.default.extractFirstKey(z,V,K),"f"),this.addCommand(void 0,K,z.transformReply)}addCommand(z,V,K){return y5(this,s6,y6(this,s6,"f")??z,"f"),y6(this,n8,"f").addCommand(V,K),this}functionsExecutor(z,V,K){const J=y6(this,n8,"f").addFunction(K,z,V);return y5(this,s6,y6(this,s6,"f")??VJ.default.extractFirstKey(z,V,J),"f"),this}scriptsExecutor(z,V){const K=y6(this,n8,"f").addScript(z,V);return y5(this,s6,y6(this,s6,"f")??VJ.default.extractFirstKey(z,V,K),"f"),this}async exec(z=!1){if(z)return this.execAsPipeline();return y6(this,n8,"f").handleExecReplies(await y6(this,z3,"f").call(this,y6(this,n8,"f").queue,y6(this,s6,"f"),xR.default.generateChainId()))}async execAsPipeline(){return y6(this,n8,"f").transformReplies(await y6(this,z3,"f").call(this,y6(this,n8,"f").queue,y6(this,s6,"f")))}}n8=new WeakMap,z3=new WeakMap,s6=new WeakMap;s4.default=B4;(0,SR.attachCommands)({BaseClass:B4,commands:vJ0.default,executor:B4.prototype.commandsExecutor})});var KJ=Q((e4)=>{var C0=e4&&e4.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},JJ=e4&&e4.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},_5,$5,f0,oz,V3;Object.defineProperty(e4,"__esModule",{value:!0});var CJ0=xz(),hJ0=fR(),M4=Y5(),WJ0=import.meta.require("events"),RJ0=yR(),_R=d8();class w8 extends WJ0.EventEmitter{static extractFirstKey(z,V,K){if(z.FIRST_KEY_INDEX===void 0)return;else if(typeof z.FIRST_KEY_INDEX==="number")return K[z.FIRST_KEY_INDEX];return z.FIRST_KEY_INDEX(...V)}static create(z){return new((0,M4.attachExtensions)({BaseClass:w8,modulesExecutor:w8.prototype.commandsExecutor,modules:z?.modules,functionsExecutor:w8.prototype.functionsExecutor,functions:z?.functions,scriptsExecutor:w8.prototype.scriptsExecutor,scripts:z?.scripts}))(z)}get slots(){return C0(this,f0,"f").slots}get shards(){return C0(this,f0,"f").shards}get masters(){return C0(this,f0,"f").masters}get replicas(){return C0(this,f0,"f").replicas}get nodeByAddress(){return C0(this,f0,"f").nodeByAddress}get pubSubNode(){return C0(this,f0,"f").pubSubNode}get isOpen(){return C0(this,f0,"f").isOpen}constructor(z){super();_5.add(this),$5.set(this,void 0),f0.set(this,void 0),oz.set(this,void 0),Object.defineProperty(this,"multi",{enumerable:!0,configurable:!0,writable:!0,value:this.MULTI}),Object.defineProperty(this,"subscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.SUBSCRIBE}),Object.defineProperty(this,"unsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.UNSUBSCRIBE}),Object.defineProperty(this,"pSubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.PSUBSCRIBE}),Object.defineProperty(this,"pUnsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.PUNSUBSCRIBE}),Object.defineProperty(this,"sSubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.SSUBSCRIBE}),Object.defineProperty(this,"sUnsubscribe",{enumerable:!0,configurable:!0,writable:!0,value:this.SUNSUBSCRIBE}),JJ(this,$5,z,"f"),JJ(this,f0,new hJ0.default(z,this.emit.bind(this)),"f"),JJ(this,oz,RJ0.default.extend(z),"f")}duplicate(z){return new(Object.getPrototypeOf(this)).constructor({...C0(this,$5,"f"),...z})}connect(){return C0(this,f0,"f").connect()}async commandsExecutor(z,V){const{jsArgs:K,args:J,options:Z}=(0,M4.transformCommandArguments)(z,V);return(0,M4.transformCommandReply)(z,await this.sendCommand(w8.extractFirstKey(z,K,J),z.IS_READ_ONLY,J,Z),J.preserve)}async sendCommand(z,V,K,J){return C0(this,_5,"m",V3).call(this,z,V,(Z)=>Z.sendCommand(K,J))}async functionsExecutor(z,V,K){const{args:J,options:Z}=(0,M4.transformCommandArguments)(z,V);return(0,M4.transformCommandReply)(z,await this.executeFunction(K,z,V,J,Z),J.preserve)}async executeFunction(z,V,K,J,Z){return C0(this,_5,"m",V3).call(this,w8.extractFirstKey(V,K,J),V.IS_READ_ONLY,(D)=>D.executeFunction(z,V,J,Z))}async scriptsExecutor(z,V){const{args:K,options:J}=(0,M4.transformCommandArguments)(z,V);return(0,M4.transformCommandReply)(z,await this.executeScript(z,V,K,J),K.preserve)}async executeScript(z,V,K,J){return C0(this,_5,"m",V3).call(this,w8.extractFirstKey(z,V,K),z.IS_READ_ONLY,(Z)=>Z.executeScript(z,K,J))}MULTI(z){return new(C0(this,oz,"f"))((V,K,J)=>{return C0(this,_5,"m",V3).call(this,K,!1,(Z)=>Z.multiExecutor(V,void 0,J))},z)}async SUBSCRIBE(z,V,K){return(await C0(this,f0,"f").getPubSubClient()).SUBSCRIBE(z,V,K)}async UNSUBSCRIBE(z,V,K){return C0(this,f0,"f").executeUnsubscribeCommand((J)=>J.UNSUBSCRIBE(z,V,K))}async PSUBSCRIBE(z,V,K){return(await C0(this,f0,"f").getPubSubClient()).PSUBSCRIBE(z,V,K)}async PUNSUBSCRIBE(z,V,K){return C0(this,f0,"f").executeUnsubscribeCommand((J)=>J.PUNSUBSCRIBE(z,V,K))}async SSUBSCRIBE(z,V,K){const J=C0(this,$5,"f").maxCommandRedirections??16,Z=Array.isArray(z)?z[0]:z;let D=await C0(this,f0,"f").getShardedPubSubClient(Z);for(let U=0;;U++)try{return await D.SSUBSCRIBE(z,V,K)}catch(j){if(++U>J||!(j instanceof _R.ErrorReply))throw j;if(j.message.startsWith("MOVED")){await C0(this,f0,"f").rediscover(D),D=await C0(this,f0,"f").getShardedPubSubClient(Z);continue}throw j}}SUNSUBSCRIBE(z,V,K){return C0(this,f0,"f").executeShardedUnsubscribeCommand(Array.isArray(z)?z[0]:z,(J)=>J.SUNSUBSCRIBE(z,V,K))}quit(){return C0(this,f0,"f").quit()}disconnect(){return C0(this,f0,"f").disconnect()}nodeClient(z){return C0(this,f0,"f").nodeClient(z)}getRandomNode(){return C0(this,f0,"f").getRandomNode()}getSlotRandomNode(z){return C0(this,f0,"f").getSlotRandomNode(z)}getMasters(){return this.masters}getSlotMaster(z){return this.slots[z].master}}$5=new WeakMap,f0=new WeakMap,oz=new WeakMap,_5=new WeakSet,V3=async function z(V,K,J){const Z=C0(this,$5,"f").maxCommandRedirections??16;let D=await C0(this,f0,"f").getClient(V,K);for(let U=0;;U++)try{return await J(D)}catch(j){if(++U>Z||!(j instanceof _R.ErrorReply))throw j;if(j.message.startsWith("ASK")){const B=j.message.substring(j.message.lastIndexOf(" ")+1);let H=await C0(this,f0,"f").getMasterByAddress(B);if(!H)await C0(this,f0,"f").rediscover(D),H=await C0(this,f0,"f").getMasterByAddress(B);if(!H)throw new Error(`Cannot find node ${B}`);await H.asking(),D=H;continue}else if(j.message.startsWith("MOVED")){await C0(this,f0,"f").rediscover(D),D=await C0(this,f0,"f").getClient(V,K);continue}throw j}};e4.default=w8;(0,M4.attachCommands)({BaseClass:w8,commands:CJ0.default,executor:w8.prototype.commandsExecutor})});var dR=Q((gR)=>{var YJ0=function(z){return{...z,SHA1:$R(z.SCRIPT)}},$R=function(z){return(0,kJ0.createHash)("sha1").update(z).digest("hex")};Object.defineProperty(gR,"__esModule",{value:!0});gR.scriptSha1=gR.defineScript=void 0;var kJ0=import.meta.require("crypto");gR.defineScript=YJ0;gR.scriptSha1=$R});var ZJ=Q((I6)=>{var fJ0=I6&&I6.__createBinding||(Object.create?function(z,V,K,J){if(J===void 0)J=K;var Z=Object.getOwnPropertyDescriptor(V,K);if(!Z||("get"in Z?!V.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return V[K]}};Object.defineProperty(z,J,Z)}:function(z,V,K,J){if(J===void 0)J=K;z[J]=V[K]}),xJ0=I6&&I6.__exportStar||function(z,V){for(var K in z)if(K!=="default"&&!Object.prototype.hasOwnProperty.call(V,K))fJ0(V,z,K)};Object.defineProperty(I6,"__esModule",{value:!0});I6.RedisFlushModes=I6.GeoReplyWith=I6.defineScript=I6.createCluster=I6.commandOptions=I6.createClient=void 0;var mR=c9(),SJ0=KJ();I6.createClient=mR.default.create;I6.commandOptions=mR.default.commandOptions;I6.createCluster=SJ0.default.create;var yJ0=dR();Object.defineProperty(I6,"defineScript",{enumerable:!0,get:function(){return yJ0.defineScript}});xJ0(d8(),I6);var _J0=m();Object.defineProperty(I6,"GeoReplyWith",{enumerable:!0,get:function(){return _J0.GeoReplyWith}});var $J0=O9();Object.defineProperty(I6,"RedisFlushModes",{enumerable:!0,get:function(){return $J0.RedisFlushModes}})});var cR=Q((UJ)=>{var gJ0=function(z,V){return["BF.ADD",z,V]};Object.defineProperty(UJ,"__esModule",{value:!0});UJ.transformReply=UJ.transformArguments=UJ.FIRST_KEY_INDEX=void 0;UJ.FIRST_KEY_INDEX=1;UJ.transformArguments=gJ0;var uJ0=m();Object.defineProperty(UJ,"transformReply",{enumerable:!0,get:function(){return uJ0.transformBooleanReply}})});var nR=Q((pR)=>{var pJ0=function(z){return["BF.CARD",z]};Object.defineProperty(pR,"__esModule",{value:!0});pR.transformArguments=pR.IS_READ_ONLY=pR.FIRST_KEY_INDEX=void 0;pR.FIRST_KEY_INDEX=1;pR.IS_READ_ONLY=!0;pR.transformArguments=pJ0});var iR=Q((DJ)=>{var iJ0=function(z,V){return["BF.EXISTS",z,V]};Object.defineProperty(DJ,"__esModule",{value:!0});DJ.transformReply=DJ.transformArguments=DJ.IS_READ_ONLY=DJ.FIRST_KEY_INDEX=void 0;DJ.FIRST_KEY_INDEX=1;DJ.IS_READ_ONLY=!0;DJ.transformArguments=iJ0;var aJ0=m();Object.defineProperty(DJ,"transformReply",{enumerable:!0,get:function(){return aJ0.transformBooleanReply}})});var tR=Q((aR)=>{var eJ0=function(z){return["BF.INFO",z]},zZ0=function(z){return{capacity:z[1],size:z[3],numberOfFilters:z[5],numberOfInsertedItems:z[7],expansionRate:z[9]}};Object.defineProperty(aR,"__esModule",{value:!0});aR.transformReply=aR.transformArguments=aR.IS_READ_ONLY=aR.FIRST_KEY_INDEX=void 0;aR.FIRST_KEY_INDEX=1;aR.IS_READ_ONLY=!0;aR.transformArguments=eJ0;aR.transformReply=zZ0});var rR=Q((HJ)=>{var UZ0=function(z,V,K){const J=["BF.INSERT",z];if(K?.CAPACITY)J.push("CAPACITY",K.CAPACITY.toString());if(K?.ERROR)J.push("ERROR",K.ERROR.toString());if(K?.EXPANSION)J.push("EXPANSION",K.EXPANSION.toString());if(K?.NOCREATE)J.push("NOCREATE");if(K?.NONSCALING)J.push("NONSCALING");return J.push("ITEMS"),(0,ZZ0.pushVerdictArguments)(J,V)};Object.defineProperty(HJ,"__esModule",{value:!0});HJ.transformReply=HJ.transformArguments=HJ.FIRST_KEY_INDEX=void 0;var ZZ0=m();HJ.FIRST_KEY_INDEX=1;HJ.transformArguments=UZ0;var DZ0=m();Object.defineProperty(HJ,"transformReply",{enumerable:!0,get:function(){return DZ0.transformBooleanArrayReply}})});var zk=Q((sR)=>{var BZ0=function(z,V,K){return["BF.LOADCHUNK",z,V.toString(),K]};Object.defineProperty(sR,"__esModule",{value:!0});sR.transformArguments=sR.FIRST_KEY_INDEX=void 0;sR.FIRST_KEY_INDEX=1;sR.transformArguments=BZ0});var Vk=Q((QJ)=>{var GZ0=function(z,V){return["BF.MADD",z,...V]};Object.defineProperty(QJ,"__esModule",{value:!0});QJ.transformReply=QJ.transformArguments=QJ.FIRST_KEY_INDEX=void 0;QJ.FIRST_KEY_INDEX=1;QJ.transformArguments=GZ0;var OZ0=m();Object.defineProperty(QJ,"transformReply",{enumerable:!0,get:function(){return OZ0.transformBooleanArrayReply}})});var Kk=Q((jJ)=>{var LZ0=function(z,V){return["BF.MEXISTS",z,...V]};Object.defineProperty(jJ,"__esModule",{value:!0});jJ.transformReply=jJ.transformArguments=jJ.IS_READ_ONLY=jJ.FIRST_KEY_INDEX=void 0;jJ.FIRST_KEY_INDEX=1;jJ.IS_READ_ONLY=!0;jJ.transformArguments=LZ0;var wZ0=m();Object.defineProperty(jJ,"transformReply",{enumerable:!0,get:function(){return wZ0.transformBooleanArrayReply}})});var Uk=Q((Jk)=>{var AZ0=function(z,V,K,J){const Z=["BF.RESERVE",z,V.toString(),K.toString()];if(J?.EXPANSION)Z.push("EXPANSION",J.EXPANSION.toString());if(J?.NONSCALING)Z.push("NONSCALING");return Z};Object.defineProperty(Jk,"__esModule",{value:!0});Jk.transformArguments=Jk.FIRST_KEY_INDEX=void 0;Jk.FIRST_KEY_INDEX=1;Jk.transformArguments=AZ0});var Qk=Q((Dk)=>{var vZ0=function(z,V){return["BF.SCANDUMP",z,V.toString()]},CZ0=function([z,V]){return{iterator:z,chunk:V}};Object.defineProperty(Dk,"__esModule",{value:!0});Dk.transformReply=Dk.transformArguments=Dk.IS_READ_ONLY=Dk.FIRST_KEY_INDEX=void 0;Dk.FIRST_KEY_INDEX=1;Dk.IS_READ_ONLY=!0;Dk.transformArguments=vZ0;Dk.transformReply=CZ0});var qk=Q((Nk)=>{Object.defineProperty(Nk,"__esModule",{value:!0});var jk=cR(),Bk=nR(),Mk=iR(),Gk=tR(),Ok=rR(),Fk=zk(),Ik=Vk(),Xk=Kk(),Lk=Uk(),wk=Qk();Nk.default={ADD:jk,add:jk,CARD:Bk,card:Bk,EXISTS:Mk,exists:Mk,INFO:Gk,info:Gk,INSERT:Ok,insert:Ok,LOADCHUNK:Fk,loadChunk:Fk,MADD:Ik,mAdd:Ik,MEXISTS:Xk,mExists:Xk,RESERVE:Lk,reserve:Lk,SCANDUMP:wk,scanDump:wk}});var Ek=Q((Tk)=>{var YZ0=function(z,V){const K=["CMS.INCRBY",z];if(Array.isArray(V))for(let J of V)Pk(K,J);else Pk(K,V);return K},Pk=function(z,{item:V,incrementBy:K}){z.push(V,K.toString())};Object.defineProperty(Tk,"__esModule",{value:!0});Tk.transformArguments=Tk.FIRST_KEY_INDEX=void 0;Tk.FIRST_KEY_INDEX=1;Tk.transformArguments=YZ0});var hk=Q((vk)=>{var fZ0=function(z){return["CMS.INFO",z]},xZ0=function(z){return{width:z[1],depth:z[3],count:z[5]}};Object.defineProperty(vk,"__esModule",{value:!0});vk.transformReply=vk.transformArguments=vk.IS_READ_ONLY=vk.FIRST_KEY_INDEX=void 0;vk.FIRST_KEY_INDEX=1;vk.IS_READ_ONLY=!0;vk.transformArguments=fZ0;vk.transformReply=xZ0});var kk=Q((Wk)=>{var $Z0=function(z,V,K){return["CMS.INITBYDIM",z,V.toString(),K.toString()]};Object.defineProperty(Wk,"__esModule",{value:!0});Wk.transformArguments=Wk.FIRST_KEY_INDEX=void 0;Wk.FIRST_KEY_INDEX=1;Wk.transformArguments=$Z0});var fk=Q((Yk)=>{var uZ0=function(z,V,K){return["CMS.INITBYPROB",z,V.toString(),K.toString()]};Object.defineProperty(Yk,"__esModule",{value:!0});Yk.transformArguments=Yk.FIRST_KEY_INDEX=void 0;Yk.FIRST_KEY_INDEX=1;Yk.transformArguments=uZ0});var yk=Q((xk)=>{var mZ0=function(z,V){const K=["CMS.MERGE",z,V.length.toString()];if(cZ0(V))K.push(...V);else{for(let J of V)K.push(J.name);K.push("WEIGHTS");for(let J of V)K.push(J.weight.toString())}return K},cZ0=function(z){return typeof z[0]==="string"};Object.defineProperty(xk,"__esModule",{value:!0});xk.transformArguments=xk.FIRST_KEY_INDEX=void 0;xk.FIRST_KEY_INDEX=1;xk.transformArguments=mZ0});var gk=Q((_k)=>{var nZ0=function(z,V){return(0,lZ0.pushVerdictArguments)(["CMS.QUERY",z],V)};Object.defineProperty(_k,"__esModule",{value:!0});_k.transformArguments=_k.IS_READ_ONLY=_k.FIRST_KEY_INDEX=void 0;var lZ0=m();_k.FIRST_KEY_INDEX=1;_k.IS_READ_ONLY=!0;_k.transformArguments=nZ0});var ik=Q((nk)=>{Object.defineProperty(nk,"__esModule",{value:!0});var uk=Ek(),dk=hk(),mk=kk(),ck=fk(),pk=yk(),lk=gk();nk.default={INCRBY:uk,incrBy:uk,INFO:dk,info:dk,INITBYDIM:mk,initByDim:mk,INITBYPROB:ck,initByProb:ck,MERGE:pk,merge:pk,QUERY:lk,query:lk}});var ak=Q((BJ)=>{var tZ0=function(z,V){return["CF.ADD",z,V]};Object.defineProperty(BJ,"__esModule",{value:!0});BJ.transformReply=BJ.transformArguments=BJ.FIRST_KEY_INDEX=void 0;BJ.FIRST_KEY_INDEX=1;BJ.transformArguments=tZ0;var rZ0=m();Object.defineProperty(BJ,"transformReply",{enumerable:!0,get:function(){return rZ0.transformBooleanReply}})});var ok=Q((MJ)=>{var VU0=function(z,V){return["CF.ADDNX",z,V]};Object.defineProperty(MJ,"__esModule",{value:!0});MJ.transformReply=MJ.transformArguments=MJ.FIRST_KEY_INDEX=void 0;MJ.FIRST_KEY_INDEX=1;MJ.transformArguments=VU0;var KU0=m();Object.defineProperty(MJ,"transformReply",{enumerable:!0,get:function(){return KU0.transformBooleanReply}})});var sk=Q((tk)=>{var DU0=function(z,V){return["CF.COUNT",z,V]};Object.defineProperty(tk,"__esModule",{value:!0});tk.transformArguments=tk.FIRST_KEY_INDEX=void 0;tk.FIRST_KEY_INDEX=1;tk.transformArguments=DU0});var ek=Q((GJ)=>{var QU0=function(z,V){return["CF.DEL",z,V]};Object.defineProperty(GJ,"__esModule",{value:!0});GJ.transformReply=GJ.transformArguments=GJ.FIRST_KEY_INDEX=void 0;GJ.FIRST_KEY_INDEX=1;GJ.transformArguments=QU0;var jU0=m();Object.defineProperty(GJ,"transformReply",{enumerable:!0,get:function(){return jU0.transformBooleanReply}})});var zY=Q((OJ)=>{var OU0=function(z,V){return["CF.EXISTS",z,V]};Object.defineProperty(OJ,"__esModule",{value:!0});OJ.transformReply=OJ.transformArguments=OJ.IS_READ_ONLY=OJ.FIRST_KEY_INDEX=void 0;OJ.FIRST_KEY_INDEX=1;OJ.IS_READ_ONLY=!0;OJ.transformArguments=OU0;var FU0=m();Object.defineProperty(OJ,"transformReply",{enumerable:!0,get:function(){return FU0.transformBooleanReply}})});var JY=Q((VY)=>{var NU0=function(z){return["CF.INFO",z]},qU0=function(z){return{size:z[1],numberOfBuckets:z[3],numberOfFilters:z[5],numberOfInsertedItems:z[7],numberOfDeletedItems:z[9],bucketSize:z[11],expansionRate:z[13],maxIteration:z[15]}};Object.defineProperty(VY,"__esModule",{value:!0});VY.transformReply=VY.transformArguments=VY.IS_READ_ONLY=VY.FIRST_KEY_INDEX=void 0;VY.FIRST_KEY_INDEX=1;VY.IS_READ_ONLY=!0;VY.transformArguments=NU0;VY.transformReply=qU0});var ZY=Q((FJ)=>{var vU0=function(z,V,K){return(0,EU0.pushInsertOptions)(["CF.INSERT",z],V,K)};Object.defineProperty(FJ,"__esModule",{value:!0});FJ.transformReply=FJ.transformArguments=FJ.FIRST_KEY_INDEX=void 0;var EU0=tz();FJ.FIRST_KEY_INDEX=1;FJ.transformArguments=vU0;var CU0=m();Object.defineProperty(FJ,"transformReply",{enumerable:!0,get:function(){return CU0.transformBooleanArrayReply}})});var UY=Q((IJ)=>{var YU0=function(z,V,K){return(0,kU0.pushInsertOptions)(["CF.INSERTNX",z],V,K)};Object.defineProperty(IJ,"__esModule",{value:!0});IJ.transformReply=IJ.transformArguments=IJ.FIRST_KEY_INDEX=void 0;var kU0=tz();IJ.FIRST_KEY_INDEX=1;IJ.transformArguments=YU0;var bU0=m();Object.defineProperty(IJ,"transformReply",{enumerable:!0,get:function(){return bU0.transformBooleanArrayReply}})});var QY=Q((DY)=>{var yU0=function(z,V,K){return["CF.LOADCHUNK",z,V.toString(),K]};Object.defineProperty(DY,"__esModule",{value:!0});DY.transformArguments=DY.FIRST_KEY_INDEX=void 0;DY.FIRST_KEY_INDEX=1;DY.transformArguments=yU0});var MY=Q((jY)=>{var $U0=function(z,V,K){const J=["CF.RESERVE",z,V.toString()];if(K?.BUCKETSIZE)J.push("BUCKETSIZE",K.BUCKETSIZE.toString());if(K?.MAXITERATIONS)J.push("MAXITERATIONS",K.MAXITERATIONS.toString());if(K?.EXPANSION)J.push("EXPANSION",K.EXPANSION.toString());return J};Object.defineProperty(jY,"__esModule",{value:!0});jY.transformArguments=jY.FIRST_KEY_INDEX=void 0;jY.FIRST_KEY_INDEX=1;jY.transformArguments=$U0});var FY=Q((GY)=>{var uU0=function(z,V){return["CF.SCANDUMP",z,V.toString()]},dU0=function([z,V]){return{iterator:z,chunk:V}};Object.defineProperty(GY,"__esModule",{value:!0});GY.transformReply=GY.transformArguments=GY.FIRST_KEY_INDEX=void 0;GY.FIRST_KEY_INDEX=1;GY.transformArguments=uU0;GY.transformReply=dU0});var tz=Q((CY)=>{var lU0=function(z,V,K){if(K?.CAPACITY)z.push("CAPACITY"),z.push(K.CAPACITY.toString());if(K?.NOCREATE)z.push("NOCREATE");return z.push("ITEMS"),(0,pU0.pushVerdictArguments)(z,V)};Object.defineProperty(CY,"__esModule",{value:!0});CY.pushInsertOptions=void 0;var IY=ak(),XY=ok(),LY=sk(),wY=ek(),NY=zY(),qY=JY(),PY=ZY(),TY=UY(),AY=QY(),EY=MY(),vY=FY(),pU0=m();CY.default={ADD:IY,add:IY,ADDNX:XY,addNX:XY,COUNT:LY,count:LY,DEL:wY,del:wY,EXISTS:NY,exists:NY,INFO:qY,info:qY,INSERT:PY,insert:PY,INSERTNX:TY,insertNX:TY,LOADCHUNK:AY,loadChunk:AY,RESERVE:EY,reserve:EY,SCANDUMP:vY,scanDump:vY};CY.pushInsertOptions=lU0});var kY=Q((WY)=>{var iU0=function(z,V){const K=["TDIGEST.ADD",z];for(let J of V)K.push(J.toString());return K};Object.defineProperty(WY,"__esModule",{value:!0});WY.transformArguments=WY.FIRST_KEY_INDEX=void 0;WY.FIRST_KEY_INDEX=1;WY.transformArguments=iU0});var YY=Q((XJ)=>{var oU0=function(z,V){const K=["TDIGEST.BYRANK",z];for(let J of V)K.push(J.toString());return K};Object.defineProperty(XJ,"__esModule",{value:!0});XJ.transformReply=XJ.transformArguments=XJ.IS_READ_ONLY=XJ.FIRST_KEY_INDEX=void 0;XJ.FIRST_KEY_INDEX=1;XJ.IS_READ_ONLY=!0;XJ.transformArguments=oU0;var tU0=N8();Object.defineProperty(XJ,"transformReply",{enumerable:!0,get:function(){return tU0.transformDoublesReply}})});var bY=Q((LJ)=>{var VD0=function(z,V){const K=["TDIGEST.BYREVRANK",z];for(let J of V)K.push(J.toString());return K};Object.defineProperty(LJ,"__esModule",{value:!0});LJ.transformReply=LJ.transformArguments=LJ.IS_READ_ONLY=LJ.FIRST_KEY_INDEX=void 0;LJ.FIRST_KEY_INDEX=1;LJ.IS_READ_ONLY=!0;LJ.transformArguments=VD0;var KD0=N8();Object.defineProperty(LJ,"transformReply",{enumerable:!0,get:function(){return KD0.transformDoublesReply}})});var fY=Q((wJ)=>{var HD0=function(z,V){const K=["TDIGEST.CDF",z];for(let J of V)K.push(J.toString());return K};Object.defineProperty(wJ,"__esModule",{value:!0});wJ.transformReply=wJ.transformArguments=wJ.IS_READ_ONLY=wJ.FIRST_KEY_INDEX=void 0;wJ.FIRST_KEY_INDEX=1;wJ.IS_READ_ONLY=!0;wJ.transformArguments=HD0;var QD0=N8();Object.defineProperty(wJ,"transformReply",{enumerable:!0,get:function(){return QD0.transformDoublesReply}})});var yY=Q((xY)=>{var FD0=function(z,V){return(0,OD0.pushCompressionArgument)(["TDIGEST.CREATE",z],V)};Object.defineProperty(xY,"__esModule",{value:!0});xY.transformArguments=xY.FIRST_KEY_INDEX=void 0;var OD0=N8();xY.FIRST_KEY_INDEX=1;xY.transformArguments=FD0});var gY=Q((_Y)=>{var XD0=function(z){return["TDIGEST.INFO",z]},LD0=function(z){return{comperssion:z[1],capacity:z[3],mergedNodes:z[5],unmergedNodes:z[7],mergedWeight:Number(z[9]),unmergedWeight:Number(z[11]),totalCompression:z[13]}};Object.defineProperty(_Y,"__esModule",{value:!0});_Y.transformReply=_Y.transformArguments=_Y.IS_READ_ONLY=_Y.FIRST_KEY_INDEX=void 0;_Y.FIRST_KEY_INDEX=1;_Y.IS_READ_ONLY=!0;_Y.transformArguments=XD0;_Y.transformReply=LD0});var uY=Q((NJ)=>{var PD0=function(z){return["TDIGEST.MAX",z]};Object.defineProperty(NJ,"__esModule",{value:!0});NJ.transformReply=NJ.transformArguments=NJ.IS_READ_ONLY=NJ.FIRST_KEY_INDEX=void 0;NJ.FIRST_KEY_INDEX=1;NJ.IS_READ_ONLY=!0;NJ.transformArguments=PD0;var TD0=N8();Object.defineProperty(NJ,"transformReply",{enumerable:!0,get:function(){return TD0.transformDoubleReply}})});var cY=Q((dY)=>{var RD0=function(z,V,K){const J=(0,hD0.pushVerdictArgument)(["TDIGEST.MERGE",z],V);if((0,WD0.pushCompressionArgument)(J,K),K?.OVERRIDE)J.push("OVERRIDE");return J};Object.defineProperty(dY,"__esModule",{value:!0});dY.transformArguments=dY.FIRST_KEY_INDEX=void 0;var hD0=m(),WD0=N8();dY.FIRST_KEY_INDEX=1;dY.transformArguments=RD0});var pY=Q((qJ)=>{var YD0=function(z){return["TDIGEST.MIN",z]};Object.defineProperty(qJ,"__esModule",{value:!0});qJ.transformReply=qJ.transformArguments=qJ.IS_READ_ONLY=qJ.FIRST_KEY_INDEX=void 0;qJ.FIRST_KEY_INDEX=1;qJ.IS_READ_ONLY=!0;qJ.transformArguments=YD0;var bD0=N8();Object.defineProperty(qJ,"transformReply",{enumerable:!0,get:function(){return bD0.transformDoubleReply}})});var lY=Q((PJ)=>{var _D0=function(z,V){const K=["TDIGEST.QUANTILE",z];for(let J of V)K.push(J.toString());return K};Object.defineProperty(PJ,"__esModule",{value:!0});PJ.transformReply=PJ.transformArguments=PJ.IS_READ_ONLY=PJ.FIRST_KEY_INDEX=void 0;PJ.FIRST_KEY_INDEX=1;PJ.IS_READ_ONLY=!0;PJ.transformArguments=_D0;var $D0=N8();Object.defineProperty(PJ,"transformReply",{enumerable:!0,get:function(){return $D0.transformDoublesReply}})});var aY=Q((nY)=>{var cD0=function(z,V){const K=["TDIGEST.RANK",z];for(let J of V)K.push(J.toString());return K};Object.defineProperty(nY,"__esModule",{value:!0});nY.transformArguments=nY.IS_READ_ONLY=nY.FIRST_KEY_INDEX=void 0;nY.FIRST_KEY_INDEX=1;nY.IS_READ_ONLY=!0;nY.transformArguments=cD0});var rY=Q((oY)=>{var nD0=function(z){return["TDIGEST.RESET",z]};Object.defineProperty(oY,"__esModule",{value:!0});oY.transformArguments=oY.FIRST_KEY_INDEX=void 0;oY.FIRST_KEY_INDEX=1;oY.transformArguments=nD0});var zb=Q((sY)=>{var aD0=function(z,V){const K=["TDIGEST.REVRANK",z];for(let J of V)K.push(J.toString());return K};Object.defineProperty(sY,"__esModule",{value:!0});sY.transformArguments=sY.IS_READ_ONLY=sY.FIRST_KEY_INDEX=void 0;sY.FIRST_KEY_INDEX=1;sY.IS_READ_ONLY=!0;sY.transformArguments=aD0});var Vb=Q((TJ)=>{var rD0=function(z,V,K){return["TDIGEST.TRIMMED_MEAN",z,V.toString(),K.toString()]};Object.defineProperty(TJ,"__esModule",{value:!0});TJ.transformReply=TJ.transformArguments=TJ.IS_READ_ONLY=TJ.FIRST_KEY_INDEX=void 0;TJ.FIRST_KEY_INDEX=1;TJ.IS_READ_ONLY=!0;TJ.transformArguments=rD0;var sD0=N8();Object.defineProperty(TJ,"transformReply",{enumerable:!0,get:function(){return sD0.transformDoubleReply}})});var N8=Q((Lb)=>{var J10=function(z,V){if(V?.COMPRESSION)z.push("COMPRESSION",V.COMPRESSION.toString());return z},Xb=function(z){switch(z){case"inf":return Infinity;case"-inf":return (-Infinity);case"nan":return NaN;default:return parseFloat(z)}},Z10=function(z){return z.map(Xb)};Object.defineProperty(Lb,"__esModule",{value:!0});Lb.transformDoublesReply=Lb.transformDoubleReply=Lb.pushCompressionArgument=void 0;var Kb=kY(),Jb=YY(),Zb=bY(),Ub=fY(),Db=yY(),Hb=gY(),Qb=uY(),jb=cY(),Bb=pY(),Mb=lY(),Gb=aY(),Ob=rY(),Fb=zb(),Ib=Vb();Lb.default={ADD:Kb,add:Kb,BYRANK:Jb,byRank:Jb,BYREVRANK:Zb,byRevRank:Zb,CDF:Ub,cdf:Ub,CREATE:Db,create:Db,INFO:Hb,info:Hb,MAX:Qb,max:Qb,MERGE:jb,merge:jb,MIN:Bb,min:Bb,QUANTILE:Mb,quantile:Mb,RANK:Gb,rank:Gb,RESET:Ob,reset:Ob,REVRANK:Fb,revRank:Fb,TRIMMED_MEAN:Ib,trimmedMean:Ib};Lb.pushCompressionArgument=J10;Lb.transformDoubleReply=Xb;Lb.transformDoublesReply=Z10});var Pb=Q((Nb)=>{var j10=function(z,V){return(0,Q10.pushVerdictArguments)(["TOPK.ADD",z],V)};Object.defineProperty(Nb,"__esModule",{value:!0});Nb.transformArguments=Nb.FIRST_KEY_INDEX=void 0;var Q10=m();Nb.FIRST_KEY_INDEX=1;Nb.transformArguments=j10});var Eb=Q((Tb)=>{var G10=function(z,V){return(0,M10.pushVerdictArguments)(["TOPK.COUNT",z],V)};Object.defineProperty(Tb,"__esModule",{value:!0});Tb.transformArguments=Tb.IS_READ_ONLY=Tb.FIRST_KEY_INDEX=void 0;var M10=m();Tb.FIRST_KEY_INDEX=1;Tb.IS_READ_ONLY=!0;Tb.transformArguments=G10});var Wb=Q((Cb)=>{var I10=function(z,V){const K=["TOPK.INCRBY",z];if(Array.isArray(V))for(let J of V)vb(K,J);else vb(K,V);return K},vb=function(z,{item:V,incrementBy:K}){z.push(V,K.toString())};Object.defineProperty(Cb,"__esModule",{value:!0});Cb.transformArguments=Cb.FIRST_KEY_INDEX=void 0;Cb.FIRST_KEY_INDEX=1;Cb.transformArguments=I10});var Yb=Q((Rb)=>{var L10=function(z){return["TOPK.INFO",z]},w10=function(z){return{k:z[1],width:z[3],depth:z[5],decay:Number(z[7])}};Object.defineProperty(Rb,"__esModule",{value:!0});Rb.transformReply=Rb.transformArguments=Rb.IS_READ_ONLY=Rb.FIRST_KEY_INDEX=void 0;Rb.FIRST_KEY_INDEX=1;Rb.IS_READ_ONLY=!0;Rb.transformArguments=L10;Rb.transformReply=w10});var xb=Q((bb)=>{var T10=function(z){return["TOPK.LIST",z,"WITHCOUNT"]},A10=function(z){const V=[];for(let K=0;K<z.length;K++)V.push({item:z[K],count:z[++K]});return V};Object.defineProperty(bb,"__esModule",{value:!0});bb.transformReply=bb.transformArguments=bb.IS_READ_ONLY=bb.FIRST_KEY_INDEX=void 0;bb.FIRST_KEY_INDEX=1;bb.IS_READ_ONLY=!0;bb.transformArguments=T10;bb.transformReply=A10});var _b=Q((Sb)=>{var h10=function(z){return["TOPK.LIST",z]};Object.defineProperty(Sb,"__esModule",{value:!0});Sb.transformArguments=Sb.IS_READ_ONLY=Sb.FIRST_KEY_INDEX=void 0;Sb.FIRST_KEY_INDEX=1;Sb.IS_READ_ONLY=!0;Sb.transformArguments=h10});var ub=Q(($b)=>{var Y10=function(z,V){return(0,k10.pushVerdictArguments)(["TOPK.QUERY",z],V)};Object.defineProperty($b,"__esModule",{value:!0});$b.transformArguments=$b.IS_READ_ONLY=$b.FIRST_KEY_INDEX=void 0;var k10=m();$b.FIRST_KEY_INDEX=1;$b.IS_READ_ONLY=!0;$b.transformArguments=Y10});var cb=Q((db)=>{var x10=function(z,V,K){const J=["TOPK.RESERVE",z,V.toString()];if(K)J.push(K.width.toString(),K.depth.toString(),K.decay.toString());return J};Object.defineProperty(db,"__esModule",{value:!0});db.transformArguments=db.IS_READ_ONLY=db.FIRST_KEY_INDEX=void 0;db.FIRST_KEY_INDEX=1;db.IS_READ_ONLY=!0;db.transformArguments=x10});var eb=Q((sb)=>{Object.defineProperty(sb,"__esModule",{value:!0});var pb=Pb(),lb=Eb(),nb=Wb(),ib=Yb(),ab=xb(),ob=_b(),tb=ub(),rb=cb();sb.default={ADD:pb,add:pb,COUNT:lb,count:lb,INCRBY:nb,incrBy:nb,INFO:ib,info:ib,LIST_WITHCOUNT:ab,listWithCount:ab,LIST:ob,list:ob,QUERY:tb,query:tb,RESERVE:rb,reserve:rb}});var Vf=Q((zf)=>{Object.defineProperty(zf,"__esModule",{value:!0});var $10=qk(),g10=ik(),u10=tz(),d10=N8(),m10=eb();zf.default={bf:$10.default,cms:g10.default,cf:u10.default,tDigest:d10.default,topK:m10.default}});var EJ=Q((AJ)=>{Object.defineProperty(AJ,"__esModule",{value:!0});AJ.default=void 0;var p10=Vf();Object.defineProperty(AJ,"default",{enumerable:!0,get:function(){return p10.default}})});var Zf=Q((Kf)=>{var n10=function(z){return["GRAPH.CONFIG","GET",z]};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.transformArguments=Kf.IS_READ_ONLY=void 0;Kf.IS_READ_ONLY=!0;Kf.transformArguments=n10});var Hf=Q((Uf)=>{var a10=function(z,V){return["GRAPH.CONFIG","SET",z,V.toString()]};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.transformArguments=void 0;Uf.transformArguments=a10});var Bf=Q((Qf)=>{var o10=function(z){return["GRAPH.DELETE",z]};Object.defineProperty(Qf,"__esModule",{value:!0});Qf.transformArguments=Qf.FIRST_KEY_INDEX=void 0;Qf.FIRST_KEY_INDEX=1;Qf.transformArguments=o10});var Of=Q((Mf)=>{var r10=function(z,V){return["GRAPH.EXPLAIN",z,V]};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.transformArguments=Mf.IS_READ_ONLY=Mf.FIRST_KEY_INDEX=void 0;Mf.FIRST_KEY_INDEX=1;Mf.IS_READ_ONLY=!0;Mf.transformArguments=r10});var Xf=Q((Ff)=>{var z20=function(){return["GRAPH.LIST"]};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.transformArguments=Ff.IS_READ_ONLY=void 0;Ff.IS_READ_ONLY=!0;Ff.transformArguments=z20});var Nf=Q((Lf)=>{var K20=function(z,V){return["GRAPH.PROFILE",z,V]};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.transformArguments=Lf.IS_READ_ONLY=Lf.FIRST_KEY_INDEX=void 0;Lf.FIRST_KEY_INDEX=1;Lf.IS_READ_ONLY=!0;Lf.transformArguments=K20});var rz=Q((qf)=>{var D20=function(z,V,K,J){return(0,U20.pushQueryArguments)(["GRAPH.QUERY"],z,V,K,J)},H20=function(z){return z.length===1?{headers:void 0,data:void 0,metadata:z[0]}:{headers:z[0],data:z[1],metadata:z[2]}};Object.defineProperty(qf,"__esModule",{value:!0});qf.transformReply=qf.transformArguments=qf.FIRST_KEY_INDEX=void 0;var U20=sz();qf.FIRST_KEY_INDEX=1;qf.transformArguments=D20;qf.transformReply=H20});var Tf=Q((ez)=>{var G20=function(z,V,K,J){return(0,B20.pushQueryArguments)(["GRAPH.RO_QUERY"],z,V,K,J)};Object.defineProperty(ez,"__esModule",{value:!0});ez.transformReply=ez.transformArguments=ez.IS_READ_ONLY=ez.FIRST_KEY_INDEX=void 0;var B20=sz(),M20=rz();Object.defineProperty(ez,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return M20.FIRST_KEY_INDEX}});ez.IS_READ_ONLY=!0;ez.transformArguments=G20;var O20=rz();Object.defineProperty(ez,"transformReply",{enumerable:!0,get:function(){return O20.transformReply}})});var vf=Q((Af)=>{var L20=function(z){return["GRAPH.SLOWLOG",z]},w20=function(z){return z.map(([V,K,J,Z])=>({timestamp:new Date(Number(V)*1000),command:K,query:J,took:Number(Z)}))};Object.defineProperty(Af,"__esModule",{value:!0});Af.transformReply=Af.transformArguments=Af.FIRST_KEY_INDEX=Af.IS_READ_ONLY=void 0;Af.IS_READ_ONLY=!0;Af.FIRST_KEY_INDEX=1;Af.transformArguments=L20;Af.transformReply=w20});var sz=Q((yf)=>{var T20=function(z,V,K,J,Z){if(z.push(V),typeof J==="number")z.push(K),Sf(z,J);else if(z.push(J?.params?`CYPHER ${A20(J.params)} ${K}`:K),J?.TIMEOUT!==void 0)Sf(z,J.TIMEOUT);if(Z)z.push("--compact");return z},Sf=function(z,V){z.push("TIMEOUT",V.toString())},A20=function(z){const V=[];for(let[K,J]of Object.entries(z))V.push(`${K}=${vJ(J)}`);return V.join(" ")},vJ=function(z){if(z===null)return"null";switch(typeof z){case"string":return`"${z.replace(/["\\]/g,"\\$&")}"`;case"number":case"boolean":return z.toString()}if(Array.isArray(z))return`[${z.map(vJ).join(",")}]`;else if(typeof z==="object"){const V=[];for(let[K,J]of Object.entries(z))V.push(`${K}:${vJ(J)}`);return`{${V.join(",")}}`}else throw new TypeError(`Unexpected param type ${typeof z} ${z}`)};Object.defineProperty(yf,"__esModule",{value:!0});yf.pushQueryArguments=void 0;var Cf=Zf(),hf=Hf(),Wf=Bf(),Rf=Of(),kf=Xf(),Yf=Nf(),bf=rz(),ff=Tf(),xf=vf();yf.default={CONFIG_GET:Cf,configGet:Cf,CONFIG_SET:hf,configSet:hf,DELETE:Wf,delete:Wf,EXPLAIN:Rf,explain:Rf,LIST:kf,list:kf,PROFILE:Yf,profile:Yf,QUERY:bf,query:bf,RO_QUERY:ff,roQuery:ff,SLOWLOG:xf,slowLog:xf};yf.pushQueryArguments=T20});var mf=Q((z5)=>{var J3=z5&&z5.__classPrivateFieldSet||function(z,V,K,J,Z){if(J==="m")throw new TypeError("Private method is not writable");if(J==="a"&&!Z)throw new TypeError("Private accessor was defined without a setter");if(typeof V==="function"?z!==V||!Z:!V.has(z))throw new TypeError("Cannot write private member to an object whose class did not declare it");return J==="a"?Z.call(z,K):Z?Z.value=K:V.set(z,K),K},h0=z5&&z5.__classPrivateFieldGet||function(z,V,K,J){if(K==="a"&&!J)throw new TypeError("Private accessor was defined without a getter");if(typeof V==="function"?z!==V||!J:!V.has(z))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?J:K==="a"?J.call(z):J?J.value:V.get(z)},t0,G4,O4,K3,g5,$f,gf,zV,VV,uf,kJ,CJ,hJ,WJ,RJ;Object.defineProperty(z5,"__esModule",{value:!0});var e6;(function(z){z[z.UNKNOWN=0]="UNKNOWN",z[z.NULL=1]="NULL",z[z.STRING=2]="STRING",z[z.INTEGER=3]="INTEGER",z[z.BOOLEAN=4]="BOOLEAN",z[z.DOUBLE=5]="DOUBLE",z[z.ARRAY=6]="ARRAY",z[z.EDGE=7]="EDGE",z[z.NODE=8]="NODE",z[z.PATH=9]="PATH",z[z.MAP=10]="MAP",z[z.POINT=11]="POINT"})(e6||(e6={}));class df{constructor(z,V){t0.add(this),G4.set(this,void 0),O4.set(this,void 0),K3.set(this,void 0),g5.set(this,void 0),J3(this,G4,z,"f"),J3(this,O4,V,"f")}async query(z,V){return h0(this,t0,"m",kJ).call(this,await h0(this,G4,"f").graph.query(h0(this,O4,"f"),z,V,!0))}async roQuery(z,V){return h0(this,t0,"m",kJ).call(this,await h0(this,G4,"f").graph.roQuery(h0(this,O4,"f"),z,V,!0))}}z5.default=df;G4=new WeakMap,O4=new WeakMap,K3=new WeakMap,g5=new WeakMap,t0=new WeakSet,$f=function z(){return J3(this,g5,h0(this,g5,"f")??h0(this,t0,"m",gf).call(this).finally(()=>J3(this,g5,void 0,"f")),"f"),h0(this,g5,"f")},gf=async function z(){const[V,K,J]=await Promise.all([h0(this,G4,"f").graph.roQuery(h0(this,O4,"f"),"CALL db.labels()"),h0(this,G4,"f").graph.roQuery(h0(this,O4,"f"),"CALL db.relationshipTypes()"),h0(this,G4,"f").graph.roQuery(h0(this,O4,"f"),"CALL db.propertyKeys()")]);return J3(this,K3,{labels:h0(this,t0,"m",zV).call(this,V.data),relationshipTypes:h0(this,t0,"m",zV).call(this,K.data),propertyKeys:h0(this,t0,"m",zV).call(this,J.data)},"f"),h0(this,K3,"f")},zV=function z(V){return V.map(([K])=>K)},VV=function z(V,K){return h0(this,K3,"f")?.[V][K]??h0(this,t0,"m",uf).call(this,V,K)},uf=async function z(V,K){const J=(await h0(this,t0,"m",$f).call(this))[V][K];if(J===void 0)throw new Error(`Cannot find value from ${V}[${K}]`);return J},kJ=async function z(V){if(!V.data)return V;const K=[],J={metadata:V.metadata,data:V.data.map((Z)=>{const D={};for(let U=0;U<Z.length;U++)D[V.headers[U][1]]=h0(this,t0,"m",CJ).call(this,Z[U],K);return D})};if(K.length)await Promise.all(K);return J},CJ=function z([V,K],J){switch(V){case e6.NULL:return null;case e6.STRING:case e6.INTEGER:return K;case e6.BOOLEAN:return K==="true";case e6.DOUBLE:return parseFloat(K);case e6.ARRAY:return K.map((D)=>h0(this,t0,"m",z).call(this,D,J));case e6.EDGE:return h0(this,t0,"m",hJ).call(this,K,J);case e6.NODE:return h0(this,t0,"m",WJ).call(this,K,J);case e6.PATH:return{nodes:K[0][1].map(([,D])=>h0(this,t0,"m",WJ).call(this,D,J)),edges:K[1][1].map(([,D])=>h0(this,t0,"m",hJ).call(this,D,J))};case e6.MAP:const Z={};for(let D=0;D<K.length;D++)Z[K[D++]]=h0(this,t0,"m",z).call(this,K[D],J);return Z;case e6.POINT:return{latitude:parseFloat(K[0]),longitude:parseFloat(K[1])};default:throw new Error(`unknown scalar type: ${V}`)}},hJ=function z([V,K,J,Z,D],U){const j={id:V,sourceId:J,destinationId:Z,properties:h0(this,t0,"m",RJ).call(this,D,U)},B=h0(this,t0,"m",VV).call(this,"relationshipTypes",K);if(B instanceof Promise)U.push(B.then((H)=>j.relationshipType=H));else j.relationshipType=B;return j},WJ=function z([V,K,J],Z){const D=new Array(K.length);for(let U=0;U<K.length;U++){const j=h0(this,t0,"m",VV).call(this,"labels",K[U]);if(j instanceof Promise)Z.push(j.then((B)=>D[U]=B));else D[U]=j}return{id:V,labels:D,properties:h0(this,t0,"m",RJ).call(this,J,Z)}},RJ=function z(V,K){const J={};for(let[Z,D,U]of V){const j=h0(this,t0,"m",CJ).call(this,[D,U],K),B=h0(this,t0,"m",VV).call(this,"propertyKeys",Z);if(B instanceof Promise)K.push(B.then((H)=>J[H]=j));else J[B]=j}return J}});var YJ=Q((KV)=>{Object.defineProperty(KV,"__esModule",{value:!0});KV.Graph=KV.default=void 0;var v20=sz();Object.defineProperty(KV,"default",{enumerable:!0,get:function(){return v20.default}});var C20=mf();Object.defineProperty(KV,"Graph",{enumerable:!0,get:function(){return C20.default}})});var lf=Q((cf)=>{var R20=function(z,V,...K){const J=["JSON.ARRAPPEND",z,V];for(let Z of K)J.push((0,W20.transformRedisJsonArgument)(Z));return J};Object.defineProperty(cf,"__esModule",{value:!0});cf.transformArguments=cf.FIRST_KEY_INDEX=void 0;var W20=c6();cf.FIRST_KEY_INDEX=1;cf.transformArguments=R20});var of=Q((nf)=>{var b20=function(z,V,K,J,Z){const D=["JSON.ARRINDEX",z,V,(0,Y20.transformRedisJsonArgument)(K)];if(J!==void 0&&J!==null){if(D.push(J.toString()),Z!==void 0&&Z!==null)D.push(Z.toString())}return D};Object.defineProperty(nf,"__esModule",{value:!0});nf.transformArguments=nf.IS_READ_ONLY=nf.FIRST_KEY_INDEX=void 0;var Y20=c6();nf.FIRST_KEY_INDEX=1;nf.IS_READ_ONLY=!0;nf.transformArguments=b20});var sf=Q((tf)=>{var y20=function(z,V,K,...J){const Z=["JSON.ARRINSERT",z,V,K.toString()];for(let D of J)Z.push((0,S20.transformRedisJsonArgument)(D));return Z};Object.defineProperty(tf,"__esModule",{value:!0});tf.transformArguments=tf.FIRST_KEY_INDEX=void 0;var S20=c6();tf.FIRST_KEY_INDEX=1;tf.transformArguments=y20});var Vx=Q((ef)=>{var $20=function(z,V){const K=["JSON.ARRLEN",z];if(V)K.push(V);return K};Object.defineProperty(ef,"__esModule",{value:!0});ef.transformArguments=ef.IS_READ_ONLY=ef.FIRST_KEY_INDEX=void 0;ef.FIRST_KEY_INDEX=1;ef.IS_READ_ONLY=!0;ef.transformArguments=$20});var Ux=Q((Jx)=>{var d20=function(z,V,K){const J=["JSON.ARRPOP",z];if(V){if(J.push(V),K!==void 0&&K!==null)J.push(K.toString())}return J},m20=function(z){if(z===null)return null;if(Array.isArray(z))return z.map(Kx.transformRedisJsonNullReply);return(0,Kx.transformRedisJsonNullReply)(z)};Object.defineProperty(Jx,"__esModule",{value:!0});Jx.transformReply=Jx.transformArguments=Jx.FIRST_KEY_INDEX=void 0;var Kx=c6();Jx.FIRST_KEY_INDEX=1;Jx.transformArguments=d20;Jx.transformReply=m20});var Qx=Q((Dx)=>{var l20=function(z,V,K,J){return["JSON.ARRTRIM",z,V,K.toString(),J.toString()]};Object.defineProperty(Dx,"__esModule",{value:!0});Dx.transformArguments=Dx.FIRST_KEY_INDEX=void 0;Dx.FIRST_KEY_INDEX=1;Dx.transformArguments=l20});var Mx=Q((jx)=>{var i20=function(z,V){const K=["JSON.DEBUG","MEMORY",z];if(V)K.push(V);return K};Object.defineProperty(jx,"__esModule",{value:!0});jx.transformArguments=jx.FIRST_KEY_INDEX=void 0;jx.FIRST_KEY_INDEX=2;jx.transformArguments=i20});var Fx=Q((Gx)=>{var o20=function(z,V){const K=["JSON.DEL",z];if(V)K.push(V);return K};Object.defineProperty(Gx,"__esModule",{value:!0});Gx.transformArguments=Gx.FIRST_KEY_INDEX=void 0;Gx.FIRST_KEY_INDEX=1;Gx.transformArguments=o20});var Lx=Q((Ix)=>{var r20=function(z,V){const K=["JSON.FORGET",z];if(V)K.push(V);return K};Object.defineProperty(Ix,"__esModule",{value:!0});Ix.transformArguments=Ix.FIRST_KEY_INDEX=void 0;Ix.FIRST_KEY_INDEX=1;Ix.transformArguments=r20});var wx=Q((bJ)=>{var zH0=function(z,V){let K=["JSON.GET",z];if(V?.path)K=(0,e20.pushVerdictArguments)(K,V.path);if(V?.INDENT)K.push("INDENT",V.INDENT);if(V?.NEWLINE)K.push("NEWLINE",V.NEWLINE);if(V?.SPACE)K.push("SPACE",V.SPACE);if(V?.NOESCAPE)K.push("NOESCAPE");return K};Object.defineProperty(bJ,"__esModule",{value:!0});bJ.transformReply=bJ.transformArguments=bJ.IS_READ_ONLY=bJ.FIRST_KEY_INDEX=void 0;var e20=m();bJ.FIRST_KEY_INDEX=1;bJ.IS_READ_ONLY=!0;bJ.transformArguments=zH0;var VH0=c6();Object.defineProperty(bJ,"transformReply",{enumerable:!0,get:function(){return VH0.transformRedisJsonNullReply}})});var Px=Q((Nx)=>{var HH0=function(z,V,K){return["JSON.MERGE",z,V,(0,DH0.transformRedisJsonArgument)(K)]};Object.defineProperty(Nx,"__esModule",{value:!0});Nx.transformArguments=Nx.FIRST_KEY_INDEX=void 0;var DH0=c6();Nx.FIRST_KEY_INDEX=1;Nx.transformArguments=HH0});var Ex=Q((Tx)=>{var BH0=function(z,V){return["JSON.MGET",...z,V]},MH0=function(z){return z.map(jH0.transformRedisJsonNullReply)};Object.defineProperty(Tx,"__esModule",{value:!0});Tx.transformReply=Tx.transformArguments=Tx.FIRST_KEY_INDEX=void 0;var jH0=c6();Tx.FIRST_KEY_INDEX=1;Tx.transformArguments=BH0;Tx.transformReply=MH0});var hx=Q((vx)=>{var IH0=function(z){const V=new Array(1+z.length*3);V[0]="JSON.MSET";let K=1;for(let J=0;J<z.length;J++){const Z=z[J];V[K++]=Z.key,V[K++]=Z.path,V[K++]=(0,FH0.transformRedisJsonArgument)(Z.value)}return V};Object.defineProperty(vx,"__esModule",{value:!0});vx.transformArguments=vx.FIRST_KEY_INDEX=void 0;var FH0=c6();vx.FIRST_KEY_INDEX=1;vx.transformArguments=IH0});var Wx=Q((fJ)=>{var LH0=function(z,V,K){return["JSON.NUMINCRBY",z,V,K.toString()]};Object.defineProperty(fJ,"__esModule",{value:!0});fJ.transformReply=fJ.transformArguments=fJ.FIRST_KEY_INDEX=void 0;fJ.FIRST_KEY_INDEX=1;fJ.transformArguments=LH0;var wH0=c6();Object.defineProperty(fJ,"transformReply",{enumerable:!0,get:function(){return wH0.transformNumbersReply}})});var Rx=Q((xJ)=>{var TH0=function(z,V,K){return["JSON.NUMMULTBY",z,V,K.toString()]};Object.defineProperty(xJ,"__esModule",{value:!0});xJ.transformReply=xJ.transformArguments=xJ.FIRST_KEY_INDEX=void 0;xJ.FIRST_KEY_INDEX=1;xJ.transformArguments=TH0;var AH0=c6();Object.defineProperty(xJ,"transformReply",{enumerable:!0,get:function(){return AH0.transformNumbersReply}})});var bx=Q((kx)=>{var hH0=function(z,V){const K=["JSON.OBJKEYS",z];if(V)K.push(V);return K};Object.defineProperty(kx,"__esModule",{value:!0});kx.transformArguments=kx.FIRST_KEY_INDEX=void 0;kx.FIRST_KEY_INDEX=1;kx.transformArguments=hH0});var Sx=Q((fx)=>{var RH0=function(z,V){const K=["JSON.OBJLEN",z];if(V)K.push(V);return K};Object.defineProperty(fx,"__esModule",{value:!0});fx.transformArguments=fx.FIRST_KEY_INDEX=void 0;fx.FIRST_KEY_INDEX=1;fx.transformArguments=RH0});var $x=Q((yx)=>{var YH0=function(z,V){const K=["JSON.RESP",z];if(V)K.push(V);return K};Object.defineProperty(yx,"__esModule",{value:!0});yx.transformArguments=yx.FIRST_KEY_INDEX=void 0;yx.FIRST_KEY_INDEX=1;yx.transformArguments=YH0});var dx=Q((gx)=>{var xH0=function(z,V,K,J){const Z=["JSON.SET",z,V,(0,fH0.transformRedisJsonArgument)(K)];if(J?.NX)Z.push("NX");else if(J?.XX)Z.push("XX");return Z};Object.defineProperty(gx,"__esModule",{value:!0});gx.transformArguments=gx.FIRST_KEY_INDEX=void 0;var fH0=c6();gx.FIRST_KEY_INDEX=1;gx.transformArguments=xH0});var lx=Q((cx)=>{var yH0=function(...[z,V,K]){const J=["JSON.STRAPPEND",z];if(K!==void 0&&K!==null)J.push(V,(0,mx.transformRedisJsonArgument)(K));else J.push((0,mx.transformRedisJsonArgument)(V));return J};Object.defineProperty(cx,"__esModule",{value:!0});cx.transformArguments=cx.FIRST_KEY_INDEX=void 0;var mx=c6();cx.FIRST_KEY_INDEX=1;cx.transformArguments=yH0});var ax=Q((nx)=>{var $H0=function(z,V){const K=["JSON.STRLEN",z];if(V)K.push(V);return K};Object.defineProperty(nx,"__esModule",{value:!0});nx.transformArguments=nx.IS_READ_ONLY=nx.FIRST_KEY_INDEX=void 0;nx.FIRST_KEY_INDEX=1;nx.IS_READ_ONLY=!0;nx.transformArguments=$H0});var rx=Q((ox)=>{var dH0=function(z,V){const K=["JSON.TYPE",z];if(V)K.push(V);return K};Object.defineProperty(ox,"__esModule",{value:!0});ox.transformArguments=ox.FIRST_KEY_INDEX=void 0;ox.FIRST_KEY_INDEX=1;ox.transformArguments=dH0});var c6=Q((PS)=>{var cH0=function(z){return JSON.stringify(z)},qS=function(z){return JSON.parse(z)},pH0=function(z){if(z===null)return null;return qS(z)},lH0=function(z){return JSON.parse(z)};Object.defineProperty(PS,"__esModule",{value:!0});PS.transformNumbersReply=PS.transformRedisJsonNullReply=PS.transformRedisJsonReply=PS.transformRedisJsonArgument=void 0;var sx=lf(),ex=of(),zS=sf(),VS=Vx(),KS=Ux(),JS=Qx(),ZS=Mx(),US=Fx(),DS=Lx(),HS=wx(),QS=Px(),jS=Ex(),BS=hx(),MS=Wx(),GS=Rx(),OS=bx(),FS=Sx(),IS=$x(),XS=dx(),LS=lx(),wS=ax(),NS=rx();PS.default={ARRAPPEND:sx,arrAppend:sx,ARRINDEX:ex,arrIndex:ex,ARRINSERT:zS,arrInsert:zS,ARRLEN:VS,arrLen:VS,ARRPOP:KS,arrPop:KS,ARRTRIM:JS,arrTrim:JS,DEBUG_MEMORY:ZS,debugMemory:ZS,DEL:US,del:US,FORGET:DS,forget:DS,GET:HS,get:HS,MERGE:QS,merge:QS,MGET:jS,mGet:jS,MSET:BS,mSet:BS,NUMINCRBY:MS,numIncrBy:MS,NUMMULTBY:GS,numMultBy:GS,OBJKEYS:OS,objKeys:OS,OBJLEN:FS,objLen:FS,RESP:IS,resp:IS,SET:XS,set:XS,STRAPPEND:LS,strAppend:LS,STRLEN:wS,strLen:wS,TYPE:NS,type:NS};PS.transformRedisJsonArgument=cH0;PS.transformRedisJsonReply=qS;PS.transformRedisJsonNullReply=pH0;PS.transformNumbersReply=lH0});var yJ=Q((SJ)=>{Object.defineProperty(SJ,"__esModule",{value:!0});SJ.default=void 0;var tH0=c6();Object.defineProperty(SJ,"default",{enumerable:!0,get:function(){return tH0.default}})});var vS=Q((AS)=>{var sH0=function(){return["FT._LIST"]};Object.defineProperty(AS,"__esModule",{value:!0});AS.transformArguments=void 0;AS.transformArguments=sH0});var WS=Q((CS)=>{var zQ0=function(z,V){const K=["FT.ALTER",z,"SCHEMA","ADD"];return(0,eH0.pushSchema)(K,V),K};Object.defineProperty(CS,"__esModule",{value:!0});CS.transformArguments=void 0;var eH0=q8();CS.transformArguments=zQ0});var u5=Q((fS)=>{var VQ0=function(z,V,K){return bS(["FT.AGGREGATE",z,V],K)},bS=function(z,V){if(V?.VERBATIM)z.push("VERBATIM");if(V?.LOAD)z.push("LOAD"),(0,JV.pushArgumentsWithLength)(z,()=>{if(Array.isArray(V.LOAD))for(let K of V.LOAD)RS(z,K);else RS(z,V.LOAD)});if(V?.STEPS)for(let K of V.STEPS)switch(K.type){case V5.GROUPBY:if(z.push("GROUPBY"),!K.properties)z.push("0");else(0,YS.pushVerdictArgument)(z,K.properties);if(Array.isArray(K.REDUCE))for(let J of K.REDUCE)kS(z,J);else kS(z,K.REDUCE);break;case V5.SORTBY:if((0,JV.pushSortByArguments)(z,"SORTBY",K.BY),K.MAX)z.push("MAX",K.MAX.toString());break;case V5.APPLY:z.push("APPLY",K.expression,"AS",K.AS);break;case V5.LIMIT:z.push("LIMIT",K.from.toString(),K.size.toString());break;case V5.FILTER:z.push("FILTER",K.expression);break}if((0,JV.pushParamsArgs)(z,V?.PARAMS),V?.DIALECT)z.push("DIALECT",V.DIALECT.toString());if(V?.TIMEOUT!==void 0)z.push("TIMEOUT",V.TIMEOUT.toString());return z},RS=function(z,V){if(typeof V==="string")z.push(V);else if(z.push(V.identifier),V.AS)z.push("AS",V.AS)},kS=function(z,V){switch(z.push("REDUCE",V.type),V.type){case p6.COUNT:z.push("0");break;case p6.COUNT_DISTINCT:case p6.COUNT_DISTINCTISH:case p6.SUM:case p6.MIN:case p6.MAX:case p6.AVG:case p6.STDDEV:case p6.TOLIST:z.push("1",V.property);break;case p6.QUANTILE:z.push("2",V.property,V.quantile.toString());break;case p6.FIRST_VALUE:{(0,JV.pushArgumentsWithLength)(z,()=>{if(z.push(V.property),V.BY){if(z.push("BY"),typeof V.BY==="string")z.push(V.BY);else if(z.push(V.BY.property),V.BY.direction)z.push(V.BY.direction)}});break}case p6.RANDOM_SAMPLE:z.push("2",V.property,V.sampleSize.toString());break}if(V.AS)z.push("AS",V.AS)},KQ0=function(z){const V=[];for(let K=1;K<z.length;K++)V.push((0,YS.transformTuplesReply)(z[K]));return{total:z[0],results:V}};Object.defineProperty(fS,"__esModule",{value:!0});fS.transformReply=fS.pushAggregatehOptions=fS.transformArguments=fS.IS_READ_ONLY=fS.FIRST_KEY_INDEX=fS.AggregateGroupByReducers=fS.AggregateSteps=void 0;var YS=m(),JV=q8(),V5;(function(z){z.GROUPBY="GROUPBY",z.SORTBY="SORTBY",z.APPLY="APPLY",z.LIMIT="LIMIT",z.FILTER="FILTER"})(V5||(fS.AggregateSteps=V5={}));var p6;(function(z){z.COUNT="COUNT",z.COUNT_DISTINCT="COUNT_DISTINCT",z.COUNT_DISTINCTISH="COUNT_DISTINCTISH",z.SUM="SUM",z.MIN="MIN",z.MAX="MAX",z.AVG="AVG",z.STDDEV="STDDEV",z.QUANTILE="QUANTILE",z.TOLIST="TOLIST",z.TO_LIST="TOLIST",z.FIRST_VALUE="FIRST_VALUE",z.RANDOM_SAMPLE="RANDOM_SAMPLE"})(p6||(fS.AggregateGroupByReducers=p6={}));fS.FIRST_KEY_INDEX=1;fS.IS_READ_ONLY=!0;fS.transformArguments=VQ0;fS.pushAggregatehOptions=bS;fS.transformReply=KQ0});var _J=Q((ZV)=>{var jQ0=function(z,V,K){const J=(0,SS.transformArguments)(z,V,K);if(J.push("WITHCURSOR"),K?.COUNT)J.push("COUNT",K.COUNT.toString());return J},BQ0=function(z){return{...(0,SS.transformReply)(z[0]),cursor:z[1]}};Object.defineProperty(ZV,"__esModule",{value:!0});ZV.transformReply=ZV.transformArguments=ZV.IS_READ_ONLY=ZV.FIRST_KEY_INDEX=void 0;var SS=u5(),yS=u5();Object.defineProperty(ZV,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return yS.FIRST_KEY_INDEX}});Object.defineProperty(ZV,"IS_READ_ONLY",{enumerable:!0,get:function(){return yS.IS_READ_ONLY}});ZV.transformArguments=jQ0;ZV.transformReply=BQ0});var uS=Q(($S)=>{var GQ0=function(z,V){return["FT.ALIASADD",z,V]};Object.defineProperty($S,"__esModule",{value:!0});$S.transformArguments=void 0;$S.transformArguments=GQ0});var cS=Q((dS)=>{var OQ0=function(z,V){return["FT.ALIASDEL",z,V]};Object.defineProperty(dS,"__esModule",{value:!0});dS.transformArguments=void 0;dS.transformArguments=OQ0});var nS=Q((pS)=>{var FQ0=function(z,V){return["FT.ALIASUPDATE",z,V]};Object.defineProperty(pS,"__esModule",{value:!0});pS.transformArguments=void 0;pS.transformArguments=FQ0});var oS=Q((iS)=>{var IQ0=function(z){return["FT.CONFIG","GET",z]},XQ0=function(z){const V=Object.create(null);for(let[K,J]of z)V[K]=J;return V};Object.defineProperty(iS,"__esModule",{value:!0});iS.transformReply=iS.transformArguments=void 0;iS.transformArguments=IQ0;iS.transformReply=XQ0});var sS=Q((tS)=>{var wQ0=function(z,V){return["FT.CONFIG","SET",z,V]};Object.defineProperty(tS,"__esModule",{value:!0});tS.transformArguments=void 0;tS.transformArguments=wQ0});var Ky=Q((zy)=>{var qQ0=function(z,V,K){const J=["FT.CREATE",z];if(K?.ON)J.push("ON",K.ON);if((0,eS.pushOptionalVerdictArgument)(J,"PREFIX",K?.PREFIX),K?.FILTER)J.push("FILTER",K.FILTER);if(K?.LANGUAGE)J.push("LANGUAGE",K.LANGUAGE);if(K?.LANGUAGE_FIELD)J.push("LANGUAGE_FIELD",K.LANGUAGE_FIELD);if(K?.SCORE)J.push("SCORE",K.SCORE.toString());if(K?.SCORE_FIELD)J.push("SCORE_FIELD",K.SCORE_FIELD);if(K?.MAXTEXTFIELDS)J.push("MAXTEXTFIELDS");if(K?.TEMPORARY)J.push("TEMPORARY",K.TEMPORARY.toString());if(K?.NOOFFSETS)J.push("NOOFFSETS");if(K?.NOHL)J.push("NOHL");if(K?.NOFIELDS)J.push("NOFIELDS");if(K?.NOFREQS)J.push("NOFREQS");if(K?.SKIPINITIALSCAN)J.push("SKIPINITIALSCAN");return(0,eS.pushOptionalVerdictArgument)(J,"STOPWORDS",K?.STOPWORDS),J.push("SCHEMA"),(0,NQ0.pushSchema)(J,V),J};Object.defineProperty(zy,"__esModule",{value:!0});zy.transformArguments=void 0;var eS=m(),NQ0=q8();zy.transformArguments=qQ0});var Uy=Q((Jy)=>{var PQ0=function(z,V){return["FT.CURSOR","DEL",z,V.toString()]};Object.defineProperty(Jy,"__esModule",{value:!0});Jy.transformArguments=Jy.FIRST_KEY_INDEX=void 0;Jy.FIRST_KEY_INDEX=1;Jy.transformArguments=PQ0});var Dy=Q(($J)=>{var AQ0=function(z,V,K){const J=["FT.CURSOR","READ",z,V.toString()];if(K?.COUNT)J.push("COUNT",K.COUNT.toString());return J};Object.defineProperty($J,"__esModule",{value:!0});$J.transformReply=$J.transformArguments=$J.IS_READ_ONLY=$J.FIRST_KEY_INDEX=void 0;$J.FIRST_KEY_INDEX=1;$J.IS_READ_ONLY=!0;$J.transformArguments=AQ0;var EQ0=_J();Object.defineProperty($J,"transformReply",{enumerable:!0,get:function(){return EQ0.transformReply}})});var jy=Q((Hy)=>{var kQ0=function(z,V){return(0,RQ0.pushVerdictArguments)(["FT.DICTADD",z],V)};Object.defineProperty(Hy,"__esModule",{value:!0});Hy.transformArguments=void 0;var RQ0=m();Hy.transformArguments=kQ0});var Gy=Q((By)=>{var bQ0=function(z,V){return(0,YQ0.pushVerdictArguments)(["FT.DICTDEL",z],V)};Object.defineProperty(By,"__esModule",{value:!0});By.transformArguments=void 0;var YQ0=m();By.transformArguments=bQ0});var Iy=Q((Oy)=>{var fQ0=function(z){return["FT.DICTDUMP",z]};Object.defineProperty(Oy,"__esModule",{value:!0});Oy.transformArguments=void 0;Oy.transformArguments=fQ0});var wy=Q((Xy)=>{var xQ0=function(z,V){const K=["FT.DROPINDEX",z];if(V?.DD)K.push("DD");return K};Object.defineProperty(Xy,"__esModule",{value:!0});Xy.transformArguments=void 0;Xy.transformArguments=xQ0});var Py=Q((Ny)=>{var yQ0=function(z,V,K){const J=["FT.EXPLAIN",z,V];if((0,SQ0.pushParamsArgs)(J,K?.PARAMS),K?.DIALECT)J.push("DIALECT",K.DIALECT.toString());return J};Object.defineProperty(Ny,"__esModule",{value:!0});Ny.transformArguments=Ny.IS_READ_ONLY=void 0;var SQ0=q8();Ny.IS_READ_ONLY=!0;Ny.transformArguments=yQ0});var Ey=Q((Ty)=>{var $Q0=function(z,V){return["FT.EXPLAINCLI",z,V]};Object.defineProperty(Ty,"__esModule",{value:!0});Ty.transformArguments=Ty.IS_READ_ONLY=void 0;Ty.IS_READ_ONLY=!0;Ty.transformArguments=$Q0});var Wy=Q((Cy)=>{var uQ0=function(z){return["FT.INFO",z]},dQ0=function(z){return{indexName:z[1],indexOptions:z[3],indexDefinition:(0,vy.transformTuplesReply)(z[5]),attributes:z[7].map((V)=>(0,vy.transformTuplesReply)(V)),numDocs:z[9],maxDocId:z[11],numTerms:z[13],numRecords:z[15],invertedSzMb:z[17],vectorIndexSzMb:z[19],totalInvertedIndexBlocks:z[21],offsetVectorsSzMb:z[23],docTableSizeMb:z[25],sortableValuesSizeMb:z[27],keyTableSizeMb:z[29],recordsPerDocAvg:z[31],bytesPerRecordAvg:z[33],offsetsPerTermAvg:z[35],offsetBitsPerRecordAvg:z[37],hashIndexingFailures:z[39],indexing:z[41],percentIndexed:z[43],gcStats:{bytesCollected:z[45][1],totalMsRun:z[45][3],totalCycles:z[45][5],averageCycleTimeMs:z[45][7],lastRunTimeMs:z[45][9],gcNumericTreesMissed:z[45][11],gcBlocksDenied:z[45][13]},cursorStats:{globalIdle:z[47][1],globalTotal:z[47][3],indexCapacity:z[47][5],idnexTotal:z[47][7]},stopWords:z[49]}};Object.defineProperty(Cy,"__esModule",{value:!0});Cy.transformReply=Cy.transformArguments=void 0;var vy=m();Cy.transformArguments=uQ0;Cy.transformReply=dQ0});var gJ=Q((Ry)=>{var pQ0=function(z,V,K){return(0,cQ0.pushSearchOptions)(["FT.SEARCH",z,V],K)},lQ0=function(z,V){const K=[];let J=1;while(J<z.length)K.push({id:z[J++],value:V?Object.create(null):nQ0(z[J++])});return{total:z[0],documents:K}},nQ0=function(z){const V=Object.create(null);let K=0;while(K<z.length){const J=z[K++],Z=z[K++];if(J==="$")try{Object.assign(V,JSON.parse(Z));continue}catch{}V[J]=Z}return V};Object.defineProperty(Ry,"__esModule",{value:!0});Ry.transformReply=Ry.transformArguments=Ry.IS_READ_ONLY=Ry.FIRST_KEY_INDEX=void 0;var cQ0=q8();Ry.FIRST_KEY_INDEX=1;Ry.IS_READ_ONLY=!0;Ry.transformArguments=pQ0;Ry.transformReply=lQ0});var xy=Q((by)=>{var rQ0=function(z,V,K){let J=["FT.PROFILE",z,"SEARCH"];if(K?.LIMITED)J.push("LIMITED");return J.push("QUERY",V),(0,Yy.pushSearchOptions)(J,K)},sQ0=function(z,V){return{results:(0,tQ0.transformReply)(z[0],V),profile:(0,Yy.transformProfile)(z[1])}};Object.defineProperty(by,"__esModule",{value:!0});by.transformReply=by.transformArguments=by.IS_READ_ONLY=void 0;var tQ0=gJ(),Yy=q8();by.IS_READ_ONLY=!0;by.transformArguments=rQ0;by.transformReply=sQ0});var $y=Q((yy)=>{var Kj0=function(z,V,K){const J=["FT.PROFILE",z,"AGGREGATE"];if(K?.LIMITED)J.push("LIMITED");return J.push("QUERY",V),(0,Sy.pushAggregatehOptions)(J,K),J},Jj0=function(z){return{results:(0,Sy.transformReply)(z[0]),profile:(0,Vj0.transformProfile)(z[1])}};Object.defineProperty(yy,"__esModule",{value:!0});yy.transformReply=yy.transformArguments=yy.IS_READ_ONLY=void 0;var Sy=u5(),Vj0=q8();yy.IS_READ_ONLY=!0;yy.transformArguments=Kj0;yy.transformReply=Jj0});var dy=Q((gy)=>{var Hj0=function(z,V,K){return(0,Dj0.pushSearchOptions)(["FT.SEARCH",z,V,"NOCONTENT"],K)},Qj0=function(z){return{total:z[0],documents:z.slice(1)}};Object.defineProperty(gy,"__esModule",{value:!0});gy.transformReply=gy.transformArguments=gy.IS_READ_ONLY=gy.FIRST_KEY_INDEX=void 0;var Dj0=q8();gy.FIRST_KEY_INDEX=1;gy.IS_READ_ONLY=!0;gy.transformArguments=Hj0;gy.transformReply=Qj0});var ly=Q((cy)=>{var Gj0=function(z,V,K){const J=["FT.SPELLCHECK",z,V];if(K?.DISTANCE)J.push("DISTANCE",K.DISTANCE.toString());if(K?.TERMS)if(Array.isArray(K.TERMS))for(let Z of K.TERMS)my(J,Z);else my(J,K.TERMS);if(K?.DIALECT)J.push("DIALECT",K.DIALECT.toString());return J},my=function(z,{mode:V,dictionary:K}){z.push("TERMS",V,K)},Oj0=function(z){return z.map(([,V,K])=>({term:V,suggestions:K.map(([J,Z])=>({score:Number(J),suggestion:Z}))}))};Object.defineProperty(cy,"__esModule",{value:!0});cy.transformReply=cy.transformArguments=void 0;cy.transformArguments=Gj0;cy.transformReply=Oj0});var ay=Q((ny)=>{var Ij0=function(z,V,K,J){const Z=["FT.SUGADD",z,V,K.toString()];if(J?.INCR)Z.push("INCR");if(J?.PAYLOAD)Z.push("PAYLOAD",J.PAYLOAD);return Z};Object.defineProperty(ny,"__esModule",{value:!0});ny.transformArguments=void 0;ny.transformArguments=Ij0});var oy=Q((uJ)=>{var Xj0=function(z,V){return["FT.SUGDEL",z,V]};Object.defineProperty(uJ,"__esModule",{value:!0});uJ.transformReply=uJ.transformArguments=void 0;uJ.transformArguments=Xj0;var Lj0=m();Object.defineProperty(uJ,"transformReply",{enumerable:!0,get:function(){return Lj0.transformBooleanReply}})});var F4=Q((ty)=>{var qj0=function(z,V,K){const J=["FT.SUGGET",z,V];if(K?.FUZZY)J.push("FUZZY");if(K?.MAX)J.push("MAX",K.MAX.toString());return J};Object.defineProperty(ty,"__esModule",{value:!0});ty.transformArguments=ty.IS_READ_ONLY=void 0;ty.IS_READ_ONLY=!0;ty.transformArguments=qj0});var ey=Q((dJ)=>{var Ej0=function(z,V,K){return[...(0,Tj0.transformArguments)(z,V,K),"WITHPAYLOADS"]},vj0=function(z){if(z===null)return null;const V=[];for(let K=0;K<z.length;K+=2)V.push({suggestion:z[K],payload:z[K+1]});return V};Object.defineProperty(dJ,"__esModule",{value:!0});dJ.transformReply=dJ.transformArguments=dJ.IS_READ_ONLY=void 0;var Tj0=F4(),Aj0=F4();Object.defineProperty(dJ,"IS_READ_ONLY",{enumerable:!0,get:function(){return Aj0.IS_READ_ONLY}});dJ.transformArguments=Ej0;dJ.transformReply=vj0});var V_=Q((mJ)=>{var Rj0=function(z,V,K){return[...(0,hj0.transformArguments)(z,V,K),"WITHSCORES","WITHPAYLOADS"]},kj0=function(z){if(z===null)return null;const V=[];for(let K=0;K<z.length;K+=3)V.push({suggestion:z[K],score:Number(z[K+1]),payload:z[K+2]});return V};Object.defineProperty(mJ,"__esModule",{value:!0});mJ.transformReply=mJ.transformArguments=mJ.IS_READ_ONLY=void 0;var hj0=F4(),Wj0=F4();Object.defineProperty(mJ,"IS_READ_ONLY",{enumerable:!0,get:function(){return Wj0.IS_READ_ONLY}});mJ.transformArguments=Rj0;mJ.transformReply=kj0});var J_=Q((cJ)=>{var xj0=function(z,V,K){return[...(0,bj0.transformArguments)(z,V,K),"WITHSCORES"]},Sj0=function(z){if(z===null)return null;const V=[];for(let K=0;K<z.length;K+=2)V.push({suggestion:z[K],score:Number(z[K+1])});return V};Object.defineProperty(cJ,"__esModule",{value:!0});cJ.transformReply=cJ.transformArguments=cJ.IS_READ_ONLY=void 0;var bj0=F4(),fj0=F4();Object.defineProperty(cJ,"IS_READ_ONLY",{enumerable:!0,get:function(){return fj0.IS_READ_ONLY}});cJ.transformArguments=xj0;cJ.transformReply=Sj0});var D_=Q((Z_)=>{var _j0=function(z){return["FT.SUGLEN",z]};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.transformArguments=Z_.IS_READ_ONLY=void 0;Z_.IS_READ_ONLY=!0;Z_.transformArguments=_j0});var j_=Q((H_)=>{var gj0=function(z){return["FT.SYNDUMP",z]};Object.defineProperty(H_,"__esModule",{value:!0});H_.transformArguments=void 0;H_.transformArguments=gj0});var G_=Q((B_)=>{var dj0=function(z,V,K,J){const Z=["FT.SYNUPDATE",z,V];if(J?.SKIPINITIALSCAN)Z.push("SKIPINITIALSCAN");return(0,uj0.pushVerdictArguments)(Z,K)};Object.defineProperty(B_,"__esModule",{value:!0});B_.transformArguments=void 0;var uj0=m();B_.transformArguments=dj0});var I_=Q((O_)=>{var mj0=function(z,V){return["FT.TAGVALS",z,V]};Object.defineProperty(O_,"__esModule",{value:!0});O_.transformArguments=void 0;O_.transformArguments=mj0});var q8=Q((V$)=>{var UV=function(z,V){if(typeof V==="string")z.push(V);else if(z.push(V.BY),V.DIRECTION)z.push(V.DIRECTION)},cj0=function(z,V,K){const J=z.push(V,"");if(Array.isArray(K))for(let Z of K)UV(z,Z);else UV(z,K);return z[J-1]=(z.length-J).toString(),z},s_=function(z,V){const K=z.push("")-1;return V(z),z[K]=(z.length-K-1).toString(),z},pj0=function(z,V){for(let[K,J]of Object.entries(V)){if(z.push(K),typeof J==="string"){z.push(J);continue}if(J.AS)z.push("AS",J.AS);switch(z.push(J.type),J.type){case U3.TEXT:if(J.NOSTEM)z.push("NOSTEM");if(J.WEIGHT)z.push("WEIGHT",J.WEIGHT.toString());if(J.PHONETIC)z.push("PHONETIC",J.PHONETIC);if(J.WITHSUFFIXTRIE)z.push("WITHSUFFIXTRIE");break;case U3.TAG:if(J.SEPARATOR)z.push("SEPARATOR",J.SEPARATOR);if(J.CASESENSITIVE)z.push("CASESENSITIVE");if(J.WITHSUFFIXTRIE)z.push("WITHSUFFIXTRIE");break;case U3.VECTOR:z.push(J.ALGORITHM),s_(z,()=>{if(z.push("TYPE",J.TYPE,"DIM",J.DIM.toString(),"DISTANCE_METRIC",J.DISTANCE_METRIC),J.INITIAL_CAP)z.push("INITIAL_CAP",J.INITIAL_CAP.toString());switch(J.ALGORITHM){case DV.FLAT:if(J.BLOCK_SIZE)z.push("BLOCK_SIZE",J.BLOCK_SIZE.toString());break;case DV.HNSW:if(J.M)z.push("M",J.M.toString());if(J.EF_CONSTRUCTION)z.push("EF_CONSTRUCTION",J.EF_CONSTRUCTION.toString());if(J.EF_RUNTIME)z.push("EF_RUNTIME",J.EF_RUNTIME.toString());break}});continue}if(J.SORTABLE){if(z.push("SORTABLE"),J.SORTABLE==="UNF")z.push("UNF")}if(J.NOINDEX)z.push("NOINDEX")}},e_=function(z,V){if(V){const K=Object.entries(V);z.push("PARAMS",(K.length*2).toString());for(let[J,Z]of K)z.push(J,typeof Z==="number"?Z.toString():Z)}return z},lj0=function(z,V){if(V?.VERBATIM)z.push("VERBATIM");if(V?.NOSTOPWORDS)z.push("NOSTOPWORDS");if((0,Z3.pushOptionalVerdictArgument)(z,"INKEYS",V?.INKEYS),(0,Z3.pushOptionalVerdictArgument)(z,"INFIELDS",V?.INFIELDS),(0,Z3.pushOptionalVerdictArgument)(z,"RETURN",V?.RETURN),V?.SUMMARIZE){if(z.push("SUMMARIZE"),typeof V.SUMMARIZE==="object"){if(V.SUMMARIZE.FIELDS)z.push("FIELDS"),(0,Z3.pushVerdictArgument)(z,V.SUMMARIZE.FIELDS);if(V.SUMMARIZE.FRAGS)z.push("FRAGS",V.SUMMARIZE.FRAGS.toString());if(V.SUMMARIZE.LEN)z.push("LEN",V.SUMMARIZE.LEN.toString());if(V.SUMMARIZE.SEPARATOR)z.push("SEPARATOR",V.SUMMARIZE.SEPARATOR)}}if(V?.HIGHLIGHT){if(z.push("HIGHLIGHT"),typeof V.HIGHLIGHT==="object"){if(V.HIGHLIGHT.FIELDS)z.push("FIELDS"),(0,Z3.pushVerdictArgument)(z,V.HIGHLIGHT.FIELDS);if(V.HIGHLIGHT.TAGS)z.push("TAGS",V.HIGHLIGHT.TAGS.open,V.HIGHLIGHT.TAGS.close)}}if(V?.SLOP)z.push("SLOP",V.SLOP.toString());if(V?.INORDER)z.push("INORDER");if(V?.LANGUAGE)z.push("LANGUAGE",V.LANGUAGE);if(V?.EXPANDER)z.push("EXPANDER",V.EXPANDER);if(V?.SCORER)z.push("SCORER",V.SCORER);if(V?.SORTBY)z.push("SORTBY"),UV(z,V.SORTBY);if(V?.LIMIT)z.push("LIMIT",V.LIMIT.from.toString(),V.LIMIT.size.toString());if(V?.PARAMS)e_(z,V.PARAMS);if(V?.DIALECT)z.push("DIALECT",V.DIALECT.toString());if(V?.RETURN?.length===0)z.preserve=!0;if(V?.TIMEOUT!==void 0)z.push("TIMEOUT",V.TIMEOUT.toString());return z},nj0=function(z){return{totalProfileTime:z[0][1],parsingTime:z[1][1],pipelineCreationTime:z[2][1],iteratorsProfile:ij0(z[3][1])}},ij0=function(z){var V={};for(let K=0;K<z.length;K+=2){const J=z[K+1];switch(z[K]){case"Type":V.type=J;break;case"Counter":V.counter=J;break;case"Time":V.time=J;break;case"Query type":V.queryType=J;break;case"Child iterators":V.childIterators=J.map(z$);break}}return V},z$=function(z){var V={};for(let K=1;K<z.length;K+=2){const J=z[K+1];switch(z[K]){case"Type":V.type=J;break;case"Counter":V.counter=J;break;case"Time":V.time=J;break;case"Size":V.size=J;break;case"Term":V.term=J;break;case"Child iterators":V.childIterators=J.map(z$);break}}return V};Object.defineProperty(V$,"__esModule",{value:!0});V$.transformProfile=V$.pushSearchOptions=V$.pushParamsArgs=V$.pushSchema=V$.VectorAlgorithms=V$.SchemaTextFieldPhonetics=V$.SchemaFieldTypes=V$.pushArgumentsWithLength=V$.pushSortByArguments=V$.pushSortByProperty=V$.RedisSearchLanguages=void 0;var X_=vS(),L_=WS(),w_=_J(),N_=u5(),q_=uS(),P_=cS(),T_=nS(),A_=oS(),E_=sS(),v_=Ky(),C_=Uy(),h_=Dy(),W_=jy(),R_=Gy(),k_=Iy(),Y_=wy(),b_=Py(),f_=Ey(),x_=Wy(),S_=xy(),y_=$y(),__=gJ(),$_=dy(),g_=ly(),u_=ay(),d_=oy(),m_=ey(),c_=V_(),p_=J_(),l_=F4(),n_=D_(),i_=j_(),a_=G_(),o_=I_(),Z3=m();V$.default={_LIST:X_,_list:X_,ALTER:L_,alter:L_,AGGREGATE_WITHCURSOR:w_,aggregateWithCursor:w_,AGGREGATE:N_,aggregate:N_,ALIASADD:q_,aliasAdd:q_,ALIASDEL:P_,aliasDel:P_,ALIASUPDATE:T_,aliasUpdate:T_,CONFIG_GET:A_,configGet:A_,CONFIG_SET:E_,configSet:E_,CREATE:v_,create:v_,CURSOR_DEL:C_,cursorDel:C_,CURSOR_READ:h_,cursorRead:h_,DICTADD:W_,dictAdd:W_,DICTDEL:R_,dictDel:R_,DICTDUMP:k_,dictDump:k_,DROPINDEX:Y_,dropIndex:Y_,EXPLAIN:b_,explain:b_,EXPLAINCLI:f_,explainCli:f_,INFO:x_,info:x_,PROFILESEARCH:S_,profileSearch:S_,PROFILEAGGREGATE:y_,profileAggregate:y_,SEARCH:__,search:__,SEARCH_NOCONTENT:$_,searchNoContent:$_,SPELLCHECK:g_,spellCheck:g_,SUGADD:u_,sugAdd:u_,SUGDEL:d_,sugDel:d_,SUGGET_WITHPAYLOADS:m_,sugGetWithPayloads:m_,SUGGET_WITHSCORES_WITHPAYLOADS:c_,sugGetWithScoresWithPayloads:c_,SUGGET_WITHSCORES:p_,sugGetWithScores:p_,SUGGET:l_,sugGet:l_,SUGLEN:n_,sugLen:n_,SYNDUMP:i_,synDump:i_,SYNUPDATE:a_,synUpdate:a_,TAGVALS:o_,tagVals:o_};var t_;(function(z){z.ARABIC="Arabic",z.BASQUE="Basque",z.CATALANA="Catalan",z.DANISH="Danish",z.DUTCH="Dutch",z.ENGLISH="English",z.FINNISH="Finnish",z.FRENCH="French",z.GERMAN="German",z.GREEK="Greek",z.HUNGARIAN="Hungarian",z.INDONESAIN="Indonesian",z.IRISH="Irish",z.ITALIAN="Italian",z.LITHUANIAN="Lithuanian",z.NEPALI="Nepali",z.NORWEIGAN="Norwegian",z.PORTUGUESE="Portuguese",z.ROMANIAN="Romanian",z.RUSSIAN="Russian",z.SPANISH="Spanish",z.SWEDISH="Swedish",z.TAMIL="Tamil",z.TURKISH="Turkish",z.CHINESE="Chinese"})(t_||(V$.RedisSearchLanguages=t_={}));V$.pushSortByProperty=UV;V$.pushSortByArguments=cj0;V$.pushArgumentsWithLength=s_;var U3;(function(z){z.TEXT="TEXT",z.NUMERIC="NUMERIC",z.GEO="GEO",z.TAG="TAG",z.VECTOR="VECTOR"})(U3||(V$.SchemaFieldTypes=U3={}));var r_;(function(z){z.DM_EN="dm:en",z.DM_FR="dm:fr",z.FM_PT="dm:pt",z.DM_ES="dm:es"})(r_||(V$.SchemaTextFieldPhonetics=r_={}));var DV;(function(z){z.FLAT="FLAT",z.HNSW="HNSW"})(DV||(V$.VectorAlgorithms=DV={}));V$.pushSchema=pj0;V$.pushParamsArgs=e_;V$.pushSearchOptions=lj0;V$.transformProfile=nj0});var lJ=Q((I4)=>{Object.defineProperty(I4,"__esModule",{value:!0});I4.AggregateGroupByReducers=I4.AggregateSteps=I4.VectorAlgorithms=I4.SchemaTextFieldPhonetics=I4.SchemaFieldTypes=I4.default=void 0;var UB0=q8();Object.defineProperty(I4,"default",{enumerable:!0,get:function(){return UB0.default}});var pJ=q8();Object.defineProperty(I4,"SchemaFieldTypes",{enumerable:!0,get:function(){return pJ.SchemaFieldTypes}});Object.defineProperty(I4,"SchemaTextFieldPhonetics",{enumerable:!0,get:function(){return pJ.SchemaTextFieldPhonetics}});Object.defineProperty(I4,"VectorAlgorithms",{enumerable:!0,get:function(){return pJ.VectorAlgorithms}});var J$=u5();Object.defineProperty(I4,"AggregateSteps",{enumerable:!0,get:function(){return J$.AggregateSteps}});Object.defineProperty(I4,"AggregateGroupByReducers",{enumerable:!0,get:function(){return J$.AggregateGroupByReducers}})});var D$=Q((Z$)=>{var HB0=function(z,V,K,J){const Z=["TS.ADD",z,(0,D3.transformTimestampArgument)(V),K.toString()];if((0,D3.pushRetentionArgument)(Z,J?.RETENTION),(0,D3.pushEncodingArgument)(Z,J?.ENCODING),(0,D3.pushChunkSizeArgument)(Z,J?.CHUNK_SIZE),J?.ON_DUPLICATE)Z.push("ON_DUPLICATE",J.ON_DUPLICATE);return(0,D3.pushLabelsArgument)(Z,J?.LABELS),Z};Object.defineProperty(Z$,"__esModule",{value:!0});Z$.transformArguments=Z$.FIRST_KEY_INDEX=void 0;var D3=r0();Z$.FIRST_KEY_INDEX=1;Z$.transformArguments=HB0});var j$=Q((H$)=>{var jB0=function(z,V){const K=["TS.ALTER",z];return(0,HV.pushRetentionArgument)(K,V?.RETENTION),(0,HV.pushChunkSizeArgument)(K,V?.CHUNK_SIZE),(0,HV.pushDuplicatePolicy)(K,V?.DUPLICATE_POLICY),(0,HV.pushLabelsArgument)(K,V?.LABELS),K};Object.defineProperty(H$,"__esModule",{value:!0});H$.transformArguments=H$.FIRST_KEY_INDEX=void 0;var HV=r0();H$.FIRST_KEY_INDEX=1;H$.transformArguments=jB0});var G$=Q((B$)=>{var MB0=function(z,V){const K=["TS.CREATE",z];return(0,H3.pushRetentionArgument)(K,V?.RETENTION),(0,H3.pushEncodingArgument)(K,V?.ENCODING),(0,H3.pushChunkSizeArgument)(K,V?.CHUNK_SIZE),(0,H3.pushDuplicatePolicy)(K,V?.DUPLICATE_POLICY),(0,H3.pushLabelsArgument)(K,V?.LABELS),K};Object.defineProperty(B$,"__esModule",{value:!0});B$.transformArguments=B$.FIRST_KEY_INDEX=void 0;var H3=r0();B$.FIRST_KEY_INDEX=1;B$.transformArguments=MB0});var I$=Q((O$)=>{var OB0=function(z,V,K,J,Z){const D=["TS.CREATERULE",z,V,"AGGREGATION",K,J.toString()];if(Z)D.push(Z.toString());return D};Object.defineProperty(O$,"__esModule",{value:!0});O$.transformArguments=O$.FIRST_KEY_INDEX=void 0;O$.FIRST_KEY_INDEX=1;O$.transformArguments=OB0});var w$=Q((X$)=>{var XB0=function(z,V,K){return(0,IB0.transformIncrDecrArguments)("TS.DECRBY",z,V,K)};Object.defineProperty(X$,"__esModule",{value:!0});X$.transformArguments=X$.FIRST_KEY_INDEX=void 0;var IB0=r0();X$.FIRST_KEY_INDEX=1;X$.transformArguments=XB0});var T$=Q((q$)=>{var wB0=function(z,V,K){return["TS.DEL",z,(0,N$.transformTimestampArgument)(V),(0,N$.transformTimestampArgument)(K)]};Object.defineProperty(q$,"__esModule",{value:!0});q$.transformArguments=q$.FIRTS_KEY_INDEX=void 0;var N$=r0();q$.FIRTS_KEY_INDEX=1;q$.transformArguments=wB0});var v$=Q((A$)=>{var qB0=function(z,V){return["TS.DELETERULE",z,V]};Object.defineProperty(A$,"__esModule",{value:!0});A$.transformArguments=A$.FIRST_KEY_INDEX=void 0;A$.FIRST_KEY_INDEX=1;A$.transformArguments=qB0});var R$=Q((h$)=>{var TB0=function(z,V){return(0,C$.pushLatestArgument)(["TS.GET",z],V?.LATEST)},AB0=function(z){if(z.length===0)return null;return(0,C$.transformSampleReply)(z)};Object.defineProperty(h$,"__esModule",{value:!0});h$.transformReply=h$.transformArguments=h$.IS_READ_ONLY=h$.FIRST_KEY_INDEX=void 0;var C$=r0();h$.FIRST_KEY_INDEX=1;h$.IS_READ_ONLY=!0;h$.transformArguments=TB0;h$.transformReply=AB0});var b$=Q((k$)=>{var WB0=function(z,V,K){return(0,hB0.transformIncrDecrArguments)("TS.INCRBY",z,V,K)};Object.defineProperty(k$,"__esModule",{value:!0});k$.transformArguments=k$.FIRST_KEY_INDEX=void 0;var hB0=r0();k$.FIRST_KEY_INDEX=1;k$.transformArguments=WB0});var QV=Q((f$)=>{var kB0=function(z){return["TS.INFO",z]},YB0=function(z){return{totalSamples:z[1],memoryUsage:z[3],firstTimestamp:z[5],lastTimestamp:z[7],retentionTime:z[9],chunkCount:z[11],chunkSize:z[13],chunkType:z[15],duplicatePolicy:z[17],labels:z[19].map(([V,K])=>({name:V,value:K})),sourceKey:z[21],rules:z[23].map(([V,K,J])=>({key:V,timeBucket:K,aggregationType:J}))}};Object.defineProperty(f$,"__esModule",{value:!0});f$.transformReply=f$.transformArguments=f$.IS_READ_ONLY=f$.FIRST_KEY_INDEX=void 0;f$.FIRST_KEY_INDEX=1;f$.IS_READ_ONLY=!0;f$.transformArguments=kB0;f$.transformReply=YB0});var $$=Q((jV)=>{var SB0=function(z){const V=(0,S$.transformArguments)(z);return V.push("DEBUG"),V},yB0=function(z){const V=(0,S$.transformReply)(z);return V.keySelfName=z[25],V.chunks=z[27].map((K)=>({startTimestamp:K[1],endTimestamp:K[3],samples:K[5],size:K[7],bytesPerSample:K[9]})),V};Object.defineProperty(jV,"__esModule",{value:!0});jV.transformReply=jV.transformArguments=jV.FIRST_KEY_INDEX=jV.IS_READ_ONLY=void 0;var S$=QV(),y$=QV();Object.defineProperty(jV,"IS_READ_ONLY",{enumerable:!0,get:function(){return y$.IS_READ_ONLY}});Object.defineProperty(jV,"FIRST_KEY_INDEX",{enumerable:!0,get:function(){return y$.FIRST_KEY_INDEX}});jV.transformArguments=SB0;jV.transformReply=yB0});var d$=Q((g$)=>{var gB0=function(z){const V=["TS.MADD"];for(let{key:K,timestamp:J,value:Z}of z)V.push(K,(0,$B0.transformTimestampArgument)(J),Z.toString());return V};Object.defineProperty(g$,"__esModule",{value:!0});g$.transformArguments=g$.FIRST_KEY_INDEX=void 0;var $B0=r0();g$.FIRST_KEY_INDEX=1;g$.transformArguments=gB0});var p$=Q((m$)=>{var dB0=function(z,V){const K=(0,nJ.pushLatestArgument)(["TS.MGET"],V?.LATEST);return(0,nJ.pushFilterArgument)(K,z)},mB0=function(z){return z.map(([V,K,J])=>({key:V,sample:(0,nJ.transformSampleReply)(J)}))};Object.defineProperty(m$,"__esModule",{value:!0});m$.transformReply=m$.transformArguments=m$.IS_READ_ONLY=void 0;var nJ=r0();m$.IS_READ_ONLY=!0;m$.transformArguments=dB0;m$.transformReply=mB0});var i$=Q((l$)=>{var lB0=function(z,V){const K=(0,BV.pushWithLabelsArgument)(["TS.MGET"],V?.SELECTED_LABELS);return(0,BV.pushFilterArgument)(K,z)},nB0=function(z){return z.map(([V,K,J])=>({key:V,labels:(0,BV.transformLablesReply)(K),sample:(0,BV.transformSampleReply)(J)}))};Object.defineProperty(l$,"__esModule",{value:!0});l$.transformReply=l$.transformArguments=l$.IS_READ_ONLY=void 0;var BV=r0();l$.IS_READ_ONLY=!0;l$.transformArguments=lB0;l$.transformReply=nB0});var t$=Q((a$)=>{var tB0=function(z){return(0,oB0.pushVerdictArguments)(["TS.QUERYINDEX"],z)};Object.defineProperty(a$,"__esModule",{value:!0});a$.transformArguments=a$.IS_READ_ONLY=void 0;var oB0=m();a$.IS_READ_ONLY=!0;a$.transformArguments=tB0});var zg=Q((s$)=>{var sB0=function(z,V,K,J){return(0,r$.pushRangeArguments)(["TS.RANGE",z],V,K,J)},eB0=function(z){return(0,r$.transformRangeReply)(z)};Object.defineProperty(s$,"__esModule",{value:!0});s$.transformReply=s$.transformArguments=s$.IS_READ_ONLY=s$.FIRST_KEY_INDEX=void 0;var r$=r0();s$.FIRST_KEY_INDEX=1;s$.IS_READ_ONLY=!0;s$.transformArguments=sB0;s$.transformReply=eB0});var Zg=Q((Kg)=>{var JM0=function(z,V,K,J){return(0,Vg.pushRangeArguments)(["TS.REVRANGE",z],V,K,J)},ZM0=function(z){return(0,Vg.transformRangeReply)(z)};Object.defineProperty(Kg,"__esModule",{value:!0});Kg.transformReply=Kg.transformArguments=Kg.IS_READ_ONLY=Kg.FIRST_KEY_INDEX=void 0;var Vg=r0();Kg.FIRST_KEY_INDEX=1;Kg.IS_READ_ONLY=!0;Kg.transformArguments=JM0;Kg.transformReply=ZM0});var Ug=Q((iJ)=>{var jM0=function(z,V,K,J){return(0,QM0.pushMRangeArguments)(["TS.MRANGE"],z,V,K,J)};Object.defineProperty(iJ,"__esModule",{value:!0});iJ.transformReply=iJ.transformArguments=iJ.IS_READ_ONLY=void 0;var QM0=r0();iJ.IS_READ_ONLY=!0;iJ.transformArguments=jM0;var BM0=r0();Object.defineProperty(iJ,"transformReply",{enumerable:!0,get:function(){return BM0.transformMRangeReply}})});var Dg=Q((aJ)=>{var IM0=function(z,V,K,J){return(0,FM0.pushMRangeWithLabelsArguments)(["TS.MRANGE"],z,V,K,J)};Object.defineProperty(aJ,"__esModule",{value:!0});aJ.transformReply=aJ.transformArguments=aJ.IS_READ_ONLY=void 0;var FM0=r0();aJ.IS_READ_ONLY=!0;aJ.transformArguments=IM0;var XM0=r0();Object.defineProperty(aJ,"transformReply",{enumerable:!0,get:function(){return XM0.transformMRangeWithLabelsReply}})});var Hg=Q((oJ)=>{var PM0=function(z,V,K,J){return(0,qM0.pushMRangeArguments)(["TS.MREVRANGE"],z,V,K,J)};Object.defineProperty(oJ,"__esModule",{value:!0});oJ.transformReply=oJ.transformArguments=oJ.IS_READ_ONLY=void 0;var qM0=r0();oJ.IS_READ_ONLY=!0;oJ.transformArguments=PM0;var TM0=r0();Object.defineProperty(oJ,"transformReply",{enumerable:!0,get:function(){return TM0.transformMRangeReply}})});var Qg=Q((tJ)=>{var hM0=function(z,V,K,J){return(0,CM0.pushMRangeWithLabelsArguments)(["TS.MREVRANGE"],z,V,K,J)};Object.defineProperty(tJ,"__esModule",{value:!0});tJ.transformReply=tJ.transformArguments=tJ.IS_READ_ONLY=void 0;var CM0=r0();tJ.IS_READ_ONLY=!0;tJ.transformArguments=hM0;var WM0=r0();Object.defineProperty(tJ,"transformReply",{enumerable:!0,get:function(){return WM0.transformMRangeWithLabelsReply}})});var r0=Q((mg)=>{var K5=function(z){if(typeof z==="string")return z;return(typeof z==="number"?z:z.getTime()).toString()},yg=function(z,V){if(V!==void 0)z.push("RETENTION",V.toString());return z},bM0=function(z,V){if(V!==void 0)z.push("ENCODING",V);return z},_g=function(z,V){if(V!==void 0)z.push("CHUNK_SIZE",V.toString());return z},fM0=function(z,V){if(V!==void 0)z.push("DUPLICATE_POLICY",V);return z},$g=function(z){const V={};for(let[K,J]of z)V[K]=J;return V},gg=function(z,V){if(V){z.push("LABELS");for(let[K,J]of Object.entries(V))z.push(K,J)}return z},xM0=function(z,V,K,J){const Z=[z,V,K.toString()];if(J?.TIMESTAMP!==void 0&&J?.TIMESTAMP!==null)Z.push("TIMESTAMP",K5(J.TIMESTAMP));if(yg(Z,J?.RETENTION),J?.UNCOMPRESSED)Z.push("UNCOMPRESSED");return _g(Z,J?.CHUNK_SIZE),gg(Z,J?.LABELS),Z},MV=function(z){return{timestamp:z[0],value:Number(z[1])}},rJ=function(z,V,K,J){if(z.push(K5(V),K5(K)),dg(z,J?.LATEST),J?.FILTER_BY_TS){z.push("FILTER_BY_TS");for(let Z of J.FILTER_BY_TS)z.push(K5(Z))}if(J?.FILTER_BY_VALUE)z.push("FILTER_BY_VALUE",J.FILTER_BY_VALUE.min.toString(),J.FILTER_BY_VALUE.max.toString());if(J?.COUNT)z.push("COUNT",J.COUNT.toString());if(J?.ALIGN)z.push("ALIGN",K5(J.ALIGN));if(J?.AGGREGATION){if(z.push("AGGREGATION",J.AGGREGATION.type,K5(J.AGGREGATION.timeBucket)),J.AGGREGATION.BUCKETTIMESTAMP)z.push("BUCKETTIMESTAMP",J.AGGREGATION.BUCKETTIMESTAMP);if(J.AGGREGATION.EMPTY)z.push("EMPTY")}return z},sJ=function(z,V){if(V)z.push("GROUPBY",V.label,"REDUCE",V.reducer);return z},eJ=function(z,V){return z.push("FILTER"),(0,Sg.pushVerdictArguments)(z,V)},SM0=function(z,V,K,J,Z){return z=rJ(z,V,K,Z),z=eJ(z,J),sJ(z,Z?.GROUPBY)},ug=function(z,V){if(!V)z.push("WITHLABELS");else z.push("SELECTED_LABELS"),z=(0,Sg.pushVerdictArguments)(z,V);return z},yM0=function(z,V,K,J,Z){return z=rJ(z,V,K,Z),z=ug(z,Z?.SELECTED_LABELS),z=eJ(z,J),sJ(z,Z?.GROUPBY)},_M0=function(z){return z.map(MV)},$M0=function(z){const V=[];for(let[K,J,Z]of z)V.push({key:K,samples:Z.map(MV)});return V},gM0=function(z){const V=[];for(let[K,J,Z]of z)V.push({key:K,labels:$g(J),samples:Z.map(MV)});return V},dg=function(z,V){if(V)z.push("LATEST");return z};Object.defineProperty(mg,"__esModule",{value:!0});mg.pushLatestArgument=mg.transformMRangeWithLabelsReply=mg.transformMRangeReply=mg.transformRangeReply=mg.pushMRangeWithLabelsArguments=mg.pushWithLabelsArgument=mg.pushMRangeArguments=mg.pushFilterArgument=mg.pushMRangeGroupByArguments=mg.pushRangeArguments=mg.TimeSeriesBucketTimestamp=mg.transformSampleReply=mg.transformIncrDecrArguments=mg.pushLabelsArgument=mg.transformLablesReply=mg.pushDuplicatePolicy=mg.pushChunkSizeArgument=mg.pushEncodingArgument=mg.TimeSeriesEncoding=mg.pushRetentionArgument=mg.transformTimestampArgument=mg.TimeSeriesReducers=mg.TimeSeriesDuplicatePolicies=mg.TimeSeriesAggregationType=void 0;var jg=D$(),Bg=j$(),Mg=G$(),Gg=I$(),Og=w$(),Fg=T$(),Ig=v$(),Xg=R$(),Lg=b$(),wg=$$(),Ng=QV(),qg=d$(),Pg=p$(),Tg=i$(),Ag=t$(),Eg=zg(),vg=Zg(),Cg=Ug(),hg=Dg(),Wg=Hg(),Rg=Qg(),Sg=m();mg.default={ADD:jg,add:jg,ALTER:Bg,alter:Bg,CREATE:Mg,create:Mg,CREATERULE:Gg,createRule:Gg,DECRBY:Og,decrBy:Og,DEL:Fg,del:Fg,DELETERULE:Ig,deleteRule:Ig,GET:Xg,get:Xg,INCRBY:Lg,incrBy:Lg,INFO_DEBUG:wg,infoDebug:wg,INFO:Ng,info:Ng,MADD:qg,mAdd:qg,MGET:Pg,mGet:Pg,MGET_WITHLABELS:Tg,mGetWithLabels:Tg,QUERYINDEX:Ag,queryIndex:Ag,RANGE:Eg,range:Eg,REVRANGE:vg,revRange:vg,MRANGE:Cg,mRange:Cg,MRANGE_WITHLABELS:hg,mRangeWithLabels:hg,MREVRANGE:Wg,mRevRange:Wg,MREVRANGE_WITHLABELS:Rg,mRevRangeWithLabels:Rg};var kg;(function(z){z.AVG="AVG",z.AVERAGE="AVG",z.FIRST="FIRST",z.LAST="LAST",z.MIN="MIN",z.MINIMUM="MIN",z.MAX="MAX",z.MAXIMUM="MAX",z.SUM="SUM",z.RANGE="RANGE",z.COUNT="COUNT",z.STD_P="STD.P",z.STD_S="STD.S",z.VAR_P="VAR.P",z.VAR_S="VAR.S",z.TWA="TWA"})(kg||(mg.TimeSeriesAggregationType=kg={}));var Yg;(function(z){z.BLOCK="BLOCK",z.FIRST="FIRST",z.LAST="LAST",z.MIN="MIN",z.MAX="MAX",z.SUM="SUM"})(Yg||(mg.TimeSeriesDuplicatePolicies=Yg={}));var bg;(function(z){z.AVG="AVG",z.SUM="SUM",z.MIN="MIN",z.MINIMUM="MIN",z.MAX="MAX",z.MAXIMUM="MAX",z.RANGE="range",z.COUNT="COUNT",z.STD_P="STD.P",z.STD_S="STD.S",z.VAR_P="VAR.P",z.VAR_S="VAR.S"})(bg||(mg.TimeSeriesReducers=bg={}));mg.transformTimestampArgument=K5;mg.pushRetentionArgument=yg;var fg;(function(z){z.COMPRESSED="COMPRESSED",z.UNCOMPRESSED="UNCOMPRESSED"})(fg||(mg.TimeSeriesEncoding=fg={}));mg.pushEncodingArgument=bM0;mg.pushChunkSizeArgument=_g;mg.pushDuplicatePolicy=fM0;mg.transformLablesReply=$g;mg.pushLabelsArgument=gg;mg.transformIncrDecrArguments=xM0;mg.transformSampleReply=MV;var xg;(function(z){z.LOW="-",z.HIGH="+",z.MID="~"})(xg||(mg.TimeSeriesBucketTimestamp=xg={}));mg.pushRangeArguments=rJ;mg.pushMRangeGroupByArguments=sJ;mg.pushFilterArgument=eJ;mg.pushMRangeArguments=SM0;mg.pushWithLabelsArgument=ug;mg.pushMRangeWithLabelsArguments=yM0;mg.transformRangeReply=_M0;mg.transformMRangeReply=$M0;mg.transformMRangeWithLabelsReply=gM0;mg.pushLatestArgument=dg});var zZ=Q((X4)=>{Object.defineProperty(X4,"__esModule",{value:!0});X4.TimeSeriesBucketTimestamp=X4.TimeSeriesReducers=X4.TimeSeriesAggregationType=X4.TimeSeriesEncoding=X4.TimeSeriesDuplicatePolicies=X4.default=void 0;var BG0=r0();Object.defineProperty(X4,"default",{enumerable:!0,get:function(){return BG0.default}});var Q3=r0();Object.defineProperty(X4,"TimeSeriesDuplicatePolicies",{enumerable:!0,get:function(){return Q3.TimeSeriesDuplicatePolicies}});Object.defineProperty(X4,"TimeSeriesEncoding",{enumerable:!0,get:function(){return Q3.TimeSeriesEncoding}});Object.defineProperty(X4,"TimeSeriesAggregationType",{enumerable:!0,get:function(){return Q3.TimeSeriesAggregationType}});Object.defineProperty(X4,"TimeSeriesReducers",{enumerable:!0,get:function(){return Q3.TimeSeriesReducers}});Object.defineProperty(X4,"TimeSeriesBucketTimestamp",{enumerable:!0,get:function(){return Q3.TimeSeriesBucketTimestamp}})});var ng=Q((R6)=>{var wG0=function(z){return(0,pg.createClient)({...z,modules:{...lg,...z?.modules}})},NG0=function(z){return(0,pg.createCluster)({...z,modules:{...lg,...z?.modules}})},GG0=R6&&R6.__createBinding||(Object.create?function(z,V,K,J){if(J===void 0)J=K;var Z=Object.getOwnPropertyDescriptor(V,K);if(!Z||("get"in Z?!V.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return V[K]}};Object.defineProperty(z,J,Z)}:function(z,V,K,J){if(J===void 0)J=K;z[J]=V[K]}),d5=R6&&R6.__exportStar||function(z,V){for(var K in z)if(K!=="default"&&!Object.prototype.hasOwnProperty.call(V,K))GG0(V,z,K)};Object.defineProperty(R6,"__esModule",{value:!0});R6.createCluster=R6.createClient=void 0;var pg=ZJ(),OG0=EJ(),FG0=YJ(),IG0=yJ(),XG0=lJ(),LG0=zZ();d5(ZJ(),R6);d5(EJ(),R6);d5(YJ(),R6);d5(yJ(),R6);d5(lJ(),R6);d5(zZ(),R6);var lg={...OG0.default,graph:FG0.default,json:IG0.default,ft:XG0.default,ts:LG0.default};R6.createClient=wG0;R6.createCluster=NG0});var Dd=Q((Zd)=>{var TV=function(z){if(!Number.isSafeInteger(z)||z<0)throw new Error(`Wrong positive integer: ${z}`)},zd=function(z){if(typeof z!=="boolean")throw new Error(`Expected boolean, not ${z}`)},yZ=function(z,...V){if(!(z instanceof Uint8Array))throw new Error("Expected Uint8Array");if(V.length>0&&!V.includes(z.length))throw new Error(`Expected Uint8Array of length ${V}, not of length=${z.length}`)},Vd=function(z){if(typeof z!=="function"||typeof z.create!=="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");TV(z.outputLen),TV(z.blockLen)},Kd=function(z,V=!0){if(z.destroyed)throw new Error("Hash instance has been destroyed");if(V&&z.finished)throw new Error("Hash#digest() has already been called")},Jd=function(z,V){yZ(z);const K=V.outputLen;if(z.length<K)throw new Error(`digestInto() expects output buffer of length at least ${K}`)};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.output=Zd.exists=Zd.hash=Zd.bytes=Zd.bool=Zd.number=void 0;Zd.number=TV;Zd.bool=zd;Zd.bytes=yZ;Zd.hash=Vd;Zd.exists=Kd;Zd.output=Jd;var fG0={number:TV,bool:zd,bytes:yZ,hash:Vd,exists:Kd,output:Jd};Zd.default=fG0});var kd=Q((Wd)=>{var $Z=function(z,V=!1){if(V)return{h:Number(z&AV),l:Number(z>>_Z&AV)};return{h:Number(z>>_Z&AV)|0,l:Number(z&AV)|0}},Hd=function(z,V=!1){let K=new Uint32Array(z.length),J=new Uint32Array(z.length);for(let Z=0;Z<z.length;Z++){const{h:D,l:U}=$Z(z[Z],V);[K[Z],J[Z]]=[D,U]}return[K,J]},Pd=function(z,V,K,J){const Z=(V>>>0)+(J>>>0);return{h:z+K+(Z/4294967296|0)|0,l:Z|0}};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.add5L=Wd.add5H=Wd.add4H=Wd.add4L=Wd.add3H=Wd.add3L=Wd.add=Wd.rotlBL=Wd.rotlBH=Wd.rotlSL=Wd.rotlSH=Wd.rotr32L=Wd.rotr32H=Wd.rotrBL=Wd.rotrBH=Wd.rotrSL=Wd.rotrSH=Wd.shrSL=Wd.shrSH=Wd.toBig=Wd.split=Wd.fromBig=void 0;var AV=BigInt(4294967295),_Z=BigInt(32);Wd.fromBig=$Z;Wd.split=Hd;var Qd=(z,V)=>BigInt(z>>>0)<<_Z|BigInt(V>>>0);Wd.toBig=Qd;var jd=(z,V,K)=>z>>>K;Wd.shrSH=jd;var Bd=(z,V,K)=>z<<32-K|V>>>K;Wd.shrSL=Bd;var Md=(z,V,K)=>z>>>K|V<<32-K;Wd.rotrSH=Md;var Gd=(z,V,K)=>z<<32-K|V>>>K;Wd.rotrSL=Gd;var Od=(z,V,K)=>z<<64-K|V>>>K-32;Wd.rotrBH=Od;var Fd=(z,V,K)=>z>>>K-32|V<<64-K;Wd.rotrBL=Fd;var Id=(z,V)=>V;Wd.rotr32H=Id;var Xd=(z,V)=>z;Wd.rotr32L=Xd;var Ld=(z,V,K)=>z<<K|V>>>32-K;Wd.rotlSH=Ld;var wd=(z,V,K)=>V<<K|z>>>32-K;Wd.rotlSL=wd;var Nd=(z,V,K)=>V<<K-32|z>>>64-K;Wd.rotlBH=Nd;var qd=(z,V,K)=>z<<K-32|V>>>64-K;Wd.rotlBL=qd;Wd.add=Pd;var Td=(z,V,K)=>(z>>>0)+(V>>>0)+(K>>>0);Wd.add3L=Td;var Ad=(z,V,K,J)=>V+K+J+(z/4294967296|0)|0;Wd.add3H=Ad;var Ed=(z,V,K,J)=>(z>>>0)+(V>>>0)+(K>>>0)+(J>>>0);Wd.add4L=Ed;var vd=(z,V,K,J,Z)=>V+K+J+Z+(z/4294967296|0)|0;Wd.add4H=vd;var Cd=(z,V,K,J,Z)=>(z>>>0)+(V>>>0)+(K>>>0)+(J>>>0)+(Z>>>0);Wd.add5L=Cd;var hd=(z,V,K,J,Z,D)=>V+K+J+Z+D+(z/4294967296|0)|0;Wd.add5H=hd;var uG0={fromBig:$Z,split:Hd,toBig:Qd,shrSH:jd,shrSL:Bd,rotrSH:Md,rotrSL:Gd,rotrBH:Od,rotrBL:Fd,rotr32H:Id,rotr32L:Xd,rotlSH:Ld,rotlSL:wd,rotlBH:Nd,rotlBL:qd,add:Pd,add3L:Td,add3H:Ad,add4L:Ed,add4H:vd,add5H:hd,add5L:Cd};Wd.default=uG0});var fd=Q((Yd)=>{Object.defineProperty(Yd,"__esModule",{value:!0});Yd.crypto=void 0;var EV=import.meta.require("crypto");Yd.crypto=EV&&typeof EV==="object"&&("webcrypto"in EV)?EV.webcrypto:void 0});var ud=Q((yd)=>{var FO0=function(z){if(!uZ(z))throw new Error("Uint8Array expected");let V="";for(let K=0;K<z.length;K++)V+=OO0[z[K]];return V},IO0=function(z){if(typeof z!=="string")throw new Error("hex string expected, got "+typeof z);const V=z.length;if(V%2)throw new Error("padded hex string expected, got unpadded hex of length "+V);const K=new Uint8Array(V/2);for(let J=0;J<K.length;J++){const Z=J*2,D=z.slice(Z,Z+2),U=Number.parseInt(D,16);if(Number.isNaN(U)||U<0)throw new Error("Invalid byte sequence");K[J]=U}return K};async function LO0(z,V,K){let J=Date.now();for(let Z=0;Z<z;Z++){K(Z);const D=Date.now()-J;if(D>=0&&D<V)continue;await(0,yd.nextTick)(),J+=D}}var xd=function(z){if(typeof z!=="string")throw new Error(`utf8ToBytes expected string, got ${typeof z}`);return new Uint8Array((new TextEncoder()).encode(z))},vV=function(z){if(typeof z==="string")z=xd(z);if(!uZ(z))throw new Error(`expected Uint8Array, got ${typeof z}`);return z},wO0=function(...z){const V=new Uint8Array(z.reduce((J,Z)=>J+Z.length,0));let K=0;return z.forEach((J)=>{if(!uZ(J))throw new Error("Uint8Array expected");V.set(J,K),K+=J.length}),V},qO0=function(z,V){if(V!==void 0&&NO0.call(V)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(z,V)},PO0=function(z){const V=(J)=>z().update(vV(J)).digest(),K=z();return V.outputLen=K.outputLen,V.blockLen=K.blockLen,V.create=()=>z(),V},TO0=function(z){const V=(J,Z)=>z(Z).update(vV(J)).digest(),K=z({});return V.outputLen=K.outputLen,V.blockLen=K.blockLen,V.create=(J)=>z(J),V},AO0=function(z){const V=(J,Z)=>z(Z).update(vV(J)).digest(),K=z({});return V.outputLen=K.outputLen,V.blockLen=K.blockLen,V.create=(J)=>z(J),V},EO0=function(z=32){if(gZ.crypto&&typeof gZ.crypto.getRandomValues==="function")return gZ.crypto.getRandomValues(new Uint8Array(z));throw new Error("crypto.getRandomValues must be defined")};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(yd,"__esModule",{value:!0});yd.randomBytes=yd.wrapXOFConstructorWithOpts=yd.wrapConstructorWithOpts=yd.wrapConstructor=yd.checkOpts=yd.Hash=yd.concatBytes=yd.toBytes=yd.utf8ToBytes=yd.asyncLoop=yd.nextTick=yd.hexToBytes=yd.bytesToHex=yd.isLE=yd.rotr=yd.createView=yd.u32=yd.u8=void 0;var gZ=fd(),uZ=(z)=>z instanceof Uint8Array,jO0=(z)=>new Uint8Array(z.buffer,z.byteOffset,z.byteLength);yd.u8=jO0;var BO0=(z)=>new Uint32Array(z.buffer,z.byteOffset,Math.floor(z.byteLength/4));yd.u32=BO0;var MO0=(z)=>new DataView(z.buffer,z.byteOffset,z.byteLength);yd.createView=MO0;var GO0=(z,V)=>z<<32-V|z>>>V;yd.rotr=GO0;yd.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!yd.isLE)throw new Error("Non little-endian hardware is not supported");var OO0=Array.from({length:256},(z,V)=>V.toString(16).padStart(2,"0"));yd.bytesToHex=FO0;yd.hexToBytes=IO0;var XO0=async()=>{};yd.nextTick=XO0;yd.asyncLoop=LO0;yd.utf8ToBytes=xd;yd.toBytes=vV;yd.concatBytes=wO0;class Sd{clone(){return this._cloneInto()}}yd.Hash=Sd;var NO0={}.toString;yd.checkOpts=qO0;yd.wrapConstructor=PO0;yd.wrapConstructorWithOpts=TO0;yd.wrapXOFConstructorWithOpts=AO0;yd.randomBytes=EO0});var td=Q((ad)=>{var nd=function(z,V=24){const K=new Uint32Array(10);for(let J=24-V;J<24;J++){for(let U=0;U<10;U++)K[U]=z[U]^z[U+10]^z[U+20]^z[U+30]^z[U+40];for(let U=0;U<10;U+=2){const j=(U+8)%10,B=(U+2)%10,H=K[B],G=K[B+1],A=dd(H,G,1)^K[j],b=md(H,G,1)^K[j+1];for(let w=0;w<50;w+=10)z[U+w]^=A,z[U+w+1]^=b}let Z=z[2],D=z[3];for(let U=0;U<24;U++){const j=pd[U],B=dd(Z,D,j),H=md(Z,D,j),G=cd[U];Z=z[G],D=z[G+1],z[G]=B,z[G+1]=H}for(let U=0;U<50;U+=10){for(let j=0;j<10;j++)K[j]=z[U+j];for(let j=0;j<10;j++)z[U+j]^=~K[(j+2)%10]&K[(j+4)%10]}z[0]^=lO0[J],z[1]^=nO0[J]}K.fill(0)};Object.defineProperty(ad,"__esModule",{value:!0});ad.shake256=ad.shake128=ad.keccak_512=ad.keccak_384=ad.keccak_256=ad.keccak_224=ad.sha3_512=ad.sha3_384=ad.sha3_256=ad.sha3_224=ad.Keccak=ad.keccakP=void 0;var i5=Dd(),q3=kd(),N3=ud(),[cd,pd,ld]=[[],[],[]],uO0=BigInt(0),w3=BigInt(1),dO0=BigInt(2),mO0=BigInt(7),cO0=BigInt(256),pO0=BigInt(113);for(let z=0,V=w3,K=1,J=0;z<24;z++){[K,J]=[J,(2*K+3*J)%5],cd.push(2*(5*J+K)),pd.push((z+1)*(z+2)/2%64);let Z=uO0;for(let D=0;D<7;D++)if(V=(V<<w3^(V>>mO0)*pO0)%cO0,V&dO0)Z^=w3<<(w3<<BigInt(D))-w3;ld.push(Z)}var[lO0,nO0]=(0,q3.split)(ld,!0),dd=(z,V,K)=>K>32?(0,q3.rotlBH)(z,V,K):(0,q3.rotlSH)(z,V,K),md=(z,V,K)=>K>32?(0,q3.rotlBL)(z,V,K):(0,q3.rotlSL)(z,V,K);ad.keccakP=nd;class P3 extends N3.Hash{constructor(z,V,K,J=!1,Z=24){super();if(this.blockLen=z,this.suffix=V,this.outputLen=K,this.enableXOF=J,this.rounds=Z,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,i5.number)(K),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,N3.u32)(this.state)}keccak(){nd(this.state32,this.rounds),this.posOut=0,this.pos=0}update(z){(0,i5.exists)(this);const{blockLen:V,state:K}=this;z=(0,N3.toBytes)(z);const J=z.length;for(let Z=0;Z<J;){const D=Math.min(V-this.pos,J-Z);for(let U=0;U<D;U++)K[this.pos++]^=z[Z++];if(this.pos===V)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:z,suffix:V,pos:K,blockLen:J}=this;if(z[K]^=V,(V&128)!==0&&K===J-1)this.keccak();z[J-1]^=128,this.keccak()}writeInto(z){(0,i5.exists)(this,!1),(0,i5.bytes)(z),this.finish();const V=this.state,{blockLen:K}=this;for(let J=0,Z=z.length;J<Z;){if(this.posOut>=K)this.keccak();const D=Math.min(K-this.posOut,Z-J);z.set(V.subarray(this.posOut,this.posOut+D),J),this.posOut+=D,J+=D}return z}xofInto(z){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(z)}xof(z){return(0,i5.number)(z),this.xofInto(new Uint8Array(z))}digestInto(z){if((0,i5.output)(z,this),this.finished)throw new Error("digest() was already called");return this.writeInto(z),this.destroy(),z}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(z){const{blockLen:V,suffix:K,outputLen:J,rounds:Z,enableXOF:D}=this;return z||(z=new P3(V,K,J,D,Z)),z.state32.set(this.state32),z.pos=this.pos,z.posOut=this.posOut,z.finished=this.finished,z.rounds=Z,z.suffix=K,z.outputLen=J,z.enableXOF=D,z.destroyed=this.destroyed,z}}ad.Keccak=P3;var q4=(z,V,K)=>(0,N3.wrapConstructor)(()=>new P3(V,z,K));ad.sha3_224=q4(6,144,28);ad.sha3_256=q4(6,136,32);ad.sha3_384=q4(6,104,48);ad.sha3_512=q4(6,72,64);ad.keccak_224=q4(1,144,28);ad.keccak_256=q4(1,136,32);ad.keccak_384=q4(1,104,48);ad.keccak_512=q4(1,72,64);var id=(z,V,K)=>(0,N3.wrapXOFConstructorWithOpts)((J={})=>new P3(V,z,J.dkLen===void 0?K:J.dkLen,!0));ad.shake128=id(31,168,16);ad.shake256=id(31,136,32)});var Jm=Q((jF0,P4)=>{var sd=function(z){let V=8n,K=0n;for(let J of z.values()){const Z=BigInt(J);K=(K<<V)+Z}return K},{sha3_512:ZF0}=td(),dZ=(z=4,V=Math.random)=>{let K="";while(K.length<z)K=K+Math.floor(V()*36).toString(36);return K},ed=(z="")=>{return sd(ZF0(z)).toString(36).slice(1)},rd=Array.from({length:26},(z,V)=>String.fromCharCode(V+97)),UF0=(z)=>rd[Math.floor(z()*rd.length)],zm=({globalObj:z=typeof global!=="undefined"?global:typeof window!=="undefined"?window:{},random:V=Math.random}={})=>{const K=Object.keys(z).toString(),J=K.length?K+dZ(32,V):dZ(32,V);return ed(J).substring(0,32)},Vm=(z)=>()=>{return z++},DF0=476782367,Km=({random:z=Math.random,counter:V=Vm(Math.floor(z()*DF0)),length:K=24,fingerprint:J=zm({random:z})}={})=>{return function Z(){const D=UF0(z),U=Date.now().toString(36),j=V().toString(36),B=dZ(K,z),H=`${U+B+j+J}`;return`${D+ed(H).substring(1,K)}`}},HF0=Km(),QF0=(z,{minLength:V=2,maxLength:K=32}={})=>{const J=z.length,Z=/^[0-9a-z]+$/;try{if(typeof z==="string"&&J>=V&&J<=K&&Z.test(z))return!0}finally{}return!1};jF0.getConstants=()=>({defaultLength:24,bigLength:32});jF0.init=Km;jF0.createId=HF0;jF0.bufToBigInt=sd;jF0.createCounter=Vm;jF0.createFingerprint=zm;jF0.isCuid=QF0});var Am=Q((G8)=>{var mF0=function(){let z=null;switch(process.platform){case"android":switch(process.arch){case"arm":return"android-arm-eabi";case"arm64":return"android-arm64"}z="Android";break;case"win32":switch(process.arch){case"x64":return"win32-x64-msvc";case"arm64":return"win32-arm64-msvc";case"ia32":return"win32-ia32-msvc"}z="Windows";break;case"darwin":switch(process.arch){case"x64":return"darwin-x64";case"arm64":return"darwin-arm64"}z="macOS";break;case"linux":switch(process.arch){case"x64":case"arm64":return cF0()?`linux-${process.arch}-gnu`:`linux-${process.arch}-musl`;case"arm":return"linux-arm-gnueabihf"}z="Linux";break;case"freebsd":if(process.arch==="x64")return"freebsd-x64";z="FreeBSD";break}if(z)throw new Error(`Neon: unsupported ${z} architecture: ${process.arch}`);throw new Error(`Neon: unsupported system: ${process.platform}`)},cF0=function(){const z=process.report?.getReport();if(typeof z!=="object"||!z||!("header"in z))return!1;const V=z.header;return typeof V==="object"&&!!V&&("glibcVersionRuntime"in V)},pF0=function(z){const V=uF0.join(z,"index.node");return dF0.existsSync(V)?import.meta.require(V):null},$F0=G8&&G8.__createBinding||(Object.create?function(z,V,K,J){if(J===void 0)J=K;var Z=Object.getOwnPropertyDescriptor(V,K);if(!Z||("get"in Z?!V.__esModule:Z.writable||Z.configurable))Z={enumerable:!0,get:function(){return V[K]}};Object.defineProperty(z,J,Z)}:function(z,V,K,J){if(J===void 0)J=K;z[J]=V[K]}),gF0=G8&&G8.__setModuleDefault||(Object.create?function(z,V){Object.defineProperty(z,"default",{enumerable:!0,value:V})}:function(z,V){z.default=V}),Tm=G8&&G8.__importStar||function(z){if(z&&z.__esModule)return z;var V={};if(z!=null){for(var K in z)if(K!=="default"&&Object.prototype.hasOwnProperty.call(z,K))$F0(V,z,K)}return gF0(V,z),V};Object.defineProperty(G8,"__esModule",{value:!0});G8.load=G8.currentTarget=void 0;var uF0=Tm(import.meta.require("path")),dF0=Tm(import.meta.require("fs"));G8.currentTarget=mF0;G8.load=pF0});var vm=Q((Xb0,Em)=>{var D5=function(z,V,K){if(new.target!==D5)return new D5(z,V);if(typeof V!=="string")throw new TypeError("Expected second argument to be a string");Error.call(this,z),iZ.value=""+z,Object.defineProperty(this,"message",iZ),Error.captureStackTrace(this,D5),this.code=V,this.rawCode=K},iZ={value:"SqliteError",writable:!0,enumerable:!1,configurable:!0};Object.setPrototypeOf(D5,Error);Object.setPrototypeOf(D5.prototype,Error.prototype);Object.defineProperty(D5.prototype,"name",iZ);Em.exports=D5});var Ym=Q((Lb0,aZ)=>{var __dirname="/Users/farhantallei/Documents/Project/inbox-app/server/node_modules/libsql",{load:lF0,currentTarget:nF0}=Am(),{familySync:iF0,GLIBC:aF0}=import.meta.require("detect-libc"),WV=nF0();if(iF0()==aF0)switch(WV){case"linux-x64-musl":WV="linux-x64-gnu";break;case"linux-arm64-musl":WV="linux-arm64-gnu";break}var{databaseOpen:oF0,databaseOpenWithRpcSync:tF0,databaseInTransaction:rF0,databaseClose:sF0,databaseSyncSync:eF0,databaseExecSync:zI0,databasePrepareSync:VI0,databaseDefaultSafeIntegers:KI0,statementRaw:JI0,statementGet:Cm,statementRun:hm,statementRowsSync:Wm,statementColumns:ZI0,statementSafeIntegers:UI0,rowsNext:DI0}=lF0(__dirname)||import.meta.require(`@libsql/${WV}`),RV=vm();class Rm{constructor(z,V){if(V&&V.syncUrl){var K="";if(V.syncAuth)console.warn("Warning: The `syncAuth` option is deprecated, please use `authToken` option instead."),K=V.syncAuth;else if(V.authToken)K=V.authToken;this.db=tF0(z,V.syncUrl,K)}else{const Z=V?.authToken??"";this.db=oF0(z,Z)}this.memory=z===":memory:",this.readonly=!1,this.name="",this.open=!0;const J=this.db;Object.defineProperties(this,{inTransaction:{get(){return rF0(J)}}})}sync(){eF0.call(this.db)}prepare(z){try{const V=VI0.call(this.db,z);return new km(V)}catch(V){throw new RV(V.message,V.code,V.rawCode)}}transaction(z){if(typeof z!=="function")throw new TypeError("Expected first argument to be a function");return(...V)=>{this.exec("BEGIN");try{const K=z(...V);return this.exec("COMMIT"),K}catch(K){throw this.exec("ROLLBACK"),K}}}pragma(z,V){throw new Error("not implemented")}backup(z,V){throw new Error("not implemented")}serialize(z){throw new Error("not implemented")}function(z,V,K){if(V==null)V={};if(typeof V==="function")K=V,V={};if(typeof z!=="string")throw new TypeError("Expected first argument to be a string");if(typeof K!=="function")throw new TypeError("Expected last argument to be a function");if(typeof V!=="object")throw new TypeError("Expected second argument to be an options object");if(!z)throw new TypeError("User-defined function name cannot be an empty string");throw new Error("not implemented")}aggregate(z,V){if(typeof z!=="string")throw new TypeError("Expected first argument to be a string");if(typeof V!=="object"||V===null)throw new TypeError("Expected second argument to be an options object");if(!z)throw new TypeError("User-defined function name cannot be an empty string");throw new Error("not implemented")}table(z,V){if(typeof z!=="string")throw new TypeError("Expected first argument to be a string");if(!z)throw new TypeError("Virtual table module name cannot be an empty string");throw new Error("not implemented")}loadExtension(...z){throw new Error("not implemented")}exec(z){try{zI0.call(this.db,z)}catch(V){throw new RV(V.message,V.code,V.rawCode)}}close(){sF0.call(this.db),this.open=!1}defaultSafeIntegers(z){return KI0.call(this.db,z||!0),this}unsafeMode(...z){throw new Error("not implemented")}}class km{constructor(z){this.stmt=z}raw(z){return JI0.call(this.stmt,z||!0),this}run(...z){try{if(z.length==1&&typeof z[0]==="object")return hm.call(this.stmt,z[0]);else return hm.call(this.stmt,z.flat())}catch(V){throw new RV(V.message,V.code,V.rawCode)}}get(...z){if(z.length==1&&typeof z[0]==="object")return Cm.call(this.stmt,z[0]);else return Cm.call(this.stmt,z.flat())}iterate(...z){var V=void 0;if(z.length==1&&typeof z[0]==="object")V=Wm.call(this.stmt,z[0]);else V=Wm.call(this.stmt,z.flat());return{next(){const J=DI0.call(V);if(!J)return{done:!0};return{value:J,done:!1}},[Symbol.iterator](){return this}}}all(...z){const V=[];for(let K of this.iterate(...z))V.push(K);return V}columns(){return ZI0.call(this.stmt)}safeIntegers(z){return UI0.call(this.stmt,z||!0),this}}aZ.exports=Rm;aZ.exports.SqliteError=RV});var ec=Object.create,{defineProperty:N7,getPrototypeOf:zp,getOwnPropertyNames:BK}=Object,MK=Object.prototype.hasOwnProperty,_U=(z,V,K)=>{for(let J of BK(V))if(!MK.call(z,J)&&J!=="default")N7(z,J,{get:()=>V[J],enumerable:!0});if(K){for(let J of BK(V))if(!MK.call(K,J)&&J!=="default")N7(K,J,{get:()=>V[J],enumerable:!0});return K}},Z8=(z,V,K)=>{K=z!=null?ec(zp(z)):{};const J=V||!z||!z.__esModule?N7(K,"default",{value:z,enumerable:!0}):K;for(let Z of BK(z))if(!MK.call(J,Z))N7(J,Z,{get:()=>z[Z],enumerable:!0});return J},y0=(z,V)=>()=>(V||z((V={exports:{}}).exports,V),V.exports),$U=(z,V)=>{for(var K in V)N7(z,K,{get:V[K],enumerable:!0,configurable:!0,set:(J)=>V[K]=()=>J})},Vp=y0((z,V)=>{var K=function(){},J=function(H,G,A){this.fn=H,this.context=G,this.once=A||!1},Z=function(H,G,A,b,w){if(typeof A!=="function")throw new TypeError("The listener must be a function");var v=new J(A,b||H,w),W=B?B+G:G;if(!H._events[W])H._events[W]=v,H._eventsCount++;else if(!H._events[W].fn)H._events[W].push(v);else H._events[W]=[H._events[W],v];return H},D=function(H,G){if(--H._eventsCount===0)H._events=new K;else delete H._events[G]},U=function(){this._events=new K,this._eventsCount=0},j=Object.prototype.hasOwnProperty,B="~";if(Object.create){if(K.prototype=Object.create(null),!new K().__proto__)B=!1}if(U.prototype.eventNames=function H(){var G=[],A,b;if(this._eventsCount===0)return G;for(b in A=this._events)if(j.call(A,b))G.push(B?b.slice(1):b);if(Object.getOwnPropertySymbols)return G.concat(Object.getOwnPropertySymbols(A));return G},U.prototype.listeners=function H(G){var A=B?B+G:G,b=this._events[A];if(!b)return[];if(b.fn)return[b.fn];for(var w=0,v=b.length,W=new Array(v);w<v;w++)W[w]=b[w].fn;return W},U.prototype.listenerCount=function H(G){var A=B?B+G:G,b=this._events[A];if(!b)return 0;if(b.fn)return 1;return b.length},U.prototype.emit=function H(G,A,b,w,v,W){var f=B?B+G:G;if(!this._events[f])return!1;var L=this._events[f],i=arguments.length,n,s;if(L.fn){if(L.once)this.removeListener(G,L.fn,void 0,!0);switch(i){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,A),!0;case 3:return L.fn.call(L.context,A,b),!0;case 4:return L.fn.call(L.context,A,b,w),!0;case 5:return L.fn.call(L.context,A,b,w,v),!0;case 6:return L.fn.call(L.context,A,b,w,v,W),!0}for(s=1,n=new Array(i-1);s<i;s++)n[s-1]=arguments[s];L.fn.apply(L.context,n)}else{var o=L.length,t;for(s=0;s<o;s++){if(L[s].once)this.removeListener(G,L[s].fn,void 0,!0);switch(i){case 1:L[s].fn.call(L[s].context);break;case 2:L[s].fn.call(L[s].context,A);break;case 3:L[s].fn.call(L[s].context,A,b);break;case 4:L[s].fn.call(L[s].context,A,b,w);break;default:if(!n)for(t=1,n=new Array(i-1);t<i;t++)n[t-1]=arguments[t];L[s].fn.apply(L[s].context,n)}}}return!0},U.prototype.on=function H(G,A,b){return Z(this,G,A,b,!1)},U.prototype.once=function H(G,A,b){return Z(this,G,A,b,!0)},U.prototype.removeListener=function H(G,A,b,w){var v=B?B+G:G;if(!this._events[v])return this;if(!A)return D(this,v),this;var W=this._events[v];if(W.fn){if(W.fn===A&&(!w||W.once)&&(!b||W.context===b))D(this,v)}else{for(var f=0,L=[],i=W.length;f<i;f++)if(W[f].fn!==A||w&&!W[f].once||b&&W[f].context!==b)L.push(W[f]);if(L.length)this._events[v]=L.length===1?L[0]:L;else D(this,v)}return this},U.prototype.removeAllListeners=function H(G){var A;if(G){if(A=B?B+G:G,this._events[A])D(this,A)}else this._events=new K,this._eventsCount=0;return this},U.prototype.off=U.prototype.removeListener,U.prototype.addListener=U.prototype.on,U.prefixed=B,U.EventEmitter=U,typeof V!=="undefined")V.exports=U}),t6=y0((z)=>{var V=function(o){return H(o)&&(Symbol.asyncIterator in o)},K=function(o){return H(o)&&(Symbol.iterator in o)},J=function(o){return ArrayBuffer.isView(o)},Z=function(o){return o instanceof Promise},D=function(o){return o instanceof Uint8Array},U=function(o){return o instanceof Date&&Number.isFinite(o.getTime())},j=function(o,t){return t in o},B=function(o){return H(o)&&i(o.constructor)&&o.constructor.name==="Object"},H=function(o){return o!==null&&typeof o==="object"},G=function(o){return Array.isArray(o)&&!ArrayBuffer.isView(o)},A=function(o){return o===void 0},b=function(o){return o===null},w=function(o){return typeof o==="boolean"},v=function(o){return typeof o==="number"},W=function(o){return v(o)&&Number.isInteger(o)},f=function(o){return typeof o==="bigint"},L=function(o){return typeof o==="string"},i=function(o){return typeof o==="function"},n=function(o){return typeof o==="symbol"},s=function(o){return f(o)||w(o)||b(o)||v(o)||L(o)||n(o)||A(o)};Object.defineProperty(z,"__esModule",{value:!0}),z.IsValueType=z.IsSymbol=z.IsFunction=z.IsString=z.IsBigInt=z.IsInteger=z.IsNumber=z.IsBoolean=z.IsNull=z.IsUndefined=z.IsArray=z.IsObject=z.IsPlainObject=z.HasPropertyKey=z.IsDate=z.IsUint8Array=z.IsPromise=z.IsTypedArray=z.IsIterator=z.IsAsyncIterator=void 0,z.IsAsyncIterator=V,z.IsIterator=K,z.IsTypedArray=J,z.IsPromise=Z,z.IsUint8Array=D,z.IsDate=U,z.HasPropertyKey=j,z.IsPlainObject=B,z.IsObject=H,z.IsArray=G,z.IsUndefined=A,z.IsNull=b,z.IsBoolean=w,z.IsNumber=v,z.IsInteger=W,z.IsBigInt=f,z.IsString=L,z.IsFunction=i,z.IsSymbol=n,z.IsValueType=s}),U8=y0((z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.Type=z.JsonType=z.JavaScriptTypeBuilder=z.JsonTypeBuilder=z.TypeBuilder=z.TypeBuilderError=z.TransformEncodeBuilder=z.TransformDecodeBuilder=z.TemplateLiteralDslParser=z.TemplateLiteralGenerator=z.TemplateLiteralGeneratorError=z.TemplateLiteralFinite=z.TemplateLiteralFiniteError=z.TemplateLiteralParser=z.TemplateLiteralParserError=z.TemplateLiteralResolver=z.TemplateLiteralPattern=z.TemplateLiteralPatternError=z.UnionResolver=z.KeyArrayResolver=z.KeyArrayResolverError=z.KeyResolver=z.ObjectMap=z.Intrinsic=z.IndexedAccessor=z.TypeClone=z.TypeExtends=z.TypeExtendsResult=z.TypeExtendsError=z.ExtendsUndefined=z.TypeGuard=z.TypeGuardUnknownTypeError=z.ValueGuard=z.FormatRegistry=z.TypeBoxError=z.TypeRegistry=z.PatternStringExact=z.PatternNumberExact=z.PatternBooleanExact=z.PatternString=z.PatternNumber=z.PatternBoolean=z.Kind=z.Hint=z.Optional=z.Readonly=z.Transform=void 0,z.Transform=Symbol.for("TypeBox.Transform"),z.Readonly=Symbol.for("TypeBox.Readonly"),z.Optional=Symbol.for("TypeBox.Optional"),z.Hint=Symbol.for("TypeBox.Hint"),z.Kind=Symbol.for("TypeBox.Kind"),z.PatternBoolean="(true|false)",z.PatternNumber="(0|[1-9][0-9]*)",z.PatternString="(.*)",z.PatternBooleanExact=`^${z.PatternBoolean}$`,z.PatternNumberExact=`^${z.PatternNumber}$`,z.PatternStringExact=`^${z.PatternString}$`;var V;(function(F){const h=new Map;function u(){return new Map(h)}F.Entries=u;function a(){return h.clear()}F.Clear=a;function l(x){return h.delete(x)}F.Delete=l;function p(x){return h.has(x)}F.Has=p;function O(x,M){h.set(x,M)}F.Set=O;function _(x){return h.get(x)}F.Get=_})(V||(z.TypeRegistry=V={}));class K extends Error{constructor(F){super(F)}}z.TypeBoxError=K;var J;(function(F){const h=new Map;function u(){return new Map(h)}F.Entries=u;function a(){return h.clear()}F.Clear=a;function l(x){return h.delete(x)}F.Delete=l;function p(x){return h.has(x)}F.Has=p;function O(x,M){h.set(x,M)}F.Set=O;function _(x){return h.get(x)}F.Get=_})(J||(z.FormatRegistry=J={}));var Z;(function(F){function h(M){return Array.isArray(M)}F.IsArray=h;function u(M){return typeof M==="bigint"}F.IsBigInt=u;function a(M){return typeof M==="boolean"}F.IsBoolean=a;function l(M){return M===null}F.IsNull=l;function p(M){return typeof M==="number"}F.IsNumber=p;function O(M){return typeof M==="object"&&M!==null}F.IsObject=O;function _(M){return typeof M==="string"}F.IsString=_;function x(M){return M===void 0}F.IsUndefined=x})(Z||(z.ValueGuard=Z={}));class D extends K{}z.TypeGuardUnknownTypeError=D;var U;(function(F){function h(E){try{return new RegExp(E),!0}catch{return!1}}function u(E){if(!Z.IsString(E))return!1;for(let g0=0;g0<E.length;g0++){const J8=E.charCodeAt(g0);if(J8>=7&&J8<=13||J8===27||J8===127)return!1}return!0}function a(E){return O(E)||O6(E)}function l(E){return Z.IsUndefined(E)||Z.IsBigInt(E)}function p(E){return Z.IsUndefined(E)||Z.IsNumber(E)}function O(E){return Z.IsUndefined(E)||Z.IsBoolean(E)}function _(E){return Z.IsUndefined(E)||Z.IsString(E)}function x(E){return Z.IsUndefined(E)||Z.IsString(E)&&u(E)&&h(E)}function M(E){return Z.IsUndefined(E)||Z.IsString(E)&&u(E)}function X(E){return Z.IsUndefined(E)||O6(E)}function C(E){return v0(E,"Any")&&_(E.$id)}F.TAny=C;function P(E){return v0(E,"Array")&&E.type==="array"&&_(E.$id)&&O6(E.items)&&p(E.minItems)&&p(E.maxItems)&&O(E.uniqueItems)&&X(E.contains)&&p(E.minContains)&&p(E.maxContains)}F.TArray=P;function I(E){return v0(E,"AsyncIterator")&&E.type==="AsyncIterator"&&_(E.$id)&&O6(E.items)}F.TAsyncIterator=I;function d(E){return v0(E,"BigInt")&&E.type==="bigint"&&_(E.$id)&&l(E.exclusiveMaximum)&&l(E.exclusiveMinimum)&&l(E.maximum)&&l(E.minimum)&&l(E.multipleOf)}F.TBigInt=d;function g(E){return v0(E,"Boolean")&&E.type==="boolean"&&_(E.$id)}F.TBoolean=g;function Z0(E){return v0(E,"Constructor")&&E.type==="Constructor"&&_(E.$id)&&Z.IsArray(E.parameters)&&E.parameters.every((g0)=>O6(g0))&&O6(E.returns)}F.TConstructor=Z0;function Q0(E){return v0(E,"Date")&&E.type==="Date"&&_(E.$id)&&p(E.exclusiveMaximumTimestamp)&&p(E.exclusiveMinimumTimestamp)&&p(E.maximumTimestamp)&&p(E.minimumTimestamp)&&p(E.multipleOfTimestamp)}F.TDate=Q0;function A0(E){return v0(E,"Function")&&E.type==="Function"&&_(E.$id)&&Z.IsArray(E.parameters)&&E.parameters.every((g0)=>O6(g0))&&O6(E.returns)}F.TFunction=A0;function $0(E){return v0(E,"Integer")&&E.type==="integer"&&_(E.$id)&&p(E.exclusiveMaximum)&&p(E.exclusiveMinimum)&&p(E.maximum)&&p(E.minimum)&&p(E.multipleOf)}F.TInteger=$0;function e0(E){return v0(E,"Intersect")&&(Z.IsString(E.type)&&E.type!=="object"?!1:!0)&&Z.IsArray(E.allOf)&&E.allOf.every((g0)=>O6(g0)&&!F7(g0))&&_(E.type)&&(O(E.unevaluatedProperties)||X(E.unevaluatedProperties))&&_(E.$id)}F.TIntersect=e0;function k4(E){return v0(E,"Iterator")&&E.type==="Iterator"&&_(E.$id)&&O6(E.items)}F.TIterator=k4;function v0(E,g0){return s8(E)&&E[z.Kind]===g0}F.TKindOf=v0;function s8(E){return Z.IsObject(E)&&(z.Kind in E)&&Z.IsString(E[z.Kind])}F.TKind=s8;function Y4(E){return c(E)&&Z.IsString(E.const)}F.TLiteralString=Y4;function S(E){return c(E)&&Z.IsNumber(E.const)}F.TLiteralNumber=S;function B0(E){return c(E)&&Z.IsBoolean(E.const)}F.TLiteralBoolean=B0;function c(E){return v0(E,"Literal")&&_(E.$id)&&(Z.IsBoolean(E.const)||Z.IsNumber(E.const)||Z.IsString(E.const))}F.TLiteral=c;function q0(E){return v0(E,"Never")&&Z.IsObject(E.not)&&Object.getOwnPropertyNames(E.not).length===0}F.TNever=q0;function j0(E){return v0(E,"Not")&&O6(E.not)}F.TNot=j0;function M0(E){return v0(E,"Null")&&E.type==="null"&&_(E.$id)}F.TNull=M0;function b0(E){return v0(E,"Number")&&E.type==="number"&&_(E.$id)&&p(E.exclusiveMaximum)&&p(E.exclusiveMinimum)&&p(E.maximum)&&p(E.minimum)&&p(E.multipleOf)}F.TNumber=b0;function D6(E){return v0(E,"Object")&&E.type==="object"&&_(E.$id)&&Z.IsObject(E.properties)&&a(E.additionalProperties)&&p(E.minProperties)&&p(E.maxProperties)&&Object.entries(E.properties).every(([g0,J8])=>u(g0)&&O6(J8))}F.TObject=D6;function b6(E){return v0(E,"Promise")&&E.type==="Promise"&&_(E.$id)&&O6(E.item)}F.TPromise=b6;function T6(E){return v0(E,"Record")&&E.type==="object"&&_(E.$id)&&a(E.additionalProperties)&&Z.IsObject(E.patternProperties)&&((g0)=>{const J8=Object.getOwnPropertyNames(g0.patternProperties);return J8.length===1&&h(J8[0])&&Z.IsObject(g0.patternProperties)&&O6(g0.patternProperties[J8[0]])})(E)}F.TRecord=T6;function g6(E){return Z.IsObject(E)&&(z.Hint in E)&&E[z.Hint]==="Recursive"}F.TRecursive=g6;function e8(E){return v0(E,"Ref")&&_(E.$id)&&Z.IsString(E.$ref)}F.TRef=e8;function F5(E){return v0(E,"String")&&E.type==="string"&&_(E.$id)&&p(E.minLength)&&p(E.maxLength)&&x(E.pattern)&&M(E.format)}F.TString=F5;function I5(E){return v0(E,"Symbol")&&E.type==="symbol"&&_(E.$id)}F.TSymbol=I5;function b4(E){return v0(E,"TemplateLiteral")&&E.type==="string"&&Z.IsString(E.pattern)&&E.pattern[0]==="^"&&E.pattern[E.pattern.length-1]==="$"}F.TTemplateLiteral=b4;function n3(E){return v0(E,"This")&&_(E.$id)&&Z.IsString(E.$ref)}F.TThis=n3;function F7(E){return Z.IsObject(E)&&(z.Transform in E)}F.TTransform=F7;function G6(E){return v0(E,"Tuple")&&E.type==="array"&&_(E.$id)&&Z.IsNumber(E.minItems)&&Z.IsNumber(E.maxItems)&&E.minItems===E.maxItems&&(Z.IsUndefined(E.items)&&Z.IsUndefined(E.additionalItems)&&E.minItems===0||Z.IsArray(E.items)&&E.items.every((g0)=>O6(g0)))}F.TTuple=G6;function i3(E){return v0(E,"Undefined")&&E.type==="undefined"&&_(E.$id)}F.TUndefined=i3;function zK(E){return f4(E)&&E.anyOf.every((g0)=>Y4(g0)||S(g0))}F.TUnionLiteral=zK;function f4(E){return v0(E,"Union")&&_(E.$id)&&Z.IsObject(E)&&Z.IsArray(E.anyOf)&&E.anyOf.every((g0)=>O6(g0))}F.TUnion=f4;function X5(E){return v0(E,"Uint8Array")&&E.type==="Uint8Array"&&_(E.$id)&&p(E.minByteLength)&&p(E.maxByteLength)}F.TUint8Array=X5;function f6(E){return v0(E,"Unknown")&&_(E.$id)}F.TUnknown=f6;function a3(E){return v0(E,"Unsafe")}F.TUnsafe=a3;function I7(E){return v0(E,"Void")&&E.type==="void"&&_(E.$id)}F.TVoid=I7;function VK(E){return Z.IsObject(E)&&E[z.Readonly]==="Readonly"}F.TReadonly=VK;function KK(E){return Z.IsObject(E)&&E[z.Optional]==="Optional"}F.TOptional=KK;function O6(E){return Z.IsObject(E)&&(C(E)||P(E)||g(E)||d(E)||I(E)||Z0(E)||Q0(E)||A0(E)||$0(E)||e0(E)||k4(E)||c(E)||q0(E)||j0(E)||M0(E)||b0(E)||D6(E)||b6(E)||T6(E)||e8(E)||F5(E)||I5(E)||b4(E)||n3(E)||G6(E)||i3(E)||f4(E)||X5(E)||f6(E)||a3(E)||I7(E)||s8(E)&&V.Has(E[z.Kind]))}F.TSchema=O6})(U||(z.TypeGuard=U={}));var j;(function(F){function h(u){return u[z.Kind]==="Intersect"?u.allOf.every((a)=>h(a)):u[z.Kind]==="Union"?u.anyOf.some((a)=>h(a)):u[z.Kind]==="Undefined"?!0:u[z.Kind]==="Not"?!h(u.not):!1}F.Check=h})(j||(z.ExtendsUndefined=j={}));class B extends K{}z.TypeExtendsError=B;var H;(function(F){F[F.Union=0]="Union",F[F.True=1]="True",F[F.False=2]="False"})(H||(z.TypeExtendsResult=H={}));var G;(function(F){function h(N){return N===H.False?N:H.True}function u(N){throw new B(N)}function a(N){return U.TNever(N)||U.TIntersect(N)||U.TUnion(N)||U.TUnknown(N)||U.TAny(N)}function l(N,q){return U.TNever(q)?v0(N,q):U.TIntersect(q)?A0(N,q):U.TUnion(q)?JK(N,q):U.TUnknown(q)?qU(N,q):U.TAny(q)?p(N,q):u("StructuralRight")}function p(N,q){return H.True}function O(N,q){return U.TIntersect(q)?A0(N,q):U.TUnion(q)&&q.anyOf.some((R0)=>U.TAny(R0)||U.TUnknown(R0))?H.True:U.TUnion(q)?H.Union:U.TUnknown(q)?H.True:U.TAny(q)?H.True:H.Union}function _(N,q){return U.TUnknown(N)?H.False:U.TAny(N)?H.Union:U.TNever(N)?H.True:H.False}function x(N,q){return U.TObject(q)&&b4(q)?H.True:a(q)?l(N,q):!U.TArray(q)?H.False:h(S0(N.items,q.items))}function M(N,q){return a(q)?l(N,q):!U.TAsyncIterator(q)?H.False:h(S0(N.items,q.items))}function X(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TBigInt(q)?H.True:H.False}function C(N,q){return U.TLiteral(N)&&Z.IsBoolean(N.const)?H.True:U.TBoolean(N)?H.True:H.False}function P(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TBoolean(q)?H.True:H.False}function I(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):!U.TConstructor(q)?H.False:N.parameters.length>q.parameters.length?H.False:!N.parameters.every((R0,X8)=>h(S0(q.parameters[X8],R0))===H.True)?H.False:h(S0(N.returns,q.returns))}function d(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TDate(q)?H.True:H.False}function g(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):!U.TFunction(q)?H.False:N.parameters.length>q.parameters.length?H.False:!N.parameters.every((R0,X8)=>h(S0(q.parameters[X8],R0))===H.True)?H.False:h(S0(N.returns,q.returns))}function Z0(N,q){return U.TLiteral(N)&&Z.IsNumber(N.const)?H.True:U.TNumber(N)||U.TInteger(N)?H.True:H.False}function Q0(N,q){return U.TInteger(q)||U.TNumber(q)?H.True:a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):H.False}function A0(N,q){return q.allOf.every((R0)=>S0(N,R0)===H.True)?H.True:H.False}function $0(N,q){return N.allOf.some((R0)=>S0(R0,q)===H.True)?H.True:H.False}function e0(N,q){return a(q)?l(N,q):!U.TIterator(q)?H.False:h(S0(N.items,q.items))}function k4(N,q){return U.TLiteral(q)&&q.const===N.const?H.True:a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TString(q)?I7(N,q):U.TNumber(q)?c(N,q):U.TInteger(q)?Z0(N,q):U.TBoolean(q)?C(N,q):H.False}function v0(N,q){return H.False}function s8(N,q){return H.True}function Y4(N){let[q,R0]=[N,0];while(!0){if(!U.TNot(q))break;q=q.not,R0+=1}return R0%2===0?q:z.Type.Unknown()}function S(N,q){return U.TNot(N)?S0(Y4(N),q):U.TNot(q)?S0(N,Y4(q)):u("Invalid fallthrough for Not")}function B0(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TNull(q)?H.True:H.False}function c(N,q){return U.TLiteralNumber(N)?H.True:U.TNumber(N)||U.TInteger(N)?H.True:H.False}function q0(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TInteger(q)||U.TNumber(q)?H.True:H.False}function j0(N,q){return Object.getOwnPropertyNames(N.properties).length===q}function M0(N){return b4(N)}function b0(N){return j0(N,0)||j0(N,1)&&("description"in N.properties)&&U.TUnion(N.properties.description)&&N.properties.description.anyOf.length===2&&(U.TString(N.properties.description.anyOf[0])&&U.TUndefined(N.properties.description.anyOf[1])||U.TString(N.properties.description.anyOf[1])&&U.TUndefined(N.properties.description.anyOf[0]))}function D6(N){return j0(N,0)}function b6(N){return j0(N,0)}function T6(N){return j0(N,0)}function g6(N){return j0(N,0)}function e8(N){return b4(N)}function F5(N){const q=z.Type.Number();return j0(N,0)||j0(N,1)&&("length"in N.properties)&&h(S0(N.properties.length,q))===H.True}function I5(N){return j0(N,0)}function b4(N){const q=z.Type.Number();return j0(N,0)||j0(N,1)&&("length"in N.properties)&&h(S0(N.properties.length,q))===H.True}function n3(N){const q=z.Type.Function([z.Type.Any()],z.Type.Any());return j0(N,0)||j0(N,1)&&("then"in N.properties)&&h(S0(N.properties.then,q))===H.True}function F7(N,q){return S0(N,q)===H.False?H.False:U.TOptional(N)&&!U.TOptional(q)?H.False:H.True}function G6(N,q){return U.TUnknown(N)?H.False:U.TAny(N)?H.Union:U.TNever(N)||U.TLiteralString(N)&&M0(q)||U.TLiteralNumber(N)&&D6(q)||U.TLiteralBoolean(N)&&b6(q)||U.TSymbol(N)&&b0(q)||U.TBigInt(N)&&T6(q)||U.TString(N)&&M0(q)||U.TSymbol(N)&&b0(q)||U.TNumber(N)&&D6(q)||U.TInteger(N)&&D6(q)||U.TBoolean(N)&&b6(q)||U.TUint8Array(N)&&e8(q)||U.TDate(N)&&g6(q)||U.TConstructor(N)&&I5(q)||U.TFunction(N)&&F5(q)?H.True:U.TRecord(N)&&U.TString(f4(N))?(()=>{return q[z.Hint]==="Record"?H.True:H.False})():U.TRecord(N)&&U.TNumber(f4(N))?(()=>{return j0(q,0)?H.True:H.False})():H.False}function i3(N,q){return a(q)?l(N,q):U.TRecord(q)?f6(N,q):!U.TObject(q)?H.False:(()=>{for(let R0 of Object.getOwnPropertyNames(q.properties)){if(!(R0 in N.properties)&&!U.TOptional(q.properties[R0]))return H.False;if(U.TOptional(q.properties[R0]))return H.True;if(F7(N.properties[R0],q.properties[R0])===H.False)return H.False}return H.True})()}function zK(N,q){return a(q)?l(N,q):U.TObject(q)&&n3(q)?H.True:!U.TPromise(q)?H.False:h(S0(N.item,q.item))}function f4(N){return z.PatternNumberExact in N.patternProperties?z.Type.Number():(z.PatternStringExact in N.patternProperties)?z.Type.String():u("Unknown record key pattern")}function X5(N){return z.PatternNumberExact in N.patternProperties?N.patternProperties[z.PatternNumberExact]:(z.PatternStringExact in N.patternProperties)?N.patternProperties[z.PatternStringExact]:u("Unable to get record value schema")}function f6(N,q){const[R0,X8]=[f4(q),X5(q)];return U.TLiteralString(N)&&U.TNumber(R0)&&h(S0(N,X8))===H.True?H.True:U.TUint8Array(N)&&U.TNumber(R0)?S0(N,X8):U.TString(N)&&U.TNumber(R0)?S0(N,X8):U.TArray(N)&&U.TNumber(R0)?S0(N,X8):U.TObject(N)?(()=>{for(let ic of Object.getOwnPropertyNames(N.properties))if(F7(X8,N.properties[ic])===H.False)return H.False;return H.True})():H.False}function a3(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):!U.TRecord(q)?H.False:S0(X5(N),X5(q))}function I7(N,q){return U.TLiteral(N)&&Z.IsString(N.const)?H.True:U.TString(N)?H.True:H.False}function VK(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TString(q)?H.True:H.False}function KK(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TSymbol(q)?H.True:H.False}function O6(N,q){return U.TTemplateLiteral(N)?S0(o.Resolve(N),q):U.TTemplateLiteral(q)?S0(N,o.Resolve(q)):u("Invalid fallthrough for TemplateLiteral")}function E(N,q){return U.TArray(q)&&N.items!==void 0&&N.items.every((R0)=>S0(R0,q.items)===H.True)}function g0(N,q){return U.TNever(N)?H.True:U.TUnknown(N)?H.False:U.TAny(N)?H.Union:H.False}function J8(N,q){return a(q)?l(N,q):U.TObject(q)&&b4(q)?H.True:U.TArray(q)&&E(N,q)?H.True:!U.TTuple(q)?H.False:Z.IsUndefined(N.items)&&!Z.IsUndefined(q.items)||!Z.IsUndefined(N.items)&&Z.IsUndefined(q.items)?H.False:Z.IsUndefined(N.items)&&!Z.IsUndefined(q.items)?H.True:N.items.every((R0,X8)=>S0(R0,q.items[X8])===H.True)?H.True:H.False}function uc(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TUint8Array(q)?H.True:H.False}function dc(N,q){return a(q)?l(N,q):U.TObject(q)?G6(N,q):U.TRecord(q)?f6(N,q):U.TVoid(q)?pc(N,q):U.TUndefined(q)?H.True:H.False}function JK(N,q){return q.anyOf.some((R0)=>S0(N,R0)===H.True)?H.True:H.False}function mc(N,q){return N.anyOf.every((R0)=>S0(R0,q)===H.True)?H.True:H.False}function qU(N,q){return H.True}function cc(N,q){return U.TNever(q)?v0(N,q):U.TIntersect(q)?A0(N,q):U.TUnion(q)?JK(N,q):U.TAny(q)?p(N,q):U.TString(q)?I7(N,q):U.TNumber(q)?c(N,q):U.TInteger(q)?Z0(N,q):U.TBoolean(q)?C(N,q):U.TArray(q)?_(N,q):U.TTuple(q)?g0(N,q):U.TObject(q)?G6(N,q):U.TUnknown(q)?H.True:H.False}function pc(N,q){return U.TUndefined(N)?H.True:U.TUndefined(N)?H.True:H.False}function lc(N,q){return U.TIntersect(q)?A0(N,q):U.TUnion(q)?JK(N,q):U.TUnknown(q)?qU(N,q):U.TAny(q)?p(N,q):U.TObject(q)?G6(N,q):U.TVoid(q)?H.True:H.False}function S0(N,q){return U.TTemplateLiteral(N)||U.TTemplateLiteral(q)?O6(N,q):U.TNot(N)||U.TNot(q)?S(N,q):U.TAny(N)?O(N,q):U.TArray(N)?x(N,q):U.TBigInt(N)?X(N,q):U.TBoolean(N)?P(N,q):U.TAsyncIterator(N)?M(N,q):U.TConstructor(N)?I(N,q):U.TDate(N)?d(N,q):U.TFunction(N)?g(N,q):U.TInteger(N)?Q0(N,q):U.TIntersect(N)?$0(N,q):U.TIterator(N)?e0(N,q):U.TLiteral(N)?k4(N,q):U.TNever(N)?s8(N,q):U.TNull(N)?B0(N,q):U.TNumber(N)?q0(N,q):U.TObject(N)?i3(N,q):U.TRecord(N)?a3(N,q):U.TString(N)?VK(N,q):U.TSymbol(N)?KK(N,q):U.TTuple(N)?J8(N,q):U.TPromise(N)?zK(N,q):U.TUint8Array(N)?uc(N,q):U.TUndefined(N)?dc(N,q):U.TUnion(N)?mc(N,q):U.TUnknown(N)?cc(N,q):U.TVoid(N)?lc(N,q):u(`Unknown left type operand '${N[z.Kind]}'`)}function nc(N,q){return S0(N,q)}F.Extends=nc})(G||(z.TypeExtends=G={}));var A;(function(F){function h(O){const _=Object.getOwnPropertyNames(O).reduce((M,X)=>({...M,[X]:a(O[X])}),{}),x=Object.getOwnPropertySymbols(O).reduce((M,X)=>({...M,[X]:a(O[X])}),{});return{..._,...x}}function u(O){return O.map((_)=>a(_))}function a(O){return Z.IsArray(O)?u(O):Z.IsObject(O)?h(O):O}function l(O){return O.map((_)=>p(_))}F.Rest=l;function p(O,_={}){return{...a(O),..._}}F.Type=p})(A||(z.TypeClone=A={}));var b;(function(F){function h(I){return I.map((d)=>{const{[z.Optional]:g,...Z0}=A.Type(d);return Z0})}function u(I){return I.every((d)=>U.TOptional(d))}function a(I){return I.some((d)=>U.TOptional(d))}function l(I){return u(I.allOf)?z.Type.Optional(z.Type.Intersect(h(I.allOf))):I}function p(I){return a(I.anyOf)?z.Type.Optional(z.Type.Union(h(I.anyOf))):I}function O(I){return I[z.Kind]==="Intersect"?l(I):I[z.Kind]==="Union"?p(I):I}function _(I,d){const g=I.allOf.reduce((Z0,Q0)=>{const A0=C(Q0,d);return A0[z.Kind]==="Never"?Z0:[...Z0,A0]},[]);return O(z.Type.Intersect(g))}function x(I,d){const g=I.anyOf.map((Z0)=>C(Z0,d));return O(z.Type.Union(g))}function M(I,d){const g=I.properties[d];return Z.IsUndefined(g)?z.Type.Never():z.Type.Union([g])}function X(I,d){const g=I.items;if(Z.IsUndefined(g))return z.Type.Never();const Z0=g[d];if(Z.IsUndefined(Z0))return z.Type.Never();return Z0}function C(I,d){return I[z.Kind]==="Intersect"?_(I,d):I[z.Kind]==="Union"?x(I,d):I[z.Kind]==="Object"?M(I,d):I[z.Kind]==="Tuple"?X(I,d):z.Type.Never()}function P(I,d,g={}){const Z0=d.map((Q0)=>C(I,Q0.toString()));return O(z.Type.Union(Z0,g))}F.Resolve=P})(b||(z.IndexedAccessor=b={}));var w;(function(F){function h(X){const[C,P]=[X.slice(0,1),X.slice(1)];return`${C.toLowerCase()}${P}`}function u(X){const[C,P]=[X.slice(0,1),X.slice(1)];return`${C.toUpperCase()}${P}`}function a(X){return X.toUpperCase()}function l(X){return X.toLowerCase()}function p(X,C){const P=K0.ParseExact(X.pattern);if(!T0.Check(P))return{...X,pattern:O(X.pattern,C)};const I=[...k.Generate(P)].map((Z0)=>z.Type.Literal(Z0)),d=_(I,C),g=z.Type.Union(d);return z.Type.TemplateLiteral([g])}function O(X,C){return typeof X==="string"?C==="Uncapitalize"?h(X):C==="Capitalize"?u(X):C==="Uppercase"?a(X):C==="Lowercase"?l(X):X:X.toString()}function _(X,C){if(X.length===0)return[];const[P,...I]=X;return[M(P,C),..._(I,C)]}function x(X,C){return U.TTemplateLiteral(X)?p(X,C):U.TUnion(X)?z.Type.Union(_(X.anyOf,C)):U.TLiteral(X)?z.Type.Literal(O(X.const,C)):X}function M(X,C){return x(X,C)}F.Map=M})(w||(z.Intrinsic=w={}));var v;(function(F){function h(O,_){return z.Type.Intersect(O.allOf.map((x)=>l(x,_)),{...O})}function u(O,_){return z.Type.Union(O.anyOf.map((x)=>l(x,_)),{...O})}function a(O,_){return _(O)}function l(O,_){return O[z.Kind]==="Intersect"?h(O,_):O[z.Kind]==="Union"?u(O,_):O[z.Kind]==="Object"?a(O,_):O}function p(O,_,x){return{...l(A.Type(O),_),...x}}F.Map=p})(v||(z.ObjectMap=v={}));var W;(function(F){function h(M){return M[0]==="^"&&M[M.length-1]==="$"?M.slice(1,M.length-1):M}function u(M,X){return M.allOf.reduce((C,P)=>[...C,...O(P,X)],[])}function a(M,X){const C=M.anyOf.map((P)=>O(P,X));return[...C.reduce((P,I)=>I.map((d)=>C.every((g)=>g.includes(d))?P.add(d):P)[0],new Set)]}function l(M,X){return Object.getOwnPropertyNames(M.properties)}function p(M,X){return X.includePatterns?Object.getOwnPropertyNames(M.patternProperties):[]}function O(M,X){return U.TIntersect(M)?u(M,X):U.TUnion(M)?a(M,X):U.TObject(M)?l(M,X):U.TRecord(M)?p(M,X):[]}function _(M,X){return[...new Set(O(M,X))]}F.ResolveKeys=_;function x(M){return`^(${_(M,{includePatterns:!0}).map((X)=>`(${h(X)})`).join("|")})$`}F.ResolvePattern=x})(W||(z.KeyResolver=W={}));class f extends K{}z.KeyArrayResolverError=f;var L;(function(F){function h(u){return Array.isArray(u)?u:U.TUnionLiteral(u)?u.anyOf.map((a)=>a.const.toString()):U.TLiteral(u)?[u.const]:U.TTemplateLiteral(u)?(()=>{const a=K0.ParseExact(u.pattern);if(!T0.Check(a))throw new f("Cannot resolve keys from infinite template expression");return[...k.Generate(a)]})():[]}F.Resolve=h})(L||(z.KeyArrayResolver=L={}));var i;(function(F){function*h(a){for(let l of a.anyOf)if(l[z.Kind]==="Union")yield*h(l);else yield l}function u(a){return z.Type.Union([...h(a)],{...a})}F.Resolve=u})(i||(z.UnionResolver=i={}));class n extends K{}z.TemplateLiteralPatternError=n;var s;(function(F){function h(p){throw new n(p)}function u(p){return p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(p,O){return U.TTemplateLiteral(p)?p.pattern.slice(1,p.pattern.length-1):U.TUnion(p)?`(${p.anyOf.map((_)=>a(_,O)).join("|")})`:U.TNumber(p)?`${O}${z.PatternNumber}`:U.TInteger(p)?`${O}${z.PatternNumber}`:U.TBigInt(p)?`${O}${z.PatternNumber}`:U.TString(p)?`${O}${z.PatternString}`:U.TLiteral(p)?`${O}${u(p.const.toString())}`:U.TBoolean(p)?`${O}${z.PatternBoolean}`:h(`Unexpected Kind '${p[z.Kind]}'`)}function l(p){return`^${p.map((O)=>a(O,"")).join("")}\$`}F.Create=l})(s||(z.TemplateLiteralPattern=s={}));var o;(function(F){function h(u){const a=K0.ParseExact(u.pattern);if(!T0.Check(a))return z.Type.String();const l=[...k.Generate(a)].map((p)=>z.Type.Literal(p));return z.Type.Union(l)}F.Resolve=h})(o||(z.TemplateLiteralResolver=o={}));class t extends K{}z.TemplateLiteralParserError=t;var K0;(function(F){function h(I,d,g){return I[d]===g&&I.charCodeAt(d-1)!==92}function u(I,d){return h(I,d,"(")}function a(I,d){return h(I,d,")")}function l(I,d){return h(I,d,"|")}function p(I){if(!(u(I,0)&&a(I,I.length-1)))return!1;let d=0;for(let g=0;g<I.length;g++){if(u(I,g))d+=1;if(a(I,g))d-=1;if(d===0&&g!==I.length-1)return!1}return!0}function O(I){return I.slice(1,I.length-1)}function _(I){let d=0;for(let g=0;g<I.length;g++){if(u(I,g))d+=1;if(a(I,g))d-=1;if(l(I,g)&&d===0)return!0}return!1}function x(I){for(let d=0;d<I.length;d++)if(u(I,d))return!0;return!1}function M(I){let[d,g]=[0,0];const Z0=[];for(let A0=0;A0<I.length;A0++){if(u(I,A0))d+=1;if(a(I,A0))d-=1;if(l(I,A0)&&d===0){const $0=I.slice(g,A0);if($0.length>0)Z0.push(C($0));g=A0+1}}const Q0=I.slice(g);if(Q0.length>0)Z0.push(C(Q0));if(Z0.length===0)return{type:"const",const:""};if(Z0.length===1)return Z0[0];return{type:"or",expr:Z0}}function X(I){function d(Q0,A0){if(!u(Q0,A0))throw new t("TemplateLiteralParser: Index must point to open parens");let $0=0;for(let e0=A0;e0<Q0.length;e0++){if(u(Q0,e0))$0+=1;if(a(Q0,e0))$0-=1;if($0===0)return[A0,e0]}throw new t("TemplateLiteralParser: Unclosed group parens in expression")}function g(Q0,A0){for(let $0=A0;$0<Q0.length;$0++)if(u(Q0,$0))return[A0,$0];return[A0,Q0.length]}const Z0=[];for(let Q0=0;Q0<I.length;Q0++)if(u(I,Q0)){const[A0,$0]=d(I,Q0),e0=I.slice(A0,$0+1);Z0.push(C(e0)),Q0=$0}else{const[A0,$0]=g(I,Q0),e0=I.slice(A0,$0);if(e0.length>0)Z0.push(C(e0));Q0=$0-1}return Z0.length===0?{type:"const",const:""}:Z0.length===1?Z0[0]:{type:"and",expr:Z0}}function C(I){return p(I)?C(O(I)):_(I)?M(I):x(I)?X(I):{type:"const",const:I}}F.Parse=C;function P(I){return C(I.slice(1,I.length-1))}F.ParseExact=P})(K0||(z.TemplateLiteralParser=K0={}));class H0 extends K{}z.TemplateLiteralFiniteError=H0;var T0;(function(F){function h(O){throw new H0(O)}function u(O){return O.type==="or"&&O.expr.length===2&&O.expr[0].type==="const"&&O.expr[0].const==="0"&&O.expr[1].type==="const"&&O.expr[1].const==="[1-9][0-9]*"}function a(O){return O.type==="or"&&O.expr.length===2&&O.expr[0].type==="const"&&O.expr[0].const==="true"&&O.expr[1].type==="const"&&O.expr[1].const==="false"}function l(O){return O.type==="const"&&O.const===".*"}function p(O){return a(O)?!0:u(O)||l(O)?!1:O.type==="and"?O.expr.every((_)=>p(_)):O.type==="or"?O.expr.every((_)=>p(_)):O.type==="const"?!0:h("Unknown expression type")}F.Check=p})(T0||(z.TemplateLiteralFinite=T0={}));class T extends K{}z.TemplateLiteralGeneratorError=T;var k;(function(F){function*h(O){if(O.length===1)return yield*O[0];for(let _ of O[0])for(let x of h(O.slice(1)))yield`${_}${x}`}function*u(O){return yield*h(O.expr.map((_)=>[...p(_)]))}function*a(O){for(let _ of O.expr)yield*p(_)}function*l(O){return yield O.const}function*p(O){return O.type==="and"?yield*u(O):O.type==="or"?yield*a(O):O.type==="const"?yield*l(O):(()=>{throw new T("Unknown expression")})()}F.Generate=p})(k||(z.TemplateLiteralGenerator=k={}));var Y;(function(F){function*h(p){const O=p.trim().replace(/"|'/g,"");return O==="boolean"?yield z.Type.Boolean():O==="number"?yield z.Type.Number():O==="bigint"?yield z.Type.BigInt():O==="string"?yield z.Type.String():yield(()=>{const _=O.split("|").map((x)=>z.Type.Literal(x.trim()));return _.length===0?z.Type.Never():_.length===1?_[0]:z.Type.Union(_)})()}function*u(p){if(p[1]!=="{"){const O=z.Type.Literal("$"),_=a(p.slice(1));return yield*[O,..._]}for(let O=2;O<p.length;O++)if(p[O]==="}"){const _=h(p.slice(2,O)),x=a(p.slice(O+1));return yield*[..._,...x]}yield z.Type.Literal(p)}function*a(p){for(let O=0;O<p.length;O++)if(p[O]==="$"){const _=z.Type.Literal(p.slice(0,O)),x=u(p.slice(O));return yield*[_,...x]}yield z.Type.Literal(p)}function l(p){return[...a(p)]}F.Parse=l})(Y||(z.TemplateLiteralDslParser=Y={}));class V0{constructor(F){this.schema=F}Decode(F){return new R(this.schema,F)}}z.TransformDecodeBuilder=V0;class R{constructor(F,h){this.schema=F,this.decode=h}Encode(F){const h=A.Type(this.schema);return U.TTransform(h)?(()=>{const u={Encode:(a)=>h[z.Transform].Encode(F(a)),Decode:(a)=>this.decode(h[z.Transform].Decode(a))};return{...h,[z.Transform]:u}})():(()=>{const u={Decode:this.decode,Encode:F};return{...h,[z.Transform]:u}})()}}z.TransformEncodeBuilder=R;var y=0;class $ extends K{}z.TypeBuilderError=$;class z0{Create(F){return F}Throw(F){throw new $(F)}Discard(F,h){return h.reduce((u,a)=>{const{[a]:l,...p}=u;return p},F)}Strict(F){return JSON.parse(JSON.stringify(F))}}z.TypeBuilder=z0;class e extends z0{ReadonlyOptional(F){return this.Readonly(this.Optional(F))}Readonly(F){return{...A.Type(F),[z.Readonly]:"Readonly"}}Optional(F){return{...A.Type(F),[z.Optional]:"Optional"}}Any(F={}){return this.Create({...F,[z.Kind]:"Any"})}Array(F,h={}){return this.Create({...h,[z.Kind]:"Array",type:"array",items:A.Type(F)})}Boolean(F={}){return this.Create({...F,[z.Kind]:"Boolean",type:"boolean"})}Capitalize(F,h={}){return{...w.Map(A.Type(F),"Capitalize"),...h}}Composite(F,h){const u=z.Type.Intersect(F,{}),a=W.ResolveKeys(u,{includePatterns:!1}).reduce((l,p)=>({...l,[p]:z.Type.Index(u,[p])}),{});return z.Type.Object(a,h)}Enum(F,h={}){if(Z.IsUndefined(F))return this.Throw("Enum undefined or empty");const u=Object.getOwnPropertyNames(F).filter((l)=>isNaN(l)).map((l)=>F[l]),a=[...new Set(u)].map((l)=>z.Type.Literal(l));return this.Union(a,{...h,[z.Hint]:"Enum"})}Extends(F,h,u,a,l={}){switch(G.Extends(F,h)){case H.Union:return this.Union([A.Type(u,l),A.Type(a,l)]);case H.True:return A.Type(u,l);case H.False:return A.Type(a,l)}}Exclude(F,h,u={}){return U.TTemplateLiteral(F)?this.Exclude(o.Resolve(F),h,u):U.TTemplateLiteral(h)?this.Exclude(F,o.Resolve(h),u):U.TUnion(F)?(()=>{const a=F.anyOf.filter((l)=>G.Extends(l,h)===H.False);return a.length===1?A.Type(a[0],u):this.Union(a,u)})():G.Extends(F,h)!==H.False?this.Never(u):A.Type(F,u)}Extract(F,h,u={}){return U.TTemplateLiteral(F)?this.Extract(o.Resolve(F),h,u):U.TTemplateLiteral(h)?this.Extract(F,o.Resolve(h),u):U.TUnion(F)?(()=>{const a=F.anyOf.filter((l)=>G.Extends(l,h)!==H.False);return a.length===1?A.Type(a[0],u):this.Union(a,u)})():G.Extends(F,h)!==H.False?A.Type(F,u):this.Never(u)}Index(F,h,u={}){return U.TArray(F)&&U.TNumber(h)?(()=>{return A.Type(F.items,u)})():U.TTuple(F)&&U.TNumber(h)?(()=>{const a=(Z.IsUndefined(F.items)?[]:F.items).map((l)=>A.Type(l));return this.Union(a,u)})():(()=>{const a=L.Resolve(h),l=A.Type(F);return b.Resolve(l,a,u)})()}Integer(F={}){return this.Create({...F,[z.Kind]:"Integer",type:"integer"})}Intersect(F,h={}){if(F.length===0)return z.Type.Never();if(F.length===1)return A.Type(F[0],h);if(F.some((p)=>U.TTransform(p)))this.Throw("Cannot intersect transform types");const u=F.every((p)=>U.TObject(p)),a=A.Rest(F),l=U.TSchema(h.unevaluatedProperties)?{unevaluatedProperties:A.Type(h.unevaluatedProperties)}:{};return h.unevaluatedProperties===!1||U.TSchema(h.unevaluatedProperties)||u?this.Create({...h,...l,[z.Kind]:"Intersect",type:"object",allOf:a}):this.Create({...h,...l,[z.Kind]:"Intersect",allOf:a})}KeyOf(F,h={}){return U.TRecord(F)?(()=>{const u=Object.getOwnPropertyNames(F.patternProperties)[0];return u===z.PatternNumberExact?this.Number(h):u===z.PatternStringExact?this.String(h):this.Throw("Unable to resolve key type from Record key pattern")})():U.TTuple(F)?(()=>{const u=(Z.IsUndefined(F.items)?[]:F.items).map((a,l)=>z.Type.Literal(l.toString()));return this.Union(u,h)})():U.TArray(F)?(()=>{return this.Number(h)})():(()=>{const u=W.ResolveKeys(F,{includePatterns:!1});if(u.length===0)return this.Never(h);const a=u.map((l)=>this.Literal(l));return this.Union(a,h)})()}Literal(F,h={}){return this.Create({...h,[z.Kind]:"Literal",const:F,type:typeof F})}Lowercase(F,h={}){return{...w.Map(A.Type(F),"Lowercase"),...h}}Never(F={}){return this.Create({...F,[z.Kind]:"Never",not:{}})}Not(F,h){return this.Create({...h,[z.Kind]:"Not",not:A.Type(F)})}Null(F={}){return this.Create({...F,[z.Kind]:"Null",type:"null"})}Number(F={}){return this.Create({...F,[z.Kind]:"Number",type:"number"})}Object(F,h={}){const u=Object.getOwnPropertyNames(F),a=u.filter((_)=>U.TOptional(F[_])),l=u.filter((_)=>!a.includes(_)),p=U.TSchema(h.additionalProperties)?{additionalProperties:A.Type(h.additionalProperties)}:{},O=u.reduce((_,x)=>({..._,[x]:A.Type(F[x])}),{});return l.length>0?this.Create({...h,...p,[z.Kind]:"Object",type:"object",properties:O,required:l}):this.Create({...h,...p,[z.Kind]:"Object",type:"object",properties:O})}Omit(F,h,u={}){const a=L.Resolve(h);return v.Map(this.Discard(A.Type(F),["$id",z.Transform]),(l)=>{if(Z.IsArray(l.required)){if(l.required=l.required.filter((p)=>!a.includes(p)),l.required.length===0)delete l.required}for(let p of Object.getOwnPropertyNames(l.properties))if(a.includes(p))delete l.properties[p];return this.Create(l)},u)}Partial(F,h={}){return v.Map(this.Discard(A.Type(F),["$id",z.Transform]),(u)=>{const a=Object.getOwnPropertyNames(u.properties).reduce((l,p)=>{return{...l,[p]:this.Optional(u.properties[p])}},{});return this.Object(a,this.Discard(u,["required"]))},h)}Pick(F,h,u={}){const a=L.Resolve(h);return v.Map(this.Discard(A.Type(F),["$id",z.Transform]),(l)=>{if(Z.IsArray(l.required)){if(l.required=l.required.filter((p)=>a.includes(p)),l.required.length===0)delete l.required}for(let p of Object.getOwnPropertyNames(l.properties))if(!a.includes(p))delete l.properties[p];return this.Create(l)},u)}Record(F,h,u={}){return U.TTemplateLiteral(F)?(()=>{const a=K0.ParseExact(F.pattern);return T0.Check(a)?this.Object([...k.Generate(a)].reduce((l,p)=>({...l,[p]:A.Type(h)}),{}),u):this.Create({...u,[z.Kind]:"Record",type:"object",patternProperties:{[F.pattern]:A.Type(h)}})})():U.TUnion(F)?(()=>{const a=i.Resolve(F);if(U.TUnionLiteral(a)){const l=a.anyOf.reduce((p,O)=>({...p,[O.const]:A.Type(h)}),{});return this.Object(l,{...u,[z.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():U.TLiteral(F)?(()=>{return Z.IsString(F.const)||Z.IsNumber(F.const)?this.Object({[F.const]:A.Type(h)},u):this.Throw("Record key of type literal is not of type string or number")})():U.TInteger(F)||U.TNumber(F)?(()=>{return this.Create({...u,[z.Kind]:"Record",type:"object",patternProperties:{[z.PatternNumberExact]:A.Type(h)}})})():U.TString(F)?(()=>{const a=Z.IsUndefined(F.pattern)?z.PatternStringExact:F.pattern;return this.Create({...u,[z.Kind]:"Record",type:"object",patternProperties:{[a]:A.Type(h)}})})():this.Never()}Recursive(F,h={}){if(Z.IsUndefined(h.$id))h.$id=`T${y++}`;const u=F({[z.Kind]:"This",$ref:`${h.$id}`});return u.$id=h.$id,this.Create({...h,[z.Hint]:"Recursive",...u})}Ref(F,h={}){if(Z.IsString(F))return this.Create({...h,[z.Kind]:"Ref",$ref:F});if(Z.IsUndefined(F.$id))this.Throw("Reference target type must specify an $id");return this.Create({...h,[z.Kind]:"Ref",$ref:F.$id})}Required(F,h={}){return v.Map(this.Discard(A.Type(F),["$id",z.Transform]),(u)=>{const a=Object.getOwnPropertyNames(u.properties).reduce((l,p)=>{return{...l,[p]:this.Discard(u.properties[p],[z.Optional])}},{});return this.Object(a,u)},h)}Rest(F){return U.TTuple(F)&&!Z.IsUndefined(F.items)?A.Rest(F.items):U.TIntersect(F)?A.Rest(F.allOf):U.TUnion(F)?A.Rest(F.anyOf):[]}String(F={}){return this.Create({...F,[z.Kind]:"String",type:"string"})}TemplateLiteral(F,h={}){const u=Z.IsString(F)?s.Create(Y.Parse(F)):s.Create(F);return this.Create({...h,[z.Kind]:"TemplateLiteral",type:"string",pattern:u})}Transform(F){return new V0(F)}Tuple(F,h={}){const[u,a,l]=[!1,F.length,F.length],p=A.Rest(F),O=F.length>0?{...h,[z.Kind]:"Tuple",type:"array",items:p,additionalItems:u,minItems:a,maxItems:l}:{...h,[z.Kind]:"Tuple",type:"array",minItems:a,maxItems:l};return this.Create(O)}Uncapitalize(F,h={}){return{...w.Map(A.Type(F),"Uncapitalize"),...h}}Union(F,h={}){return U.TTemplateLiteral(F)?o.Resolve(F):(()=>{const u=F;if(u.length===0)return this.Never(h);if(u.length===1)return this.Create(A.Type(u[0],h));const a=A.Rest(u);return this.Create({...h,[z.Kind]:"Union",anyOf:a})})()}Unknown(F={}){return this.Create({...F,[z.Kind]:"Unknown"})}Unsafe(F={}){return this.Create({...F,[z.Kind]:F[z.Kind]||"Unsafe"})}Uppercase(F,h={}){return{...w.Map(A.Type(F),"Uppercase"),...h}}}z.JsonTypeBuilder=e;class G0 extends e{AsyncIterator(F,h={}){return this.Create({...h,[z.Kind]:"AsyncIterator",type:"AsyncIterator",items:A.Type(F)})}Awaited(F,h={}){const u=(a)=>a.length>0?(()=>{const[l,...p]=a;return[this.Awaited(l),...u(p)]})():a;return U.TIntersect(F)?z.Type.Intersect(u(F.allOf)):U.TUnion(F)?z.Type.Union(u(F.anyOf)):U.TPromise(F)?this.Awaited(F.item):A.Type(F,h)}BigInt(F={}){return this.Create({...F,[z.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(F,h={}){return this.Tuple([...F.parameters],{...h})}Constructor(F,h,u){const[a,l]=[A.Rest(F),A.Type(h)];return this.Create({...u,[z.Kind]:"Constructor",type:"Constructor",parameters:a,returns:l})}Date(F={}){return this.Create({...F,[z.Kind]:"Date",type:"Date"})}Function(F,h,u){const[a,l]=[A.Rest(F),A.Type(h)];return this.Create({...u,[z.Kind]:"Function",type:"Function",parameters:a,returns:l})}InstanceType(F,h={}){return A.Type(F.returns,h)}Iterator(F,h={}){return this.Create({...h,[z.Kind]:"Iterator",type:"Iterator",items:A.Type(F)})}Parameters(F,h={}){return this.Tuple(F.parameters,{...h})}Promise(F,h={}){return this.Create({...h,[z.Kind]:"Promise",type:"Promise",item:A.Type(F)})}RegExp(F,h={}){const u=Z.IsString(F)?F:F.source;return this.Create({...h,[z.Kind]:"String",type:"string",pattern:u})}RegEx(F,h={}){return this.RegExp(F,h)}ReturnType(F,h={}){return A.Type(F.returns,h)}Symbol(F){return this.Create({...F,[z.Kind]:"Symbol",type:"symbol"})}Undefined(F={}){return this.Create({...F,[z.Kind]:"Undefined",type:"undefined"})}Uint8Array(F={}){return this.Create({...F,[z.Kind]:"Uint8Array",type:"Uint8Array"})}Void(F={}){return this.Create({...F,[z.Kind]:"Void",type:"void"})}}z.JavaScriptTypeBuilder=G0,z.JsonType=new e,z.Type=new G0}),gU=y0((z)=>{var V=function(G,A){switch(A){case J.ValueErrorType.ArrayContains:return"Expected array to contain at least one matching value";case J.ValueErrorType.ArrayMaxContains:return`Expected array to contain no more than ${G.maxContains} matching values`;case J.ValueErrorType.ArrayMinContains:return`Expected array to contain at least ${G.minContains} matching values`;case J.ValueErrorType.ArrayMaxItems:return`Expected array length to be less or equal to ${G.maxItems}`;case J.ValueErrorType.ArrayMinItems:return`Expected array length to be greater or equal to ${G.minItems}`;case J.ValueErrorType.ArrayUniqueItems:return"Expected array elements to be unique";case J.ValueErrorType.Array:return"Expected array";case J.ValueErrorType.AsyncIterator:return"Expected AsyncIterator";case J.ValueErrorType.BigIntExclusiveMaximum:return`Expected bigint to be less than ${G.exclusiveMaximum}`;case J.ValueErrorType.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${G.exclusiveMinimum}`;case J.ValueErrorType.BigIntMaximum:return`Expected bigint to be less or equal to ${G.maximum}`;case J.ValueErrorType.BigIntMinimum:return`Expected bigint to be greater or equal to ${G.minimum}`;case J.ValueErrorType.BigIntMultipleOf:return`Expected bigint to be a multiple of ${G.multipleOf}`;case J.ValueErrorType.BigInt:return"Expected bigint";case J.ValueErrorType.Boolean:return"Expected boolean";case J.ValueErrorType.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${G.exclusiveMinimumTimestamp}`;case J.ValueErrorType.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${G.exclusiveMaximumTimestamp}`;case J.ValueErrorType.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${G.minimumTimestamp}`;case J.ValueErrorType.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${G.maximumTimestamp}`;case J.ValueErrorType.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${G.multipleOfTimestamp}`;case J.ValueErrorType.Date:return"Expected Date";case J.ValueErrorType.Function:return"Expected function";case J.ValueErrorType.IntegerExclusiveMaximum:return`Expected integer to be less than ${G.exclusiveMaximum}`;case J.ValueErrorType.IntegerExclusiveMinimum:return`Expected integer to be greater than ${G.exclusiveMinimum}`;case J.ValueErrorType.IntegerMaximum:return`Expected integer to be less or equal to ${G.maximum}`;case J.ValueErrorType.IntegerMinimum:return`Expected integer to be greater or equal to ${G.minimum}`;case J.ValueErrorType.IntegerMultipleOf:return`Expected integer to be a multiple of ${G.multipleOf}`;case J.ValueErrorType.Integer:return"Expected integer";case J.ValueErrorType.IntersectUnevaluatedProperties:return"Unexpected property";case J.ValueErrorType.Intersect:return"Expected all values to match";case J.ValueErrorType.Iterator:return"Expected Iterator";case J.ValueErrorType.Literal:return`Expected ${typeof G.const==="string"?`'${G.const}'`:G.const}`;case J.ValueErrorType.Never:return"Never";case J.ValueErrorType.Not:return"Value should not match";case J.ValueErrorType.Null:return"Expected null";case J.ValueErrorType.NumberExclusiveMaximum:return`Expected number to be less than ${G.exclusiveMaximum}`;case J.ValueErrorType.NumberExclusiveMinimum:return`Expected number to be greater than ${G.exclusiveMinimum}`;case J.ValueErrorType.NumberMaximum:return`Expected number to be less or equal to ${G.maximum}`;case J.ValueErrorType.NumberMinimum:return`Expected number to be greater or equal to ${G.minimum}`;case J.ValueErrorType.NumberMultipleOf:return`Expected number to be a multiple of ${G.multipleOf}`;case J.ValueErrorType.Number:return"Expected number";case J.ValueErrorType.Object:return"Expected object";case J.ValueErrorType.ObjectAdditionalProperties:return"Unexpected property";case J.ValueErrorType.ObjectMaxProperties:return`Expected object to have no more than ${G.maxProperties} properties`;case J.ValueErrorType.ObjectMinProperties:return`Expected object to have at least ${G.minProperties} properties`;case J.ValueErrorType.ObjectRequiredProperty:return"Required property";case J.ValueErrorType.Promise:return"Expected Promise";case J.ValueErrorType.StringFormatUnknown:return`Unknown format '${G.format}'`;case J.ValueErrorType.StringFormat:return`Expected string to match '${G.format}' format`;case J.ValueErrorType.StringMaxLength:return`Expected string length less or equal to ${G.maxLength}`;case J.ValueErrorType.StringMinLength:return`Expected string length greater or equal to ${G.minLength}`;case J.ValueErrorType.StringPattern:return`Expected string to match '${G.pattern}'`;case J.ValueErrorType.String:return"Expected string";case J.ValueErrorType.Symbol:return"Expected symbol";case J.ValueErrorType.TupleLength:return`Expected tuple to have ${G.maxItems||0} elements`;case J.ValueErrorType.Tuple:return"Expected tuple";case J.ValueErrorType.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${G.maxByteLength}`;case J.ValueErrorType.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${G.minByteLength}`;case J.ValueErrorType.Uint8Array:return"Expected Uint8Array";case J.ValueErrorType.Undefined:return"Expected undefined";case J.ValueErrorType.Union:return"Expected union value";case J.ValueErrorType.Void:return"Expected void";case J.ValueErrorType.Kind:return`Expected kind '${G[Z.Kind]}'`;default:return"Unknown error type"}};Object.defineProperty(z,"__esModule",{value:!0}),z.DefaultErrorFunction=z.TypeSystemPolicy=z.TypeSystemErrorFunction=z.TypeSystem=z.TypeSystemDuplicateFormat=z.TypeSystemDuplicateTypeKind=void 0;var K=t6(),J=Kz(),Z=U8();class D extends Z.TypeBoxError{constructor(G){super(`Duplicate type kind '${G}' detected`)}}z.TypeSystemDuplicateTypeKind=D;class U extends Z.TypeBoxError{constructor(G){super(`Duplicate string format '${G}' detected`)}}z.TypeSystemDuplicateFormat=U;var j;(function(G){function A(w,v){if(Z.TypeRegistry.Has(w))throw new D(w);return Z.TypeRegistry.Set(w,v),(W={})=>Z.Type.Unsafe({...W,[Z.Kind]:w})}G.Type=A;function b(w,v){if(Z.FormatRegistry.Has(w))throw new U(w);return Z.FormatRegistry.Set(w,v),w}G.Format=b})(j||(z.TypeSystem=j={}));var B;(function(G){let A=V;function b(){A=V}G.Reset=b;function w(W){A=W}G.Set=w;function v(){return A}G.Get=v})(B||(z.TypeSystemErrorFunction=B={}));var H;(function(G){G.ExactOptionalPropertyTypes=!1,G.AllowArrayObject=!1,G.AllowNaN=!1,G.AllowNullVoid=!1;function A(f,L){return G.ExactOptionalPropertyTypes?L in f:f[L]!==void 0}G.IsExactOptionalProperty=A;function b(f){const L=(0,K.IsObject)(f);return G.AllowArrayObject?L:L&&!(0,K.IsArray)(f)}G.IsObjectLike=b;function w(f){return b(f)&&!(f instanceof Date)&&!(f instanceof Uint8Array)}G.IsRecordLike=w;function v(f){const L=(0,K.IsNumber)(f);return G.AllowNaN?L:L&&Number.isFinite(f)}G.IsNumberLike=v;function W(f){const L=(0,K.IsUndefined)(f);return G.AllowNullVoid?L||f===null:L}G.IsVoidLike=W})(H||(z.TypeSystemPolicy=H={})),z.DefaultErrorFunction=V}),y4=y0((z)=>{var V=function(Z,D){const U=D.findIndex((j)=>j.$id===Z.$ref);if(U===-1)throw new J(Z);return D[U]};Object.defineProperty(z,"__esModule",{value:!0}),z.Deref=z.TypeDereferenceError=void 0;var K=U8();class J extends K.TypeBoxError{constructor(Z){super(`Unable to dereference schema with $id '${Z.$id}'`);this.schema=Z}}z.TypeDereferenceError=J,z.Deref=V}),Vz=y0((z)=>{function*V(T){const k=T===0?1:Math.ceil(Math.floor(Math.log2(T)+1)/8);for(let Y=0;Y<k;Y++)yield T>>8*(k-1-Y)&255}var K=function(T){v(i.Array);for(let k of T)w(k)},J=function(T){v(i.Boolean),v(T?1:0)},Z=function(T){v(i.BigInt),H0.setBigInt64(0,T);for(let k of T0)v(k)},D=function(T){v(i.Date),w(T.getTime())},U=function(T){v(i.Null)},j=function(T){v(i.Number),H0.setFloat64(0,T);for(let k of T0)v(k)},B=function(T){v(i.Object);for(let k of globalThis.Object.keys(T).sort())w(k),w(T[k])},H=function(T){v(i.String);for(let k=0;k<T.length;k++)for(let Y of V(T.charCodeAt(k)))v(Y)},G=function(T){v(i.Symbol),w(T.description)},A=function(T){v(i.Uint8Array);for(let k=0;k<T.length;k++)v(T[k])},b=function(T){return v(i.Undefined)},w=function(T){if((0,f.IsArray)(T))return K(T);if((0,f.IsBoolean)(T))return J(T);if((0,f.IsBigInt)(T))return Z(T);if((0,f.IsDate)(T))return D(T);if((0,f.IsNull)(T))return U(T);if((0,f.IsNumber)(T))return j(T);if((0,f.IsPlainObject)(T))return B(T);if((0,f.IsString)(T))return H(T);if((0,f.IsSymbol)(T))return G(T);if((0,f.IsUint8Array)(T))return A(T);if((0,f.IsUndefined)(T))return b(T);throw new L(T)},v=function(T){n=n^t[T],n=n*s%o},W=function(T){return n=BigInt("14695981039346656037"),w(T),n};Object.defineProperty(z,"__esModule",{value:!0}),z.Hash=z.ByteMarker=z.ValueHashError=void 0;var f=t6();class L extends Error{constructor(T){super("Unable to hash value");this.value=T}}z.ValueHashError=L;var i;(function(T){T[T.Undefined=0]="Undefined",T[T.Null=1]="Null",T[T.Boolean=2]="Boolean",T[T.Number=3]="Number",T[T.String=4]="String",T[T.Object=5]="Object",T[T.Array=6]="Array",T[T.Date=7]="Date",T[T.Uint8Array=8]="Uint8Array",T[T.Symbol=9]="Symbol",T[T.BigInt=10]="BigInt"})(i||(z.ByteMarker=i={}));var n=BigInt("14695981039346656037"),[s,o]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],t=Array.from({length:256}).map((T,k)=>BigInt(k)),K0=new Float64Array(1),H0=new DataView(K0.buffer),T0=new Uint8Array(K0.buffer);z.Hash=W}),Kz=y0((z)=>{var V=function(M){return M.replace(/~/g,"~0").replace(/\//g,"~1")},K=function(M){return M!==void 0},J=function(M,X,C,P){return{type:M,schema:X,path:C,value:P,message:u.TypeSystemErrorFunction.Get()(X,M)}};function*Z(M,X,C,P){}function*D(M,X,C,P){if(!(0,h.IsArray)(P))return yield J(O.Array,M,C,P);if(K(M.minItems)&&!(P.length>=M.minItems))yield J(O.ArrayMinItems,M,C,P);if(K(M.maxItems)&&!(P.length<=M.maxItems))yield J(O.ArrayMaxItems,M,C,P);for(let g=0;g<P.length;g++)yield*G0(M.items,X,`${C}/${g}`,P[g]);if(M.uniqueItems===!0&&!function(){const g=new Set;for(let Z0 of P){const Q0=(0,l.Hash)(Z0);if(g.has(Q0))return!1;else g.add(Q0)}return!0}())yield J(O.ArrayUniqueItems,M,C,P);if(!(K(M.contains)||K(M.minContains)||K(M.maxContains)))return;const I=K(M.contains)?M.contains:p.Type.Never(),d=P.reduce((g,Z0,Q0)=>G0(I,X,`${C}${Q0}`,Z0).next().done===!0?g+1:g,0);if(d===0)yield J(O.ArrayContains,M,C,P);if((0,h.IsNumber)(M.minContains)&&d<M.minContains)yield J(O.ArrayMinContains,M,C,P);if((0,h.IsNumber)(M.maxContains)&&d>M.maxContains)yield J(O.ArrayMaxContains,M,C,P)}function*U(M,X,C,P){if(!(0,h.IsAsyncIterator)(P))yield J(O.AsyncIterator,M,C,P)}function*j(M,X,C,P){if(!(0,h.IsBigInt)(P))return yield J(O.BigInt,M,C,P);if(K(M.exclusiveMaximum)&&!(P<M.exclusiveMaximum))yield J(O.BigIntExclusiveMaximum,M,C,P);if(K(M.exclusiveMinimum)&&!(P>M.exclusiveMinimum))yield J(O.BigIntExclusiveMinimum,M,C,P);if(K(M.maximum)&&!(P<=M.maximum))yield J(O.BigIntMaximum,M,C,P);if(K(M.minimum)&&!(P>=M.minimum))yield J(O.BigIntMinimum,M,C,P);if(K(M.multipleOf)&&P%M.multipleOf!==BigInt(0))yield J(O.BigIntMultipleOf,M,C,P)}function*B(M,X,C,P){if(!(0,h.IsBoolean)(P))yield J(O.Boolean,M,C,P)}function*H(M,X,C,P){yield*G0(M.returns,X,C,P.prototype)}function*G(M,X,C,P){if(!(0,h.IsDate)(P))return yield J(O.Date,M,C,P);if(K(M.exclusiveMaximumTimestamp)&&!(P.getTime()<M.exclusiveMaximumTimestamp))yield J(O.DateExclusiveMaximumTimestamp,M,C,P);if(K(M.exclusiveMinimumTimestamp)&&!(P.getTime()>M.exclusiveMinimumTimestamp))yield J(O.DateExclusiveMinimumTimestamp,M,C,P);if(K(M.maximumTimestamp)&&!(P.getTime()<=M.maximumTimestamp))yield J(O.DateMaximumTimestamp,M,C,P);if(K(M.minimumTimestamp)&&!(P.getTime()>=M.minimumTimestamp))yield J(O.DateMinimumTimestamp,M,C,P);if(K(M.multipleOfTimestamp)&&P.getTime()%M.multipleOfTimestamp!==0)yield J(O.DateMultipleOfTimestamp,M,C,P)}function*A(M,X,C,P){if(!(0,h.IsFunction)(P))yield J(O.Function,M,C,P)}function*b(M,X,C,P){if(!(0,h.IsInteger)(P))return yield J(O.Integer,M,C,P);if(K(M.exclusiveMaximum)&&!(P<M.exclusiveMaximum))yield J(O.IntegerExclusiveMaximum,M,C,P);if(K(M.exclusiveMinimum)&&!(P>M.exclusiveMinimum))yield J(O.IntegerExclusiveMinimum,M,C,P);if(K(M.maximum)&&!(P<=M.maximum))yield J(O.IntegerMaximum,M,C,P);if(K(M.minimum)&&!(P>=M.minimum))yield J(O.IntegerMinimum,M,C,P);if(K(M.multipleOf)&&P%M.multipleOf!==0)yield J(O.IntegerMultipleOf,M,C,P)}function*w(M,X,C,P){for(let I of M.allOf){const d=G0(I,X,C,P).next();if(!d.done)yield J(O.Intersect,M,C,P),yield d.value}if(M.unevaluatedProperties===!1){const I=new RegExp(p.KeyResolver.ResolvePattern(M));for(let d of Object.getOwnPropertyNames(P))if(!I.test(d))yield J(O.IntersectUnevaluatedProperties,M,`${C}/${d}`,P)}if(typeof M.unevaluatedProperties==="object"){const I=new RegExp(p.KeyResolver.ResolvePattern(M));for(let d of Object.getOwnPropertyNames(P))if(!I.test(d)){const g=G0(M.unevaluatedProperties,X,`${C}/${d}`,P[d]).next();if(!g.done)yield g.value}}}function*v(M,X,C,P){if(!(0,h.IsIterator)(P))yield J(O.Iterator,M,C,P)}function*W(M,X,C,P){if(P!==M.const)yield J(O.Literal,M,C,P)}function*f(M,X,C,P){yield J(O.Never,M,C,P)}function*L(M,X,C,P){if(G0(M.not,X,C,P).next().done===!0)yield J(O.Not,M,C,P)}function*i(M,X,C,P){if(!(0,h.IsNull)(P))yield J(O.Null,M,C,P)}function*n(M,X,C,P){if(!u.TypeSystemPolicy.IsNumberLike(P))return yield J(O.Number,M,C,P);if(K(M.exclusiveMaximum)&&!(P<M.exclusiveMaximum))yield J(O.NumberExclusiveMaximum,M,C,P);if(K(M.exclusiveMinimum)&&!(P>M.exclusiveMinimum))yield J(O.NumberExclusiveMinimum,M,C,P);if(K(M.maximum)&&!(P<=M.maximum))yield J(O.NumberMaximum,M,C,P);if(K(M.minimum)&&!(P>=M.minimum))yield J(O.NumberMinimum,M,C,P);if(K(M.multipleOf)&&P%M.multipleOf!==0)yield J(O.NumberMultipleOf,M,C,P)}function*s(M,X,C,P){if(!u.TypeSystemPolicy.IsObjectLike(P))return yield J(O.Object,M,C,P);if(K(M.minProperties)&&!(Object.getOwnPropertyNames(P).length>=M.minProperties))yield J(O.ObjectMinProperties,M,C,P);if(K(M.maxProperties)&&!(Object.getOwnPropertyNames(P).length<=M.maxProperties))yield J(O.ObjectMaxProperties,M,C,P);const I=Array.isArray(M.required)?M.required:[],d=Object.getOwnPropertyNames(M.properties),g=Object.getOwnPropertyNames(P);for(let Z0 of I){if(g.includes(Z0))continue;yield J(O.ObjectRequiredProperty,M.properties[Z0],`${C}/${V(Z0)}`,void 0)}if(M.additionalProperties===!1){for(let Z0 of g)if(!d.includes(Z0))yield J(O.ObjectAdditionalProperties,M,`${C}/${V(Z0)}`,P[Z0])}if(typeof M.additionalProperties==="object")for(let Z0 of g){if(d.includes(Z0))continue;yield*G0(M.additionalProperties,X,`${C}/${V(Z0)}`,P[Z0])}for(let Z0 of d){const Q0=M.properties[Z0];if(M.required&&M.required.includes(Z0)){if(yield*G0(Q0,X,`${C}/${V(Z0)}`,P[Z0]),p.ExtendsUndefined.Check(M)&&!(Z0 in P))yield J(O.ObjectRequiredProperty,Q0,`${C}/${V(Z0)}`,void 0)}else if(u.TypeSystemPolicy.IsExactOptionalProperty(P,Z0))yield*G0(Q0,X,`${C}/${V(Z0)}`,P[Z0])}}function*o(M,X,C,P){if(!(0,h.IsPromise)(P))yield J(O.Promise,M,C,P)}function*t(M,X,C,P){if(!u.TypeSystemPolicy.IsRecordLike(P))return yield J(O.Object,M,C,P);if(K(M.minProperties)&&!(Object.getOwnPropertyNames(P).length>=M.minProperties))yield J(O.ObjectMinProperties,M,C,P);if(K(M.maxProperties)&&!(Object.getOwnPropertyNames(P).length<=M.maxProperties))yield J(O.ObjectMaxProperties,M,C,P);const[I,d]=Object.entries(M.patternProperties)[0],g=new RegExp(I);for(let[Z0,Q0]of Object.entries(P))if(g.test(Z0))yield*G0(d,X,`${C}/${V(Z0)}`,Q0);if(typeof M.additionalProperties==="object"){for(let[Z0,Q0]of Object.entries(P))if(!g.test(Z0))yield*G0(M.additionalProperties,X,`${C}/${V(Z0)}`,Q0)}if(M.additionalProperties===!1)for(let[Z0,Q0]of Object.entries(P)){if(g.test(Z0))continue;return yield J(O.ObjectAdditionalProperties,M,`${C}/${V(Z0)}`,Q0)}}function*K0(M,X,C,P){yield*G0((0,a.Deref)(M,X),X,C,P)}function*H0(M,X,C,P){if(!(0,h.IsString)(P))return yield J(O.String,M,C,P);if(K(M.minLength)&&!(P.length>=M.minLength))yield J(O.StringMinLength,M,C,P);if(K(M.maxLength)&&!(P.length<=M.maxLength))yield J(O.StringMaxLength,M,C,P);if((0,h.IsString)(M.pattern)){if(!new RegExp(M.pattern).test(P))yield J(O.StringPattern,M,C,P)}if((0,h.IsString)(M.format)){if(!p.FormatRegistry.Has(M.format))yield J(O.StringFormatUnknown,M,C,P);else if(!p.FormatRegistry.Get(M.format)(P))yield J(O.StringFormat,M,C,P)}}function*T0(M,X,C,P){if(!(0,h.IsSymbol)(P))yield J(O.Symbol,M,C,P)}function*T(M,X,C,P){if(!(0,h.IsString)(P))return yield J(O.String,M,C,P);if(!new RegExp(M.pattern).test(P))yield J(O.StringPattern,M,C,P)}function*k(M,X,C,P){yield*G0((0,a.Deref)(M,X),X,C,P)}function*Y(M,X,C,P){if(!(0,h.IsArray)(P))return yield J(O.Tuple,M,C,P);if(M.items===void 0&&P.length!==0)return yield J(O.TupleLength,M,C,P);if(P.length!==M.maxItems)return yield J(O.TupleLength,M,C,P);if(!M.items)return;for(let I=0;I<M.items.length;I++)yield*G0(M.items[I],X,`${C}/${I}`,P[I])}function*V0(M,X,C,P){if(!(0,h.IsUndefined)(P))yield J(O.Undefined,M,C,P)}function*R(M,X,C,P){let I=0;for(let d of M.anyOf){const g=[...G0(d,X,C,P)];if(g.length===0)return;I+=g.length}if(I>0)yield J(O.Union,M,C,P)}function*y(M,X,C,P){if(!(0,h.IsUint8Array)(P))return yield J(O.Uint8Array,M,C,P);if(K(M.maxByteLength)&&!(P.length<=M.maxByteLength))yield J(O.Uint8ArrayMaxByteLength,M,C,P);if(K(M.minByteLength)&&!(P.length>=M.minByteLength))yield J(O.Uint8ArrayMinByteLength,M,C,P)}function*$(M,X,C,P){}function*z0(M,X,C,P){if(!u.TypeSystemPolicy.IsVoidLike(P))yield J(O.Void,M,C,P)}function*e(M,X,C,P){if(!p.TypeRegistry.Get(M[p.Kind])(M,P))yield J(O.Kind,M,C,P)}function*G0(M,X,C,P){const I=K(M.$id)?[...X,M]:X,d=M;switch(d[p.Kind]){case"Any":return yield*Z(d,I,C,P);case"Array":return yield*D(d,I,C,P);case"AsyncIterator":return yield*U(d,I,C,P);case"BigInt":return yield*j(d,I,C,P);case"Boolean":return yield*B(d,I,C,P);case"Constructor":return yield*H(d,I,C,P);case"Date":return yield*G(d,I,C,P);case"Function":return yield*A(d,I,C,P);case"Integer":return yield*b(d,I,C,P);case"Intersect":return yield*w(d,I,C,P);case"Iterator":return yield*v(d,I,C,P);case"Literal":return yield*W(d,I,C,P);case"Never":return yield*f(d,I,C,P);case"Not":return yield*L(d,I,C,P);case"Null":return yield*i(d,I,C,P);case"Number":return yield*n(d,I,C,P);case"Object":return yield*s(d,I,C,P);case"Promise":return yield*o(d,I,C,P);case"Record":return yield*t(d,I,C,P);case"Ref":return yield*K0(d,I,C,P);case"String":return yield*H0(d,I,C,P);case"Symbol":return yield*T0(d,I,C,P);case"TemplateLiteral":return yield*T(d,I,C,P);case"This":return yield*k(d,I,C,P);case"Tuple":return yield*Y(d,I,C,P);case"Undefined":return yield*V0(d,I,C,P);case"Union":return yield*R(d,I,C,P);case"Uint8Array":return yield*y(d,I,C,P);case"Unknown":return yield*$(d,I,C,P);case"Void":return yield*z0(d,I,C,P);default:if(!p.TypeRegistry.Has(d[p.Kind]))throw new _(M);return yield*e(d,I,C,P)}}var F=function(...M){const X=M.length===3?G0(M[0],M[1],"",M[2]):G0(M[0],[],"",M[1]);return new x(X)};Object.defineProperty(z,"__esModule",{value:!0}),z.Errors=z.ValueErrorIterator=z.EscapeKey=z.ValueErrorsUnknownTypeError=z.ValueErrorType=void 0;var h=t6(),u=gU(),a=y4(),l=Vz(),p=U8(),O;(function(M){M[M.ArrayContains=0]="ArrayContains",M[M.ArrayMaxContains=1]="ArrayMaxContains",M[M.ArrayMaxItems=2]="ArrayMaxItems",M[M.ArrayMinContains=3]="ArrayMinContains",M[M.ArrayMinItems=4]="ArrayMinItems",M[M.ArrayUniqueItems=5]="ArrayUniqueItems",M[M.Array=6]="Array",M[M.AsyncIterator=7]="AsyncIterator",M[M.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",M[M.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",M[M.BigIntMaximum=10]="BigIntMaximum",M[M.BigIntMinimum=11]="BigIntMinimum",M[M.BigIntMultipleOf=12]="BigIntMultipleOf",M[M.BigInt=13]="BigInt",M[M.Boolean=14]="Boolean",M[M.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",M[M.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",M[M.DateMaximumTimestamp=17]="DateMaximumTimestamp",M[M.DateMinimumTimestamp=18]="DateMinimumTimestamp",M[M.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",M[M.Date=20]="Date",M[M.Function=21]="Function",M[M.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",M[M.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",M[M.IntegerMaximum=24]="IntegerMaximum",M[M.IntegerMinimum=25]="IntegerMinimum",M[M.IntegerMultipleOf=26]="IntegerMultipleOf",M[M.Integer=27]="Integer",M[M.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",M[M.Intersect=29]="Intersect",M[M.Iterator=30]="Iterator",M[M.Kind=31]="Kind",M[M.Literal=32]="Literal",M[M.Never=33]="Never",M[M.Not=34]="Not",M[M.Null=35]="Null",M[M.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",M[M.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",M[M.NumberMaximum=38]="NumberMaximum",M[M.NumberMinimum=39]="NumberMinimum",M[M.NumberMultipleOf=40]="NumberMultipleOf",M[M.Number=41]="Number",M[M.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",M[M.ObjectMaxProperties=43]="ObjectMaxProperties",M[M.ObjectMinProperties=44]="ObjectMinProperties",M[M.ObjectRequiredProperty=45]="ObjectRequiredProperty",M[M.Object=46]="Object",M[M.Promise=47]="Promise",M[M.StringFormatUnknown=48]="StringFormatUnknown",M[M.StringFormat=49]="StringFormat",M[M.StringMaxLength=50]="StringMaxLength",M[M.StringMinLength=51]="StringMinLength",M[M.StringPattern=52]="StringPattern",M[M.String=53]="String",M[M.Symbol=54]="Symbol",M[M.TupleLength=55]="TupleLength",M[M.Tuple=56]="Tuple",M[M.Uint8ArrayMaxByteLength=57]="Uint8ArrayMaxByteLength",M[M.Uint8ArrayMinByteLength=58]="Uint8ArrayMinByteLength",M[M.Uint8Array=59]="Uint8Array",M[M.Undefined=60]="Undefined",M[M.Union=61]="Union",M[M.Void=62]="Void"})(O||(z.ValueErrorType=O={}));class _ extends p.TypeBoxError{constructor(M){super("Unknown type");this.schema=M}}z.ValueErrorsUnknownTypeError=_,z.EscapeKey=V;class x{constructor(M){this.iterator=M}[Symbol.iterator](){return this.iterator}First(){const M=this.iterator.next();return M.done?void 0:M.value}}z.ValueErrorIterator=x,z.Errors=F}),FK=y0((z)=>{var V=z&&z.__createBinding||(Object.create?function(J,Z,D,U){if(U===void 0)U=D;var j=Object.getOwnPropertyDescriptor(Z,D);if(!j||("get"in j?!Z.__esModule:j.writable||j.configurable))j={enumerable:!0,get:function(){return Z[D]}};Object.defineProperty(J,U,j)}:function(J,Z,D,U){if(U===void 0)U=D;J[U]=Z[D]}),K=z&&z.__exportStar||function(J,Z){for(var D in J)if(D!=="default"&&!Object.prototype.hasOwnProperty.call(Z,D))V(Z,J,D)};Object.defineProperty(z,"__esModule",{value:!0}),K(Kz(),z)}),IK=y0((z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.ValuePointer=z.ValuePointerRootDeleteError=z.ValuePointerRootSetError=void 0;class V extends Error{constructor(Z,D,U){super("Cannot set root value");this.value=Z,this.path=D,this.update=U}}z.ValuePointerRootSetError=V;class K extends Error{constructor(Z,D){super("Cannot delete root value");this.value=Z,this.path=D}}z.ValuePointerRootDeleteError=K;var J;(function(Z){function D(A){return A.indexOf("~")===-1?A:A.replace(/~1/g,"/").replace(/~0/g,"~")}function*U(A){if(A==="")return;let[b,w]=[0,0];for(let v=0;v<A.length;v++)if(A.charAt(v)==="/")if(v===0)b=v+1;else w=v,yield D(A.slice(b,w)),b=v+1;else w=v;yield D(A.slice(b))}Z.Format=U;function j(A,b,w){if(b==="")throw new V(A,b,w);let[v,W,f]=[null,A,""];for(let L of U(b)){if(W[L]===void 0)W[L]={};v=W,W=W[L],f=L}v[f]=w}Z.Set=j;function B(A,b){if(b==="")throw new K(A,b);let[w,v,W]=[null,A,""];for(let f of U(b)){if(v[f]===void 0||v[f]===null)return;w=v,v=v[f],W=f}if(Array.isArray(w)){const f=parseInt(W);w.splice(f,1)}else delete w[W]}Z.Delete=B;function H(A,b){if(b==="")return!0;let[w,v,W]=[null,A,""];for(let f of U(b)){if(v[f]===void 0)return!1;w=v,v=v[f],W=f}return Object.getOwnPropertyNames(w).includes(W)}Z.Has=H;function G(A,b){if(b==="")return A;let w=A;for(let v of U(b)){if(w[v]===void 0)return;w=w[v]}return w}Z.Get=G})(J||(z.ValuePointer=J={}))}),A7=y0((z)=>{var V=function(B){return[...Object.getOwnPropertyNames(B),...Object.getOwnPropertySymbols(B)].reduce((H,G)=>({...H,[G]:U(B[G])}),{})},K=function(B){return B.map((H)=>U(H))},J=function(B){return B.slice()},Z=function(B){return new Date(B.toISOString())},D=function(B){return B},U=function(B){if((0,j.IsArray)(B))return K(B);if((0,j.IsDate)(B))return Z(B);if((0,j.IsPlainObject)(B))return V(B);if((0,j.IsTypedArray)(B))return J(B);if((0,j.IsValueType)(B))return D(B);throw new Error("ValueClone: Unable to clone value")};Object.defineProperty(z,"__esModule",{value:!0}),z.Clone=void 0;var j=t6();z.Clone=U}),uU=y0((z)=>{var V=function(n,s){return{type:"update",path:n,value:s}},K=function(n,s){return{type:"insert",path:n,value:s}},J=function(n){return{type:"delete",path:n}};function*Z(n,s,o){if(!(0,w.IsPlainObject)(o))return yield V(n,o);const t=[...Object.keys(s),...Object.getOwnPropertySymbols(s)],K0=[...Object.keys(o),...Object.getOwnPropertySymbols(o)];for(let H0 of t){if((0,w.IsSymbol)(H0))throw new L(H0);if((0,w.IsUndefined)(o[H0])&&K0.includes(H0))yield V(`${n}/${String(H0)}`,void 0)}for(let H0 of K0){if((0,w.IsUndefined)(s[H0])||(0,w.IsUndefined)(o[H0]))continue;if((0,w.IsSymbol)(H0))throw new L(H0);yield*B(`${n}/${String(H0)}`,s[H0],o[H0])}for(let H0 of K0){if((0,w.IsSymbol)(H0))throw new L(H0);if((0,w.IsUndefined)(s[H0]))yield K(`${n}/${String(H0)}`,o[H0])}for(let H0 of t.reverse()){if((0,w.IsSymbol)(H0))throw new L(H0);if((0,w.IsUndefined)(o[H0])&&!K0.includes(H0))yield J(`${n}/${String(H0)}`)}}function*D(n,s,o){if(!(0,w.IsArray)(o))return yield V(n,o);for(let t=0;t<Math.min(s.length,o.length);t++)yield*B(`${n}/${t}`,s[t],o[t]);for(let t=0;t<o.length;t++){if(t<s.length)continue;yield K(`${n}/${t}`,o[t])}for(let t=s.length-1;t>=0;t--){if(t<o.length)continue;yield J(`${n}/${t}`)}}function*U(n,s,o){if(!(0,w.IsTypedArray)(o)||s.length!==o.length||Object.getPrototypeOf(s).constructor.name!==Object.getPrototypeOf(o).constructor.name)return yield V(n,o);for(let t=0;t<Math.min(s.length,o.length);t++)yield*B(`${n}/${t}`,s[t],o[t])}function*j(n,s,o){if(s===o)return;yield V(n,o)}function*B(n,s,o){if((0,w.IsPlainObject)(s))return yield*Z(n,s,o);if((0,w.IsArray)(s))return yield*D(n,s,o);if((0,w.IsTypedArray)(s))return yield*U(n,s,o);if((0,w.IsValueType)(s))return yield*j(n,s,o);throw new i(s)}var H=function(n,s){return[...B("",n,s)]},G=function(n){return n.length>0&&n[0].path===""&&n[0].type==="update"},A=function(n){return n.length===0},b=function(n,s){if(G(s))return(0,f.Clone)(s[0].value);if(A(s))return(0,f.Clone)(n);const o=(0,f.Clone)(n);for(let t of s)switch(t.type){case"insert":{W.ValuePointer.Set(o,t.path,t.value);break}case"update":{W.ValuePointer.Set(o,t.path,t.value);break}case"delete":{W.ValuePointer.Delete(o,t.path);break}}return o};Object.defineProperty(z,"__esModule",{value:!0}),z.Patch=z.Diff=z.ValueDeltaUnableToDiffUnknownValue=z.ValueDeltaObjectWithSymbolKeyError=z.Edit=z.Delete=z.Update=z.Insert=void 0;var w=t6(),v=U8(),W=IK(),f=A7();z.Insert=v.Type.Object({type:v.Type.Literal("insert"),path:v.Type.String(),value:v.Type.Unknown()}),z.Update=v.Type.Object({type:v.Type.Literal("update"),path:v.Type.String(),value:v.Type.Unknown()}),z.Delete=v.Type.Object({type:v.Type.Literal("delete"),path:v.Type.String()}),z.Edit=v.Type.Union([z.Insert,z.Update,z.Delete]);class L extends Error{constructor(n){super("Cannot diff objects with symbol keys");this.key=n}}z.ValueDeltaObjectWithSymbolKeyError=L;class i extends Error{constructor(n){super("Unable to create diff edits for unknown value");this.value=n}}z.ValueDeltaUnableToDiffUnknownValue=i,z.Diff=H,z.Patch=b}),Kp=y0((z)=>{var V=function(v,W,f,L){if(!(0,H.IsPlainObject)(f))G.ValuePointer.Set(v,W,(0,A.Clone)(L));else{const i=Object.keys(f),n=Object.keys(L);for(let s of i)if(!n.includes(s))delete f[s];for(let s of n)if(!i.includes(s))f[s]=null;for(let s of n)D(v,`${W}/${s}`,f[s],L[s])}},K=function(v,W,f,L){if(!(0,H.IsArray)(f))G.ValuePointer.Set(v,W,(0,A.Clone)(L));else{for(let i=0;i<L.length;i++)D(v,`${W}/${i}`,f[i],L[i]);f.splice(L.length)}},J=function(v,W,f,L){if((0,H.IsTypedArray)(f)&&f.length===L.length)for(let i=0;i<f.length;i++)f[i]=L[i];else G.ValuePointer.Set(v,W,(0,A.Clone)(L))},Z=function(v,W,f,L){if(f===L)return;G.ValuePointer.Set(v,W,L)},D=function(v,W,f,L){if((0,H.IsArray)(L))return K(v,W,f,L);if((0,H.IsTypedArray)(L))return J(v,W,f,L);if((0,H.IsPlainObject)(L))return V(v,W,f,L);if((0,H.IsValueType)(L))return Z(v,W,f,L)},U=function(v){return(0,H.IsTypedArray)(v)||(0,H.IsValueType)(v)},j=function(v,W){return(0,H.IsPlainObject)(v)&&(0,H.IsArray)(W)||(0,H.IsArray)(v)&&(0,H.IsPlainObject)(W)},B=function(v,W){if(U(v)||U(W))throw new w;if(j(v,W))throw new b;D(v,"",v,W)};Object.defineProperty(z,"__esModule",{value:!0}),z.Mutate=z.ValueMutateInvalidRootMutationError=z.ValueMutateTypeMismatchError=void 0;var H=t6(),G=IK(),A=A7();class b extends Error{constructor(){super("Cannot assign due type mismatch of assignable values")}}z.ValueMutateTypeMismatchError=b;class w extends Error{constructor(){super("Only object and array types can be mutated at the root level")}}z.ValueMutateInvalidRootMutationError=w,z.Mutate=B}),Jp=y0((z)=>{var V=function(B,H){if(!(0,j.IsPlainObject)(H))return!1;const G=[...Object.keys(B),...Object.getOwnPropertySymbols(B)],A=[...Object.keys(H),...Object.getOwnPropertySymbols(H)];if(G.length!==A.length)return!1;return G.every((b)=>U(B[b],H[b]))},K=function(B,H){return(0,j.IsDate)(H)&&B.getTime()===H.getTime()},J=function(B,H){if(!(0,j.IsArray)(H)||B.length!==H.length)return!1;return B.every((G,A)=>U(G,H[A]))},Z=function(B,H){if(!(0,j.IsTypedArray)(H)||B.length!==H.length||Object.getPrototypeOf(B).constructor.name!==Object.getPrototypeOf(H).constructor.name)return!1;return B.every((G,A)=>U(G,H[A]))},D=function(B,H){return B===H},U=function(B,H){if((0,j.IsPlainObject)(B))return V(B,H);if((0,j.IsDate)(B))return K(B,H);if((0,j.IsTypedArray)(B))return Z(B,H);if((0,j.IsArray)(B))return J(B,H);if((0,j.IsValueType)(B))return D(B,H);throw new Error("ValueEquals: Unable to compare value")};Object.defineProperty(z,"__esModule",{value:!0}),z.Equal=void 0;var j=t6();z.Equal=U}),Jz=y0((z)=>{var V=z&&z.__createBinding||(Object.create?function(Z,D,U,j){if(j===void 0)j=U;var B=Object.getOwnPropertyDescriptor(D,U);if(!B||("get"in B?!D.__esModule:B.writable||B.configurable))B={enumerable:!0,get:function(){return D[U]}};Object.defineProperty(Z,j,B)}:function(Z,D,U,j){if(j===void 0)j=U;Z[j]=D[U]}),K=z&&z.__exportStar||function(Z,D){for(var U in Z)if(U!=="default"&&!Object.prototype.hasOwnProperty.call(D,U))V(D,Z,U)};Object.defineProperty(z,"__esModule",{value:!0}),z.ValueErrorType=void 0;var J=Kz();Object.defineProperty(z,"ValueErrorType",{enumerable:!0,get:function(){return J.ValueErrorType}}),K(gU(),z)}),Zz=y0((z)=>{var V=function(O){return O[l.Kind]==="Any"||O[l.Kind]==="Unknown"},K=function(O){return O!==void 0},J=function(O,_,x){return!0},Z=function(O,_,x){if(!(0,F.IsArray)(x))return!1;if(K(O.minItems)&&!(x.length>=O.minItems))return!1;if(K(O.maxItems)&&!(x.length<=O.maxItems))return!1;if(!x.every((C)=>e(O.items,_,C)))return!1;if(O.uniqueItems===!0&&!function(){const C=new Set;for(let P of x){const I=(0,a.Hash)(P);if(C.has(I))return!1;else C.add(I)}return!0}())return!1;if(!(K(O.contains)||(0,F.IsNumber)(O.minContains)||(0,F.IsNumber)(O.maxContains)))return!0;const M=K(O.contains)?O.contains:l.Type.Never(),X=x.reduce((C,P)=>e(M,_,P)?C+1:C,0);if(X===0)return!1;if((0,F.IsNumber)(O.minContains)&&X<O.minContains)return!1;if((0,F.IsNumber)(O.maxContains)&&X>O.maxContains)return!1;return!0},D=function(O,_,x){return(0,F.IsAsyncIterator)(x)},U=function(O,_,x){if(!(0,F.IsBigInt)(x))return!1;if(K(O.exclusiveMaximum)&&!(x<O.exclusiveMaximum))return!1;if(K(O.exclusiveMinimum)&&!(x>O.exclusiveMinimum))return!1;if(K(O.maximum)&&!(x<=O.maximum))return!1;if(K(O.minimum)&&!(x>=O.minimum))return!1;if(K(O.multipleOf)&&x%O.multipleOf!==BigInt(0))return!1;return!0},j=function(O,_,x){return(0,F.IsBoolean)(x)},B=function(O,_,x){return e(O.returns,_,x.prototype)},H=function(O,_,x){if(!(0,F.IsDate)(x))return!1;if(K(O.exclusiveMaximumTimestamp)&&!(x.getTime()<O.exclusiveMaximumTimestamp))return!1;if(K(O.exclusiveMinimumTimestamp)&&!(x.getTime()>O.exclusiveMinimumTimestamp))return!1;if(K(O.maximumTimestamp)&&!(x.getTime()<=O.maximumTimestamp))return!1;if(K(O.minimumTimestamp)&&!(x.getTime()>=O.minimumTimestamp))return!1;if(K(O.multipleOfTimestamp)&&x.getTime()%O.multipleOfTimestamp!==0)return!1;return!0},G=function(O,_,x){return(0,F.IsFunction)(x)},A=function(O,_,x){if(!(0,F.IsInteger)(x))return!1;if(K(O.exclusiveMaximum)&&!(x<O.exclusiveMaximum))return!1;if(K(O.exclusiveMinimum)&&!(x>O.exclusiveMinimum))return!1;if(K(O.maximum)&&!(x<=O.maximum))return!1;if(K(O.minimum)&&!(x>=O.minimum))return!1;if(K(O.multipleOf)&&x%O.multipleOf!==0)return!1;return!0},b=function(O,_,x){const M=O.allOf.every((X)=>e(X,_,x));if(O.unevaluatedProperties===!1){const X=new RegExp(l.KeyResolver.ResolvePattern(O)),C=Object.getOwnPropertyNames(x).every((P)=>X.test(P));return M&&C}else if(l.TypeGuard.TSchema(O.unevaluatedProperties)){const X=new RegExp(l.KeyResolver.ResolvePattern(O)),C=Object.getOwnPropertyNames(x).every((P)=>X.test(P)||e(O.unevaluatedProperties,_,x[P]));return M&&C}else return M},w=function(O,_,x){return(0,F.IsIterator)(x)},v=function(O,_,x){return x===O.const},W=function(O,_,x){return!1},f=function(O,_,x){return!e(O.not,_,x)},L=function(O,_,x){return(0,F.IsNull)(x)},i=function(O,_,x){if(!h.TypeSystemPolicy.IsNumberLike(x))return!1;if(K(O.exclusiveMaximum)&&!(x<O.exclusiveMaximum))return!1;if(K(O.exclusiveMinimum)&&!(x>O.exclusiveMinimum))return!1;if(K(O.minimum)&&!(x>=O.minimum))return!1;if(K(O.maximum)&&!(x<=O.maximum))return!1;if(K(O.multipleOf)&&x%O.multipleOf!==0)return!1;return!0},n=function(O,_,x){if(!h.TypeSystemPolicy.IsObjectLike(x))return!1;if(K(O.minProperties)&&!(Object.getOwnPropertyNames(x).length>=O.minProperties))return!1;if(K(O.maxProperties)&&!(Object.getOwnPropertyNames(x).length<=O.maxProperties))return!1;const M=Object.getOwnPropertyNames(O.properties);for(let X of M){const C=O.properties[X];if(O.required&&O.required.includes(X)){if(!e(C,_,x[X]))return!1;if((l.ExtendsUndefined.Check(C)||V(C))&&!(X in x))return!1}else if(h.TypeSystemPolicy.IsExactOptionalProperty(x,X)&&!e(C,_,x[X]))return!1}if(O.additionalProperties===!1){const X=Object.getOwnPropertyNames(x);if(O.required&&O.required.length===M.length&&X.length===M.length)return!0;else return X.every((C)=>M.includes(C))}else if(typeof O.additionalProperties==="object")return Object.getOwnPropertyNames(x).every((X)=>M.includes(X)||e(O.additionalProperties,_,x[X]));else return!0},s=function(O,_,x){return(0,F.IsPromise)(x)},o=function(O,_,x){if(!h.TypeSystemPolicy.IsRecordLike(x))return!1;if(K(O.minProperties)&&!(Object.getOwnPropertyNames(x).length>=O.minProperties))return!1;if(K(O.maxProperties)&&!(Object.getOwnPropertyNames(x).length<=O.maxProperties))return!1;const[M,X]=Object.entries(O.patternProperties)[0],C=new RegExp(M),P=Object.entries(x).every(([g,Z0])=>{return C.test(g)?e(X,_,Z0):!0}),I=typeof O.additionalProperties==="object"?Object.entries(x).every(([g,Z0])=>{return!C.test(g)?e(O.additionalProperties,_,Z0):!0}):!0,d=O.additionalProperties===!1?Object.getOwnPropertyNames(x).every((g)=>{return C.test(g)}):!0;return P&&I&&d},t=function(O,_,x){return e((0,u.Deref)(O,_),_,x)},K0=function(O,_,x){if(!(0,F.IsString)(x))return!1;if(K(O.minLength)){if(!(x.length>=O.minLength))return!1}if(K(O.maxLength)){if(!(x.length<=O.maxLength))return!1}if(K(O.pattern)){if(!new RegExp(O.pattern).test(x))return!1}if(K(O.format)){if(!l.FormatRegistry.Has(O.format))return!1;return l.FormatRegistry.Get(O.format)(x)}return!0},H0=function(O,_,x){return(0,F.IsSymbol)(x)},T0=function(O,_,x){return(0,F.IsString)(x)&&new RegExp(O.pattern).test(x)},T=function(O,_,x){return e((0,u.Deref)(O,_),_,x)},k=function(O,_,x){if(!(0,F.IsArray)(x))return!1;if(O.items===void 0&&x.length!==0)return!1;if(x.length!==O.maxItems)return!1;if(!O.items)return!0;for(let M=0;M<O.items.length;M++)if(!e(O.items[M],_,x[M]))return!1;return!0},Y=function(O,_,x){return(0,F.IsUndefined)(x)},V0=function(O,_,x){return O.anyOf.some((M)=>e(M,_,x))},R=function(O,_,x){if(!(0,F.IsUint8Array)(x))return!1;if(K(O.maxByteLength)&&!(x.length<=O.maxByteLength))return!1;if(K(O.minByteLength)&&!(x.length>=O.minByteLength))return!1;return!0},y=function(O,_,x){return!0},$=function(O,_,x){return h.TypeSystemPolicy.IsVoidLike(x)},z0=function(O,_,x){if(!l.TypeRegistry.Has(O[l.Kind]))return!1;return l.TypeRegistry.Get(O[l.Kind])(O,x)},e=function(O,_,x){const M=K(O.$id)?[..._,O]:_,X=O;switch(X[l.Kind]){case"Any":return J(X,M,x);case"Array":return Z(X,M,x);case"AsyncIterator":return D(X,M,x);case"BigInt":return U(X,M,x);case"Boolean":return j(X,M,x);case"Constructor":return B(X,M,x);case"Date":return H(X,M,x);case"Function":return G(X,M,x);case"Integer":return A(X,M,x);case"Intersect":return b(X,M,x);case"Iterator":return w(X,M,x);case"Literal":return v(X,M,x);case"Never":return W(X,M,x);case"Not":return f(X,M,x);case"Null":return L(X,M,x);case"Number":return i(X,M,x);case"Object":return n(X,M,x);case"Promise":return s(X,M,x);case"Record":return o(X,M,x);case"Ref":return t(X,M,x);case"String":return K0(X,M,x);case"Symbol":return H0(X,M,x);case"TemplateLiteral":return T0(X,M,x);case"This":return T(X,M,x);case"Tuple":return k(X,M,x);case"Undefined":return Y(X,M,x);case"Union":return V0(X,M,x);case"Uint8Array":return R(X,M,x);case"Unknown":return y(X,M,x);case"Void":return $(X,M,x);default:if(!l.TypeRegistry.Has(X[l.Kind]))throw new p(X);return z0(X,M,x)}},G0=function(...O){return O.length===3?e(O[0],O[1],O[2]):e(O[0],[],O[1])};Object.defineProperty(z,"__esModule",{value:!0}),z.Check=z.ValueCheckUnknownTypeError=void 0;var F=t6(),h=Jz(),u=y4(),a=Vz(),l=U8();class p extends l.TypeBoxError{constructor(O){super("Unknown type");this.schema=O}}z.ValueCheckUnknownTypeError=p,z.Check=G0}),dU=y0((z)=>{var V=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return{}},K=function(X,C){if(X.uniqueItems===!0&&!(0,e.HasPropertyKey)(X,"default"))throw new Error("ValueCreate.Array: Array with the uniqueItems constraint requires a default value");else if(("contains"in X)&&!(0,e.HasPropertyKey)(X,"default"))throw new Error("ValueCreate.Array: Array with the contains constraint requires a default value");else if("default"in X)return X.default;else if(X.minItems!==void 0)return Array.from({length:X.minItems}).map((P)=>{return $(X.items,C)});else return[]},J=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return async function*(){}()},Z=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return BigInt(0)},D=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return!1},U=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else{const P=$(X.returns,C);if(typeof P==="object"&&!Array.isArray(P))return class{constructor(){for(let[I,d]of Object.entries(P)){const g=this;g[I]=d}}};else return class{}}},j=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else if(X.minimumTimestamp!==void 0)return new Date(X.minimumTimestamp);else return new Date(0)},B=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return()=>$(X.returns,C)},H=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else if(X.minimum!==void 0)return X.minimum;else return 0},G=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else{const P=X.allOf.reduce((I,d)=>{const g=$(d,C);return typeof g==="object"?{...I,...g}:g},{});if(!(0,G0.Check)(X,C,P))throw new p(X);return P}},A=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return function*(){}()},b=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return X.const},w=function(X,C){throw new a(X)},v=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else throw new l(X)},W=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return null},f=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else if(X.minimum!==void 0)return X.minimum;else return 0},L=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else{const P=new Set(X.required);return X.default||Object.entries(X.properties).reduce((I,[d,g])=>{return P.has(d)?{...I,[d]:$(g,C)}:{...I}},{})}},i=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return Promise.resolve($(X.item,C))},n=function(X,C){const[P,I]=Object.entries(X.patternProperties)[0];if((0,e.HasPropertyKey)(X,"default"))return X.default;else if(!(P===h.PatternStringExact||P===h.PatternNumberExact))return P.slice(1,P.length-1).split("|").reduce((d,g)=>{return{...d,[g]:$(I,C)}},{});else return{}},s=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return $((0,F.Deref)(X,C),C)},o=function(X,C){if(X.pattern!==void 0)if(!(0,e.HasPropertyKey)(X,"default"))throw new Error("ValueCreate.String: String types with patterns must specify a default value");else return X.default;else if(X.format!==void 0)if(!(0,e.HasPropertyKey)(X,"default"))throw new Error("ValueCreate.String: String types with formats must specify a default value");else return X.default;else if((0,e.HasPropertyKey)(X,"default"))return X.default;else if(X.minLength!==void 0)return Array.from({length:X.minLength}).map(()=>".").join("");else return""},t=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else if("value"in X)return Symbol.for(X.value);else return Symbol()},K0=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;const P=h.TemplateLiteralParser.ParseExact(X.pattern);if(!h.TemplateLiteralFinite.Check(P))throw new O(X);return h.TemplateLiteralGenerator.Generate(P).next().value},H0=function(X,C){if(M++>x)throw new _(X,x);if((0,e.HasPropertyKey)(X,"default"))return X.default;else return $((0,F.Deref)(X,C),C)},T0=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;if(X.items===void 0)return[];else return Array.from({length:X.minItems}).map((P,I)=>$(X.items[I],C))},T=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return},k=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else if(X.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return $(X.anyOf[0],C)},Y=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else if(X.minByteLength!==void 0)return new Uint8Array(X.minByteLength);else return new Uint8Array(0)},V0=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return{}},R=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else return},y=function(X,C){if((0,e.HasPropertyKey)(X,"default"))return X.default;else throw new Error("User defined types must specify a default value")},$=function(X,C){const P=(0,e.IsString)(X.$id)?[...C,X]:C,I=X;switch(I[h.Kind]){case"Any":return V(I,P);case"Array":return K(I,P);case"AsyncIterator":return J(I,P);case"BigInt":return Z(I,P);case"Boolean":return D(I,P);case"Constructor":return U(I,P);case"Date":return j(I,P);case"Function":return B(I,P);case"Integer":return H(I,P);case"Intersect":return G(I,P);case"Iterator":return A(I,P);case"Literal":return b(I,P);case"Never":return w(I,P);case"Not":return v(I,P);case"Null":return W(I,P);case"Number":return f(I,P);case"Object":return L(I,P);case"Promise":return i(I,P);case"Record":return n(I,P);case"Ref":return s(I,P);case"String":return o(I,P);case"Symbol":return t(I,P);case"TemplateLiteral":return K0(I,P);case"This":return H0(I,P);case"Tuple":return T0(I,P);case"Undefined":return T(I,P);case"Union":return k(I,P);case"Uint8Array":return Y(I,P);case"Unknown":return V0(I,P);case"Void":return R(I,P);default:if(!h.TypeRegistry.Has(I[h.Kind]))throw new u(I);return y(I,P)}},z0=function(...X){return M=0,X.length===2?$(X[0],X[1]):$(X[0],[])};Object.defineProperty(z,"__esModule",{value:!0}),z.Create=z.ValueCreateRecursiveInstantiationError=z.ValueCreateTempateLiteralTypeError=z.ValueCreateIntersectTypeError=z.ValueCreateNotTypeError=z.ValueCreateNeverTypeError=z.ValueCreateUnknownTypeError=void 0;var e=t6(),G0=Zz(),F=y4(),h=U8();class u extends h.TypeBoxError{constructor(X){super("Unknown type");this.schema=X}}z.ValueCreateUnknownTypeError=u;class a extends h.TypeBoxError{constructor(X){super("Never types cannot be created");this.schema=X}}z.ValueCreateNeverTypeError=a;class l extends h.TypeBoxError{constructor(X){super("Not types must have a default value");this.schema=X}}z.ValueCreateNotTypeError=l;class p extends h.TypeBoxError{constructor(X){super("Intersect produced invalid value. Consider using a default value.");this.schema=X}}z.ValueCreateIntersectTypeError=p;class O extends h.TypeBoxError{constructor(X){super("Can only create template literal values from patterns that produce finite sequences. Consider using a default value.");this.schema=X}}z.ValueCreateTempateLiteralTypeError=O;class _ extends h.TypeBoxError{constructor(X,C){super("Value cannot be created as recursive type may produce value of infinite size. Consider using a default.");this.schema=X,this.recursiveMaxDepth=C}}z.ValueCreateRecursiveInstantiationError=_;var x=512,M=0;z.Create=z0}),Zp=y0((z)=>{var V=function(T,k,Y){return(0,L.Check)(T,k,Y)?(0,i.Clone)(Y):(0,f.Create)(T,k)},K=function(T,k,Y){return(0,L.Check)(T,k,Y)?Y:(0,f.Create)(T,k)},J=function(T,k,Y){if((0,L.Check)(T,k,Y))return(0,i.Clone)(Y);const V0=(0,W.IsArray)(Y)?(0,i.Clone)(Y):(0,f.Create)(T,k),R=(0,W.IsNumber)(T.minItems)&&V0.length<T.minItems?[...V0,...Array.from({length:T.minItems-V0.length},()=>null)]:V0,y=((0,W.IsNumber)(T.maxItems)&&R.length>T.maxItems?R.slice(0,T.maxItems):R).map((z0)=>w(T.items,k,z0));if(T.uniqueItems!==!0)return y;const $=[...new Set(y)];if(!(0,L.Check)(T,k,$))throw new o(T,$);return $},Z=function(T,k,Y){if((0,L.Check)(T,k,Y))return(0,f.Create)(T,k);const V0=new Set(T.returns.required||[]),R=function(){};for(let[y,$]of Object.entries(T.returns.properties)){if(!V0.has(y)&&Y.prototype[y]===void 0)continue;R.prototype[y]=w($,k,Y.prototype[y])}return R},D=function(T,k,Y){const V0=(0,f.Create)(T,k),R=(0,W.IsPlainObject)(V0)&&(0,W.IsPlainObject)(Y)?{...V0,...Y}:Y;return(0,L.Check)(T,k,R)?R:(0,f.Create)(T,k)},U=function(T,k,Y){throw new t(T)},j=function(T,k,Y){if((0,L.Check)(T,k,Y))return Y;if(Y===null||typeof Y!=="object")return(0,f.Create)(T,k);const V0=new Set(T.required||[]),R={};for(let[y,$]of Object.entries(T.properties)){if(!V0.has(y)&&Y[y]===void 0)continue;R[y]=w($,k,Y[y])}if(typeof T.additionalProperties==="object"){const y=Object.getOwnPropertyNames(T.properties);for(let $ of Object.getOwnPropertyNames(Y)){if(y.includes($))continue;R[$]=w(T.additionalProperties,k,Y[$])}}return R},B=function(T,k,Y){if((0,L.Check)(T,k,Y))return(0,i.Clone)(Y);if(Y===null||typeof Y!=="object"||Array.isArray(Y)||Y instanceof Date)return(0,f.Create)(T,k);const V0=Object.getOwnPropertyNames(T.patternProperties)[0],R=T.patternProperties[V0],y={};for(let[$,z0]of Object.entries(Y))y[$]=w(R,k,z0);return y},H=function(T,k,Y){return w((0,n.Deref)(T,k),k,Y)},G=function(T,k,Y){return w((0,n.Deref)(T,k),k,Y)},A=function(T,k,Y){if((0,L.Check)(T,k,Y))return(0,i.Clone)(Y);if(!(0,W.IsArray)(Y))return(0,f.Create)(T,k);if(T.items===void 0)return[];return T.items.map((V0,R)=>w(V0,k,Y[R]))},b=function(T,k,Y){return(0,L.Check)(T,k,Y)?(0,i.Clone)(Y):T0.Create(T,k,Y)},w=function(T,k,Y){const V0=(0,W.IsString)(T.$id)?[...k,T]:k,R=T;switch(T[s.Kind]){case"Array":return J(R,V0,Y);case"Constructor":return Z(R,V0,Y);case"Intersect":return D(R,V0,Y);case"Never":return U(R,V0,Y);case"Object":return j(R,V0,Y);case"Record":return B(R,V0,Y);case"Ref":return H(R,V0,Y);case"This":return G(R,V0,Y);case"Tuple":return A(R,V0,Y);case"Union":return b(R,V0,Y);case"Date":case"Symbol":case"Uint8Array":return V(T,k,Y);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Function":case"Integer":case"Iterator":case"Literal":case"Not":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Unknown":case"Void":return K(R,V0,Y);default:if(!s.TypeRegistry.Has(R[s.Kind]))throw new H0(R);return K(R,V0,Y)}},v=function(...T){return T.length===3?w(T[0],T[1],T[2]):w(T[0],[],T[1])};Object.defineProperty(z,"__esModule",{value:!0}),z.Cast=z.Default=z.DefaultClone=z.ValueCastUnknownTypeError=z.ValueCastRecursiveTypeError=z.ValueCastNeverTypeError=z.ValueCastArrayUniqueItemsTypeError=void 0;var W=t6(),f=dU(),L=Zz(),i=A7(),n=y4(),s=U8();class o extends s.TypeBoxError{constructor(T,k){super("Array cast produced invalid data due to uniqueItems constraint");this.schema=T,this.value=k}}z.ValueCastArrayUniqueItemsTypeError=o;class t extends s.TypeBoxError{constructor(T){super("Never types cannot be cast");this.schema=T}}z.ValueCastNeverTypeError=t;class K0 extends s.TypeBoxError{constructor(T){super("Cannot cast recursive schemas");this.schema=T}}z.ValueCastRecursiveTypeError=K0;class H0 extends s.TypeBoxError{constructor(T){super("Unknown type");this.schema=T}}z.ValueCastUnknownTypeError=H0;var T0;(function(T){function k(R,y,$){if(R[s.Kind]==="Object"&&typeof $==="object"&&!(0,W.IsNull)($)){const z0=R,e=Object.getOwnPropertyNames($),G0=Object.entries(z0.properties),[F,h]=[1/G0.length,G0.length];return G0.reduce((u,[a,l])=>{const p=l[s.Kind]==="Literal"&&l.const===$[a]?h:0,O=(0,L.Check)(l,y,$[a])?F:0,_=e.includes(a)?F:0;return u+(p+O+_)},0)}else return(0,L.Check)(R,y,$)?1:0}function Y(R,y,$){let[z0,e]=[R.anyOf[0],0];for(let G0 of R.anyOf){const F=k(G0,y,$);if(F>e)z0=G0,e=F}return z0}function V0(R,y,$){if("default"in R)return R.default;else{const z0=Y(R,y,$);return v(z0,y,$)}}T.Create=V0})(T0||(T0={})),z.DefaultClone=V,z.Default=K,z.Cast=v}),Up=y0((z)=>{var V=function(I){return(0,_.IsString)(I)&&!isNaN(I)&&!isNaN(parseFloat(I))},K=function(I){return(0,_.IsBigInt)(I)||(0,_.IsBoolean)(I)||(0,_.IsNumber)(I)},J=function(I){return I===!0||(0,_.IsNumber)(I)&&I===1||(0,_.IsBigInt)(I)&&I===BigInt("1")||(0,_.IsString)(I)&&(I.toLowerCase()==="true"||I==="1")},Z=function(I){return I===!1||(0,_.IsNumber)(I)&&(I===0||Object.is(I,-0))||(0,_.IsBigInt)(I)&&I===BigInt("0")||(0,_.IsString)(I)&&(I.toLowerCase()==="false"||I==="0"||I==="-0")},D=function(I){return(0,_.IsString)(I)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(I)},U=function(I){return(0,_.IsString)(I)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(I)},j=function(I){return(0,_.IsString)(I)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(I)},B=function(I){return(0,_.IsString)(I)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(I)},H=function(I){return(0,_.IsString)(I)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(I)},G=function(I,d){const g=f(I);return g===d?g:I},A=function(I,d){const g=L(I);return g===d?g:I},b=function(I,d){const g=v(I);return g===d?g:I},w=function(I,d){if(typeof I.const==="string")return G(d,I.const);else if(typeof I.const==="number")return A(d,I.const);else if(typeof I.const==="boolean")return b(d,I.const);else return(0,x.Clone)(d)},v=function(I){return J(I)?!0:Z(I)?!1:I},W=function(I){return V(I)?BigInt(parseInt(I)):(0,_.IsNumber)(I)?BigInt(I|0):Z(I)?BigInt(0):J(I)?BigInt(1):I},f=function(I){return K(I)?I.toString():(0,_.IsSymbol)(I)&&I.description!==void 0?I.description.toString():I},L=function(I){return V(I)?parseFloat(I):J(I)?1:Z(I)?0:I},i=function(I){return V(I)?parseInt(I):(0,_.IsNumber)(I)?I|0:J(I)?1:Z(I)?0:I},n=function(I){return(0,_.IsString)(I)&&I.toLowerCase()==="null"?null:I},s=function(I){return(0,_.IsString)(I)&&I==="undefined"?void 0:I},o=function(I){return(0,_.IsDate)(I)?I:(0,_.IsNumber)(I)?new Date(I):J(I)?new Date(1):Z(I)?new Date(0):V(I)?new Date(parseInt(I)):U(I)?new Date(`1970-01-01T${I}.000Z`):D(I)?new Date(`1970-01-01T${I}`):B(I)?new Date(`${I}.000Z`):j(I)?new Date(I):H(I)?new Date(`${I}T00:00:00.000Z`):I},t=function(I){return I},K0=function(I,d,g){if((0,_.IsArray)(g))return g.map((Z0)=>p(I.items,d,Z0));return g},H0=function(I,d,g){return W(g)},T0=function(I,d,g){return v(g)},T=function(I,d,g){return o(g)},k=function(I,d,g){return i(g)},Y=function(I,d,g){return I.allOf.every((Z0)=>C.TypeGuard.TObject(Z0))?p(C.Type.Composite(I.allOf),d,g):p(I.allOf[0],d,g)},V0=function(I,d,g){return w(I,g)},R=function(I,d,g){return n(g)},y=function(I,d,g){return L(g)},$=function(I,d,g){if((0,_.IsObject)(g))return Object.getOwnPropertyNames(I.properties).reduce((Z0,Q0)=>{return g[Q0]!==void 0?{...Z0,[Q0]:p(I.properties[Q0],d,g[Q0])}:{...Z0}},g);return g},z0=function(I,d,g){const Z0=Object.getOwnPropertyNames(I.patternProperties)[0],Q0=I.patternProperties[Z0],A0={};for(let[$0,e0]of Object.entries(g))A0[$0]=p(Q0,d,e0);return A0},e=function(I,d,g){return p((0,X.Deref)(I,d),d,g)},G0=function(I,d,g){return f(g)},F=function(I,d,g){return(0,_.IsString)(g)||(0,_.IsNumber)(g)?Symbol(g):g},h=function(I,d,g){return p((0,X.Deref)(I,d),d,g)},u=function(I,d,g){if((0,_.IsArray)(g)&&!(0,_.IsUndefined)(I.items))return g.map((Z0,Q0)=>{return Q0<I.items.length?p(I.items[Q0],d,Z0):Z0});return g},a=function(I,d,g){return s(g)},l=function(I,d,g){for(let Z0 of I.anyOf){const Q0=p(Z0,d,g);if((0,M.Check)(Z0,d,Q0))return Q0}return g},p=function(I,d,g){const Z0=(0,_.IsString)(I.$id)?[...d,I]:d,Q0=I;switch(I[C.Kind]){case"Array":return K0(Q0,Z0,g);case"BigInt":return H0(Q0,Z0,g);case"Boolean":return T0(Q0,Z0,g);case"Date":return T(Q0,Z0,g);case"Integer":return k(Q0,Z0,g);case"Intersect":return Y(Q0,Z0,g);case"Literal":return V0(Q0,Z0,g);case"Null":return R(Q0,Z0,g);case"Number":return y(Q0,Z0,g);case"Object":return $(Q0,Z0,g);case"Record":return z0(Q0,Z0,g);case"Ref":return e(Q0,Z0,g);case"String":return G0(Q0,Z0,g);case"Symbol":return F(Q0,Z0,g);case"This":return h(Q0,Z0,g);case"Tuple":return u(Q0,Z0,g);case"Undefined":return a(Q0,Z0,g);case"Union":return l(Q0,Z0,g);case"Any":case"AsyncIterator":case"Constructor":case"Function":case"Iterator":case"Never":case"Promise":case"TemplateLiteral":case"Uint8Array":case"Unknown":case"Void":return t(g);default:if(!C.TypeRegistry.Has(Q0[C.Kind]))throw new P(Q0);return t(g)}},O=function(...I){return I.length===3?p(I[0],I[1],I[2]):p(I[0],[],I[1])};Object.defineProperty(z,"__esModule",{value:!0}),z.Convert=z.Default=z.ValueConvertUnknownTypeError=void 0;var _=t6(),x=A7(),M=Zz(),X=y4(),C=U8();class P extends C.TypeBoxError{constructor(I){super("Unknown type");this.schema=I}}z.ValueConvertUnknownTypeError=P,z.Default=t,z.Convert=O}),mU=y0((z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.EncodeTransform=z.DecodeTransform=z.HasTransform=z.TransformEncodeError=z.TransformDecodeError=z.TransformEncodeCheckError=z.TransformDecodeCheckError=z.TransformUnknownTypeError=void 0;var V=t6(),K=y4(),J=U8();class Z extends J.TypeBoxError{constructor(b){super("Unknown type");this.schema=b}}z.TransformUnknownTypeError=Z;class D extends J.TypeBoxError{constructor(b,w,v){super("Unable to decode due to invalid value");this.schema=b,this.value=w,this.error=v}}z.TransformDecodeCheckError=D;class U extends J.TypeBoxError{constructor(b,w,v){super("Unable to encode due to invalid value");this.schema=b,this.value=w,this.error=v}}z.TransformEncodeCheckError=U;class j extends J.TypeBoxError{constructor(b,w,v){super(`${v instanceof Error?v.message:"Unknown error"}`);this.schema=b,this.value=w}}z.TransformDecodeError=j;class B extends J.TypeBoxError{constructor(b,w,v){super(`${v instanceof Error?v.message:"Unknown error"}`);this.schema=b,this.value=w}}z.TransformEncodeError=B;var H;(function(b){function w(R,y){return J.TypeGuard.TTransform(R)||k(R.items,y)}function v(R,y){return J.TypeGuard.TTransform(R)||k(R.items,y)}function W(R,y){return J.TypeGuard.TTransform(R)||k(R.returns,y)||R.parameters.some(($)=>k($,y))}function f(R,y){return J.TypeGuard.TTransform(R)||k(R.returns,y)||R.parameters.some(($)=>k($,y))}function L(R,y){return J.TypeGuard.TTransform(R)||J.TypeGuard.TTransform(R.unevaluatedProperties)||R.allOf.some(($)=>k($,y))}function i(R,y){return J.TypeGuard.TTransform(R)||k(R.items,y)}function n(R,y){return J.TypeGuard.TTransform(R)||k(R.not,y)}function s(R,y){return J.TypeGuard.TTransform(R)||Object.values(R.properties).some(($)=>k($,y))||J.TypeGuard.TSchema(R.additionalProperties)&&k(R.additionalProperties,y)}function o(R,y){return J.TypeGuard.TTransform(R)||k(R.item,y)}function t(R,y){const $=Object.getOwnPropertyNames(R.patternProperties)[0],z0=R.patternProperties[$];return J.TypeGuard.TTransform(R)||k(z0,y)||J.TypeGuard.TSchema(R.additionalProperties)&&J.TypeGuard.TTransform(R.additionalProperties)}function K0(R,y){if(J.TypeGuard.TTransform(R))return!0;return k((0,K.Deref)(R,y),y)}function H0(R,y){if(J.TypeGuard.TTransform(R))return!0;return k((0,K.Deref)(R,y),y)}function T0(R,y){return J.TypeGuard.TTransform(R)||J.TypeGuard.TSchema(R.items)&&R.items.some(($)=>k($,y))}function T(R,y){return J.TypeGuard.TTransform(R)||R.anyOf.some(($)=>k($,y))}function k(R,y){const $=(0,V.IsString)(R.$id)?[...y,R]:y,z0=R;if(R.$id&&Y.has(R.$id))return!1;if(R.$id)Y.add(R.$id);switch(R[J.Kind]){case"Array":return w(z0,$);case"AsyncIterator":return v(z0,$);case"Constructor":return W(z0,$);case"Function":return f(z0,$);case"Intersect":return L(z0,$);case"Iterator":return i(z0,$);case"Not":return n(z0,$);case"Object":return s(z0,$);case"Promise":return o(z0,$);case"Record":return t(z0,$);case"Ref":return K0(z0,$);case"This":return H0(z0,$);case"Tuple":return T0(z0,$);case"Union":return T(z0,$);case"Any":case"BigInt":case"Boolean":case"Date":case"Integer":case"Literal":case"Never":case"Null":case"Number":case"String":case"Symbol":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return J.TypeGuard.TTransform(R);default:if(!J.TypeRegistry.Has(z0[J.Kind]))throw new Z(z0);return J.TypeGuard.TTransform(R)}}const Y=new Set;function V0(R,y){return Y.clear(),k(R,y)}b.Has=V0})(H||(z.HasTransform=H={}));var G;(function(b){function w(T,k){try{return J.TypeGuard.TTransform(T)?T[J.Transform].Decode(k):k}catch(Y){throw new j(T,k,Y)}}function v(T,k,Y){const V0=Y.map((R)=>K0(T.items,k,R));return w(T,V0)}function W(T,k,Y){if(!(0,V.IsPlainObject)(Y)||(0,V.IsValueType)(Y))return w(T,Y);const V0=J.KeyResolver.ResolveKeys(T,{includePatterns:!1}),R=Object.entries(Y).reduce(($,[z0,e])=>{return!V0.includes(z0)?{...$,[z0]:e}:{...$,[z0]:w(J.IndexedAccessor.Resolve(T,[z0]),e)}},{});if(!J.TypeGuard.TTransform(T.unevaluatedProperties))return w(T,R);const y=Object.entries(R).reduce(($,[z0,e])=>{return V0.includes(z0)?{...$,[z0]:e}:{...$,[z0]:w(T.unevaluatedProperties,e)}},{});return w(T,y)}function f(T,k,Y){const V0=K0(T.not,k,Y);return w(T,V0)}function L(T,k,Y){if(!(0,V.IsPlainObject)(Y))return w(T,Y);const V0=Object.entries(Y).reduce(($,[z0,e])=>{return!(z0 in T.properties)?{...$,[z0]:e}:{...$,[z0]:K0(T.properties[z0],k,e)}},{});if(!J.TypeGuard.TSchema(T.additionalProperties))return w(T,V0);const R=T.additionalProperties,y=Object.entries(V0).reduce(($,[z0,e])=>{return z0 in T.properties?{...$,[z0]:e}:{...$,[z0]:K0(R,k,e)}},{});return w(T,y)}function i(T,k,Y){if(!(0,V.IsPlainObject)(Y))return w(T,Y);const V0=Object.getOwnPropertyNames(T.patternProperties)[0],R=T.patternProperties[V0],y=new RegExp(V0),$=Object.entries(Y).reduce((G0,[F,h])=>{return!y.test(F)?{...G0,[F]:h}:{...G0,[F]:K0(R,k,h)}},{});if(!J.TypeGuard.TSchema(T.additionalProperties))return w(T,$);const z0=T.additionalProperties,e=Object.entries($).reduce((G0,[F,h])=>{return y.test(F)?{...G0,[F]:h}:{...G0,[F]:K0(z0,k,h)}},{});return w(T,e)}function n(T,k,Y){const V0=(0,K.Deref)(T,k),R=K0(V0,k,Y);return w(T,R)}function s(T,k,Y){const V0=(0,K.Deref)(T,k),R=K0(V0,k,Y);return w(T,R)}function o(T,k,Y){const V0=(0,V.IsArray)(T.items)?T.items.map((R,y)=>K0(R,k,Y[y])):[];return w(T,V0)}function t(T,k,Y){const V0=w(T,Y);for(let R of T.anyOf){if(!H0(R,k,V0))continue;return K0(R,k,V0)}return V0}function K0(T,k,Y){const V0=typeof T.$id==="string"?[...k,T]:k,R=T;switch(T[J.Kind]){case"Array":return v(R,V0,Y);case"Intersect":return W(R,V0,Y);case"Not":return f(R,V0,Y);case"Object":return L(R,V0,Y);case"Record":return i(R,V0,Y);case"Ref":return n(R,V0,Y);case"Symbol":return w(R,Y);case"This":return s(R,V0,Y);case"Tuple":return o(R,V0,Y);case"Union":return t(R,V0,Y);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Constructor":case"Date":case"Function":case"Integer":case"Iterator":case"Literal":case"Never":case"Null":case"Number":case"Promise":case"String":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return w(R,Y);default:if(!J.TypeRegistry.Has(R[J.Kind]))throw new Z(R);return w(R,Y)}}let H0=()=>!1;function T0(T,k,Y,V0){return H0=V0,K0(T,k,Y)}b.Decode=T0})(G||(z.DecodeTransform=G={}));var A;(function(b){function w(T,k){try{return J.TypeGuard.TTransform(T)?T[J.Transform].Encode(k):k}catch(Y){throw new B(T,k,Y)}}function v(T,k,Y){return w(T,Y).map((V0)=>K0(T.items,k,V0))}function W(T,k,Y){const V0=w(T,Y);if(!(0,V.IsPlainObject)(Y)||(0,V.IsValueType)(Y))return V0;const R=J.KeyResolver.ResolveKeys(T,{includePatterns:!1}),y=Object.entries(V0).reduce(($,[z0,e])=>{return!R.includes(z0)?{...$,[z0]:e}:{...$,[z0]:w(J.IndexedAccessor.Resolve(T,[z0]),e)}},{});if(!J.TypeGuard.TTransform(T.unevaluatedProperties))return w(T,y);return Object.entries(y).reduce(($,[z0,e])=>{return R.includes(z0)?{...$,[z0]:e}:{...$,[z0]:w(T.unevaluatedProperties,e)}},{})}function f(T,k,Y){const V0=w(T,Y);return w(T.not,V0)}function L(T,k,Y){const V0=w(T,Y);if(!(0,V.IsPlainObject)(Y))return V0;const R=Object.entries(V0).reduce(($,[z0,e])=>{return!(z0 in T.properties)?{...$,[z0]:e}:{...$,[z0]:K0(T.properties[z0],k,e)}},{});if(!J.TypeGuard.TSchema(T.additionalProperties))return R;const y=T.additionalProperties;return Object.entries(R).reduce(($,[z0,e])=>{return z0 in T.properties?{...$,[z0]:e}:{...$,[z0]:K0(y,k,e)}},{})}function i(T,k,Y){const V0=w(T,Y);if(!(0,V.IsPlainObject)(Y))return V0;const R=Object.getOwnPropertyNames(T.patternProperties)[0],y=T.patternProperties[R],$=new RegExp(R),z0=Object.entries(V0).reduce((G0,[F,h])=>{return!$.test(F)?{...G0,[F]:h}:{...G0,[F]:K0(y,k,h)}},{});if(!J.TypeGuard.TSchema(T.additionalProperties))return w(T,z0);const e=T.additionalProperties;return Object.entries(z0).reduce((G0,[F,h])=>{return $.test(F)?{...G0,[F]:h}:{...G0,[F]:K0(e,k,h)}},{})}function n(T,k,Y){const V0=(0,K.Deref)(T,k),R=K0(V0,k,Y);return w(T,R)}function s(T,k,Y){const V0=(0,K.Deref)(T,k),R=K0(V0,k,Y);return w(T,R)}function o(T,k,Y){const V0=w(T,Y);return(0,V.IsArray)(T.items)?T.items.map((R,y)=>K0(R,k,V0[y])):[]}function t(T,k,Y){for(let V0 of T.anyOf){if(!H0(V0,k,Y))continue;const R=K0(V0,k,Y);return w(T,R)}for(let V0 of T.anyOf){const R=K0(V0,k,Y);if(!H0(T,k,R))continue;return w(T,R)}return w(T,Y)}function K0(T,k,Y){const V0=typeof T.$id==="string"?[...k,T]:k,R=T;switch(T[J.Kind]){case"Array":return v(R,V0,Y);case"Intersect":return W(R,V0,Y);case"Not":return f(R,V0,Y);case"Object":return L(R,V0,Y);case"Record":return i(R,V0,Y);case"Ref":return n(R,V0,Y);case"This":return s(R,V0,Y);case"Tuple":return o(R,V0,Y);case"Union":return t(R,V0,Y);case"Any":case"AsyncIterator":case"BigInt":case"Boolean":case"Constructor":case"Date":case"Function":case"Integer":case"Iterator":case"Literal":case"Never":case"Null":case"Number":case"Promise":case"String":case"Symbol":case"TemplateLiteral":case"Undefined":case"Uint8Array":case"Unknown":case"Void":return w(R,Y);default:if(!J.TypeRegistry.Has(R[J.Kind]))throw new Z(R);return w(R,Y)}}let H0=()=>!1;function T0(T,k,Y,V0){return H0=V0,K0(T,k,Y)}b.Encode=T0})(A||(z.EncodeTransform=A={}))}),Dp=y0((z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.Value=void 0;var V=FK(),K=Kp(),J=Vz(),Z=Jp(),D=Zp(),U=A7(),j=Up(),B=dU(),H=Zz(),G=uU(),A=mU(),b;(function(w){function v(...k){return D.Cast.apply(D,k)}w.Cast=v;function W(...k){return B.Create.apply(B,k)}w.Create=W;function f(...k){return H.Check.apply(H,k)}w.Check=f;function L(...k){return j.Convert.apply(j,k)}w.Convert=L;function i(k){return U.Clone(k)}w.Clone=i;function n(...k){const[Y,V0,R]=k.length===3?[k[0],k[1],k[2]]:[k[0],[],k[1]];if(!f(Y,V0,R))throw new A.TransformDecodeCheckError(Y,R,o(Y,V0,R).First());return A.DecodeTransform.Decode(Y,V0,R,H.Check)}w.Decode=n;function s(...k){const[Y,V0,R]=k.length===3?[k[0],k[1],k[2]]:[k[0],[],k[1]],y=A.EncodeTransform.Encode(Y,V0,R,H.Check);if(!f(Y,V0,y))throw new A.TransformEncodeCheckError(Y,R,o(Y,V0,R).First());return y}w.Encode=s;function o(...k){return V.Errors.apply(V,k)}w.Errors=o;function t(k,Y){return Z.Equal(k,Y)}w.Equal=t;function K0(k,Y){return G.Diff(k,Y)}w.Diff=K0;function H0(k){return J.Hash(k)}w.Hash=H0;function T0(k,Y){return G.Patch(k,Y)}w.Patch=T0;function T(k,Y){K.Mutate(k,Y)}w.Mutate=T})(b||(z.Value=b={}))}),XK=y0((z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.Value=z.ValuePointer=z.Delete=z.Update=z.Insert=z.Edit=z.ValueErrorIterator=z.ValueErrorType=void 0;var V=FK();Object.defineProperty(z,"ValueErrorType",{enumerable:!0,get:function(){return V.ValueErrorType}}),Object.defineProperty(z,"ValueErrorIterator",{enumerable:!0,get:function(){return V.ValueErrorIterator}});var K=uU();Object.defineProperty(z,"Edit",{enumerable:!0,get:function(){return K.Edit}}),Object.defineProperty(z,"Insert",{enumerable:!0,get:function(){return K.Insert}}),Object.defineProperty(z,"Update",{enumerable:!0,get:function(){return K.Update}}),Object.defineProperty(z,"Delete",{enumerable:!0,get:function(){return K.Delete}});var J=IK();Object.defineProperty(z,"ValuePointer",{enumerable:!0,get:function(){return J.ValuePointer}});var Z=Dp();Object.defineProperty(z,"Value",{enumerable:!0,get:function(){return Z.Value}})}),Hp=y0((z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.TypeCompiler=z.Policy=z.TypeCompilerTypeGuardError=z.TypeCompilerUnknownTypeError=z.TypeCheck=void 0;var V=mU(),K=t6(),J=Kz(),Z=Jz(),D=y4(),U=Vz(),j=U8();class B{constructor(L,i,n,s){this.schema=L,this.references=i,this.checkFunc=n,this.code=s,this.hasTransform=V.HasTransform.Has(L,i)}Code(){return this.code}Errors(L){return(0,J.Errors)(this.schema,this.references,L)}Check(L){return this.checkFunc(L)}Decode(L){if(!this.checkFunc(L))throw new V.TransformDecodeCheckError(this.schema,L,this.Errors(L).First());return this.hasTransform?V.DecodeTransform.Decode(this.schema,this.references,L,(i,n,s)=>this.Check(s)):L}Encode(L){const i=this.hasTransform?V.EncodeTransform.Encode(this.schema,this.references,L,(n,s,o)=>this.Check(o)):L;if(!this.checkFunc(i))throw new V.TransformEncodeCheckError(this.schema,L,this.Errors(L).First());return i}}z.TypeCheck=B;var H;(function(L){function i(t){return t===36}L.DollarSign=i;function n(t){return t===95}L.IsUnderscore=n;function s(t){return t>=65&&t<=90||t>=97&&t<=122}L.IsAlpha=s;function o(t){return t>=48&&t<=57}L.IsNumeric=o})(H||(H={}));var G;(function(L){function i(t){if(t.length===0)return!1;return H.IsNumeric(t.charCodeAt(0))}function n(t){if(i(t))return!1;for(let K0=0;K0<t.length;K0++){const H0=t.charCodeAt(K0);if(!(H.IsAlpha(H0)||H.IsNumeric(H0)||H.DollarSign(H0)||H.IsUnderscore(H0)))return!1}return!0}function s(t){return t.replace(/'/g,"\\'")}function o(t,K0){return n(K0)?`${t}.${K0}`:`${t}['${s(K0)}']`}L.Encode=o})(G||(G={}));var A;(function(L){function i(n){const s=[];for(let o=0;o<n.length;o++){const t=n.charCodeAt(o);if(H.IsNumeric(t)||H.IsAlpha(t))s.push(n.charAt(o));else s.push(`_${t}_`)}return s.join("").replace(/__/g,"_")}L.Encode=i})(A||(A={}));var b;(function(L){function i(n){return n.replace(/'/g,"\\'")}L.Escape=i})(b||(b={}));class w extends j.TypeBoxError{constructor(L){super("Unknown type");this.schema=L}}z.TypeCompilerUnknownTypeError=w;class v extends j.TypeBoxError{constructor(L){super("Preflight validation check failed to guard for the given schema");this.schema=L}}z.TypeCompilerTypeGuardError=v;var W;(function(L){function i(K0,H0,T0){return Z.TypeSystemPolicy.ExactOptionalPropertyTypes?`('${H0}' in ${K0} ? ${T0} : true)`:`(${G.Encode(K0,H0)} !== undefined ? ${T0} : true)`}L.IsExactOptionalProperty=i;function n(K0){return!Z.TypeSystemPolicy.AllowArrayObject?`(typeof ${K0} === 'object' && ${K0} !== null && !Array.isArray(${K0}))`:`(typeof ${K0} === 'object' && ${K0} !== null)`}L.IsObjectLike=n;function s(K0){return!Z.TypeSystemPolicy.AllowArrayObject?`(typeof ${K0} === 'object' && ${K0} !== null && !Array.isArray(${K0}) && !(${K0} instanceof Date) && !(${K0} instanceof Uint8Array))`:`(typeof ${K0} === 'object' && ${K0} !== null && !(${K0} instanceof Date) && !(${K0} instanceof Uint8Array))`}L.IsRecordLike=s;function o(K0){return!Z.TypeSystemPolicy.AllowNaN?`(typeof ${K0} === 'number' && Number.isFinite(${K0}))`:`typeof ${K0} === 'number'`}L.IsNumberLike=o;function t(K0){return Z.TypeSystemPolicy.AllowNullVoid?`(${K0} === undefined || ${K0} === null)`:`${K0} === undefined`}L.IsVoidLike=t})(W||(z.Policy=W={}));var f;(function(L){function i(S){return S[j.Kind]==="Any"||S[j.Kind]==="Unknown"}function*n(S,B0,c){yield"true"}function*s(S,B0,c){yield`Array.isArray(${c})`;const[q0,j0]=[e0("value","any"),e0("acc","number")];if((0,K.IsNumber)(S.maxItems))yield`${c}.length <= ${S.maxItems}`;if((0,K.IsNumber)(S.minItems))yield`${c}.length >= ${S.minItems}`;const M0=Z0(S.items,B0,"value");if(yield`${c}.every((${q0}) => ${M0})`,j.TypeGuard.TSchema(S.contains)||(0,K.IsNumber)(S.minContains)||(0,K.IsNumber)(S.maxContains)){const b0=j.TypeGuard.TSchema(S.contains)?S.contains:j.Type.Never(),D6=Z0(b0,B0,"value"),b6=(0,K.IsNumber)(S.minContains)?[`(count >= ${S.minContains})`]:[],T6=(0,K.IsNumber)(S.maxContains)?[`(count <= ${S.maxContains})`]:[],g6=`const count = value.reduce((${j0}, ${q0}) => ${D6} ? acc + 1 : acc, 0)`,e8=["(count > 0)",...b6,...T6].join(" && ");yield`((${q0}) => { ${g6}; return ${e8}})(${c})`}if(S.uniqueItems===!0)yield`((${q0}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${c})`}function*o(S,B0,c){yield`(typeof value === 'object' && Symbol.asyncIterator in ${c})`}function*t(S,B0,c){if(yield`(typeof ${c} === 'bigint')`,(0,K.IsBigInt)(S.exclusiveMaximum))yield`${c} < BigInt(${S.exclusiveMaximum})`;if((0,K.IsBigInt)(S.exclusiveMinimum))yield`${c} > BigInt(${S.exclusiveMinimum})`;if((0,K.IsBigInt)(S.maximum))yield`${c} <= BigInt(${S.maximum})`;if((0,K.IsBigInt)(S.minimum))yield`${c} >= BigInt(${S.minimum})`;if((0,K.IsBigInt)(S.multipleOf))yield`(${c} % BigInt(${S.multipleOf})) === 0`}function*K0(S,B0,c){yield`(typeof ${c} === 'boolean')`}function*H0(S,B0,c){yield*d(S.returns,B0,`${c}.prototype`)}function*T0(S,B0,c){if(yield`(${c} instanceof Date) && Number.isFinite(${c}.getTime())`,(0,K.IsNumber)(S.exclusiveMaximumTimestamp))yield`${c}.getTime() < ${S.exclusiveMaximumTimestamp}`;if((0,K.IsNumber)(S.exclusiveMinimumTimestamp))yield`${c}.getTime() > ${S.exclusiveMinimumTimestamp}`;if((0,K.IsNumber)(S.maximumTimestamp))yield`${c}.getTime() <= ${S.maximumTimestamp}`;if((0,K.IsNumber)(S.minimumTimestamp))yield`${c}.getTime() >= ${S.minimumTimestamp}`;if((0,K.IsNumber)(S.multipleOfTimestamp))yield`(${c}.getTime() % ${S.multipleOfTimestamp}) === 0`}function*T(S,B0,c){yield`(typeof ${c} === 'function')`}function*k(S,B0,c){if(yield`(typeof ${c} === 'number' && Number.isInteger(${c}))`,(0,K.IsNumber)(S.exclusiveMaximum))yield`${c} < ${S.exclusiveMaximum}`;if((0,K.IsNumber)(S.exclusiveMinimum))yield`${c} > ${S.exclusiveMinimum}`;if((0,K.IsNumber)(S.maximum))yield`${c} <= ${S.maximum}`;if((0,K.IsNumber)(S.minimum))yield`${c} >= ${S.minimum}`;if((0,K.IsNumber)(S.multipleOf))yield`(${c} % ${S.multipleOf}) === 0`}function*Y(S,B0,c){const q0=S.allOf.map((j0)=>Z0(j0,B0,c)).join(" && ");if(S.unevaluatedProperties===!1){const j0=A0(`${new RegExp(j.KeyResolver.ResolvePattern(S))};`),M0=`Object.getOwnPropertyNames(${c}).every(key => ${j0}.test(key))`;yield`(${q0} && ${M0})`}else if(j.TypeGuard.TSchema(S.unevaluatedProperties)){const j0=A0(`${new RegExp(j.KeyResolver.ResolvePattern(S))};`),M0=`Object.getOwnPropertyNames(${c}).every(key => ${j0}.test(key) || ${Z0(S.unevaluatedProperties,B0,`${c}[key]`)})`;yield`(${q0} && ${M0})`}else yield`(${q0})`}function*V0(S,B0,c){yield`(typeof value === 'object' && Symbol.iterator in ${c})`}function*R(S,B0,c){if(typeof S.const==="number"||typeof S.const==="boolean")yield`(${c} === ${S.const})`;else yield`(${c} === '${b.Escape(S.const)}')`}function*y(S,B0,c){yield"false"}function*$(S,B0,c){yield`(!${Z0(S.not,B0,c)})`}function*z0(S,B0,c){yield`(${c} === null)`}function*e(S,B0,c){if(yield W.IsNumberLike(c),(0,K.IsNumber)(S.exclusiveMaximum))yield`${c} < ${S.exclusiveMaximum}`;if((0,K.IsNumber)(S.exclusiveMinimum))yield`${c} > ${S.exclusiveMinimum}`;if((0,K.IsNumber)(S.maximum))yield`${c} <= ${S.maximum}`;if((0,K.IsNumber)(S.minimum))yield`${c} >= ${S.minimum}`;if((0,K.IsNumber)(S.multipleOf))yield`(${c} % ${S.multipleOf}) === 0`}function*G0(S,B0,c){if(yield W.IsObjectLike(c),(0,K.IsNumber)(S.minProperties))yield`Object.getOwnPropertyNames(${c}).length >= ${S.minProperties}`;if((0,K.IsNumber)(S.maxProperties))yield`Object.getOwnPropertyNames(${c}).length <= ${S.maxProperties}`;const q0=Object.getOwnPropertyNames(S.properties);for(let j0 of q0){const M0=G.Encode(c,j0),b0=S.properties[j0];if(S.required&&S.required.includes(j0)){if(yield*d(b0,B0,M0),j.ExtendsUndefined.Check(b0)||i(b0))yield`('${j0}' in ${c})`}else{const D6=Z0(b0,B0,M0);yield W.IsExactOptionalProperty(c,j0,D6)}}if(S.additionalProperties===!1)if(S.required&&S.required.length===q0.length)yield`Object.getOwnPropertyNames(${c}).length === ${q0.length}`;else{const j0=`[${q0.map((M0)=>`'${M0}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${c}).every(key => ${j0}.includes(key))`}if(typeof S.additionalProperties==="object"){const j0=Z0(S.additionalProperties,B0,`${c}[key]`),M0=`[${q0.map((b0)=>`'${b0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${c}).every(key => ${M0}.includes(key) || ${j0}))`}}function*F(S,B0,c){yield`(typeof value === 'object' && typeof ${c}.then === 'function')`}function*h(S,B0,c){if(yield W.IsRecordLike(c),(0,K.IsNumber)(S.minProperties))yield`Object.getOwnPropertyNames(${c}).length >= ${S.minProperties}`;if((0,K.IsNumber)(S.maxProperties))yield`Object.getOwnPropertyNames(${c}).length <= ${S.maxProperties}`;const[q0,j0]=Object.entries(S.patternProperties)[0],M0=A0(`${new RegExp(q0)}`),b0=Z0(j0,B0,"value"),D6=j.TypeGuard.TSchema(S.additionalProperties)?Z0(S.additionalProperties,B0,c):S.additionalProperties===!1?"false":"true",b6=`(${M0}.test(key) ? ${b0} : ${D6})`;yield`(Object.entries(${c}).every(([key, value]) => ${b6}))`}function*u(S,B0,c){const q0=(0,D.Deref)(S,B0);if(g.functions.has(S.$ref))return yield`${Q0(S.$ref)}(${c})`;yield*d(q0,B0,c)}function*a(S,B0,c){if(yield`(typeof ${c} === 'string')`,(0,K.IsNumber)(S.maxLength))yield`${c}.length <= ${S.maxLength}`;if((0,K.IsNumber)(S.minLength))yield`${c}.length >= ${S.minLength}`;if(S.pattern!==void 0)yield`${A0(`${new RegExp(S.pattern)};`)}.test(${c})`;if(S.format!==void 0)yield`format('${S.format}', ${c})`}function*l(S,B0,c){yield`(typeof ${c} === 'symbol')`}function*p(S,B0,c){yield`(typeof ${c} === 'string')`,yield`${A0(`${new RegExp(S.pattern)};`)}.test(${c})`}function*O(S,B0,c){yield`${Q0(S.$ref)}(${c})`}function*_(S,B0,c){if(yield`Array.isArray(${c})`,S.items===void 0)return yield`${c}.length === 0`;yield`(${c}.length === ${S.maxItems})`;for(let q0=0;q0<S.items.length;q0++)yield`${Z0(S.items[q0],B0,`${c}[${q0}]`)}`}function*x(S,B0,c){yield`${c} === undefined`}function*M(S,B0,c){yield`(${S.anyOf.map((q0)=>Z0(q0,B0,c)).join(" || ")})`}function*X(S,B0,c){if(yield`${c} instanceof Uint8Array`,(0,K.IsNumber)(S.maxByteLength))yield`(${c}.length <= ${S.maxByteLength})`;if((0,K.IsNumber)(S.minByteLength))yield`(${c}.length >= ${S.minByteLength})`}function*C(S,B0,c){yield"true"}function*P(S,B0,c){yield W.IsVoidLike(c)}function*I(S,B0,c){const q0=g.instances.size;g.instances.set(q0,S),yield`kind('${S[j.Kind]}', ${q0}, ${c})`}function*d(S,B0,c,q0=!0){const j0=(0,K.IsString)(S.$id)?[...B0,S]:B0,M0=S;if(q0&&(0,K.IsString)(S.$id)){const b0=Q0(S.$id);if(g.functions.has(b0))return yield`${b0}(${c})`;else{const D6=$0(b0,S,B0,"value",!1);return g.functions.set(b0,D6),yield`${b0}(${c})`}}switch(M0[j.Kind]){case"Any":return yield*n(M0,j0,c);case"Array":return yield*s(M0,j0,c);case"AsyncIterator":return yield*o(M0,j0,c);case"BigInt":return yield*t(M0,j0,c);case"Boolean":return yield*K0(M0,j0,c);case"Constructor":return yield*H0(M0,j0,c);case"Date":return yield*T0(M0,j0,c);case"Function":return yield*T(M0,j0,c);case"Integer":return yield*k(M0,j0,c);case"Intersect":return yield*Y(M0,j0,c);case"Iterator":return yield*V0(M0,j0,c);case"Literal":return yield*R(M0,j0,c);case"Never":return yield*y(M0,j0,c);case"Not":return yield*$(M0,j0,c);case"Null":return yield*z0(M0,j0,c);case"Number":return yield*e(M0,j0,c);case"Object":return yield*G0(M0,j0,c);case"Promise":return yield*F(M0,j0,c);case"Record":return yield*h(M0,j0,c);case"Ref":return yield*u(M0,j0,c);case"String":return yield*a(M0,j0,c);case"Symbol":return yield*l(M0,j0,c);case"TemplateLiteral":return yield*p(M0,j0,c);case"This":return yield*O(M0,j0,c);case"Tuple":return yield*_(M0,j0,c);case"Undefined":return yield*x(M0,j0,c);case"Union":return yield*M(M0,j0,c);case"Uint8Array":return yield*X(M0,j0,c);case"Unknown":return yield*C(M0,j0,c);case"Void":return yield*P(M0,j0,c);default:if(!j.TypeRegistry.Has(M0[j.Kind]))throw new w(S);return yield*I(M0,j0,c)}}const g={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Z0(S,B0,c,q0=!0){return`(${[...d(S,B0,c,q0)].join(" && ")})`}function Q0(S){return`check_${A.Encode(S)}`}function A0(S){const B0=`local_${g.variables.size}`;return g.variables.set(B0,`const ${B0} = ${S}`),B0}function $0(S,B0,c,q0,j0=!0){const[M0,b0]=["\n",(g6)=>"".padStart(g6," ")],D6=e0("value","any"),b6=k4("boolean"),T6=[...d(B0,c,q0,j0)].map((g6)=>`${b0(4)}${g6}`).join(` &&${M0}`);return`function ${S}(${D6})${b6} {${M0}${b0(2)}return (${M0}${T6}${M0}${b0(2)})\n}`}function e0(S,B0){const c=g.language==="typescript"?`: ${B0}`:"";return`${S}${c}`}function k4(S){return g.language==="typescript"?`: ${S}`:""}function v0(S,B0,c){const q0=$0("check",S,B0,"value"),j0=e0("value","any"),M0=k4("boolean"),b0=[...g.functions.values()],D6=[...g.variables.values()],b6=(0,K.IsString)(S.$id)?`return function check(${j0})${M0} {\n  return ${Q0(S.$id)}(value)\n}`:`return ${q0}`;return[...D6,...b0,b6].join("\n")}function s8(...S){const B0={language:"javascript"},[c,q0,j0]=S.length===2&&(0,K.IsArray)(S[1])?[S[0],S[1],B0]:S.length===2&&!(0,K.IsArray)(S[1])?[S[0],[],S[1]]:S.length===3?[S[0],S[1],S[2]]:S.length===1?[S[0],[],B0]:[null,[],B0];if(g.language=j0.language,g.variables.clear(),g.functions.clear(),g.instances.clear(),!j.TypeGuard.TSchema(c))throw new v(c);for(let M0 of q0)if(!j.TypeGuard.TSchema(M0))throw new v(M0);return v0(c,q0,j0)}L.Code=s8;function Y4(S,B0=[]){const c=s8(S,B0,{language:"javascript"}),q0=globalThis.Function("kind","format","hash",c),j0=new Map(g.instances);function M0(T6,g6,e8){if(!j.TypeRegistry.Has(T6)||!j0.has(g6))return!1;const F5=j.TypeRegistry.Get(T6),I5=j0.get(g6);return F5(I5,e8)}function b0(T6,g6){if(!j.FormatRegistry.Has(T6))return!1;return j.FormatRegistry.Get(T6)(g6)}function D6(T6){return(0,U.Hash)(T6)}const b6=q0(M0,b0,D6);return new B(S,B0,b6,c)}L.Compile=Y4})(f||(z.TypeCompiler=f={}))}),cU=y0((z)=>{var V=z&&z.__createBinding||(Object.create?function(Z,D,U,j){if(j===void 0)j=U;var B=Object.getOwnPropertyDescriptor(D,U);if(!B||("get"in B?!D.__esModule:B.writable||B.configurable))B={enumerable:!0,get:function(){return D[U]}};Object.defineProperty(Z,j,B)}:function(Z,D,U,j){if(j===void 0)j=U;Z[j]=D[U]}),K=z&&z.__exportStar||function(Z,D){for(var U in Z)if(U!=="default"&&!Object.prototype.hasOwnProperty.call(D,U))V(D,Z,U)};Object.defineProperty(z,"__esModule",{value:!0}),z.ValueErrorIterator=z.ValueErrorType=void 0;var J=FK();Object.defineProperty(z,"ValueErrorType",{enumerable:!0,get:function(){return J.ValueErrorType}}),Object.defineProperty(z,"ValueErrorIterator",{enumerable:!0,get:function(){return J.ValueErrorIterator}}),K(Hp(),z)}),Qp=y0((z,V)=>{var K=function(B){var H=B.indexOf("%");if(H===-1)return B;var G=B.length,A="",b=0,w=0,v=H,W=Z;while(H>-1&&H<G){var f=J(B[H+1],4),L=J(B[H+2],0),i=f|L,n=U[i];if(W=U[256+W+n],w=w<<6|i&U[364+n],W===Z)A+=B.slice(b,v),A+=w<=65535?String.fromCharCode(w):String.fromCharCode(55232+(w>>10),56320+(w&1023)),w=0,b=H+3,H=v=B.indexOf("%",b);else if(W===D)return null;else{if(H+=3,H<G&&B.charCodeAt(H)===37)continue;return null}}return A+B.slice(b)},J=function(B,H){var G=j[B];return G===void 0?255:G<<H},Z=12,D=0,U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7],j={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};V.exports=K}),jp=y0((z,V)=>{var K=function(U){const j=new D;if(typeof U!=="string")return j;let B=U.length,H="",G="",A=-1,b=-1,w=!1,v=!1,W=!1,f=!1,L=!1,i=0;for(let n=0;n<B+1;n++)if(i=n!==B?U.charCodeAt(n):38,i===38){if(L=b>A,!L)b=n;if(H=U.slice(A+1,b),L||H.length>0){if(W)H=H.replace(Z," ");if(w)H=J(H)||H;if(L){if(G=U.slice(b+1,n),f)G=G.replace(Z," ");if(v)G=J(G)||G}const s=j[H];if(s===void 0)j[H]=G;else if(s.pop)s.push(G);else j[H]=[s,G]}G="",A=n,b=n,w=!1,v=!1,W=!1,f=!1}else if(i===61)if(b<=A)b=n;else v=!0;else if(i===43)if(b>A)f=!0;else W=!0;else if(i===37)if(b>A)v=!0;else w=!0;return j},J=Qp(),Z=/\+/g,D=function(){};D.prototype=Object.create(null),V.exports=K}),Bp=y0((z,V)=>{var K=function(D){const U=D.length;if(U===0)return"";let j="",B=0,H=0;z:for(;H<U;H++){let G=D.charCodeAt(H);while(G<128){if(Z[G]!==1){if(B<H)j+=D.slice(B,H);B=H+1,j+=J[G]}if(++H===U)break z;G=D.charCodeAt(H)}if(B<H)j+=D.slice(B,H);if(G<2048){B=H+1,j+=J[192|G>>6]+J[128|G&63];continue}if(G<55296||G>=57344){B=H+1,j+=J[224|G>>12]+J[128|G>>6&63]+J[128|G&63];continue}if(++H,H>=U)throw new Error("URI malformed");const A=D.charCodeAt(H)&1023;B=H+1,G=65536+((G&1023)<<10|A),j+=J[240|G>>18]+J[128|G>>12&63]+J[128|G>>6&63]+J[128|G&63]}if(B===0)return D;if(B<U)return j+D.slice(B);return j},J=Array.from({length:256},(D,U)=>"%"+((U<16?"0":"")+U.toString(16)).toUpperCase()),Z=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);V.exports={encodeString:K}}),Mp=y0((z,V)=>{var K=function(D){const U=typeof D;if(U==="string")return Z(D);else if(U==="bigint")return D.toString();else if(U==="boolean")return D?"true":"false";else if(U==="number"&&Number.isFinite(D))return D<1000000000000000000000?""+D:Z(""+D);return""},J=function(D){let U="";if(D===null||typeof D!=="object")return U;const j="&",B=Object.keys(D),H=B.length;let G=0;for(let A=0;A<H;A++){const b=B[A],w=D[b],v=Z(b)+"=";if(A)U+=j;if(Array.isArray(w)){G=w.length;for(let W=0;W<G;W++){if(W)U+=j;U+=v,U+=K(w[W])}}else U+=v,U+=K(w)}return U},{encodeString:Z}=Bp();V.exports=J}),pU=y0((z,V)=>{var K=jp(),J=Mp(),Z={parse:K,stringify:J};V.exports=Z,V.exports.default=Z,V.exports.parse=K,V.exports.stringify=J}),L5=(z,V)=>({part:z,store:null,inert:V!==void 0?new Map(V.map((K)=>[K.part.charCodeAt(0),K])):null,params:null,wildcardStore:null}),TU=(z,V)=>({...z,part:V}),AU=(z)=>({paramName:z,store:null,inert:null});class T5{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g};add(z,V,K){let J;if(typeof V!="string")throw TypeError("Route path must be a string");V===""?V="/":V[0]!=="/"&&(V=`/${V}`),this.history.push([z,V,K]);let Z=V[V.length-1]==="*";Z&&(V=V.slice(0,-1));let D=V.split(T5.regex.static),U=V.match(T5.regex.params)||[];D[D.length-1]===""&&D.pop(),J=this.root[z]?this.root[z]:this.root[z]=L5("/");let j=0;for(let B=0;B<D.length;++B){let H=D[B];if(B>0){let G=U[j++].slice(1);if(J.params===null)J.params=AU(G);else if(J.params.paramName!==G)throw Error(`Cannot create route "${V}" with parameter "${G}" because a route already exists with a different parameter name ("${J.params.paramName}") in the same location`);let A=J.params;if(A.inert===null){J=A.inert=L5(H);continue}J=A.inert}for(let G=0;;){if(G===H.length){if(G<J.part.length){let A=TU(J,J.part.slice(G));Object.assign(J,L5(H,[A]))}break}if(G===J.part.length){if(J.inert===null)J.inert=new Map;else if(J.inert.has(H.charCodeAt(G))){J=J.inert.get(H.charCodeAt(G)),H=H.slice(G),G=0;continue}let A=L5(H.slice(G));J.inert.set(H.charCodeAt(G),A),J=A;break}if(H[G]!==J.part[G]){let A=TU(J,J.part.slice(G)),b=L5(H.slice(G));Object.assign(J,L5(J.part.slice(0,G),[A,b])),J=b;break}++G}}if(j<U.length){let B=U[j],H=B.slice(1);if(J.params===null)J.params=AU(H);else if(J.params.paramName!==H)throw Error(`Cannot create route "${V}" with parameter "${H}" because a route already exists with a different parameter name ("${J.params.paramName}") in the same location`);return J.params.store===null&&(J.params.store=K),J.params.store}return Z?(J.wildcardStore===null&&(J.wildcardStore=K),J.wildcardStore):(J.store===null&&(J.store=K),J.store)}find(z,V){let K=this.root[z];return K?GK(V,V.length,K,0):null}}var GK=(z,V,K,J)=>{let Z=K?.part,D=J+Z.length;if(Z.length>1){if(D>V)return null;if(Z.length<15){for(let U=1,j=J+1;U<Z.length;++U,++j)if(Z.charCodeAt(U)!==z.charCodeAt(j))return null}else if(z.substring(J,D)!==Z)return null}if(D===V)return K.store!==null?{store:K.store,params:{}}:K.wildcardStore!==null?{store:K.wildcardStore,params:{"*":""}}:null;if(K.inert!==null){let U=K.inert.get(z.charCodeAt(D));if(U!==void 0){let j=GK(z,V,U,D);if(j!==null)return j}}if(K.params!==null){let U=K.params,j=z.indexOf("/",D);if(j!==D){if(j===-1||j>=V){if(U.store!==null){let B={};return B[U.paramName]=z.substring(D,V),{store:U.store,params:B}}}else if(U.inert!==null){let B=GK(z,V,U.inert,j);if(B!==null)return B.params[U.paramName]=z.substring(D,j),B}}}return K.wildcardStore!==null?{store:K.wildcardStore,params:{"*":z.substring(D,V)}}:null},Gp=Z8(Vp(),1),Op=Gp.default,o3=()=>{let z;return[new Promise((V)=>{z=V}),z]},z4=()=>{const[z,V]=o3(),[K,J]=o3(),Z=[],D=[];return{signal:z,consume:(U)=>{switch(U.type){case"begin":if(U.unit&&Z.length===0)for(let j=0;j<U.unit;j++){const[B,H]=o3(),[G,A]=o3();Z.push(B),D.push([(b)=>{H({children:[],end:G,name:b.name??"",skip:!1,time:b.time})},(b)=>{A(b)}])}V({children:Z,end:K,name:U.name??"",skip:!1,time:U.time});break;case"end":J(U.time);break}},consumeChild(U){switch(U.type){case"begin":if(!D[0])return;const[j]=D[0];j({children:[],end:K,name:U.name??"",skip:!1,time:U.time});break;case"end":const B=D.shift();if(!B)return;B[1](U.time)}},resolve(){V({children:[],end:new Promise((U)=>U(0)),name:"",skip:!0,time:0});for(let[U,j]of D)U({children:[],end:new Promise((B)=>B(0)),name:"",skip:!0,time:0}),j(0);J(0)}}},Fp=(z,V,K)=>{return async function J(J){if(J.event!=="request"||J.type!=="begin")return;const Z=J.id,D=z(),U=z4(),j=z4(),B=z4(),H=z4(),G=z4(),A=z4(),b=z4(),w=z4();U.consume(J);const v=(W)=>{if(W.id===Z)switch(W.event){case"request":U.consume(W);break;case"request.unit":U.consumeChild(W);break;case"parse":j.consume(W);break;case"parse.unit":j.consumeChild(W);break;case"transform":B.consume(W);break;case"transform.unit":B.consumeChild(W);break;case"beforeHandle":H.consume(W);break;case"beforeHandle.unit":H.consumeChild(W);break;case"handle":G.consume(W);break;case"afterHandle":A.consume(W);break;case"afterHandle.unit":A.consumeChild(W);break;case"error":b.consume(W);break;case"error.unit":b.consumeChild(W);break;case"response":if(W.type==="begin")U.resolve(),j.resolve(),B.resolve(),H.resolve(),G.resolve(),A.resolve(),b.resolve();else D.off("event",v);w.consume(W);break;case"response.unit":w.consumeChild(W);break;case"exit":U.resolve(),j.resolve(),B.resolve(),H.resolve(),G.resolve(),A.resolve(),b.resolve();break}};D.on("event",v),await K({id:Z,context:J.ctx,set:J.ctx?.set,store:J.ctx?.store,time:J.time,request:U.signal,parse:j.signal,transform:B.signal,beforeHandle:H.signal,handle:G.signal,afterHandle:A.signal,error:b.signal,response:w.signal}),D.emit(`res${Z}.${V}`,void 0)}},Ip={};$U(Ip,{isProduction:()=>{return P7},ValidationError:()=>{return L6},ParseError:()=>{return lU},NotFoundError:()=>{return E7},InvalidCookieSignature:()=>{return r3},InternalServerError:()=>{return LK},ERROR_CODE:()=>{return q7}});var EU=Z8(XK(),1),vU=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,q7=Symbol("ErrorCode"),P7=(vU?.NODE_ENV??vU?.ENV)==="production";class LK extends Error{code="INTERNAL_SERVER_ERROR";status=500;constructor(z){super(z??"INTERNAL_SERVER_ERROR")}}class E7 extends Error{code="NOT_FOUND";status=404;constructor(z){super(z??"NOT_FOUND")}}class lU extends Error{code="PARSE";status=400;constructor(z){super(z??"PARSE")}}class r3 extends Error{$;code="INVALID_COOKIE_SIGNATURE";status=400;constructor(z,V){super(V??`"${z}" has invalid cookie signature`);this.key=z}}class L6 extends Error{$;Y;W;code="VALIDATION";status=400;constructor(z,V,K){const J=P7?void 0:("Errors"in V)?V.Errors(K).First():EU.Value.Errors(V,K).First(),Z=J?.schema.error?typeof J.schema.error==="function"?J.schema.error(z,V,K):J.schema.error:void 0,D=P7?Z??`Invalid ${z??J?.schema.error??J?.message}`:Z??`Invalid ${z}, '${J?.path?.slice(1)||"type"}': ${J?.message}`+"\n\nExpected: "+JSON.stringify(L6.simplifyModel(V),null,2)+"\n\nFound: "+JSON.stringify(K,null,2);super(D);this.type=z,this.validator=V,this.value=K,Object.setPrototypeOf(this,L6.prototype)}get all(){return[...this.validator.Errors(this.value)]}static simplifyModel(z){const V="schema"in z?z.schema:z;try{return EU.Value.Create(V)}catch{return V}}get model(){return L6.simplifyModel(this.validator)}toResponse(z){return new Response(this.message,{status:400,headers:z})}}var CU={open(z){z.data.open?.(z)},message(z,V){z.data.message?.(z,V)},drain(z){z.data.drain?.(z)},close(z,V,K){z.data.close?.(z,V,K)}};class X7{$;Y;id;validator;constructor(z,V){this.raw=z,this.data=V,this.validator=z.data.validator,this.id=Date.now()}get publish(){return(z,V=void 0,K)=>{if(this.validator?.Check(V)===!1)throw new L6("message",this.validator,V);if(typeof V==="object")V=JSON.stringify(V);return this.raw.publish(z,V,K),this}}get send(){return(z)=>{if(this.validator?.Check(z)===!1)throw new L6("message",this.validator,z);if(Buffer.isBuffer(z))return this.raw.send(z),this;if(typeof z==="object")z=JSON.stringify(z);return this.raw.send(z),this}}get subscribe(){return(z)=>{return this.raw.subscribe(z),this}}get unsubscribe(){return(z)=>{return this.raw.unsubscribe(z),this}}get cork(){return(z)=>{return this.raw.cork(z),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}}var Xp=function(z,V){if(typeof z!=="string")throw new TypeError("argument str must be a string");var K={},J=V||{},Z=J.decode||wp,D=0;while(D<z.length){var U=z.indexOf("=",D);if(U===-1)break;var j=z.indexOf(";",D);if(j===-1)j=z.length;else if(j<U){D=z.lastIndexOf(";",U-1)+1;continue}var B=z.slice(D,U).trim();if(K[B]===void 0){var H=z.slice(U+1,j).trim();if(H.charCodeAt(0)===34)H=H.slice(1,-1);K[B]=Pp(H,Z)}D=j+1}return K},Lp=function(z,V,K){var J=K||{},Z=J.encode||Np;if(typeof Z!=="function")throw new TypeError("option encode is invalid");if(!t3.test(z))throw new TypeError("argument name is invalid");var D=Z(V);if(D&&!t3.test(D))throw new TypeError("argument val is invalid");var U=z+"="+D;if(J.maxAge!=null){var j=J.maxAge-0;if(isNaN(j)||!isFinite(j))throw new TypeError("option maxAge is invalid");U+="; Max-Age="+Math.floor(j)}if(J.domain){if(!t3.test(J.domain))throw new TypeError("option domain is invalid");U+="; Domain="+J.domain}if(J.path){if(!t3.test(J.path))throw new TypeError("option path is invalid");U+="; Path="+J.path}if(J.expires){var B=J.expires;if(!qp(B)||isNaN(B.valueOf()))throw new TypeError("option expires is invalid");U+="; Expires="+B.toUTCString()}if(J.httpOnly)U+="; HttpOnly";if(J.secure)U+="; Secure";if(J.priority){var H=typeof J.priority==="string"?J.priority.toLowerCase():J.priority;switch(H){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(J.sameSite){var G=typeof J.sameSite==="string"?J.sameSite.toLowerCase():J.sameSite;switch(G){case!0:U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"strict":U+="; SameSite=Strict";break;case"none":U+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return U},wp=function(z){return z.indexOf("%")!==-1?decodeURIComponent(z):z},Np=function(z){return encodeURIComponent(z)},qp=function(z){return Tp.call(z)==="[object Date]"||z instanceof Date},Pp=function(z,V){try{return V(z)}catch(K){return z}};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hU=Xp,WU=Lp,Tp=Object.prototype.toString,t3=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,UK=Z8(U8(),1),s3=Z8(XK(),1),nU=Z8(cU(),1),DK=(z)=>z&&typeof z==="object"&&!Array.isArray(z),RU=(z)=>z.slice(0,z.indexOf("/",11)),Ap=(z)=>typeof z==="function"&&/^\s*class\s+/.test(z.toString())||z.toString().startsWith("[object ")||J4(Object.getPrototypeOf(z)),S4=(z,V,{skipKeys:K}={})=>{if(DK(z)&&DK(V))for(let[J,Z]of Object.entries(V)){if(K?.includes(J))continue;if(!DK(Z)){z[J]=Z;continue}if(!(J in z)){z[J]=Z;continue}if(Ap(Z)){z[J]=Z;continue}z[J]=S4(z[J],Z)}return z},Ep=(z,V)=>S4(z,V,{skipKeys:["properties"]}),A6=(z,V)=>{const K=[...Array.isArray(z)?z:[z]],J=[];for(let Z of K)if(Z.$elysiaChecksum)J.push(Z.$elysiaChecksum);for(let Z of Array.isArray(V)?V:[V])if(!J.includes(Z?.$elysiaChecksum))K.push(Z);return K},w5=(z,V)=>{return{body:V?.body??z?.body,headers:V?.headers??z?.headers,params:V?.params??z?.params,query:V?.query??z?.query,response:V?.response??z?.response,type:z?.type||V?.type,detail:S4(V?.detail??{},z?.detail??{}),parse:A6(z?.parse??[],V?.parse??[]),transform:A6(z?.transform??[],V?.transform??[]),beforeHandle:A6(z?.beforeHandle??[],V?.beforeHandle??[]),afterHandle:A6(z?.afterHandle??[],V?.afterHandle??[]),onResponse:A6(z?.onResponse??[],V?.onResponse??[]),trace:A6(z?.trace??[],V?.trace??[]),error:A6(z?.error??[],V?.error??[])}},V4=(z,{models:V={},additionalProperties:K=!1,dynamic:J=!1})=>{if(!z)return;if(typeof z==="string"&&!(z in V))return;const Z=typeof z==="string"?V[z]:z;if(Z.type==="object"&&("additionalProperties"in Z)===!1)Z.additionalProperties=K;if(J)return{schema:Z,references:"",checkFunc:()=>{},code:"",Check:(D)=>s3.Value.Check(Z,D),Errors:(D)=>s3.Value.Errors(Z,D),Code:()=>""};return nU.TypeCompiler.Compile(Z,Object.values(V))},vp=(z,{models:V={},additionalProperties:K=!1,dynamic:J=!1})=>{if(!z)return;if(typeof z==="string"&&!(z in V))return;const Z=typeof z==="string"?V[z]:z,D=(j,B)=>{if(J)return{schema:j,references:"",checkFunc:()=>{},code:"",Check:(H)=>s3.Value.Check(j,H),Errors:(H)=>s3.Value.Errors(j,H),Code:()=>""};return nU.TypeCompiler.Compile(j,B)};if(UK.Kind in Z){if(("additionalProperties"in Z)===!1)Z.additionalProperties=K;return{200:D(Z,Object.values(V))}}const U={};return Object.keys(Z).forEach((j)=>{const B=Z[+j];if(typeof B==="string"){if(B in V){const H=V[B];H.type==="object"&&("additionalProperties"in H),U[+j]=(UK.Kind in H)?D(H,Object.values(V)):H}return}if(B.type==="object"&&("additionalProperties"in B)===!1)B.additionalProperties=K;U[+j]=(UK.Kind in B)?D(B,Object.values(V)):B}),U},kU=(z)=>{let V=9;for(let K=0;K<z.length;)V=Math.imul(V^z.charCodeAt(K++),387420489);return V=V^V>>>9},HK=(z,V,K)=>{const J=(Z)=>{if(K&&!Z.$elysiaChecksum)Z.$elysiaChecksum=K;return Z};return{start:A6(z.start,("start"in V?V.start??[]:[]).map(J)),request:A6(z.request,("request"in V?V.request??[]:[]).map(J)),parse:A6(z.parse,"parse"in V?V?.parse??[]:[]).map(J),transform:A6(z.transform,(V?.transform??[]).map(J)),beforeHandle:A6(z.beforeHandle,(V?.beforeHandle??[]).map(J)),afterHandle:A6(z.afterHandle,(V?.afterHandle??[]).map(J)),onResponse:A6(z.onResponse,(V?.onResponse??[]).map(J)),trace:z.trace,error:A6(z.error,(V?.error??[]).map(J)),stop:A6(z.stop,("stop"in V?V.stop??[]:[]).map(J))}},Cp=(z,V=!0)=>{if(!z)return z;if(typeof z==="function"){if(V)z.$elysiaHookType="global";else z.$elysiaHookType=void 0;return z}return z.map((K)=>{if(V)K.$elysiaHookType="global";else K.$elysiaHookType=void 0;return K})},N5=(z)=>{if(!z)return z;if(typeof z==="function")return z.$elysiaHookType==="global"?z:void 0;return z.filter((V)=>V.$elysiaHookType==="global")},YU=(z)=>{return{...z,type:z?.type,detail:z?.detail,parse:N5(z?.parse),transform:N5(z?.transform),beforeHandle:N5(z?.beforeHandle),afterHandle:N5(z?.afterHandle),onResponse:N5(z?.onResponse),error:N5(z?.error)}},iU={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},e3=async(z,V)=>{if(typeof z!=="string")throw new TypeError("Cookie value must be provided as a string.");if(V===null)throw new TypeError("Secret key must be provided.");const K=new TextEncoder,J=await crypto.subtle.importKey("raw",K.encode(V),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Z=await crypto.subtle.sign("HMAC",J,K.encode(z)),D=Array.from(new Uint8Array(Z)),U=btoa(String.fromCharCode(...D));return`${z}.${U.replace(/=+$/,"")}`},bU=async(z,V)=>{if(typeof z!=="string")throw new TypeError("Signed cookie string must be provided.");if(V===null)throw new TypeError("Secret key must be provided.");const K=z.slice(0,z.lastIndexOf("."));return await e3(K,V)===z?K:!1};class g8{$;Y;name;setter;constructor(z,V={}){this._value=z,this.property=V}get(){return this._value}get value(){return this._value}set value(z){if(typeof z==="object"){if(JSON.stringify(this.value)===JSON.stringify(z))return}else if(this.value===z)return;this._value=z,this.sync()}add(z){const V=Object.assign(this.property,typeof z==="function"?z(Object.assign(this.property,this.value)):z);if("value"in V)this._value=V.value,delete V.value;return this.property=V,this.sync()}set(z){const V=typeof z==="function"?z(Object.assign(this.property,this.value)):z;if("value"in V)this._value=V.value,delete V.value;return this.property=V,this.sync()}remove(z){if(this.value===void 0)return;this.set({domain:z?.domain,expires:new Date(0),maxAge:0,path:z?.path,sameSite:z?.sameSite,secure:z?.secure,value:""})}get domain(){return this.property.domain}set domain(z){if(this.property.domain===z)return;this.property.domain=z,this.sync()}get expires(){return this.property.expires}set expires(z){if(this.property.expires?.getTime()===z?.getTime())return;this.property.expires=z,this.sync()}get httpOnly(){return this.property.httpOnly}set httpOnly(z){if(this.property.domain===z)return;this.property.httpOnly=z,this.sync()}get maxAge(){return this.property.maxAge}set maxAge(z){if(this.property.maxAge===z)return;this.property.maxAge=z,this.sync()}get path(){return this.property.path}set path(z){if(this.property.path===z)return;this.property.path=z,this.sync()}get priority(){return this.property.priority}set priority(z){if(this.property.priority===z)return;this.property.priority=z,this.sync()}get sameSite(){return this.property.sameSite}set sameSite(z){if(this.property.sameSite===z)return;this.property.sameSite=z,this.sync()}get secure(){return this.property.secure}set secure(z){if(this.property.secure===z)return;this.property.secure=z,this.sync()}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}sync(){if(!this.name||!this.setter)return this;if(!this.setter.cookie)this.setter.cookie={[this.name]:Object.assign(this.property,{value:this.toString()})};else this.setter.cookie[this.name]=Object.assign(this.property,{value:this.toString()});return this}}var fU=(z,V,K)=>new Proxy(z,{get(J,Z){if(Z in J)return J[Z];const D=new g8(void 0,K?{...K}:void 0);return D.setter=V,D.name=Z,D},set(J,Z,D){if(!(D instanceof g8))return!1;if(!V.cookie)V.cookie={};return D.setter=V,D.name=Z,D.sync(),J[Z]=D,!0}}),aU=async(z,V,{secret:K,sign:J,...Z}={})=>{if(!V)return fU({},z,Z);const D={},U=typeof K==="string";if(J&&J!==!0&&!Array.isArray(J))J=[J];const j=Object.keys(hU(V));for(let B=0;B<j.length;B++){const H=j[B];let G=hU(V)[H];if(J===!0||J?.includes(H)){if(!K)throw new Error("No secret is provided to cookie plugin");if(U){if(G=await bU(G,K),G===!1)throw new r3(H)}else{let w=!0;for(let v=0;v<K.length;v++){const W=await bU(G,K[v]);if(W!==!1){G=W,w=!1;break}}if(w)throw new r3(H)}}if(G===void 0)continue;const A=G.charCodeAt(0);if(A===123||A===91)try{const w=new g8(JSON.parse(G));w.setter=z,w.name=H,D[H]=w;continue}catch{}if(!Number.isNaN(+G))G=+G;else if(G==="true")G=!0;else if(G==="false")G=!1;const b=new g8(G,Z);b.setter=z,b.name=H,D[H]=b}return fU(D,z)},oU="toJSON"in new Headers,J4=(z)=>{for(let V in z)return!0;return!1},tU=(z,V)=>{if(!z||!Array.isArray(V))return z;z.delete("Set-Cookie");for(let K=0;K<V.length;K++){const J=V[K].indexOf("=");z.append("Set-Cookie",`${V[K].slice(0,J)}=${V[K].slice(J+1)}`)}return z},rU=(z)=>{if(!z||typeof z!=="object"||!J4(z))return;const V=[];for(let[K,J]of Object.entries(z)){if(!K||!J)continue;if(Array.isArray(J.value))for(let Z=0;Z<J.value.length;Z++){let D=J.value[Z];if(D===void 0||D===null)continue;if(typeof D==="object")D=JSON.stringify(D);V.push(WU(K,D,J))}else{let Z=J.value;if(Z===void 0||Z===null)continue;if(typeof Z==="object")Z=JSON.stringify(Z);V.push(WU(K,J.value,J))}}if(V.length===0)return;if(V.length===1)return V[0];return V},A5=(z,V)=>{if(z?.$passthrough)z=z[z.$passthrough];if(J4(V.headers)||V.status!==200||V.redirect||V.cookie){if(typeof V.status==="string")V.status=iU[V.status];if(V.redirect){if(V.headers.Location=V.redirect,!V.status||V.status<300||V.status>=400)V.status=302}if(V.cookie&&J4(V.cookie))V.headers["Set-Cookie"]=rU(V.cookie);if(V.headers["Set-Cookie"]&&Array.isArray(V.headers["Set-Cookie"]))V.headers=tU(new Headers(V.headers),V.headers["Set-Cookie"]);switch(z?.constructor?.name){case"String":case"Blob":return new Response(z,{status:V.status,headers:V.headers});case"Object":case"Array":return Response.json(z,V);case"ReadableStream":if(!V.headers["content-type"]?.startsWith("text/event-stream"))V.headers["content-type"]="text/event-stream; charset=utf-8";return new Response(z,V);case void 0:if(!z)return new Response("",V);return Response.json(z,V);case"Response":const K={...V.headers};if(oU)V.headers=z.headers.toJSON();else for(let[Z,D]of z.headers.entries())if(Z in V.headers)V.headers[Z]=D;for(let Z in K)z.headers.append(Z,K[Z]);return z;case"Error":return T7(z,V);case"Promise":return z.then((Z)=>A5(Z,V));case"Function":return A5(z(),V);case"Number":case"Boolean":return new Response(z.toString(),V);case"Cookie":if(z instanceof g8)return new Response(z.value,V);return new Response(z?.toString(),V);default:const J=JSON.stringify(z);if(J.charCodeAt(0)===123){if(!V.headers["Content-Type"])V.headers["Content-Type"]="application/json";return new Response(JSON.stringify(z),V)}return new Response(J,V)}}else switch(z?.constructor?.name){case"String":case"Blob":return new Response(z);case"Object":case"Array":return new Response(JSON.stringify(z),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response(z,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!z)return new Response("");return new Response(JSON.stringify(z),{headers:{"content-type":"application/json"}});case"Response":return z;case"Error":return T7(z,V);case"Promise":return z.then((J)=>{const Z=E5(J);if(Z!==void 0)return Z;return new Response("")});case"Function":return E5(z());case"Number":case"Boolean":return new Response(z.toString());case"Cookie":if(z instanceof g8)return new Response(z.value,V);return new Response(z?.toString(),V);default:const K=JSON.stringify(z);if(K.charCodeAt(0)===123)return new Response(JSON.stringify(z),{headers:{"Content-Type":"application/json"}});return new Response(K)}},K4=(z,V)=>{if(z===void 0||z===null)return;if(z?.$passthrough)z=z[z.$passthrough];if(J4(V.headers)||V.status!==200||V.redirect||V.cookie){if(typeof V.status==="string")V.status=iU[V.status];if(V.redirect){if(V.headers.Location=V.redirect,!V.status||V.status<300||V.status>=400)V.status=302}if(V.cookie&&J4(V.cookie))V.headers["Set-Cookie"]=rU(V.cookie);if(V.headers["Set-Cookie"]&&Array.isArray(V.headers["Set-Cookie"]))V.headers=tU(new Headers(V.headers),V.headers["Set-Cookie"]);switch(z?.constructor?.name){case"String":case"Blob":return new Response(z,V);case"Object":case"Array":return Response.json(z,V);case"ReadableStream":if(!V.headers["content-type"]?.startsWith("text/event-stream"))V.headers["content-type"]="text/event-stream; charset=utf-8";return new Response(z,V);case void 0:if(!z)return;return Response.json(z,V);case"Response":const K=Object.assign({},V.headers);if(oU)V.headers=z.headers.toJSON();else for(let[Z,D]of z.headers.entries())if(!(Z in V.headers))V.headers[Z]=D;for(let Z in K)z.headers.append(Z,K[Z]);if(z.status!==V.status)V.status=z.status;return z;case"Promise":return z.then((Z)=>{const D=K4(Z,V);if(D!==void 0)return D;return});case"Error":return T7(z,V);case"Function":return K4(z(),V);case"Number":case"Boolean":return new Response(z.toString(),V);case"Cookie":if(z instanceof g8)return new Response(z.value,V);return new Response(z?.toString(),V);default:const J=JSON.stringify(z);if(J.charCodeAt(0)===123){if(!V.headers["Content-Type"])V.headers["Content-Type"]="application/json";return new Response(JSON.stringify(z),V)}return new Response(J,V)}}else switch(z?.constructor?.name){case"String":case"Blob":return new Response(z);case"Object":case"Array":return new Response(JSON.stringify(z),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response(z,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!z)return new Response("");return new Response(JSON.stringify(z),{headers:{"content-type":"application/json"}});case"Response":return z;case"Promise":return z.then((J)=>{const Z=K4(J,V);if(Z!==void 0)return Z;return});case"Error":return T7(z,V);case"Function":return E5(z());case"Number":case"Boolean":return new Response(z.toString());case"Cookie":if(z instanceof g8)return new Response(z.value,V);return new Response(z?.toString(),V);default:const K=JSON.stringify(z);if(K.charCodeAt(0)===123)return new Response(JSON.stringify(z),{headers:{"Content-Type":"application/json"}});return new Response(K)}},E5=(z)=>{if(z?.$passthrough)z=z[z.$passthrough];switch(z?.constructor?.name){case"String":case"Blob":return new Response(z);case"Object":case"Array":return new Response(JSON.stringify(z),{headers:{"content-type":"application/json"}});case"ReadableStream":return new Response(z,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!z)return new Response("");return new Response(JSON.stringify(z),{headers:{"content-type":"application/json"}});case"Response":return z;case"Error":return T7(z);case"Promise":return z.then((K)=>{const J=E5(K);if(J!==void 0)return J;return new Response("")});case"Function":return E5(z());case"Number":case"Boolean":return new Response(z.toString());default:const V=JSON.stringify(z);if(V.charCodeAt(0)===123)return new Response(JSON.stringify(z),{headers:{"Content-Type":"application/json"}});return new Response(V)}},T7=(z,V)=>new Response(JSON.stringify({name:z?.name,message:z?.message,cause:z?.cause}),{status:V?.status!==200?V?.status??500:500,headers:V?.headers}),hp=Z8(pU(),1),Wp=(new Headers()).toJSON,sU=new RegExp(" (\\w+) = context","g"),eU={value:0},zD=({hasTrace:z,hasTraceSet:V=!1,addFn:K,condition:J={}})=>{if(K("\nconst reporter = getReporter()\n"),z)return(Z,{name:D,attribute:U="",unit:j=0}={})=>{const B=Z.indexOf("."),H=B===-1;if(Z!=="request"&&Z!=="response"&&!J[H?Z:Z.slice(0,B)])return()=>{if(V&&Z==="afterHandle")K("reporter.emit('event',{id,event:'exit',type:'begin',time:0})"),K("\nawait traceDone\n")};if(H)D||=Z;else D||="anonymous";K("\n"+`reporter.emit('event', { 
					id,
					event: '${Z}',
					type: 'begin',
					name: '${D}',
					time: performance.now(),
					${H?`unit: ${j},`:""}
					${U}
				})`.replace(/(\t| |\n)/g,"")+"\n");let G=!1;return()=>{if(G)return;if(G=!0,K("\n"+`reporter.emit('event', {
							id,
							event: '${Z}',
							type: 'end',
							time: performance.now()
						})`.replace(/(\t| |\n)/g,"")+"\n"),V&&Z==="afterHandle")K("\nreporter.emit('event',{id,event:'exit',type:'begin',time:0})\n"),K("\nawait traceDone\n")}};else return()=>()=>{}},L7=(z)=>{const V=z.indexOf(")");if(z.charCodeAt(V+2)===61&&z.charCodeAt(V+5)!==123)return!0;return z.includes("return")},Rp=(z,{injectResponse:V=""}={})=>({composeValidation:(K,J=`c.${K}`)=>z?`c.set.status = 400; throw new ValidationError(
'${K}',
${K},
${J}
)`:`c.set.status = 400; return new ValidationError(
	'${K}',
	${K},
	${J}
).toResponse(c.set.headers)`,composeResponseValidation:(K="r")=>{const J=z?`throw new ValidationError(
'response',
response[c.set.status],
${K}
)`:`return new ValidationError(
'response',
response[c.set.status],
${K}
).toResponse(c.set.headers)`;return`\n${V}
		if(response[c.set.status]?.Check(${K}) === false) { 
	if(!(response instanceof Error))
		${J}
}\n`}}),F6=(z,V)=>{if(V=V.trimStart(),V=V.replaceAll(/^async /g,""),/^(\w+)\(/g.test(V))V=V.slice(V.indexOf("("));const K=V.charCodeAt(0)===40||V.startsWith("function")?V.slice(V.indexOf("(")+1,V.indexOf(")")):V.slice(0,V.indexOf("=")-1);if(K==="")return!1;const J=K.charCodeAt(0)===123?K.indexOf("..."):-1;if(K.charCodeAt(0)===123){if(K.includes(z))return!0;if(J===-1)return!1}if(V.match(new RegExp(`${K}(.${z}|\\["${z}"\\])`)))return!0;const Z=J!==-1?K.slice(J+3,K.indexOf(" ",J+3)):void 0;if(V.match(new RegExp(`${Z}(.${z}|\\["${z}"\\])`)))return!0;const D=[K];if(Z)D.push(Z);for(let j of V.matchAll(sU))D.push(j[1]);const U=new RegExp(`{.*?} = (${D.join("|")})`,"g");for(let[j]of V.matchAll(U))if(j.includes(`{ ${z}`)||j.includes(`, ${z}`))return!0;return!1},w7=(z)=>{if(z=z.trimStart(),z=z.replaceAll(/^async /g,""),/^(\w+)\(/g.test(z))z=z.slice(z.indexOf("("));const V=z.charCodeAt(0)===40||z.startsWith("function")?z.slice(z.indexOf("(")+1,z.indexOf(")")):z.slice(0,z.indexOf("=")-1);if(V==="")return!1;const K=V.charCodeAt(0)===123?V.indexOf("..."):-1,J=K!==-1?V.slice(K+3,V.indexOf(" ",K+3)):void 0,Z=[V];if(J)Z.push(J);for(let U of z.matchAll(sU))Z.push(U[1]);for(let U of Z)if(new RegExp(`\\b\\w+\\([^)]*\\b${U}\\b[^)]*\\)`).test(z))return!0;const D=new RegExp(`{.*?} = (${Z.join("|")})`,"g");for(let[U]of z.matchAll(D))if(new RegExp(`\\b\\w+\\([^)]*\\b${U}\\b[^)]*\\)`).test(z))return!0;return!1},q5=Symbol.for("TypeBox.Kind"),zz=(z,V)=>{if(!V)return;if((q5 in V)&&V[q5]===z)return!0;if(V.type==="object"){const K=V.properties;for(let J of Object.keys(K)){const Z=K[J];if(Z.type==="object"){if(zz(z,Z))return!0}else if(Z.anyOf){for(let D=0;D<Z.anyOf.length;D++)if(zz(z,Z.anyOf[D]))return!0}if((q5 in Z)&&Z[q5]===z)return!0}return!1}return V.properties&&(q5 in V.properties)&&V.properties[q5]===z},QK=Symbol.for("TypeBox.Transform"),x4=(z)=>{if(!z)return;if(z.type==="object"&&z.properties){const V=z.properties;for(let K of Object.keys(V)){const J=V[K];if(J.type==="object"){if(x4(J))return!0}else if(J.anyOf){for(let Z=0;Z<J.anyOf.length;Z++)if(x4(J.anyOf[Z]))return!0}if(QK in J)return!0}return!1}return(QK in z)||z.properties&&(QK in z.properties)},kp=(z)=>{if(!z)return;const V=z?.schema;if(V&&("anyOf"in V)){let K=!1;const J=V.anyOf[0].type;for(let Z of V.anyOf)if(Z.type!==J){K=!0;break}if(!K)return J}return z.schema?.type},Yp=/(?:return|=>) \S*\(/g,a0=(z)=>{if(z.constructor.name==="AsyncFunction")return!0;return z.toString().match(Yp)},bp=({path:z,method:V,hooks:K,validator:J,handler:Z,handleError:D,definitions:U,schema:j,onRequest:B,config:H,getReporter:G})=>{const A=H.forceErrorEncapsulation||K.error.length>0||typeof Bun==="undefined"||K.onResponse.length>0||!!K.trace.length,b=K.onResponse.length?`\n;(async () => {${K.onResponse.map((y,$)=>`await res${$}(c)`).join(";")}})();\n`:"",w=K.trace.map((y)=>y.toString());let v=!1;if(w7(Z.toString()))v=!0;if(!v)for(let[y,$]of Object.entries(K)){if(!Array.isArray($)||!$.length||!["parse","transform","beforeHandle","afterHandle","onResponse"].includes(y))continue;for(let z0 of $){if(typeof z0!=="function")continue;if(w7(z0.toString())){v=!0;break}}if(v)break}const W={parse:w.some((y)=>F6("parse",y)),transform:w.some((y)=>F6("transform",y)),handle:w.some((y)=>F6("handle",y)),beforeHandle:w.some((y)=>F6("beforeHandle",y)),afterHandle:w.some((y)=>F6("afterHandle",y)),error:A||w.some((y)=>F6("error",y))},f=K.trace.length>0;let L="";const i=J||V!=="GET"&&V!=="HEAD"?[Z,...K.transform,...K.beforeHandle,...K.afterHandle].map((y)=>y.toString()):[],n=V!=="GET"&&V!=="HEAD"&&(v||K.type!=="none"&&(!!J.body||!!K.type||i.some((y)=>F6("body",y)))),s=v||J.headers||i.some((y)=>F6("headers",y)),o=v||J.cookie||i.some((y)=>F6("cookie",y)),t=J?.cookie?.schema;let K0="";if(t?.sign){if(!t.secrets)throw new Error(`t.Cookie required secret which is not set in (${V}) ${z}.`);const y=!t.secrets?void 0:typeof t.secrets==="string"?t.secrets:t.secrets[0];if(K0+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,t.sign===!0)K0+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${y}')
			}`;else for(let $ of t.sign)K0+=`if(_setCookie['${$}']?.value) { c.set.cookie['${$}'].value = await signCookie(_setCookie['${$}'].value, '${y}') }\n`;K0+="}\n"}const{composeValidation:H0,composeResponseValidation:T0}=Rp(A);if(s)L+=Wp?"c.headers = c.request.headers.toJSON()\n":`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(o){const y=(z0,e)=>{const G0=t?.[z0]??e;if(!G0)return typeof e==="string"?`${z0}: "${e}",`:`${z0}: ${e},`;if(typeof G0==="string")return`${z0}: '${G0}',`;if(G0 instanceof Date)return`${z0}: new Date(${G0.getTime()}),`;return`${z0}: ${G0},`},$=t?`{
			secret: ${t.secrets!==void 0?typeof t.secrets==="string"?`'${t.secrets}'`:"["+t.secrets.reduce((z0,e)=>z0+`'${e}',`,"")+"]":"undefined"},
			sign: ${t.sign===!0?!0:t.sign!==void 0?"["+t.sign.reduce((z0,e)=>z0+`'${e}',`,"")+"]":"undefined"},
			${y("domain")}
			${y("expires")}
			${y("httpOnly")}
			${y("maxAge")}
			${y("path","/")}
			${y("priority")}
			${y("sameSite")}
			${y("secure")}
		}`:"undefined";if(s)L+=`\nc.cookie = await parseCookie(c.set, c.headers.cookie, ${$})\n`;else L+=`\nc.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${$})\n`}if(v||J.query||i.some((y)=>F6("query",y)))L+=`const url = c.request.url

		if(c.qi !== -1) {
			c.query ??= parseQuery(url.substring(c.qi + 1))
		} else {
			c.query ??= {}
		}
		`;const T=K.trace.map((y)=>y.toString()).some((y)=>F6("set",y)||w7(y));v||K.trace.some((y)=>F6("set",y.toString()));const k=T||o||i.some((y)=>F6("set",y))||B.some((y)=>F6("set",y.toString()));if(f)L+="\nconst id = c.$$requestId\n";const Y=zD({hasTrace:f,hasTraceSet:T,condition:W,addFn:(y)=>{L+=y}});if(L+=A?"try {\n":"",f){L+="\nconst traceDone = Promise.all([";for(let y=0;y<K.trace.length;y++)L+=`new Promise(r => { reporter.once(\`res\${id}.${y}\`, r) }),`;L+="])\n"}const V0=o||n||T||a0(Z)||K.parse.length>0||K.afterHandle.some(a0)||K.beforeHandle.some(a0)||K.transform.some(a0),R=Y("parse",{unit:K.parse.length});if(n){const y=kp(J?.body);if(K.type&&!Array.isArray(K.type)){if(K.type)switch(K.type){case"json":case"application/json":L+="c.body = await c.request.json()\n";break;case"text":case"text/plain":L+="c.body = await c.request.text()\n";break;case"urlencoded":case"application/x-www-form-urlencoded":L+="c.body = parseQuery(await c.request.text())\n";break;case"arrayBuffer":case"application/octet-stream":L+="c.body = await c.request.arrayBuffer()\n";break;case"formdata":case"multipart/form-data":L+=`c.body = {}

						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}\n`;break}if(K.parse.length)L+="}}"}else{const $=(()=>{if(K.parse.length&&y&&!Array.isArray(K.type)){const z0=J?.body?.schema;switch(y){case"object":if(zz("File",z0)||zz("Files",z0))return`c.body = {}
		
								const form = await c.request.formData()
								for (const key of form.keys()) {
									if (c.body[key])
										continue
			
									const value = form.getAll(key)
									if (value.length === 1)
										c.body[key] = value[0]
									else c.body[key] = value
								}`;break;default:break}}})();if($)L+=$;else{if(L+="\n",L+=s?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",L+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)\n`,K.parse.length){L+="let used = false\n";const z0=Y("parse",{unit:K.parse.length});for(let e=0;e<K.parse.length;e++){const G0=Y("parse.unit",{name:K.parse[e].name}),F=`bo${e}`;if(e!==0)L+="if(!used) {\n";if(L+=`let ${F} = parse[${e}](c, contentType)\n`,L+=`if(${F} instanceof Promise) ${F} = await ${F}\n`,L+=`if(${F} !== undefined) { c.body = ${F}; used = true }\n`,G0(),e!==0)L+="}"}z0()}if(K.parse.length)L+="if (!used)";L+=`
				switch (contentType) {
					case 'application/json':
						c.body = await c.request.json()
						break
				
					case 'text/plain':
						c.body = await c.request.text()
						break
				
					case 'application/x-www-form-urlencoded':
						c.body = parseQuery(await c.request.text())
						break
				
					case 'application/octet-stream':
						c.body = await c.request.arrayBuffer();
						break
				
					case 'multipart/form-data':
						c.body = {}
				
						const form = await c.request.formData()
						for (const key of form.keys()) {
							if (c.body[key])
								continue
				
							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						}
				
						break
					}\n`,L+="}\n"}}L+="\n"}if(R(),K?.transform){const y=Y("transform",{unit:K.transform.length});for(let $=0;$<K.transform.length;$++){const z0=K.transform[$],e=Y("transform.unit",{name:z0.name});if(z0.$elysia==="derive")L+=a0(K.transform[$])?`Object.assign(c, await transform[${$}](c));`:`Object.assign(c, transform[${$}](c));`;else L+=a0(K.transform[$])?`await transform[${$}](c);`:`transform[${$}](c);`;e()}y()}if(J){if(L+="\n",J.headers){if(L+=`if(headers.Check(c.headers) === false) {
				${H0("headers")}
			}`,x4(J.headers.schema))L+="\nc.headers = headers.Decode(c.headers)\n"}if(J.params){if(L+=`if(params.Check(c.params) === false) {
				${H0("params")}
			}`,x4(J.params.schema))L+="\nc.params = params.Decode(c.params)\n"}if(J.query){if(L+=`if(query.Check(c.query) === false) {
				${H0("query")} 
			}`,x4(J.query.schema))L+="\nc.query = query.Decode(Object.assign({}, c.query))\n"}if(J.body){if(L+=`if(body.Check(c.body) === false) { 
				${H0("body")}
			}`,x4(J.body.schema))L+="\nc.body = body.Decode(c.body)\n"}if(J4(J.cookie?.schema.properties??{})){if(L+=`const cookieValue = {}
			for(const [key, value] of Object.entries(c.cookie))
				cookieValue[key] = value.value

			if(cookie.Check(cookieValue) === false) {
				${H0("cookie","cookieValue")}
			}`,x4(J.cookie.schema))L+="\nc.cookie = params.Decode(c.cookie)\n"}}if(K?.beforeHandle){const y=Y("beforeHandle",{unit:K.beforeHandle.length});for(let $=0;$<K.beforeHandle.length;$++){const z0=Y("beforeHandle.unit",{name:K.beforeHandle[$].name}),e=`be${$}`;if(!L7(K.beforeHandle[$].toString()))L+=a0(K.beforeHandle[$])?`await beforeHandle[${$}](c);\n`:`beforeHandle[${$}](c);\n`,z0();else{L+=a0(K.beforeHandle[$])?`let ${e} = await beforeHandle[${$}](c);\n`:`let ${e} = beforeHandle[${$}](c);\n`,z0(),L+=`if(${e} !== undefined) {\n`;const G0=Y("afterHandle",{unit:K.transform.length});if(K.afterHandle){const F=e;for(let h=0;h<K.afterHandle.length;h++){const u=L7(K.afterHandle[h].toString()),a=Y("afterHandle.unit",{name:K.afterHandle[h].name});if(L+=`c.response = ${F}\n`,!u)L+=a0(K.afterHandle[h])?`await afterHandle[${h}](c, ${F});\n`:`afterHandle[${h}](c, ${F});\n`;else{const l=`af${h}`;L+=a0(K.afterHandle[h])?`const ${l} = await afterHandle[${h}](c);\n`:`const ${l} = afterHandle[${h}](c);\n`,L+=`if(${l} !== undefined) { c.response = ${F} = ${l} }\n`}a()}}if(G0(),J.response)L+=T0(e);L+=K0,L+=`return mapEarlyResponse(${e}, c.set)}\n`}}y()}if(K?.afterHandle.length){const y=Y("handle",{name:Z.name});if(K.afterHandle.length)L+=a0(Z)?"let r = c.response = await handler(c);\n":"let r = c.response = handler(c);\n";else L+=a0(Z)?"let r = await handler(c);\n":"let r = handler(c);\n";y();const $=Y("afterHandle",{unit:K.afterHandle.length});for(let z0=0;z0<K.afterHandle.length;z0++){const e=`af${z0}`,G0=L7(K.afterHandle[z0].toString()),F=Y("afterHandle.unit",{name:K.afterHandle[z0].name});if(!G0)L+=a0(K.afterHandle[z0])?`await afterHandle[${z0}](c)\n`:`afterHandle[${z0}](c)\n`,F();else{if(J.response)L+=a0(K.afterHandle[z0])?`let ${e} = await afterHandle[${z0}](c)\n`:`let ${e} = afterHandle[${z0}](c)\n`;else L+=a0(K.afterHandle[z0])?`let ${e} = mapEarlyResponse(await afterHandle[${z0}](c), c.set)\n`:`let ${e} = mapEarlyResponse(afterHandle[${z0}](c), c.set)\n`;if(F(),J.response){if(L+=`if(${e} !== undefined) {`,L+=T0(e),L+=`${e} = mapEarlyResponse(${e}, c.set)\n`,L+=`if(${e}) {`,$(),T)L+=`${e} = mapEarlyResponse(${e}, c.set)\n`;L+=`return ${e} } }`}else L+=`if(${e}) {`,$(),L+=`return ${e}}\n`}}if($(),L+="r = c.response\n",J.response)L+=T0();if(L+=K0,k)L+="return mapResponse(r, c.set)\n";else L+="return mapCompactResponse(r)\n"}else{const y=Y("handle",{name:Z.name});if(J.response)if(L+=a0(Z)?"const r = await handler(c);\n":"const r = handler(c);\n",y(),L+=T0(),Y("afterHandle")(),L+=K0,k)L+="return mapResponse(r, c.set)\n";else L+="return mapCompactResponse(r)\n";else if(W.handle||o)if(L+=a0(Z)?"let r = await handler(c);\n":"let r = handler(c);\n",y(),Y("afterHandle")(),L+=K0,k)L+="return mapResponse(r, c.set)\n";else L+="return mapCompactResponse(r)\n";else{y();const $=a0(Z)?"await handler(c) ":"handler(c)";if(Y("afterHandle")(),k)L+=`return mapResponse(${$}, c.set)\n`;else L+=`return mapCompactResponse(${$})\n`}}if(A||b){if(L+=`
} catch(error) {`,!V0)L+="return (async () => {";L+=`const set = c.set

		if (!set.status || set.status < 300) set.status = 500
	`;const y=Y("error",{unit:K.error.length});if(K.error.length)for(let $=0;$<K.error.length;$++){const z0=`er${$}`,e=Y("error.unit",{name:K.error[$].name});if(L+=`\nlet ${z0} = handleErrors[${$}](
					Object.assign(c, {
						error: error,
						code: error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
					})
				)\n`,a0(K.error[$]))L+=`if (${z0} instanceof Promise) ${z0} = await ${z0}\n`;e(),L+=`${z0} = mapEarlyResponse(${z0}, set)\n`,L+=`if (${z0}) {`,L+=`return ${z0} }\n`}if(y(),L+="return handleError(c, error)\n\n",!V0)L+="})()";if(L+="}",b||f){L+=" finally { ";const $=Y("response",{unit:K.onResponse.length});L+=b,$(),L+="}"}}return L=`const { 
		handler,
		handleError,
		hooks: {
			transform,
			beforeHandle,
			afterHandle,
			parse,
			error: handleErrors,
			onResponse
		},
		validator: {
			body,
			headers,
			params,
			query,
			response,
			cookie
		},
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError
		},
		schema,
		definitions,
		ERROR_CODE,
		getReporter,
		requestId,
		parseCookie,
		signCookie
	} = hooks

	${K.onResponse.length?`const ${K.onResponse.map((y,$)=>`res${$} = onResponse[${$}]`).join(",")}`:""}

	return ${V0?"async":""} function(c) {
		${j&&U?"c.schema = schema; c.defs = definitions;":""}
		${L}
	}`,Function("hooks",L)({handler:Z,hooks:K,validator:J,handleError:D,utils:{mapResponse:A5,mapCompactResponse:E5,mapEarlyResponse:K4,parseQuery:hp.parse},error:{NotFoundError:E7,ValidationError:L6,InternalServerError:LK},schema:j,definitions:U,ERROR_CODE:q7,getReporter:G,requestId:eU,parseCookie:aU,signCookie:e3})},xU=(z)=>{let V="",K="";for(let w of Object.keys(z.decorators))V+=`,${w}: app.decorators.${w}`;const{router:J,staticRouter:Z}=z,D=z.event.trace.length>0,U=`
	const route = find(request.method, path) ${J.root.ALL?'?? find("ALL", path)':""}
	if (route === null)
		return ${z.event.error.length?"app.handleError(ctx, notFound)":`new Response(error404, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`}

	ctx.params = route.params

	return route.store(ctx)`;let j="";for(let[w,{code:v,all:W}]of Object.entries(Z.map))j+=`case '${w}':\nswitch(request.method) {\n${v}\n${W??"default: break map"}}\n\n`;const B=z.event.request.some(a0);K+=`const {
		app,
		app: { store, router, staticRouter, wsRouter },
		mapEarlyResponse,
		NotFoundError,
		requestId,
		getReporter
	} = data

	const notFound = new NotFoundError()

	${z.event.request.length?"const onRequest = app.event.request":""}

	${Z.variables}

	const find = router.find.bind(router)
	const findWs = wsRouter.find.bind(wsRouter)
	const handleError = app.handleError.bind(this)

	${z.event.error.length?"":"const error404 = notFound.message.toString()"}

	return ${B?"async":""} function map(request) {
	`;const H=z.event.trace.map((w)=>w.toString()),G=zD({hasTrace:D,hasTraceSet:z.event.trace.some((w)=>{const v=w.toString();return F6("set",v)||w7(v)}),condition:{request:H.some((w)=>F6("request",w)||w7(w))},addFn:(w)=>{K+=w}});if(z.event.request.length){K+=`
			${D?"const id = +requestId.value++":""}

			const ctx = {
				request,
				store,
				set: {
					cookie: {},
					headers: {},
					status: 200
				}
				${D?",$$requestId: +id":""}
				${V}
			}
		`;const w=G("request",{attribute:"ctx",unit:z.event.request.length});K+="try {\n";for(let v=0;v<z.event.request.length;v++){const W=z.event.request[v],f=L7(W.toString()),L=a0(W),i=G("request.unit",{name:z.event.request[v].name}),n=`re${v}`;if(f)K+=`const ${n} = mapEarlyResponse(
					${L?"await":""} onRequest[${v}](ctx),
					ctx.set
				)\n`,i(),K+=`if(${n}) return ${n}\n`;else K+=`${L?"await":""} onRequest[${v}](ctx)\n`,i()}K+=`} catch (error) {
			return app.handleError(ctx, error)
		}`,w(),K+=`
		const url = request.url,
		s = url.indexOf('/', 11),
		i = ctx.qi = url.indexOf('?', s + 1),
		path = ctx.path = i === -1 ? url.substring(s) : url.substring(s, i);`}else K+=`
		const url = request.url,
			s = url.indexOf('/', 11),
			qi = url.indexOf('?', s + 1),
			path = qi === -1
				? url.substring(s)
				: url.substring(s, qi)

		${D?"const id = +requestId.value++":""}

		const ctx = {
			request,
			store,
			qi,
			path,
			set: {
				headers: {},
				status: 200
			}
			${D?",$$requestId: id":""}
			${V}
		}`,G("request",{unit:z.event.request.length,attribute:H.some((w)=>F6("context",w))||H.some((w)=>F6("store",w))||H.some((w)=>F6("set",w))?"ctx":""})();const{wsPaths:A,wsRouter:b}=z;if(Object.keys(A).length||b.history.length){K+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[w,v]of Object.entries(A))K+=`
					case '${w}':
						if(request.headers.get('upgrade') === 'websocket')
							return st${v}(ctx)
							
						break`;K+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = findWs('ws', path)

						if(route) {
							ctx.params = route.params

							return route.store(ctx)
						}
					}

					break
			}
		}\n`}return K+=`
		map: switch(path) {
			${j}

			default:
				break
		}

		${U}
	}`,z.handleError=VD(z),Function("data",K)({app:z,mapEarlyResponse:K4,NotFoundError:E7,getReporter:()=>z.reporter,requestId:eU})},VD=(z)=>{let V=`const {
		app: { event: { error: onError, onResponse: res } },
		mapResponse,
		ERROR_CODE
	} = inject

	return ${z.event.error.find(a0)?"async":""} function(context, error) {
		const { set } = context
		`;for(let K=0;K<z.event.error.length;K++){const J=z.event.error[K],Z=`${a0(J)?"await ":""}onError[${K}](
			Object.assign(context, {
				code: error.code ?? error[ERROR_CODE] ?? 'UNKNOWN',
				error
			})
		)`;if(L7(J.toString()))V+=`const r${K} = ${Z}; if(r${K} !== undefined) {
				if(set.status === 200) set.status = error.status
				return mapResponse(r${K}, set)
			}\n`;else V+=Z+"\n"}return V+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
		set.status = error.status ?? 400
		return new Response(
			error.message, 
			{ headers: set.headers, status: set.status }
		)
	} else {
		return new Response(error.message, { headers: set.headers, status: error.status ?? 500 })
	}
}`,Function("inject",V)({app:z,mapResponse:A5,ERROR_CODE:q7})},jK=Z8(pU(),1),SU=(z)=>async(V)=>{const K={cookie:{},status:200,headers:{}};let J;if(z.decorators)J=z.decorators,J.request=V,J.set=K,J.store=z.store;else J={set:K,store:z.store,request:V};const Z=V.url,D=Z.indexOf("/",11),U=Z.indexOf("?",D+1),j=U===-1?Z.substring(D):Z.substring(D,U);try{for(let f=0;f<z.event.request.length;f++){const L=z.event.request[f];let i=L(J);if(i instanceof Promise)i=await i;if(i=K4(i,K),i)return i}const B=z.dynamicRouter.find(V.method,j)??z.dynamicRouter.find("ALL",j);if(!B)throw new E7;const{handle:H,hooks:G,validator:A,content:b}=B.store;let w;if(V.method!=="GET"&&V.method!=="HEAD")if(b)switch(b){case"application/json":w=await V.json();break;case"text/plain":w=await V.text();break;case"application/x-www-form-urlencoded":w=jK.parse(await V.text());break;case"application/octet-stream":w=await V.arrayBuffer();break;case"multipart/form-data":w={};const f=await V.formData();for(let L of f.keys()){if(w[L])continue;const i=f.getAll(L);if(i.length===1)w[L]=i[0];else w[L]=i}break}else{let f=V.headers.get("content-type");if(f){const L=f.indexOf(";");if(L!==-1)f=f.slice(0,L);for(let i=0;i<z.event.parse.length;i++){let n=z.event.parse[i](J,f);if(n instanceof Promise)n=await n;if(n){w=n;break}}if(w===void 0)switch(f){case"application/json":w=await V.json();break;case"text/plain":w=await V.text();break;case"application/x-www-form-urlencoded":w=jK.parse(await V.text());break;case"application/octet-stream":w=await V.arrayBuffer();break;case"multipart/form-data":w={};const i=await V.formData();for(let n of i.keys()){if(w[n])continue;const s=i.getAll(n);if(s.length===1)w[n]=s[0];else w[n]=s}break}}}J.body=w,J.params=B?.params||void 0,J.query=U===-1?{}:jK.parse(Z.substring(U+1)),J.headers={};for(let[f,L]of V.headers.entries())J.headers[f]=L;const v=A?.cookie?.schema;J.cookie=await aU(J.set,J.headers.cookie,v?{secret:v.secrets!==void 0?typeof v.secrets==="string"?v.secrets:v.secrets.join(","):void 0,sign:v.sign===!0?!0:v.sign!==void 0?typeof v.sign==="string"?v.sign:v.sign.join(","):void 0}:void 0);for(let f=0;f<G.transform.length;f++){const L=G.transform[f](J);if(G.transform[f].$elysia==="derive")if(L instanceof Promise)Object.assign(J,await L);else Object.assign(J,L);else if(L instanceof Promise)await L}if(A){if(A.headers){const f={};for(let L in V.headers)f[L]=V.headers.get(L);if(A.headers.Check(f)===!1)throw new L6("header",A.headers,f)}if(A.params?.Check(J.params)===!1)throw new L6("params",A.params,J.params);if(A.query?.Check(J.query)===!1)throw new L6("query",A.query,J.query);if(A.cookie){const f={};for(let[L,i]of Object.entries(J.cookie))f[L]=i.value;if(A.cookie?.Check(f)===!1)throw new L6("cookie",A.cookie,f)}if(A.body?.Check(w)===!1)throw new L6("body",A.body,w)}for(let f=0;f<G.beforeHandle.length;f++){let L=G.beforeHandle[f](J);if(L instanceof Promise)L=await L;if(L!==void 0){J.response=L;for(let n=0;n<G.afterHandle.length;n++){let s=G.afterHandle[n](J);if(s instanceof Promise)s=await s;if(s)L=s}const i=K4(L,J.set);if(i)return i}}let W=H(J);if(W instanceof Promise)W=await W;if(!G.afterHandle.length){const f=A?.response?.[W.status];if(f?.Check(W)===!1)throw new L6("response",f,W)}else{J.response=W;for(let f=0;f<G.afterHandle.length;f++){let L=G.afterHandle[f](J);if(L instanceof Promise)L=await L;const i=K4(L,J.set);if(i!==void 0){const n=A?.response?.[W.status];if(n?.Check(i)===!1)throw new L6("response",n,i);return i}}}if(J.set.cookie&&v?.sign){const f=!v.secrets?void 0:typeof v.secrets==="string"?v.secrets:v.secrets[0];if(v.sign===!0)for(let[L,i]of Object.entries(J.set.cookie))J.set.cookie[L].value=await e3(i.value,"${secret}");else for(let L of v.sign){if(!(L in v.properties))continue;if(J.set.cookie[L]?.value)J.set.cookie[L].value=await e3(J.set.cookie[L].value,f)}}return A5(W,J.set)}catch(B){if(B.status)K.status=B.status;return z.handleError(J,B)}finally{for(let B of z.event.onResponse)await B(J)}},fp=(z)=>async(V,K)=>{const J=Object.assign(V,{error:K,code:K.code});J.set=V.set;for(let Z=0;Z<z.event.error.length;Z++){let D=z.event.error[Z](J);if(D instanceof Promise)D=await D;if(D!==void 0&&D!==null)return A5(D,V.set)}return new Response(typeof K.cause==="string"?K.cause:K.message,{headers:V.set.headers,status:K.status??500})},wK={};$U(wK,{t:()=>{return u0.Type},ElysiaType:()=>{return Z4}});var P5=Z8(Jz(),1),u0=Z8(U8(),1),xp=Z8(XK(),1);_U(wK,Z8(Jz(),1));_U(wK,Z8(cU(),1));try{P5.TypeSystem.Format("email",(z)=>/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i.test(z)),P5.TypeSystem.Format("uuid",(z)=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(z)),P5.TypeSystem.Format("date",(z)=>!Number.isNaN(new Date(z).getTime())),P5.TypeSystem.Format("date-time",(z)=>!Number.isNaN(new Date(z).getTime()))}catch(z){}var yU=(z)=>{if(typeof z==="string")switch(z.slice(-1)){case"k":return+z.slice(0,z.length-1)*1024;case"m":return+z.slice(0,z.length-1)*1048576;default:return+z}return z},OK=(z,V)=>{if(!(V instanceof Blob))return!1;if(z.minSize&&V.size<yU(z.minSize))return!1;if(z.maxSize&&V.size>yU(z.maxSize))return!1;if(z.extension)if(typeof z.extension==="string"){if(!V.type.startsWith(z.extension))return!1}else{for(let K=0;K<z.extension.length;K++)if(V.type.startsWith(z.extension[K]))return!0;return!1}return!0},Sp=P5.TypeSystem.Type("Files",(z,V)=>{if(!Array.isArray(V))return OK(z,V);if(z.minItems&&V.length<z.minItems)return!1;if(z.maxItems&&V.length>z.maxItems)return!1;for(let K=0;K<V.length;K++)if(!OK(z,V[K]))return!1;return!0});u0.FormatRegistry.Set("numeric",(z)=>!!z&&!isNaN(+z));u0.FormatRegistry.Set("ObjectString",(z)=>{let V=z.charCodeAt(0);if(V===9||V===10||V===32)V=z.trimStart().charCodeAt(0);if(V!==123&&V!==91)return!1;try{return JSON.parse(z),!0}catch{return!1}});var Z4={Numeric:(z)=>{const V=u0.Type.Number(z);return u0.Type.Transform(u0.Type.Union([u0.Type.String({format:"numeric",default:0}),V])).Decode((K)=>{const J=+K;if(isNaN(J))return K;if(z&&!xp.Value.Check(V,J))throw new L6("property",V,J);return J}).Encode((K)=>K)},ObjectString:(z,V)=>u0.Type.Transform(u0.Type.Union([u0.Type.String({format:"ObjectString",default:""}),u0.Type.Object(z,V)])).Decode((K)=>{if(typeof K==="string")try{return JSON.parse(K)}catch{return K}return K}).Encode((K)=>JSON.stringify(K)),File:P5.TypeSystem.Type("File",OK),Files:(z={})=>u0.Type.Transform(Sp(z)).Decode((V)=>{if(Array.isArray(V))return V;return[V]}).Encode((V)=>V),Nullable:(z)=>u0.Type.Union([u0.Type.Null(),z]),MaybeEmpty:(z)=>u0.Type.Union([u0.Type.Null(),u0.Type.Undefined(),z]),Cookie:(z,V)=>u0.Type.Object(z,V)};u0.Type.ObjectString=Z4.ObjectString;u0.Type.Numeric=Z4.Numeric;u0.Type.File=(z={})=>Z4.File({default:"File",...z,extension:z?.type,type:"string",format:"binary"});u0.Type.Files=(z={})=>Z4.Files({...z,elysiaMeta:"Files",default:"Files",extension:z?.type,type:"array",items:{...z,default:"Files",type:"string",format:"binary"}});u0.Type.Nullable=(z)=>Z4.Nullable(z);u0.Type.MaybeEmpty=Z4.MaybeEmpty;u0.Type.Cookie=Z4.Cookie;class o0{config;dependencies={};store={};decorators={};definitions={type:{},error:{}};schema={};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],onResponse:[],trace:[],error:[],stop:[]};reporter=new Op;server=null;getServer(){return this.server}validator=null;router=new T5;wsRouter=new T5;routes=[];staticRouter={handlers:[],variables:"",map:{},all:""};wsPaths={};dynamicRouter=new T5;lazyLoadModules=[];path="";constructor(z){this.config={forceErrorEncapsulation:!0,prefix:"",aot:!0,strictPath:!1,scoped:!1,cookie:{},...z,seed:z?.seed===void 0?"":z?.seed}}add(z,V,K,J,{allowMeta:Z=!1,skipPrefix:D=!1}={allowMeta:!1,skipPrefix:!1}){if(typeof V==="string")V=[V];for(let U of V){if(U=U===""?U:U.charCodeAt(0)===47?U:`/${U}`,this.config.prefix&&!D)U=this.config.prefix+U;if(J?.type)switch(J.type){case"text":J.type="text/plain";break;case"json":J.type="application/json";break;case"formdata":J.type="multipart/form-data";break;case"urlencoded":J.type="application/x-www-form-urlencoded";break;case"arrayBuffer":J.type="application/octet-stream";break;default:break}const j=this.definitions.type;let B=V4(J?.cookie??this.validator?.cookie,{dynamic:!this.config.aot,models:j,additionalProperties:!0});if(J4(this.config.cookie??{}))if(B)B.schema=Ep(B.schema,this.config.cookie??{});else B=V4(u0.Type.Cookie({},this.config.cookie),{dynamic:!this.config.aot,models:j,additionalProperties:!0});const H={body:V4(J?.body??this.validator?.body,{dynamic:!this.config.aot,models:j}),headers:V4(J?.headers??this.validator?.headers,{dynamic:!this.config.aot,models:j,additionalProperties:!0}),params:V4(J?.params??this.validator?.params,{dynamic:!this.config.aot,models:j}),query:V4(J?.query??this.validator?.query,{dynamic:!this.config.aot,models:j}),cookie:B,response:vp(J?.response??this.validator?.response,{dynamic:!this.config.aot,models:j})},G=w5(this.event,J),A=U.endsWith("/")?U.slice(0,U.length-1):U+"/";if(this.config.aot===!1){if(this.dynamicRouter.add(z,U,{validator:H,hooks:G,content:J?.type,handle:K}),this.config.strictPath===!1)this.dynamicRouter.add(z,A,{validator:H,hooks:G,content:J?.type,handle:K});this.routes.push({method:z,path:U,composed:null,handler:K,hooks:G});return}const b=bp({path:U,method:z,hooks:G,validator:H,handler:K,handleError:this.handleError,onRequest:this.event.request,config:this.config,definitions:Z?this.definitions.type:void 0,schema:Z?this.schema:void 0,getReporter:()=>this.reporter}),w=this.routes.findIndex((v)=>v.path===U&&v.method===z);if(w!==-1)this.routes.splice(w,1);if(this.routes.push({method:z,path:U,composed:b,handler:K,hooks:G}),z==="$INTERNALWS"){const v=this.config.strictPath?void 0:U.endsWith("/")?U.slice(0,U.length-1):U+"/";if(U.indexOf(":")===-1&&U.indexOf("*")===-1){const W=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(b),this.staticRouter.variables+=`const st${W} = staticRouter.handlers[${W}]\n`,this.wsPaths[U]=W,v)this.wsPaths[v]=W}else if(this.wsRouter.add("ws",U,b),v)this.wsRouter.add("ws",v,b);return}if(U.indexOf(":")===-1&&U.indexOf("*")===-1){const v=this.staticRouter.handlers.length;if(this.staticRouter.handlers.push(b),this.staticRouter.variables+=`const st${v} = staticRouter.handlers[${v}]\n`,!this.staticRouter.map[U])this.staticRouter.map[U]={code:""};if(z==="ALL")this.staticRouter.map[U].all=`default: return st${v}(ctx)\n`;else this.staticRouter.map[U].code=`case '${z}': return st${v}(ctx)\n${this.staticRouter.map[U].code}`;if(!this.config.strictPath){if(!this.staticRouter.map[A])this.staticRouter.map[A]={code:""};if(z==="ALL")this.staticRouter.map[A].all=`default: return st${v}(ctx)\n`;else this.staticRouter.map[A].code=`case '${z}': return st${v}(ctx)\n${this.staticRouter.map[A].code}`}}else if(this.router.add(z,U,b),!this.config.strictPath)this.router.add(z,U.endsWith("/")?U.slice(0,U.length-1):U+"/",b)}}onStart(z){return this.on("start",z),this}onRequest(z){return this.on("request",z),this}onParse(z){return this.on("parse",z),this}onTransform(z){return this.on("transform",z),this}onBeforeHandle(z){return this.on("beforeHandle",z),this}onAfterHandle(z){return this.on("afterHandle",z),this}onResponse(z){return this.on("response",z),this}trace(z){return this.reporter.on("event",Fp(()=>this.reporter,this.event.trace.length,z)),this.on("trace",z),this}addError(z,V){return this.error(z,V)}error(z,V){switch(typeof z){case"string":return V.prototype[q7]=z,this.definitions.error[z]=V,this;case"function":return this.definitions.error=z(this.definitions.error),this}for(let[K,J]of Object.entries(z))J.prototype[q7]=K,this.definitions.error[K]=J;return this}onError(z){return this.on("error",z),this}onStop(z){return this.on("stop",z),this}on(z,V){for(let K of Array.isArray(V)?V:[V])switch(K=Cp(K),z){case"start":this.event.start.push(K);break;case"request":this.event.request.push(K);break;case"response":this.event.onResponse.push(K);break;case"parse":this.event.parse.splice(this.event.parse.length-1,0,K);break;case"transform":this.event.transform.push(K);break;case"beforeHandle":this.event.beforeHandle.push(K);break;case"afterHandle":this.event.afterHandle.push(K);break;case"trace":this.event.trace.push(K);break;case"error":this.event.error.push(K);break;case"stop":this.event.stop.push(K);break}return this}group(z,V,K){const J=new o0({...this.config,prefix:""});J.store=this.store,J.getServer=()=>this.server;const Z=typeof V==="object",D=(Z?K:V)(J);if(this.decorators=S4(this.decorators,J.decorators),D.event.request.length)this.event.request=[...this.event.request,...D.event.request];if(D.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...D.event.onResponse];return this.model(D.definitions.type),Object.values(J.routes).forEach(({method:U,path:j,handler:B,hooks:H})=>{if(j=(Z?"":this.config.prefix)+z+j,Z){const G=V,A=H;this.add(U,j,B,w5(G,{...A,error:!A.error?D.event.error:Array.isArray(A.error)?[...A.error,...D.event.error]:[A.error,...D.event.error]}))}else this.add(U,j,B,w5(H,{error:D.event.error}),{skipPrefix:!0})}),this}guard(z,V){if(!V)return this.event=HK(this.event,z),this.validator={body:z.body,headers:z.headers,params:z.params,query:z.query,response:z.response},this;const K=new o0;K.store=this.store;const J=V(K);if(this.decorators=S4(this.decorators,K.decorators),J.event.request.length)this.event.request=[...this.event.request,...J.event.request];if(J.event.onResponse.length)this.event.onResponse=[...this.event.onResponse,...J.event.onResponse];return this.model(J.definitions.type),Object.values(K.routes).forEach(({method:Z,path:D,handler:U,hooks:j})=>{this.add(Z,D,U,w5(z,{...j,error:!j.error?J.event.error:Array.isArray(j.error)?[...j.error,...J.event.error]:[j.error,...J.event.error]}))}),this}use(z){if(z instanceof Promise)return this.lazyLoadModules.push(z.then((V)=>{if(typeof V==="function")return V(this);if(typeof V.default==="function")return V.default(this);return this._use(V)}).then((V)=>V.compile())),this;else return this._use(z);return this}_use(z){if(typeof z==="function"){const Z=z(this);if(Z instanceof Promise)return this.lazyLoadModules.push(Z.then((D)=>{if(D instanceof o0){this.compile();for(let{method:U,path:j,handler:B,hooks:H}of Object.values(D.routes))this.add(U,j,B,w5(H,{error:D.event.error}));return D}if(typeof D==="function")return D(this);if(typeof D.default==="function")return D.default(this);return this._use(D)}).then((D)=>D.compile())),this;return Z}const{name:V,seed:K}=z.config;z.getServer=()=>this.getServer();const J=z.config.scoped;if(J){if(V){if(!(V in this.dependencies))this.dependencies[V]=[];const D=K!==void 0?kU(V+JSON.stringify(K)):0;if(this.dependencies[V].some((U)=>D===U))return this;this.dependencies[V].push(D)}if(z.model(this.definitions.type),z.error(this.definitions.error),z.onRequest((D)=>{Object.assign(D,this.decorators),Object.assign(D.store,this.store)}),z.event.trace=[...this.event.trace,...z.event.trace],z.config.aot)z.compile();const Z=this.mount(z.fetch);return this.routes=this.routes.concat(Z.routes),this}else{z.reporter=this.reporter;for(let Z of z.event.trace)this.trace(Z)}this.decorate(z.decorators),this.state(z.store),this.model(z.definitions.type),this.error(z.definitions.error);for(let{method:Z,path:D,handler:U,hooks:j}of Object.values(z.routes))this.add(Z,D,U,w5(j,{error:z.event.error}));if(!J)if(V){if(!(V in this.dependencies))this.dependencies[V]=[];const Z=K!==void 0?kU(V+JSON.stringify(K)):0;if(this.dependencies[V].some((D)=>Z===D))return this;this.dependencies[V].push(Z),this.event=HK(this.event,YU(z.event),Z)}else this.event=HK(this.event,YU(z.event));return this}mount(z,V){if(typeof z==="function"||z.length===0||z==="/"){const Z=typeof z==="function"?z:V,D=async({request:U,path:j})=>Z(new Request(RU(U.url)+j||"/",U));return this.all("/",D,{type:"none"}),this.all("/*",D,{type:"none"}),this}const K=z.length,J=async({request:Z,path:D})=>V(new Request(RU(Z.url)+D.slice(K)||"/",Z));return this.all(z,J,{type:"none"}),this.all(z+(z.endsWith("/")?"*":"/*"),J,{type:"none"}),this}get(z,V,K){return this.add("GET",z,V,K),this}post(z,V,K){return this.add("POST",z,V,K),this}put(z,V,K){return this.add("PUT",z,V,K),this}patch(z,V,K){return this.add("PATCH",z,V,K),this}delete(z,V,K){return this.add("DELETE",z,V,K),this}options(z,V,K){return this.add("OPTIONS",z,V,K),this}all(z,V,K){return this.add("ALL",z,V,K),this}head(z,V,K){return this.add("HEAD",z,V,K),this}connect(z,V,K){return this.add("CONNECT",z,V,K),this}ws(z,V){const K=V.transformMessage?Array.isArray(V.transformMessage)?V.transformMessage:[V.transformMessage]:void 0;let J=null;const Z=V4(V?.body,{models:this.definitions.type}),D=V4(V?.response,{models:this.definitions.type}),U=(j)=>{if(typeof j==="string"){const B=j?.charCodeAt(0);if(B===47||B===123)try{j=JSON.parse(j)}catch{}else if(!Number.isNaN(+j))j=+j}if(K?.length)for(let B=0;B<K.length;B++){const H=K[B](j);if(H!==void 0)j=H}return j};return this.route("$INTERNALWS",z,(j)=>{const{set:B,path:H,qi:G,headers:A,query:b,params:w}=j;if(J===null)J=this.getServer();if(J?.upgrade(j.request,{headers:typeof V.upgrade==="function"?V.upgrade(j):V.upgrade,data:{validator:D,open(v){V.open?.(new X7(v,j))},message:(v,W)=>{const f=U(W);if(Z?.Check(f)===!1)return void v.send(new L6("message",Z,f).message);V.message?.(new X7(v,j),f)},drain(v){V.drain?.(new X7(v,j))},close(v,W,f){V.close?.(new X7(v,j),W,f)}}}))return;return B.status=400,"Expected a websocket connection"},{beforeHandle:V.beforeHandle,transform:V.transform,headers:V.headers,params:V.params,query:V.query}),this}route(z,V,K,{config:J,...Z}={config:{allowMeta:!1}}){return this.add(z,V,K,Z,J),this}state(z,V){switch(typeof z){case"object":return this.store=S4(this.store,z),this;case"function":return this.store=z(this.store),this}if(!(z in this.store))this.store[z]=V;return this}decorate(z,V){switch(typeof z){case"object":return this.decorators=S4(this.decorators,z),this;case"function":return this.decorators=z(this.decorators),this}if(!(z in this.decorators))this.decorators[z]=V;return this}derive(z){return z.$elysia="derive",this.onTransform(z)}model(z,V){switch(typeof z){case"object":return Object.entries(z).forEach(([K,J])=>{if(!(K in this.definitions.type))this.definitions.type[K]=J}),this;case"function":return this.definitions.type=z(this.definitions.type),this}return this.definitions.type[z]=V,this}mapDerive(z){return z.$elysia="derive",this.onTransform(z)}affix(z,V,K){if(K==="")return this;const J=["_","-"," "],Z=(B)=>B[0].toUpperCase()+B.slice(1),D=z==="prefix"?(B,H)=>J.includes(B.at(-1)??"")?B+H:B+Z(H):J.includes(K.at(-1)??"")?(B,H)=>H+B:(B,H)=>H+Z(B),U=(B)=>{const H={};switch(B){case"decorator":for(let G in this.decorators)H[D(K,G)]=this.decorators[G];this.decorators=H;break;case"state":for(let G in this.store)H[D(K,G)]=this.store[G];this.store=H;break;case"model":for(let G in this.definitions.type)H[D(K,G)]=this.definitions.type[G];this.definitions.type=H;break;case"error":for(let G in this.definitions.error)H[D(K,G)]=this.definitions.error[G];this.definitions.error=H;break}},j=Array.isArray(V)?V:[V];for(let B of j.some((H)=>H==="all")?["decorator","state","model","error"]:j)U(B);return this}prefix(z,V){return this.affix("prefix",z,V)}suffix(z,V){return this.affix("suffix",z,V)}compile(){if(this.fetch=this.config.aot?xU(this):SU(this),typeof this.server?.reload==="function")this.server.reload({...this.server,fetch:this.fetch});return this}handle=async(z)=>this.fetch(z);fetch=(z)=>(this.fetch=this.config.aot?xU(this):SU(this))(z);handleError=async(z,V)=>(this.handleError=this.config.aot?VD(this):fp(this))(z,V);outerErrorHandler=(z)=>new Response(z.message||z.name||"Error",{status:z?.status??500});listen=(z,V)=>{if(!Bun)throw new Error("Bun to run");if(this.compile(),typeof z==="string"){if(z=+z.trim(),Number.isNaN(z))throw new Error("Port must be a numeric value")}const K=this.fetch,J=typeof z==="object"?{development:!P7,...this.config.serve,...z,websocket:{...this.config.websocket,...CU},fetch:K,error:this.outerErrorHandler}:{development:!P7,...this.config.serve,websocket:{...this.config.websocket,...CU},port:z,fetch:K,error:this.outerErrorHandler};if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.server=Bun?.serve(J),this.event.start.length)(async()=>{const Z=Object.assign(this.decorators,{store:this.store,app:this});for(let D=0;D<this.event.transform.length;D++){const U=this.event.transform[D](Z);if(this.event.transform[D].$elysia==="derive")if(U instanceof Promise)Object.assign(Z,await U);else Object.assign(Z,U)}for(let D=0;D<this.event.start.length;D++)this.event.start[D](Z)})();if(V)V(this.server);return Promise.all(this.lazyLoadModules).then(()=>{Bun?.gc(!1)}),this};stop=async()=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server.stop(),this.event.stop.length)(async()=>{const z=Object.assign(this.decorators,{store:this.store,app:this});for(let V=0;V<this.event.transform.length;V++){const K=this.event.transform[V](z);if(this.event.transform[V].$elysia==="derive")if(K instanceof Promise)Object.assign(z,await K);else Object.assign(z,K)}for(let V=0;V<this.event.stop.length;V++)this.event.stop[V](z)})()};get modules(){return Promise.all(this.lazyLoadModules)}}var n0=u0.Type;var ig=PU(ng(),1),qG0=await ig.createClient({}).on("error",(z)=>console.log("Redis Client Error",z)).connect(),VZ=qG0;var PG0=async()=>{return new o0({name:"redis"}).decorate("redis",VZ).onStop(async()=>{await VZ.disconnect()})},ag=PG0;var TG0=(z={origin:!0,methods:"*",allowedHeaders:"*",exposedHeaders:"*",credentials:!1,maxAge:5,preflight:!0})=>{const{origin:V=!0,methods:K="*",allowedHeaders:J="*",exposedHeaders:Z="*",credentials:D=!1,maxAge:U=5,preflight:j=!0}=z,B=new o0({name:"@elysiajs/cors",seed:z}),H=typeof V==="boolean"?void 0:Array.isArray(V)?V:[V],G=(w,v,W)=>{switch(typeof w){case"string":const f=W.indexOf("://");if(f===-1)return!1;return w===W.slice(f+3);case"function":return w(v);case"object":return w.test(W)}},A=(w,v)=>{if(V===!0){w.headers.Vary="*",w.headers["Access-Control-Allow-Origin"]=v.headers.get("Origin")||"*";return}if(!H?.length)return;const W=[];if(H.length){const f=v.headers.get("Origin")??"";for(let L=0;L<H.length;L++){const i=G(H[L],v,f);if(i===!0){w.headers.Vary=V?"Origin":"*",w.headers["Access-Control-Allow-Origin"]=v.headers.get("Origin")||"*";return}if(i)W.push(i)}}w.headers.Vary="Origin",w.headers["Access-Control-Allow-Origin"]=W.join(", ")},b=(w)=>{if(!K?.length)return;if(K==="*")return w.headers["Access-Control-Allow-Methods"]="*";if(!Array.isArray(K))return w.headers["Access-Control-Allow-Methods"]=K;w.headers["Access-Control-Allow-Methods"]=K.join(", ")};if(j)B.options("/",({set:w,request:v})=>{if(A(w,v),b(w),Z.length)w.headers["Access-Control-Allow-Headers"]=typeof J==="string"?J:J.join(", ");if(U)w.headers["Access-Control-Max-Age"]=U.toString();return new Response("",{status:204})}).options("/*",({set:w,request:v})=>{if(A(w,v),b(w),Z.length)w.headers["Access-Control-Allow-Headers"]=typeof J==="string"?J:J.join(", ");if(U)w.headers["Access-Control-Max-Age"]=U.toString();return new Response("",{status:204})});return B.onRequest(({set:w,request:v})=>{if(A(w,v),b(w),J.length)w.headers["Access-Control-Allow-Headers"]=typeof J==="string"?J:J.join(", ");if(Z.length)w.headers["Access-Control-Exposed-Headers"]=typeof Z==="string"?Z:Z.join(", ");if(D)w.headers["Access-Control-Allow-Credentials"]="true"})},og=TG0;var AG0=new o0().use(ag()).use(og({origin:["localhost:4321"]})),f8=AG0;var D0=function(z,V){if(!z||typeof z!=="object")return!1;if(z instanceof V)return!0;if(!Object.prototype.hasOwnProperty.call(V,U0))throw new Error(`Class "${V.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let K=z.constructor;if(K)while(K){if((U0 in K)&&K[U0]===V[U0])return!0;K=Object.getPrototypeOf(K)}return!1},U0=Symbol.for("drizzle:entityKind"),bW0=Symbol.for("drizzle:hasOwnEntityKind");class tg{static[U0]="ConsoleLogWriter";write(z){console.log(z)}}class KZ{static[U0]="DefaultLogger";writer;constructor(z){this.writer=z?.writer??new tg}logQuery(z,V){const K=V.map((Z)=>{try{return JSON.stringify(Z)}catch{return String(Z)}}),J=K.length?` -- params: [${K.join(", ")}]`:"";this.writer.write(`Query: ${z}${J}`)}}class JZ{static[U0]="NoopLogger";logQuery(){}}var Vu=function(z){return typeof z==="object"&&z!==null&&(zu in z)},L4=function(z){return z[GV]},GV=Symbol.for("drizzle:Name"),ZZ=Symbol.for("drizzle:Schema"),rg=Symbol.for("drizzle:Columns"),UZ=Symbol.for("drizzle:OriginalName"),DZ=Symbol.for("drizzle:BaseName"),sg=Symbol.for("drizzle:IsAlias"),eg=Symbol.for("drizzle:ExtraConfigBuilder"),zu=Symbol.for("drizzle:IsDrizzleTable");class O0{static[U0]="Table";static Symbol={Name:GV,Schema:ZZ,OriginalName:UZ,Columns:rg,BaseName:DZ,IsAlias:sg,ExtraConfigBuilder:eg};[GV];[UZ];[ZZ];[rg];[DZ];[sg]=!1;[eg]=void 0;[zu]=!0;constructor(z,V,K){this[GV]=this[UZ]=z,this[ZZ]=V,this[DZ]=K}}class d0{constructor(z,V){this.table=z,this.config=V,this.name=V.name,this.notNull=V.notNull,this.default=V.default,this.defaultFn=V.defaultFn,this.hasDefault=V.hasDefault,this.primary=V.primaryKey,this.isUnique=V.isUnique,this.uniqueName=V.uniqueName,this.uniqueType=V.uniqueType,this.dataType=V.dataType,this.columnType=V.columnType}static[U0]="Column";name;primary;notNull;default;defaultFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;config;mapFromDriverValue(z){return z}mapToDriverValue(z){return z}}var Ku=Symbol.for("drizzle:PgInlineForeignKeys");class HZ extends O0{static[U0]="PgTable";static Symbol=Object.assign({},O0.Symbol,{InlineForeignKeys:Ku});[Ku]=[];[O0.Symbol.ExtraConfigBuilder]=void 0}class QZ{static[U0]="PgPrimaryKeyBuilder";columns;name;constructor(z,V){this.columns=z,this.name=V}build(z){return new Ju(z,this.columns,this.name)}}class Ju{constructor(z,V,K){this.table=z,this.columns=V,this.name=K}static[U0]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[HZ.Symbol.Name]}_${this.columns.map((z)=>z.name).join("_")}_pk`}}var Z6=Symbol.for("drizzle:SubqueryConfig");class k6{static[U0]="Subquery";[Z6];constructor(z,V,K,J=!1){this[Z6]={sql:z,selection:V,alias:K,isWith:J}}}class j3 extends k6{static[U0]="WithSubquery"}var Zu=function(z,...V){return z(...V)};var Uu="0.29.0";var jZ,BZ,Du={startActiveSpan(z,V){if(!jZ)return V();if(!BZ)BZ=jZ.trace.getTracer("drizzle-orm",Uu);return Zu((K,J)=>J.startActiveSpan(z,(Z)=>{try{return V(Z)}catch(D){throw Z.setStatus({code:K.SpanStatusCode.ERROR,message:D instanceof Error?D.message:"Unknown error"}),D}finally{Z.end()}}),jZ,BZ)}};var Q6=Symbol.for("drizzle:ViewBaseConfig");var MZ=function(z){return typeof z==="object"&&z!==null&&("getSQL"in z)&&typeof z.getSQL==="function"},EG0=function(z){const V={sql:"",params:[]};for(let K of z)if(V.sql+=K.sql,V.params.push(...K.params),K.typings?.length){if(!V.typings)V.typings=[];V.typings.push(...K.typings)}return V};var Hu=function(z){return typeof z==="object"&&z!==null&&("mapToDriverValue"in z)&&typeof z.mapToDriverValue==="function"};var r=function(z,...V){const K=[];if(V.length>0||z.length>0&&z[0]!=="")K.push(new j6(z[0]));for(let[J,Z]of V.entries())K.push(Z,new j6(z[J+1]));return new I0(K)};var B3=function(z,V){return z.map((K)=>{if(D0(K,m5)){if(!(K.name in V))throw new Error(`No value for placeholder "${K.name}" was provided`);return V[K.name]}return K})};class j6{static[U0]="StringChunk";value;constructor(z){this.value=Array.isArray(z)?z:[z]}getSQL(){return new I0([this])}}class I0{constructor(z){this.queryChunks=z}static[U0]="SQL";decoder=Qu;shouldInlineParams=!1;append(z){return this.queryChunks.push(...z.queryChunks),this}toQuery(z){return Du.startActiveSpan("drizzle.buildSQL",(V)=>{const K=this.buildQueryFromSourceParams(this.queryChunks,z);return V?.setAttributes({"drizzle.query.text":K.sql,"drizzle.query.params":JSON.stringify(K.params)}),K})}buildQueryFromSourceParams(z,V){const K=Object.assign({},V,{inlineParams:V.inlineParams||this.shouldInlineParams,paramStartIndex:V.paramStartIndex||{value:0}}),{escapeName:J,escapeParam:Z,prepareTyping:D,inlineParams:U,paramStartIndex:j}=K;return EG0(z.map((B)=>{if(D0(B,j6))return{sql:B.value.join(""),params:[]};if(D0(B,OV))return{sql:J(B.value),params:[]};if(B===void 0)return{sql:"",params:[]};if(Array.isArray(B)){const H=[new j6("(")];for(let[G,A]of B.entries())if(H.push(A),G<B.length-1)H.push(new j6(", "));return H.push(new j6(")")),this.buildQueryFromSourceParams(H,K)}if(D0(B,I0))return this.buildQueryFromSourceParams(B.queryChunks,{...K,inlineParams:U||B.shouldInlineParams});if(D0(B,O0)){const H=B[O0.Symbol.Schema],G=B[O0.Symbol.Name];return{sql:H===void 0?J(G):J(H)+"."+J(G),params:[]}}if(D0(B,d0))return{sql:J(B.table[O0.Symbol.Name])+"."+J(B.name),params:[]};if(D0(B,B8)){const H=B[Q6].schema,G=B[Q6].name;return{sql:H===void 0?J(G):J(H)+"."+J(G),params:[]}}if(D0(B,j8)){const H=B.value===null?null:B.encoder.mapToDriverValue(B.value);if(D0(H,I0))return this.buildQueryFromSourceParams([H],K);if(U)return{sql:this.mapInlineParam(H,K),params:[]};let G;if(D!==void 0)G=[D(B.encoder)];return{sql:Z(j.value++,H),params:[H],typings:G}}if(D0(B,m5))return{sql:Z(j.value++,B),params:[B]};if(D0(B,I0.Aliased)&&B.fieldAlias!==void 0)return{sql:J(B.fieldAlias),params:[]};if(D0(B,k6)){if(B[Z6].isWith)return{sql:J(B[Z6].alias),params:[]};return this.buildQueryFromSourceParams([new j6("("),B[Z6].sql,new j6(") "),new OV(B[Z6].alias)],K)}if(MZ(B))return this.buildQueryFromSourceParams([new j6("("),B.getSQL(),new j6(")")],K);if(D0(B,M3))return this.buildQueryFromSourceParams([B.sourceTable,new j6("."),r.identifier(B.fieldName)],K);if(U)return{sql:this.mapInlineParam(B,K),params:[]};return{sql:Z(j.value++,B),params:[B]}}))}mapInlineParam(z,{escapeString:V}){if(z===null)return"null";if(typeof z==="number"||typeof z==="boolean")return z.toString();if(typeof z==="string")return V(z);if(typeof z==="object"){const K=z.toString();if(K==="[object Object]")return V(JSON.stringify(z));return V(K)}throw new Error("Unexpected param value: "+z)}getSQL(){return this}as(z){if(z===void 0)return this;return new I0.Aliased(this,z)}mapWith(z){return this.decoder=typeof z==="function"?{mapFromDriverValue:z}:z,this}inlineParams(){return this.shouldInlineParams=!0,this}}class OV{constructor(z){this.value=z}static[U0]="Name";brand;getSQL(){return new I0([this])}}var Qu={mapFromDriverValue:(z)=>z},ju={mapToDriverValue:(z)=>z},HR0={...Qu,...ju};class j8{constructor(z,V=ju){this.value=z,this.encoder=V}static[U0]="Param";brand;getSQL(){return new I0([this])}}((z)=>{function V(){return new I0([])}z.empty=V;function K(B){return new I0(B)}z.fromList=K;function J(B){return new I0([new j6(B)])}z.raw=J;function Z(B,H){const G=[];for(let[A,b]of B.entries()){if(A>0&&H!==void 0)G.push(H);G.push(b)}return new I0(G)}z.join=Z;function D(B){return new OV(B)}z.identifier=D;function U(B){return new m5(B)}z.placeholder=U;function j(B,H){return new j8(B,H)}z.param=j})(r||(r={}));((z)=>{class V{constructor(K,J){this.sql=K,this.fieldAlias=J}static[U0]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new V(this.sql,this.fieldAlias)}}z.Aliased=V})(I0||(I0={}));class m5{constructor(z){this.name=z}static[U0]="Placeholder";getSQL(){return new I0([this])}}class B8{static[U0]="View";[Q6];constructor({name:z,schema:V,selectedFields:K,query:J}){this[Q6]={name:z,originalName:z,schema:V,selectedFields:K,query:J,isExisting:!J,isAlias:!1}}getSQL(){return new I0([this])}}d0.prototype.getSQL=function(){return new I0([this])};O0.prototype.getSQL=function(){return new I0([this])};k6.prototype.getSQL=function(){return new I0([this])};var l6=function(z,V){if(Hu(V)&&!MZ(z)&&!D0(z,j8)&&!D0(z,m5)&&!D0(z,d0)&&!D0(z,O0)&&!D0(z,B8))return new j8(z,V);return z},J5=function(...z){const V=z.filter((K)=>K!==void 0);if(V.length===0)return;if(V.length===1)return new I0(V);return new I0([new j6("("),r.join(V,new j6(" and ")),new j6(")")])},Mu=function(...z){const V=z.filter((K)=>K!==void 0);if(V.length===0)return;if(V.length===1)return new I0(V);return new I0([new j6("("),r.join(V,new j6(" or ")),new j6(")")])},c5=function(z){return r`not ${z}`},Xu=function(z,V){if(Array.isArray(V)){if(V.length===0)throw new Error("inArray requires at least one value");return r`${z} in ${V.map((K)=>l6(K,z))}`}return r`${z} in ${l6(V,z)}`},Lu=function(z,V){if(Array.isArray(V)){if(V.length===0)throw new Error("notInArray requires at least one value");return r`${z} not in ${V.map((K)=>l6(K,z))}`}return r`${z} not in ${l6(V,z)}`},wu=function(z){return r`${z} is null`},Nu=function(z){return r`${z} is not null`},qu=function(z){return r`exists (${z})`},Pu=function(z){return r`not exists (${z})`},Tu=function(z,V,K){return r`${z} between ${l6(V,z)} and ${l6(K,z)}`},Au=function(z,V,K){return r`${z} not between ${l6(V,z)} and ${l6(K,z)}`},Eu=function(z,V){return r`${z} like ${V}`},vu=function(z,V){return r`${z} not like ${V}`},Cu=function(z,V){return r`${z} ilike ${V}`},hu=function(z,V){return r`${z} not ilike ${V}`};var l0=(z,V)=>{return r`${z} = ${l6(V,z)}`},Bu=(z,V)=>{return r`${z} <> ${l6(V,z)}`},Gu=(z,V)=>{return r`${z} > ${l6(V,z)}`},Ou=(z,V)=>{return r`${z} >= ${l6(V,z)}`},Fu=(z,V)=>{return r`${z} < ${l6(V,z)}`},Iu=(z,V)=>{return r`${z} <= ${l6(V,z)}`};var Wu=function(z){return r`${z} asc`},Ru=function(z){return r`${z} desc`};var Yu=function(){return{and:J5,between:Tu,eq:l0,exists:qu,gt:Gu,gte:Ou,ilike:Cu,inArray:Xu,isNull:wu,isNotNull:Nu,like:Eu,lt:Fu,lte:Iu,ne:Bu,not:c5,notBetween:Au,notExists:Pu,notLike:vu,notIlike:hu,notInArray:Lu,or:Mu,sql:r}},bu=function(){return{sql:r,asc:Wu,desc:Ru}},fu=function(z,V){if(Object.keys(z).length===1&&("default"in z)&&!D0(z.default,O0))z=z.default;const K={},J={},Z={};for(let[D,U]of Object.entries(z))if(Vu(U)){const j=U[O0.Symbol.Name],B=J[j];K[j]=D,Z[D]={tsName:D,dbName:U[O0.Symbol.Name],schema:U[O0.Symbol.Schema],columns:U[O0.Symbol.Columns],relations:B?.relations??{},primaryKey:B?.primaryKey??[]};for(let G of Object.values(U[O0.Symbol.Columns]))if(G.primary)Z[D].primaryKey.push(G);const H=U[O0.Symbol.ExtraConfigBuilder]?.(U);if(H){for(let G of Object.values(H))if(D0(G,QZ))Z[D].primaryKey.push(...G.columns)}}else if(D0(U,ku)){const j=U.table[O0.Symbol.Name],B=K[j],H=U.config(V(U.table));let G;for(let[A,b]of Object.entries(H))if(B){const w=Z[B];if(w.relations[A]=b,G)w.primaryKey.push(...G)}else{if(!(j in J))J[j]={relations:{},primaryKey:G};J[j].relations[A]=b}}return{tables:Z,tableNamesMap:K}};var vG0=function(z){return function V(K,J){return new w4(z,K,J,J?.fields.reduce((Z,D)=>Z&&D.notNull,!0)??!1)}},CG0=function(z){return function V(K,J){return new G3(z,K,J)}},xu=function(z,V,K){if(D0(K,w4)&&K.config)return{fields:K.config.fields,references:K.config.references};const J=V[K.referencedTable[O0.Symbol.Name]];if(!J)throw new Error(`Table "${K.referencedTable[O0.Symbol.Name]}" not found in schema`);const Z=z[J];if(!Z)throw new Error(`Table "${J}" not found in schema`);const D=K.sourceTable,U=V[D[O0.Symbol.Name]];if(!U)throw new Error(`Table "${D[O0.Symbol.Name]}" not found in schema`);const j=[];for(let B of Object.values(Z.relations))if(K.relationName&&K!==B&&B.relationName===K.relationName||!K.relationName&&B.referencedTable===K.sourceTable)j.push(B);if(j.length>1)throw K.relationName?new Error(`There are multiple relations with name "${K.relationName}" in table "${J}"`):new Error(`There are multiple relations between "${J}" and "${K.sourceTable[O0.Symbol.Name]}". Please specify relation name`);if(j[0]&&D0(j[0],w4)&&j[0].config)return{fields:j[0].config.references,references:j[0].config.fields};throw new Error(`There is not enough information to infer relation "${U}.${K.fieldName}"`)},Su=function(z){return{one:vG0(z),many:CG0(z)}},FV=function(z,V,K,J,Z=(D)=>D){const D={};for(let[U,j]of J.entries())if(j.isJson){const B=V.relations[j.tsKey],H=K[U],G=typeof H==="string"?JSON.parse(H):H;D[j.tsKey]=D0(B,w4)?G&&FV(z,z[j.relationTableTsKey],G,j.selection,Z):G.map((A)=>FV(z,z[j.relationTableTsKey],A,j.selection,Z))}else{const B=Z(K[U]),H=j.field;let G;if(D0(H,d0))G=H;else if(D0(H,I0))G=H.decoder;else G=H.sql.decoder;D[j.tsKey]=B===null?null:G.mapFromDriverValue(B)}return D};class M3{constructor(z,V,K){this.sourceTable=z,this.referencedTable=V,this.relationName=K,this.referencedTableName=V[O0.Symbol.Name]}static[U0]="Relation";referencedTableName;fieldName}class ku{constructor(z,V){this.table=z,this.config=V}static[U0]="Relations"}class w4 extends M3{constructor(z,V,K,J){super(z,V,K?.relationName);this.config=K,this.isNullable=J}static[U0]="One";withFieldName(z){const V=new w4(this.sourceTable,this.referencedTable,this.config,this.isNullable);return V.fieldName=z,V}}class G3 extends M3{constructor(z,V,K){super(z,V,K?.relationName);this.config=K}static[U0]="Many";withFieldName(z){const V=new G3(this.sourceTable,this.referencedTable,this.config);return V.fieldName=z,V}}class _6{static[U0]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(z){return this.then(void 0,z)}finally(z){return this.then((V)=>{return z?.(),V},(V)=>{throw z?.(),V})}then(z,V){return this.execute().then(z,V)}}var hG0=function(z,V,K,J,Z=z){const D=new V6(z,J,Z),U=Object.fromEntries(Object.entries(V).map(([B,H])=>{const G=H,A=G.build(D);return D[GZ].push(...G.buildForeignKeys(A,D)),[B,A]})),j=Object.assign(D,U);if(j[O0.Symbol.Columns]=U,K)j[V6.Symbol.ExtraConfigBuilder]=K;return j};var GZ=Symbol.for("drizzle:SQLiteInlineForeignKeys");class V6 extends O0{static[U0]="SQLiteTable";static Symbol=Object.assign({},O0.Symbol,{InlineForeignKeys:GZ});[O0.Symbol.Columns];[GZ]=[];[O0.Symbol.ExtraConfigBuilder]=void 0}var O3=(z,V,K)=>{return hG0(z,V,K)};var OZ=function(z,V,K){const J={},Z=z.reduce((D,{path:U,field:j},B)=>{let H;if(D0(j,d0))H=j;else if(D0(j,I0))H=j.decoder;else H=j.sql.decoder;let G=D;for(let[A,b]of U.entries())if(A<U.length-1){if(!(b in G))G[b]={};G=G[b]}else{const w=V[B],v=G[b]=w===null?null:H.mapFromDriverValue(w);if(K&&D0(j,d0)&&U.length===2){const W=U[0];if(!(W in J))J[W]=v===null?L4(j.table):!1;else if(typeof J[W]==="string"&&J[W]!==L4(j.table))J[W]=!1}}return D},{});if(K&&Object.keys(J).length>0){for(let[D,U]of Object.entries(J))if(typeof U==="string"&&!K[U])Z[D]=null}return Z},M8=function(z,V){return Object.entries(z).reduce((K,[J,Z])=>{if(typeof J!=="string")return K;const D=V?[...V,J]:[J];if(D0(Z,d0)||D0(Z,I0)||D0(Z,I0.Aliased))K.push({path:D,field:Z});else if(D0(Z,O0))K.push(...M8(Z[O0.Symbol.Columns],D));else K.push(...M8(Z,D));return K},[])},FZ=function(z,V){const K=Object.keys(z),J=Object.keys(V);if(K.length!==J.length)return!1;for(let[Z,D]of K.entries())if(D!==J[Z])return!1;return!0},IV=function(z,V){const K=Object.entries(V).filter(([,J])=>J!==void 0).map(([J,Z])=>{if(D0(Z,I0))return[J,Z];else return[J,new j8(Z,z[O0.Symbol.Columns][J])]});if(K.length===0)throw new Error("No values to set");return Object.fromEntries(K)},yu=function(z,V){for(let K of V)for(let J of Object.getOwnPropertyNames(K.prototype))Object.defineProperty(z.prototype,J,Object.getOwnPropertyDescriptor(K.prototype,J)||Object.create(null))},_u=function(z){return z[O0.Symbol.Columns]},IZ=function(z){return D0(z,k6)?z[Z6].alias:D0(z,B8)?z[Q6].name:D0(z,I0)?void 0:z[O0.Symbol.IsAlias]?z[O0.Symbol.Name]:z[O0.Symbol.BaseName]};class XZ extends _6{constructor(z,V,K){super();this.table=z,this.session=V,this.dialect=K,this.config={table:z}}static[U0]="SQLiteDelete";config;where(z){return this.config.where=z,this}returning(z=this.table[V6.Symbol.Columns]){return this.config.returning=M8(z),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){const{typings:z,...V}=this.dialect.sqlToQuery(this.getSQL());return V}prepare(z){return this.session[z?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}run=(z)=>{return this.prepare(!0).run(z)};all=(z)=>{return this.prepare(!0).all(z)};get=(z)=>{return this.prepare(!0).get(z)};values=(z)=>{return this.prepare(!0).values(z)};async execute(z){return this.prepare(!0).execute(z)}$dynamic(){return this}}class LZ{constructor(z,V,K){this.table=z,this.session=V,this.dialect=K}static[U0]="SQLiteInsertBuilder";values(z){if(z=Array.isArray(z)?z:[z],z.length===0)throw new Error("values() must be called with at least one value");const V=z.map((K)=>{const J={},Z=this.table[O0.Symbol.Columns];for(let D of Object.keys(K)){const U=K[D];J[D]=D0(U,I0)?U:new j8(U,Z[D])}return J});return new $u(this.table,V,this.session,this.dialect)}}class $u extends _6{constructor(z,V,K,J){super();this.session=K,this.dialect=J,this.config={table:z,values:V}}static[U0]="SQLiteInsert";config;returning(z=this.config.table[V6.Symbol.Columns]){return this.config.returning=M8(z),this}onConflictDoNothing(z={}){if(z.target===void 0)this.config.onConflict=r`do nothing`;else{const V=Array.isArray(z.target)?r`${z.target}`:r`${[z.target]}`,K=z.where?r` where ${z.where}`:r``;this.config.onConflict=r`${V} do nothing${K}`}return this}onConflictDoUpdate(z){const V=Array.isArray(z.target)?r`${z.target}`:r`${[z.target]}`,K=z.where?r` where ${z.where}`:r``,J=this.dialect.buildUpdateSet(this.config.table,IV(this.config.table,z.set));return this.config.onConflict=r`${V} do update set ${J}${K}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){const{typings:z,...V}=this.dialect.sqlToQuery(this.getSQL());return V}prepare(z){return this.session[z?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}run=(z)=>{return this.prepare(!0).run(z)};all=(z)=>{return this.prepare(!0).all(z)};get=(z)=>{return this.prepare(!0).get(z)};values=(z)=>{return this.prepare(!0).values(z)};async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}var XV=function(z,V){return new Proxy(z,new F3(V,!1))};var x8=function(z,V){return new Proxy(z,new p5(new Proxy(z.table,new F3(V,!1))))},wZ=function(z,V){return new I0.Aliased(I3(z.sql,V),z.fieldAlias)},I3=function(z,V){return r.join(z.queryChunks.map((K)=>{if(D0(K,d0))return x8(K,V);if(D0(K,I0))return I3(K,V);if(D0(K,I0.Aliased))return wZ(K,V);return K}))};class p5{constructor(z){this.table=z}static[U0]="ColumnAliasProxyHandler";get(z,V){if(V==="table")return this.table;return z[V]}}class F3{constructor(z,V){this.alias=z,this.replaceOriginalName=V}static[U0]="TableAliasProxyHandler";get(z,V){if(V===O0.Symbol.IsAlias)return!0;if(V===O0.Symbol.Name)return this.alias;if(this.replaceOriginalName&&V===O0.Symbol.OriginalName)return this.alias;if(V===Q6)return{...z[Q6],name:this.alias,isAlias:!0};if(V===O0.Symbol.Columns){const J=z[O0.Symbol.Columns];if(!J)return J;const Z={};return Object.keys(J).map((D)=>{Z[D]=new Proxy(J[D],new p5(new Proxy(z,this)))}),Z}const K=z[V];if(D0(K,d0))return new Proxy(K,new p5(new Proxy(z,this)));return K}}class l5 extends Error{static[U0]="DrizzleError";constructor({message:z,cause:V}){super(z);this.name="DrizzleError",this.cause=V}}class NZ extends l5{static[U0]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}class qZ{static[U0]="ColumnBuilder";config;constructor(z,V,K){this.config={name:z,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:V,columnType:K}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(z){return this.config.default=z,this.config.hasDefault=!0,this}$defaultFn(z){return this.config.defaultFn=z,this.config.hasDefault=!0,this}$default=this.$defaultFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}}class PZ{static[U0]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(z,V){if(this.reference=()=>{const{name:K,columns:J,foreignColumns:Z}=z();return{name:K,columns:J,foreignTable:Z[0].table,foreignColumns:Z}},V)this._onUpdate=V.onUpdate,this._onDelete=V.onDelete}onUpdate(z){return this._onUpdate=z,this}onDelete(z){return this._onDelete=z,this}build(z){return new gu(z,this)}}class gu{constructor(z,V){this.table=z,this.reference=V.reference,this.onUpdate=V._onUpdate,this.onDelete=V._onDelete}static[U0]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){const{name:z,columns:V,foreignColumns:K}=this.reference(),J=V.map((U)=>U.name),Z=K.map((U)=>U.name),D=[this.table[V6.Symbol.Name],...J,K[0].table[V6.Symbol.Name],...Z];return z??`${D.join("_")}_fk`}}var uu=function(z,V){return`${z[V6.Symbol.Name]}_${V.join("_")}_unique`};class LV extends qZ{static[U0]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(z,V={}){return this.foreignKeyConfigs.push({ref:z,actions:V}),this}unique(z){return this.config.isUnique=!0,this.config.uniqueName=z,this}buildForeignKeys(z,V){return this.foreignKeyConfigs.map(({ref:K,actions:J})=>{return((Z,D)=>{const U=new PZ(()=>{const j=Z();return{columns:[z],foreignColumns:[j]}});if(D.onUpdate)U.onUpdate(D.onUpdate);if(D.onDelete)U.onDelete(D.onDelete);return U.build(V)})(K,J)})}}class N4 extends d0{constructor(z,V){if(!V.uniqueName)V.uniqueName=uu(z,[V.name]);super(z,V);this.table=z}static[U0]="SQLiteColumn"}var P8=function(z,V={}){return V.mode==="json"?new cu(z):new du(z,V)};class du extends LV{static[U0]="SQLiteTextBuilder";constructor(z,V){super(z,"string","SQLiteText");this.config.enumValues=V.enum,this.config.length=V.length}build(z){return new mu(z,this.config)}}class mu extends N4{static[U0]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(z,V){super(z,V)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class cu extends LV{static[U0]="SQLiteTextJsonBuilder";constructor(z){super(z,"json","SQLiteTextJson")}build(z){return new pu(z,this.config)}}class pu extends N4{static[U0]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(z){return JSON.parse(z)}mapToDriverValue(z){return JSON.stringify(z)}}class X3 extends B8{static[U0]="SQLiteViewBase"}class TZ{static[U0]="SQLiteDialect";escapeName(z){return`"${z}"`}escapeParam(z){return"?"}escapeString(z){return`'${z.replace(/'/g,"''")}'`}buildDeleteQuery({table:z,where:V,returning:K}){const J=K?r` returning ${this.buildSelection(K,{isSingleTable:!0})}`:void 0,Z=V?r` where ${V}`:void 0;return r`delete from ${z}${Z}${J}`}buildUpdateSet(z,V){const K=Object.entries(V),J=K.length;return r.join(K.flatMap(([Z,D],U)=>{const j=z[O0.Symbol.Columns][Z],B=r`${r.identifier(j.name)} = ${D}`;if(U<J-1)return[B,r.raw(", ")];return[B]}))}buildUpdateQuery({table:z,set:V,where:K,returning:J}){const Z=this.buildUpdateSet(z,V),D=J?r` returning ${this.buildSelection(J,{isSingleTable:!0})}`:void 0,U=K?r` where ${K}`:void 0;return r`update ${z} set ${Z}${U}${D}`}buildSelection(z,{isSingleTable:V=!1}={}){const K=z.length,J=z.flatMap(({field:Z},D)=>{const U=[];if(D0(Z,I0.Aliased)&&Z.isSelectionField)U.push(r.identifier(Z.fieldAlias));else if(D0(Z,I0.Aliased)||D0(Z,I0)){const j=D0(Z,I0.Aliased)?Z.sql:Z;if(V)U.push(new I0(j.queryChunks.map((B)=>{if(D0(B,d0))return r.identifier(B.name);return B})));else U.push(j);if(D0(Z,I0.Aliased))U.push(r` as ${r.identifier(Z.fieldAlias)}`)}else if(D0(Z,d0)){const j=Z.table[O0.Symbol.Name],B=Z.name;if(V)U.push(r.identifier(B));else U.push(r`${r.identifier(j)}.${r.identifier(B)}`)}if(D<K-1)U.push(r`, `);return U});return r.join(J)}buildSelectQuery({withList:z,fields:V,fieldsFlat:K,where:J,having:Z,table:D,joins:U,orderBy:j,groupBy:B,limit:H,offset:G,distinct:A,setOperators:b}){const w=K??M8(V);for(let R of w)if(D0(R.field,d0)&&L4(R.field.table)!==(D0(D,k6)?D[Z6].alias:D0(D,X3)?D[Q6].name:D0(D,I0)?void 0:L4(D))&&!((y)=>U?.some(({alias:$})=>$===(y[O0.Symbol.IsAlias]?L4(y):y[O0.Symbol.BaseName])))(R.field.table)){const y=L4(R.field.table);throw new Error(`Your "${R.path.join("->")}" field references a column "${y}"."${R.field.name}", but the table "${y}" is not part of the query! Did you forget to join it?`)}const v=!U||U.length===0;let W;if(z?.length){const R=[r`with `];for(let[y,$]of z.entries())if(R.push(r`${r.identifier($[Z6].alias)} as (${$[Z6].sql})`),y<z.length-1)R.push(r`, `);R.push(r` `),W=r.join(R)}const f=A?r` distinct`:void 0,L=this.buildSelection(w,{isSingleTable:v}),i=(()=>{if(D0(D,O0)&&D[O0.Symbol.OriginalName]!==D[O0.Symbol.Name])return r`${r.identifier(D[O0.Symbol.OriginalName])} ${r.identifier(D[O0.Symbol.Name])}`;return D})(),n=[];if(U)for(let[R,y]of U.entries()){if(R===0)n.push(r` `);const $=y.table;if(D0($,V6)){const z0=$[V6.Symbol.Name],e=$[V6.Symbol.Schema],G0=$[V6.Symbol.OriginalName],F=z0===G0?void 0:y.alias;n.push(r`${r.raw(y.joinType)} join ${e?r`${r.identifier(e)}.`:void 0}${r.identifier(G0)}${F&&r` ${r.identifier(F)}`} on ${y.on}`)}else n.push(r`${r.raw(y.joinType)} join ${$} on ${y.on}`);if(R<U.length-1)n.push(r` `)}const s=r.join(n),o=J?r` where ${J}`:void 0,t=Z?r` having ${Z}`:void 0,K0=[];if(j){for(let[R,y]of j.entries())if(K0.push(y),R<j.length-1)K0.push(r`, `)}const H0=[];if(B){for(let[R,y]of B.entries())if(H0.push(y),R<B.length-1)H0.push(r`, `)}const T0=H0.length>0?r` group by ${r.join(H0)}`:void 0,T=K0.length>0?r` order by ${r.join(K0)}`:void 0,k=H?r` limit ${H}`:void 0,Y=G?r` offset ${G}`:void 0,V0=r`${W}select${f} ${L} from ${i}${s}${o}${T0}${t}${T}${k}${Y}`;if(b.length>0)return this.buildSetOperations(V0,b);return V0}buildSetOperations(z,V){const[K,...J]=V;if(!K)throw new Error("Cannot pass undefined values to any set operator");if(J.length===0)return this.buildSetOperationQuery({leftSelect:z,setOperator:K});return this.buildSetOperations(this.buildSetOperationQuery({leftSelect:z,setOperator:K}),J)}buildSetOperationQuery({leftSelect:z,setOperator:{type:V,isAll:K,rightSelect:J,limit:Z,orderBy:D,offset:U}}){const j=r`${z.getSQL()} `,B=r`${J.getSQL()}`;let H;if(D&&D.length>0){const w=[];for(let v of D)if(D0(v,N4))w.push(r.identifier(v.name));else if(D0(v,I0)){for(let W=0;W<v.queryChunks.length;W++){const f=v.queryChunks[W];if(D0(f,N4))v.queryChunks[W]=r.identifier(f.name)}w.push(r`${v}`)}else w.push(r`${v}`);H=r` order by ${r.join(w,r`, `)}`}const G=Z?r` limit ${Z}`:void 0,A=r.raw(`${V} ${K?"all ":""}`),b=U?r` offset ${U}`:void 0;return r`${j}${A}${B}${H}${G}${b}`}buildInsertQuery({table:z,values:V,onConflict:K,returning:J}){const Z=[],D=z[O0.Symbol.Columns],U=Object.entries(D),j=U.map(([,A])=>r.identifier(A.name));for(let[A,b]of V.entries()){const w=[];for(let[v,W]of U){const f=b[v];if(f===void 0||D0(f,j8)&&f.value===void 0){let L;if(W.default!==null&&W.default!==void 0)L=D0(W.default,I0)?W.default:r.param(W.default,W);else if(W.defaultFn!==void 0){const i=W.defaultFn();L=D0(i,I0)?i:r.param(i,W)}else L=r`null`;w.push(L)}else w.push(f)}if(Z.push(w),A<V.length-1)Z.push(r`, `)}const B=r.join(Z),H=J?r` returning ${this.buildSelection(J,{isSingleTable:!0})}`:void 0,G=K?r` on conflict ${K}`:void 0;return r`insert into ${z} ${j} values ${B}${G}${H}`}sqlToQuery(z){return z.toQuery({escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString})}buildRelationalQuery({fullSchema:z,schema:V,tableNamesMap:K,table:J,tableConfig:Z,queryConfig:D,tableAlias:U,nestedQueryRelation:j,joinOn:B}){let H=[],G,A,b=[],w;const v=[];if(D===!0)H=Object.entries(Z.columns).map(([L,i])=>({dbKey:i.name,tsKey:L,field:x8(i,U),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{const f=Object.fromEntries(Object.entries(Z.columns).map(([t,K0])=>[t,x8(K0,U)]));if(D.where){const t=typeof D.where==="function"?D.where(f,Yu()):D.where;w=t&&I3(t,U)}const L=[];let i=[];if(D.columns){let t=!1;for(let[K0,H0]of Object.entries(D.columns)){if(H0===void 0)continue;if(K0 in Z.columns){if(!t&&H0===!0)t=!0;i.push(K0)}}if(i.length>0)i=t?i.filter((K0)=>D.columns?.[K0]===!0):Object.keys(Z.columns).filter((K0)=>!i.includes(K0))}else i=Object.keys(Z.columns);for(let t of i){const K0=Z.columns[t];L.push({tsKey:t,value:K0})}let n=[];if(D.with)n=Object.entries(D.with).filter((t)=>!!t[1]).map(([t,K0])=>({tsKey:t,queryConfig:K0,relation:Z.relations[t]}));let s;if(D.extras){s=typeof D.extras==="function"?D.extras(f,{sql:r}):D.extras;for(let[t,K0]of Object.entries(s))L.push({tsKey:t,value:wZ(K0,U)})}for(let{tsKey:t,value:K0}of L)H.push({dbKey:D0(K0,I0.Aliased)?K0.fieldAlias:Z.columns[t].name,tsKey:t,field:D0(K0,d0)?x8(K0,U):K0,relationTableTsKey:void 0,isJson:!1,selection:[]});let o=typeof D.orderBy==="function"?D.orderBy(f,bu()):D.orderBy??[];if(!Array.isArray(o))o=[o];b=o.map((t)=>{if(D0(t,d0))return x8(t,U);return I3(t,U)}),G=D.limit,A=D.offset;for(let{tsKey:t,queryConfig:K0,relation:H0}of n){const T0=xu(V,K,H0),T=H0.referencedTable[O0.Symbol.Name],k=K[T],Y=`${U}_${t}`,V0=J5(...T0.fields.map(($,z0)=>l0(x8(T0.references[z0],Y),x8($,U)))),R=this.buildRelationalQuery({fullSchema:z,schema:V,tableNamesMap:K,table:z[k],tableConfig:V[k],queryConfig:D0(H0,w4)?K0===!0?{limit:1}:{...K0,limit:1}:K0,tableAlias:Y,joinOn:V0,nestedQueryRelation:H0}),y=r`(${R.sql})`.as(t);H.push({dbKey:t,tsKey:t,field:y,relationTableTsKey:k,isJson:!0,selection:R.selection})}}if(H.length===0)throw new l5({message:`No fields selected for table "${Z.tsName}" ("${U}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});let W;if(w=J5(B,w),j){let f=r`json_array(${r.join(H.map(({field:n})=>D0(n,N4)?r.identifier(n.name):D0(n,I0.Aliased)?n.sql:n),r`, `)})`;if(D0(j,G3))f=r`coalesce(json_group_array(${f}), json_array())`;const L=[{dbKey:"data",tsKey:"data",field:f.as("data"),isJson:!0,relationTableTsKey:Z.tsName,selection:H}];if(G!==void 0||A!==void 0||b.length>0)W=this.buildSelectQuery({table:XV(J,U),fields:{},fieldsFlat:[{path:[],field:r.raw("*")}],where:w,limit:G,offset:A,orderBy:b,setOperators:[]}),w=void 0,G=void 0,A=void 0,b=void 0;else W=XV(J,U);W=this.buildSelectQuery({table:D0(W,V6)?W:new k6(W,{},U),fields:{},fieldsFlat:L.map(({field:n})=>({path:[],field:D0(n,d0)?x8(n,U):n})),joins:v,where:w,limit:G,offset:A,orderBy:b,setOperators:[]})}else W=this.buildSelectQuery({table:XV(J,U),fields:{},fieldsFlat:H.map(({field:f})=>({path:[],field:D0(f,d0)?x8(f,U):f})),joins:v,where:w,limit:G,offset:A,orderBy:b,setOperators:[]});return{tableTsKey:Z.tsName,sql:W,selection:H}}}class AZ extends TZ{static[U0]="SQLiteSyncDialect";migrate(z,V){const K=r`
			CREATE TABLE IF NOT EXISTS "__drizzle_migrations" (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;V.run(K);const Z=V.values(r`SELECT id, hash, created_at FROM "__drizzle_migrations" ORDER BY created_at DESC LIMIT 1`)[0]??void 0;V.run(r`BEGIN`);try{for(let D of z)if(!Z||Number(Z[2])<D.folderMillis){for(let U of D.sql)V.run(r.raw(U));V.run(r`INSERT INTO "__drizzle_migrations" ("hash", "created_at") VALUES(${D.hash}, ${D.folderMillis})`)}V.run(r`COMMIT`)}catch(D){throw V.run(r`ROLLBACK`),D}}}class EZ extends TZ{static[U0]="SQLiteAsyncDialect";async migrate(z,V){const K=r`
			CREATE TABLE IF NOT EXISTS "__drizzle_migrations" (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await V.run(K);const Z=(await V.values(r`SELECT id, hash, created_at FROM "__drizzle_migrations" ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await V.transaction(async(D)=>{for(let U of z)if(!Z||Number(Z[2])<U.folderMillis){for(let j of U.sql)await D.run(r.raw(j));await D.run(r`INSERT INTO "__drizzle_migrations" ("hash", "created_at") VALUES(${U.hash}, ${U.folderMillis})`)}})}}class vZ{static[U0]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class n6{static[U0]="SelectionProxyHandler";config;constructor(z){this.config={...z}}get(z,V){if(V===Z6)return{...z[Z6],selection:new Proxy(z[Z6].selection,this)};if(V===Q6)return{...z[Q6],selectedFields:new Proxy(z[Q6].selectedFields,this)};if(typeof V==="symbol")return z[V];const J=(D0(z,k6)?z[Z6].selection:D0(z,B8)?z[Q6].selectedFields:z)[V];if(D0(J,I0.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!J.isSelectionField)return J.sql;const Z=J.clone();return Z.isSelectionField=!0,Z}if(D0(J,I0)){if(this.config.sqlBehavior==="sql")return J;throw new Error(`You tried to reference "${V}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}if(D0(J,d0)){if(this.config.alias)return new Proxy(J,new p5(new Proxy(J.table,new F3(this.config.alias,this.config.replaceOriginalName??!1))));return J}if(typeof J!=="object"||J===null)return J;return new Proxy(J,new n6(this.config))}}var wV=function(z,V){return(K,J,...Z)=>{const D=[J,...Z].map((U)=>({type:z,isAll:V,rightSelect:U}));for(let U of D)if(!FZ(K.getSelectedFields(),U.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return K.addSetOperators(D)}};class T8{static[U0]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(z){this.fields=z.fields,this.session=z.session,this.dialect=z.dialect,this.withList=z.withList,this.distinct=z.distinct}from(z){const V=!!this.fields;let K;if(this.fields)K=this.fields;else if(D0(z,k6))K=Object.fromEntries(Object.keys(z[Z6].selection).map((J)=>[J,z[J]]));else if(D0(z,X3))K=z[Q6].selectedFields;else if(D0(z,I0))K={};else K=_u(z);return new CZ({table:z,fields:K,isPartialSelect:V,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class lu extends vZ{static[U0]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:z,fields:V,isPartialSelect:K,session:J,dialect:Z,withList:D,distinct:U}){super();this.config={withList:D,table:z,fields:{...V},distinct:U,setOperators:[]},this.isPartialSelect=K,this.session=J,this.dialect=Z,this._={selectedFields:V},this.tableName=IZ(z),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{}}createJoin(z){return(V,K)=>{const J=this.tableName,Z=IZ(V);if(typeof Z==="string"&&this.config.joins?.some((D)=>D.alias===Z))throw new Error(`Alias "${Z}" is already used in this query`);if(!this.isPartialSelect){if(Object.keys(this.joinsNotNullableMap).length===1&&typeof J==="string")this.config.fields={[J]:this.config.fields};if(typeof Z==="string"&&!D0(V,I0)){const D=D0(V,k6)?V[Z6].selection:D0(V,B8)?V[Q6].selectedFields:V[O0.Symbol.Columns];this.config.fields[Z]=D}}if(typeof K==="function")K=K(new Proxy(this.config.fields,new n6({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));if(!this.config.joins)this.config.joins=[];if(this.config.joins.push({on:K,table:V,joinType:z,alias:Z}),typeof Z==="string")switch(z){case"left":{this.joinsNotNullableMap[Z]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([D])=>[D,!1])),this.joinsNotNullableMap[Z]=!0;break}case"inner":{this.joinsNotNullableMap[Z]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([D])=>[D,!1])),this.joinsNotNullableMap[Z]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(z,V){return(K)=>{const J=typeof K==="function"?K(WG0()):K;if(!FZ(this.getSelectedFields(),J.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:z,isAll:V,rightSelect:J}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(z){return this.config.setOperators.push(...z),this}where(z){if(typeof z==="function")z=z(new Proxy(this.config.fields,new n6({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.where=z,this}having(z){if(typeof z==="function")z=z(new Proxy(this.config.fields,new n6({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.having=z,this}groupBy(...z){if(typeof z[0]==="function"){const V=z[0](new Proxy(this.config.fields,new n6({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(V)?V:[V]}else this.config.groupBy=z;return this}orderBy(...z){if(typeof z[0]==="function"){const V=z[0](new Proxy(this.config.fields,new n6({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),K=Array.isArray(V)?V:[V];if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=K;else this.config.orderBy=K}else{const V=z;if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=V;else this.config.orderBy=V}return this}limit(z){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).limit=z;else this.config.limit=z;return this}offset(z){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).offset=z;else this.config.offset=z;return this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){const{typings:z,...V}=this.dialect.sqlToQuery(this.getSQL());return V}as(z){return new Proxy(new k6(this.getSQL(),this.config.fields,z),new n6({alias:z,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new n6({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class CZ extends lu{static[U0]="SQLiteSelect";prepare(z){if(!this.session)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");const V=M8(this.config.fields),K=this.session[z?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),V,"all");return K.joinsNotNullableMap=this.joinsNotNullableMap,K}run=(z)=>{return this.prepare(!0).run(z)};all=(z)=>{return this.prepare(!0).all(z)};get=(z)=>{return this.prepare(!0).get(z)};values=(z)=>{return this.prepare(!0).values(z)};async execute(){return this.all()}}yu(CZ,[_6]);var WG0=()=>({union:RG0,unionAll:kG0,intersect:YG0,except:bG0}),RG0=wV("union",!1),kG0=wV("union",!0),YG0=wV("intersect",!1),bG0=wV("except",!1);class hZ{static[U0]="SQLiteQueryBuilder";dialect;$with(z){const V=this;return{as(K){if(typeof K==="function")K=K(V);return new Proxy(new j3(K.getSQL(),K.getSelectedFields(),z,!0),new n6({alias:z,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}with(...z){const V=this;function K(Z){return new T8({fields:Z??void 0,session:void 0,dialect:V.getDialect(),withList:z})}function J(Z){return new T8({fields:Z??void 0,session:void 0,dialect:V.getDialect(),withList:z,distinct:!0})}return{select:K,selectDistinct:J}}select(z){return new T8({fields:z??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(z){return new T8({fields:z??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){if(!this.dialect)this.dialect=new AZ;return this.dialect}}class WZ{constructor(z,V,K){this.table=z,this.session=V,this.dialect=K}static[U0]="SQLiteUpdateBuilder";set(z){return new nu(this.table,IV(this.table,z),this.session,this.dialect)}}class nu extends _6{constructor(z,V,K,J){super();this.session=K,this.dialect=J,this.config={set:V,table:z}}static[U0]="SQLiteUpdate";config;where(z){return this.config.where=z,this}returning(z=this.config.table[V6.Symbol.Columns]){return this.config.returning=M8(z),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){const{typings:z,...V}=this.dialect.sqlToQuery(this.getSQL());return V}prepare(z){return this.session[z?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run")}run=(z)=>{return this.prepare(!0).run(z)};all=(z)=>{return this.prepare(!0).all(z)};get=(z)=>{return this.prepare(!0).get(z)};values=(z)=>{return this.prepare(!0).values(z)};async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class kZ{constructor(z,V,K,J,Z,D,U,j){this.mode=z,this.fullSchema=V,this.schema=K,this.tableNamesMap=J,this.table=Z,this.tableConfig=D,this.dialect=U,this.session=j}static[U0]="SQLiteAsyncRelationalQueryBuilder";findMany(z){return this.mode==="sync"?new RZ(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,z?z:{},"many"):new NV(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,z?z:{},"many")}findFirst(z){return this.mode==="sync"?new RZ(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,z?{...z,limit:1}:{limit:1},"first"):new NV(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,z?{...z,limit:1}:{limit:1},"first")}}class NV extends _6{constructor(z,V,K,J,Z,D,U,j,B){super();this.fullSchema=z,this.schema=V,this.tableNamesMap=K,this.table=J,this.tableConfig=Z,this.dialect=D,this.session=U,this.config=j,this.mode=B}static[U0]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}prepare(){const{query:z,builtQuery:V}=this._toSQL();return this.session.prepareQuery(V,void 0,this.mode==="first"?"get":"all",(K,J)=>{const Z=K.map((D)=>FV(this.schema,this.tableConfig,D,z.selection,J));if(this.mode==="first")return Z[0];return Z})}_toSQL(){const z=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),V=this.dialect.sqlToQuery(z.sql);return{query:z,builtQuery:V}}toSQL(){return this._toSQL().builtQuery}executeRaw(){if(this.mode==="first")return this.prepare().get();return this.prepare().all()}async execute(){return this.executeRaw()}}class RZ extends NV{static[U0]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}class n5 extends _6{constructor(z,V,K,J,Z){super();this.cb=z,this.getSQLCb=V,this.dialect=J,this.mapBatchResult=Z,this.config={action:K}}static[U0]="SQLiteRaw";config;getSQL(){return this.getSQLCb()}async execute(){return this.cb()}prepare(){return{getQuery:()=>{return this.dialect.sqlToQuery(this.getSQL())},mapResult:(z,V)=>{return V?this.mapBatchResult(z):z}}}}class L3{constructor(z,V,K,J){if(this.resultKind=z,this.dialect=V,this.session=K,this._=J?{schema:J.schema,tableNamesMap:J.tableNamesMap}:{schema:void 0,tableNamesMap:{}},this.query={},this._.schema)for(let[Z,D]of Object.entries(this._.schema))this.query[Z]=new kZ(z,J.fullSchema,this._.schema,this._.tableNamesMap,J.fullSchema[Z],D,V,K)}static[U0]="BaseSQLiteDatabase";query;$with(z){return{as(V){if(typeof V==="function")V=V(new hZ);return new Proxy(new j3(V.getSQL(),V.getSelectedFields(),z,!0),new n6({alias:z,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}}with(...z){const V=this;function K(Z){return new T8({fields:Z??void 0,session:V.session,dialect:V.dialect,withList:z})}function J(Z){return new T8({fields:Z??void 0,session:V.session,dialect:V.dialect,withList:z,distinct:!0})}return{select:K,selectDistinct:J}}select(z){return new T8({fields:z??void 0,session:this.session,dialect:this.dialect})}selectDistinct(z){return new T8({fields:z??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(z){return new WZ(z,this.session,this.dialect)}insert(z){return new LZ(z,this.session,this.dialect)}delete(z){return new XZ(z,this.session,this.dialect)}run(z){const V=z.getSQL();if(this.resultKind==="async")return new n5(async()=>this.session.run(V),()=>V,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session));return this.session.run(V)}all(z){const V=z.getSQL();if(this.resultKind==="async")return new n5(async()=>this.session.all(V),()=>V,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session));return this.session.all(V)}get(z){const V=z.getSQL();if(this.resultKind==="async")return new n5(async()=>this.session.get(V),()=>V,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session));return this.session.get(V)}values(z){const V=z.getSQL();if(this.resultKind==="async")return new n5(async()=>this.session.values(V),()=>V,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session));return this.session.values(V)}transaction(z,V){return this.session.transaction(z,V)}}var iu=function(...z){if(z[0].columns)return new YZ(z[0].columns,z[0].name);return new YZ(z)};class YZ{static[U0]="SQLitePrimaryKeyBuilder";columns;name;constructor(z,V){this.columns=z,this.name=V}build(z){return new au(z,this.columns,this.name)}}class au{constructor(z,V,K){this.table=z,this.columns=V,this.name=K}static[U0]="SQLitePrimaryKey";columns;name;getName(){return this.name??`${this.table[V6.Symbol.Name]}_${this.columns.map((z)=>z.name).join("_")}_pk`}}class ou extends _6{constructor(z){super();this.resultCb=z}static[U0]="ExecuteResultSync";async execute(){return this.resultCb()}sync(){return this.resultCb()}}class bZ{constructor(z,V,K){this.mode=z,this.executeMethod=V,this.query=K}static[U0]="PreparedQuery";joinsNotNullableMap;getQuery(){return this.query}mapRunResult(z,V){return z}mapAllResult(z,V){throw new Error("Not implemented")}mapGetResult(z,V){throw new Error("Not implemented")}execute(z){if(this.mode==="async")return this[this.executeMethod](z);return new ou(()=>this[this.executeMethod](z))}mapResult(z,V){switch(this.executeMethod){case"run":return this.mapRunResult(z,V);case"all":return this.mapAllResult(z,V);case"get":return this.mapGetResult(z,V)}}}class fZ{constructor(z){this.dialect=z}static[U0]="SQLiteSession";prepareOneTimeQuery(z,V,K){return this.prepareQuery(z,V,K)}run(z){const V=this.dialect.sqlToQuery(z);try{return this.prepareOneTimeQuery(V,void 0,"run").run()}catch(K){throw new l5({cause:K,message:`Failed to run the query '${V.sql}'`})}}extractRawRunValueFromBatchResult(z){return z}all(z){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(z),void 0,"run").all()}extractRawAllValueFromBatchResult(z){throw new Error("Not implemented")}get(z){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(z),void 0,"run").get()}extractRawGetValueFromBatchResult(z){throw new Error("Not implemented")}values(z){return this.prepareOneTimeQuery(this.dialect.sqlToQuery(z),void 0,"run").values()}extractRawValuesValueFromBatchResult(z){throw new Error("Not implemented")}}class xZ extends L3{constructor(z,V,K,J,Z=0){super(z,V,K,J);this.schema=J,this.nestedIndex=Z}static[U0]="SQLiteTransaction";rollback(){throw new NZ}}var tu=function(z){return Object.keys(z).reduce((V,K)=>{if(Object.prototype.propertyIsEnumerable.call(z,K))V[K]=z[K];return V},{})},qV=function(z){if(typeof ArrayBuffer!=="undefined"&&z instanceof ArrayBuffer){if(typeof Buffer!=="undefined"){if(!(z instanceof Buffer))return Buffer.from(z);return z}if(typeof TextDecoder!=="undefined")return(new TextDecoder()).decode(z);throw new Error("TextDecoder is not available. Please provide either Buffer or TextDecoder polyfill.")}return z};class PV extends fZ{constructor(z,V,K,J,Z){super(V);this.client=z,this.schema=K,this.options=J,this.tx=Z,this.logger=J.logger??new JZ}static[U0]="LibSQLSession";logger;prepareQuery(z,V,K,J){return new ru(this.client,z,this.logger,V,this.tx,K,J)}async batch(z){const V=[],K=[];for(let Z of z){const D=Z.prepare(),U=D.getQuery();V.push(D),K.push({sql:U.sql,args:U.params})}return(await this.client.batch(K)).map((Z,D)=>V[D].mapResult(Z,!0))}async transaction(z,V){const K=await this.client.transaction(),J=new PV(this.client,this.dialect,this.schema,this.options,K),Z=new SZ("async",this.dialect,J,this.schema);try{const D=await z(Z);return await K.commit(),D}catch(D){throw await K.rollback(),D}}extractRawAllValueFromBatchResult(z){return z.rows}extractRawGetValueFromBatchResult(z){return z.rows[0]}extractRawValuesValueFromBatchResult(z){return z.rows}}class SZ extends xZ{static[U0]="LibSQLTransaction";async transaction(z){const V=`sp${this.nestedIndex}`,K=new SZ("async",this.dialect,this.session,this.schema,this.nestedIndex+1);await this.session.run(r.raw(`savepoint ${V}`));try{const J=await z(K);return await this.session.run(r.raw(`release savepoint ${V}`)),J}catch(J){throw await this.session.run(r.raw(`rollback to savepoint ${V}`)),J}}}class ru extends bZ{constructor(z,V,K,J,Z,D,U){super("async",D,V);this.client=z,this.logger=K,this.fields=J,this.tx=Z,this.customResultMapper=U,this.customResultMapper=U,this.fields=J}static[U0]="LibSQLPreparedQuery";run(z){const V=B3(this.query.params,z??{});this.logger.logQuery(this.query.sql,V);const K={sql:this.query.sql,args:V};return this.tx?this.tx.execute(K):this.client.execute(K)}async all(z){const{fields:V,logger:K,query:J,tx:Z,client:D,customResultMapper:U}=this;if(!V&&!U){const B=B3(J.params,z??{});K.logQuery(J.sql,B);const H={sql:J.sql,args:B};return(Z?Z.execute(H):D.execute(H)).then(({rows:G})=>this.mapAllResult(G))}const j=await this.values(z);return this.mapAllResult(j)}mapAllResult(z,V){if(V)z=z.rows;if(!this.fields&&!this.customResultMapper)return z.map((K)=>tu(K));if(this.customResultMapper)return this.customResultMapper(z,qV);return z.map((K)=>{return OZ(this.fields,Array.prototype.slice.call(K).map((J)=>qV(J)),this.joinsNotNullableMap)})}async get(z){const{fields:V,logger:K,query:J,tx:Z,client:D,customResultMapper:U}=this;if(!V&&!U){const B=B3(J.params,z??{});K.logQuery(J.sql,B);const H={sql:J.sql,args:B};return(Z?Z.execute(H):D.execute(H)).then(({rows:G})=>this.mapGetResult(G))}const j=await this.values(z);return this.mapGetResult(j)}mapGetResult(z,V){if(V)z=z.rows;const K=z[0];if(!this.fields&&!this.customResultMapper)return tu(K);if(!K)return;if(this.customResultMapper)return this.customResultMapper(z,qV);return OZ(this.fields,Array.prototype.slice.call(K).map((J)=>qV(J)),this.joinsNotNullableMap)}values(z){const V=B3(this.query.params,z??{});this.logger.logQuery(this.query.sql,V);const K={sql:this.query.sql,args:V};return(this.tx?this.tx.execute(K):this.client.execute(K)).then(({rows:J})=>J)}}var eu=function(z,V={}){const K=new EZ;let J;if(V.logger===!0)J=new KZ;else if(V.logger!==!1)J=V.logger;let Z;if(V.schema){const U=fu(V.schema,Su);Z={fullSchema:V.schema,schema:U.tables,tableNamesMap:U.tableNamesMap}}const D=new PV(z,K,Z,{logger:J},void 0);return new su("async",K,D,Z)};class su extends L3{static[U0]="LibSQLDatabase";async batch(z){return this.session.batch(z)}}var mZ={};sc(mZ,{usersOnInbox:()=>{{return i6}},user:()=>{{return i0}},messagesOnInbox:()=>{{return S8}},inbox:()=>{{return q6}}});var{createId:LF0,init:eY0,getConstants:zb0,isCuid:Vb0}=Jm();var i8=LF0;var i0=O3("user",{id:P8("id").primaryKey().$defaultFn(()=>i8()),username:P8("username").unique()}),q6=O3("inbox",{id:P8("id").primaryKey().$defaultFn(()=>i8()),userId:P8("user_id").notNull().references(()=>i0.id)}),i6=O3("users_on_inbox",{inboxId:P8("inbox_id").references(()=>q6.id),userId:P8("user_id").references(()=>i0.id)},(z)=>{return{pk:iu({columns:[z.userId,z.inboxId]})}}),S8=O3("messages_on_inbox",{id:P8("id").primaryKey().$defaultFn(()=>i8()),inboxId:P8("inbox_id").notNull().references(()=>q6.id),userId:P8("user_id").notNull().references(()=>i0.id),message:P8("message")});class E0 extends Error{code;rawCode;constructor(z,V,K,J){if(V!==void 0)z=`${V}: ${z}`;super(z,{cause:J});this.code=V,this.rawCode=K,this.name="LibsqlError"}}function Zm(z){const V=NF0.exec(z);if(V===null)throw new E0("The URL is not in a valid format","URL_INVALID");const K=V.groups,J=K.scheme,Z=K.authority!==void 0?qF0(K.authority):void 0,D=Z5(K.path),U=K.query!==void 0?TF0(K.query):void 0,j=K.fragment!==void 0?Z5(K.fragment):void 0;return{scheme:J,authority:Z,path:D,query:U,fragment:j}}var qF0=function(z){const V=PF0.exec(z);if(V===null)throw new E0("The authority part of the URL is not in a valid format","URL_INVALID");const K=V.groups,J=Z5(K.host_br??K.host),Z=K.port?parseInt(K.port,10):void 0,D=K.username!==void 0?{username:Z5(K.username),password:K.password!==void 0?Z5(K.password):void 0}:void 0;return{host:J,port:Z,userinfo:D}},TF0=function(z){const V=z.split("&"),K=[];for(let J of V){if(J==="")continue;let Z,D;const U=J.indexOf("=");if(U<0)Z=J,D="";else Z=J.substring(0,U),D=J.substring(U+1);K.push({key:Z5(Z.replaceAll("+"," ")),value:Z5(D.replaceAll("+"," "))})}return{pairs:K}},Z5=function(z){try{return decodeURIComponent(z)}catch(V){if(V instanceof URIError)throw new E0(`URL component has invalid percent encoding: ${V}`,"URL_INVALID",void 0,V);throw V}};function T3(z,V,K){if(V===void 0)throw new E0(`URL with scheme ${JSON.stringify(z+":")} requires authority (the "//" part)`,"URL_INVALID");const J=`${z}:`,Z=AF0(V.host),D=EF0(V.port),j=`//${vF0(V.userinfo)}${Z}${D}`;let B=K.split("/").map(encodeURIComponent).join("/");if(B!==""&&!B.startsWith("/"))B="/"+B;return new URL(`${J}${j}${B}`)}var AF0=function(z){return z.includes(":")?`[${encodeURI(z)}]`:encodeURI(z)},EF0=function(z){return z!==void 0?`:${z}`:""},vF0=function(z){if(z===void 0)return"";const V=encodeURIComponent(z.username),K=z.password!==void 0?`:${encodeURIComponent(z.password)}`:"";return`${V}${K}@`},NF0=(()=>{return new RegExp("^(?<scheme>[A-Za-z][A-Za-z.+-]*):(//(?<authority>[^/?#]*))?(?<path>[^?#]*)(\\?(?<query>[^#]*))?(#(?<fragment>.*))?$","su")})(),PF0=(()=>{return new RegExp("^((?<username>[^:]*)(:(?<password>.*))?@)?((?<host>[^:\\[\\]]*)|(\\[(?<host_br>[^\\[\\]]*)\\]))(:(?<port>[0-9]*))?$","su")})();var CF0=typeof atob==="function",hF0=typeof btoa==="function",o5=typeof Buffer==="function",Um=typeof TextDecoder==="function"?new TextDecoder:void 0,Dm=typeof TextEncoder==="function"?new TextEncoder:void 0;var A3=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),CV=((z)=>{let V={};return z.forEach((K,J)=>V[K]=J),V})(A3),WF0=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,P6=String.fromCharCode.bind(String),Hm=typeof Uint8Array.from==="function"?Uint8Array.from.bind(Uint8Array):(z)=>new Uint8Array(Array.prototype.slice.call(z,0)),Bm=(z)=>z.replace(/=/g,"").replace(/[+\/]/g,(V)=>V=="+"?"-":"_"),Mm=(z)=>z.replace(/[^A-Za-z0-9\+\/]/g,""),Gm=(z)=>{let V,K,J,Z,D="";const U=z.length%3;for(let j=0;j<z.length;){if((K=z.charCodeAt(j++))>255||(J=z.charCodeAt(j++))>255||(Z=z.charCodeAt(j++))>255)throw new TypeError("invalid character found");V=K<<16|J<<8|Z,D+=A3[V>>18&63]+A3[V>>12&63]+A3[V>>6&63]+A3[V&63]}return U?D.slice(0,U-3)+"===".substring(U):D},lZ=hF0?(z)=>btoa(z):o5?(z)=>Buffer.from(z,"binary").toString("base64"):Gm,cZ=o5?(z)=>Buffer.from(z).toString("base64"):(z)=>{let K=[];for(let J=0,Z=z.length;J<Z;J+=4096)K.push(P6.apply(null,z.subarray(J,J+4096)));return lZ(K.join(""))},hV=(z,V=!1)=>V?Bm(cZ(z)):cZ(z),RF0=(z)=>{if(z.length<2){var V=z.charCodeAt(0);return V<128?z:V<2048?P6(192|V>>>6)+P6(128|V&63):P6(224|V>>>12&15)+P6(128|V>>>6&63)+P6(128|V&63)}else{var V=65536+(z.charCodeAt(0)-55296)*1024+(z.charCodeAt(1)-56320);return P6(240|V>>>18&7)+P6(128|V>>>12&63)+P6(128|V>>>6&63)+P6(128|V&63)}},kF0=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Om=(z)=>z.replace(kF0,RF0),Qm=o5?(z)=>Buffer.from(z,"utf8").toString("base64"):Dm?(z)=>cZ(Dm.encode(z)):(z)=>lZ(Om(z)),a5=(z,V=!1)=>V?Bm(Qm(z)):Qm(z),jm=(z)=>a5(z,!0),YF0=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,bF0=(z)=>{switch(z.length){case 4:var V=(7&z.charCodeAt(0))<<18|(63&z.charCodeAt(1))<<12|(63&z.charCodeAt(2))<<6|63&z.charCodeAt(3),K=V-65536;return P6((K>>>10)+55296)+P6((K&1023)+56320);case 3:return P6((15&z.charCodeAt(0))<<12|(63&z.charCodeAt(1))<<6|63&z.charCodeAt(2));default:return P6((31&z.charCodeAt(0))<<6|63&z.charCodeAt(1))}},Fm=(z)=>z.replace(YF0,bF0),Im=(z)=>{if(z=z.replace(/\s+/g,""),!WF0.test(z))throw new TypeError("malformed base64.");z+="==".slice(2-(z.length&3));let V,K="",J,Z;for(let D=0;D<z.length;)V=CV[z.charAt(D++)]<<18|CV[z.charAt(D++)]<<12|(J=CV[z.charAt(D++)])<<6|(Z=CV[z.charAt(D++)]),K+=J===64?P6(V>>16&255):Z===64?P6(V>>16&255,V>>8&255):P6(V>>16&255,V>>8&255,V&255);return K},nZ=CF0?(z)=>atob(Mm(z)):o5?(z)=>Buffer.from(z,"base64").toString("binary"):Im,Xm=o5?(z)=>Hm(Buffer.from(z,"base64")):(z)=>Hm(nZ(z).split("").map((V)=>V.charCodeAt(0))),Lm=(z)=>Xm(wm(z)),fF0=o5?(z)=>Buffer.from(z,"base64").toString("utf8"):Um?(z)=>Um.decode(Xm(z)):(z)=>Fm(nZ(z)),wm=(z)=>Mm(z.replace(/[-_]/g,(V)=>V=="-"?"+":"/")),pZ=(z)=>fF0(wm(z)),xF0=(z)=>{if(typeof z!=="string")return!1;const V=z.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(V)||!/[^\s0-9a-zA-Z\-_]/.test(V)},Nm=(z)=>{return{value:z,enumerable:!1,writable:!0,configurable:!0}},qm=function(){const z=(V,K)=>Object.defineProperty(String.prototype,V,Nm(K));z("fromBase64",function(){return pZ(this)}),z("toBase64",function(V){return a5(this,V)}),z("toBase64URI",function(){return a5(this,!0)}),z("toBase64URL",function(){return a5(this,!0)}),z("toUint8Array",function(){return Lm(this)})},Pm=function(){const z=(V,K)=>Object.defineProperty(Uint8Array.prototype,V,Nm(K));z("toBase64",function(V){return hV(this,V)}),z("toBase64URI",function(){return hV(this,!0)}),z("toBase64URL",function(){return hV(this,!0)})},SF0=()=>{qm(),Pm()},t5={version:"3.7.5",VERSION:"3.7.5",atob:nZ,atobPolyfill:Im,btoa:lZ,btoaPolyfill:Gm,fromBase64:pZ,toBase64:a5,encode:a5,encodeURI:jm,encodeURL:jm,utob:Om,btou:Fm,decode:pZ,isValid:xF0,fromUint8Array:hV,toUint8Array:Lm,extendString:qm,extendUint8Array:Pm,extendBuiltins:SF0};function U5(z){if(z==="write")return"BEGIN IMMEDIATE";else if(z==="read")return"BEGIN TRANSACTION READONLY";else if(z==="deferred")return"BEGIN DEFERRED";else throw RangeError('Unknown transaction mode, supported values are "write", "read" and "deferred"')}var yF0=function(z){return Array.prototype.map.call(z,_F0)},_F0=function(z){if(typeof z==="bigint")return""+z;else if(z instanceof ArrayBuffer)return t5.fromUint8Array(new Uint8Array(z));else return z},y8="https://github.com/libsql/libsql-client-ts#supported-urls";class r5{columns;columnTypes;rows;rowsAffected;lastInsertRowid;constructor(z,V,K,J,Z){this.columns=z,this.columnTypes=V,this.rows=K,this.rowsAffected=J,this.lastInsertRowid=Z}toJSON(){return{columns:this.columns,columnTypes:this.columnTypes,rows:this.rows.map(yF0),rowsAffected:this.rowsAffected,lastInsertRowid:this.lastInsertRowid!==void 0?""+this.lastInsertRowid:null}}}function E3(z,V){if(typeof z!=="object")throw new TypeError(`Expected client configuration as object, got ${typeof z}`);const K=Zm(z.url);let{tls:J,authToken:Z}=z;for(let{key:H,value:G}of K.query?.pairs??[])if(H==="authToken")Z=G?G:void 0;else if(H==="tls")if(G==="0")J=!1;else if(G==="1")J=!0;else throw new E0(`Unknown value for the "tls" query argument: ${JSON.stringify(G)}. `+'Supported values are "0" and "1"',"URL_INVALID");else throw new E0(`Unknown URL query parameter ${JSON.stringify(H)}`,"URL_PARAM_NOT_SUPPORTED");let D=z.syncUrl;const U=K.scheme.toLowerCase();let j;if(U==="libsql")if(J===!1){if(K.authority?.port===void 0)throw new E0('A "libsql:" URL with ?tls=0 must specify an explicit port',"URL_INVALID");j=V?"http":"ws"}else j=V?"https":"wss";else if(U==="http"||U==="ws")j=U,J??=!1;else if(U==="https"||U==="wss"||U==="file")j=U;else throw new E0('The client supports only "libsql:", "wss:", "ws:", "https:", "http:" and "file:" URLs, '+`got ${JSON.stringify(K.scheme+":")}. `+`For more information, please read ${y8}`,"URL_SCHEME_NOT_SUPPORTED");if(K.fragment!==void 0)throw new E0(`URL fragments are not supported: ${JSON.stringify("#"+K.fragment)}`,"URL_INVALID");const B=""+(z.intMode??"number");if(B!=="number"&&B!=="bigint"&&B!=="string")throw new TypeError(`Invalid value for intMode, expected "number", "bigint" or "string",             got ${JSON.stringify(B)}`);return{scheme:j,tls:J??!0,authority:K.authority,path:K.path,authToken:Z,syncUrl:D,intMode:B,fetch:z.fetch}}var kV=PU(Ym(),1);import{Buffer as fm} from"buffer";function xm(z){if(z.scheme!=="file")throw new E0(`URL scheme ${JSON.stringify(z.scheme+":")} is not supported by the local sqlite3 client. `+`For more information, please read ${y8}`,"URL_SCHEME_NOT_SUPPORTED");const V=z.authority;if(V!==void 0){const D=V.host.toLowerCase();if(D!==""&&D!=="localhost")throw new E0(`Invalid host in file URL: ${JSON.stringify(V.host)}. `+'A "file:" URL with an absolute path should start with one slash ("file:/absolute/path.db") or with three slashes ("file:///absolute/path.db"). '+`For more information, please read ${y8}`,"URL_INVALID");if(V.port!==void 0)throw new E0("File URL cannot have a port","URL_INVALID");if(V.userinfo!==void 0)throw new E0("File URL cannot have username and password","URL_INVALID")}const K=z.path,J={authToken:z.authToken,syncUrl:z.syncUrl},Z=new kV.default(K,J);return z8(Z,"SELECT 1 AS checkThatTheDatabaseCanBeOpened",z.intMode),new Sm(K,J,Z,z.intMode)}var z8=function(z,V,K){let J,Z;if(typeof V==="string")J=V,Z=[];else if(J=V.sql,Array.isArray(V.args))Z=V.args.map(bm);else{Z={};for(let D in V.args){const U=D[0]==="@"||D[0]==="$"||D[0]===":"?D.substring(1):D;Z[U]=bm(V.args[D])}}try{const D=z.prepare(J);D.safeIntegers(!0);let U=!0;try{D.raw(!0)}catch{U=!1}if(U){const j=Array.from(D.columns().map((b)=>b.name)),B=Array.from(D.columns().map((b)=>b.type??"")),H=D.all(Z).map((b)=>{return HI0(b,j,K)});return new r5(j,B,H,0,void 0)}else{const j=D.run(Z),B=j.changes,H=BigInt(j.lastInsertRowid);return new r5([],[],[],B,H)}}catch(D){throw $m(D)}},HI0=function(z,V,K){const J={};Object.defineProperty(J,"length",{value:z.length});for(let Z=0;Z<z.length;++Z){const D=QI0(z[Z],K);Object.defineProperty(J,Z,{value:D});const U=V[Z];if(!Object.hasOwn(J,U))Object.defineProperty(J,U,{value:D,enumerable:!0})}return J},QI0=function(z,V){if(typeof z==="bigint")if(V==="number"){if(z<jI0||z>BI0)throw new RangeError("Received integer which cannot be safely represented as a JavaScript number");return Number(z)}else if(V==="bigint")return z;else if(V==="string")return""+z;else throw new Error("Invalid value for IntMode");else if(z instanceof fm)return z.buffer;return z},bm=function(z){if(typeof z==="number"){if(!Number.isFinite(z))throw new RangeError("Only finite numbers (not Infinity or NaN) can be passed as arguments");return z}else if(typeof z==="bigint"){if(z<MI0||z>GI0)throw new RangeError("bigint is too large to be represented as a 64-bit integer and passed as argument");return z}else if(typeof z==="boolean")return z?1n:0n;else if(z instanceof ArrayBuffer)return fm.from(z);else if(z instanceof Date)return z.valueOf();else if(z===void 0)throw new TypeError("undefined cannot be passed as argument to the database");else return z},_m=function(z,V){try{z.exec(V)}catch(K){throw $m(K)}},$m=function(z){if(z instanceof kV.default.SqliteError)return new E0(z.message,z.code,z.rawCode,z);return z};class Sm{#z;#V;#K;#J;closed;protocol;constructor(z,V,K,J){this.#z=z,this.#V=V,this.#K=K,this.#J=J,this.closed=!1,this.protocol="file"}async execute(z){return this.#U(),z8(this.#Z(),z,this.#J)}async batch(z,V="deferred"){this.#U();const K=this.#Z();try{z8(K,U5(V),this.#J);const J=z.map((Z)=>{if(!K.inTransaction)throw new E0("The transaction has been rolled back","TRANSACTION_CLOSED");return z8(K,Z,this.#J)});return z8(K,"COMMIT",this.#J),J}finally{if(K.inTransaction)z8(K,"ROLLBACK",this.#J)}}async transaction(z="write"){const V=this.#Z();return z8(V,U5(z),this.#J),this.#K=null,new ym(V,this.#J)}async executeMultiple(z){this.#U();const V=this.#Z();try{return _m(V,z)}finally{if(V.inTransaction)z8(V,"ROLLBACK",this.#J)}}async sync(){this.#U(),await this.#Z().sync()}close(){if(this.closed=!0,this.#K!==null)this.#K.close()}#U(){if(this.closed)throw new E0("The client is closed","CLIENT_CLOSED")}#Z(){if(this.#K===null)this.#K=new kV.default(this.#z,this.#V);return this.#K}}class ym{#z;#V;constructor(z,V){this.#z=z,this.#V=V}async execute(z){return this.#K(),z8(this.#z,z,this.#V)}async batch(z){return z.map((V)=>{return this.#K(),z8(this.#z,V,this.#V)})}async executeMultiple(z){return this.#K(),_m(this.#z,z)}async rollback(){if(!this.#z.open)return;this.#K(),z8(this.#z,"ROLLBACK",this.#V)}async commit(){this.#K(),z8(this.#z,"COMMIT",this.#V)}close(){if(this.#z.inTransaction)z8(this.#z,"ROLLBACK",this.#V)}get closed(){return!this.#z.inTransaction}#K(){if(this.closed)throw new E0("The transaction is closed","TRANSACTION_CLOSED")}}var jI0=-9007199254740991n,BI0=9007199254740991n,MI0=-9223372036854775808n,GI0=9223372036854775807n;var T4;if(typeof WebSocket!=="undefined")T4=WebSocket;else if(typeof global!=="undefined")T4=global.WebSocket;else if(typeof window!=="undefined")T4=window.WebSocket;else if(typeof self!=="undefined")T4=self.WebSocket;class s5{constructor(){this.intMode="number"}intMode}class x0 extends Error{constructor(z){super(z);this.name="ClientError"}}class N0 extends x0{constructor(z){super(z);this.name="ProtoError"}}class v3 extends x0{code;proto;constructor(z,V){super(z);this.name="ResponseError",this.code=V.code,this.proto=V,this.stack=void 0}}class U6 extends x0{constructor(z,V){if(V!==void 0){super(`${z}: ${V}`);this.cause=V}else super(z);this.name="ClosedError"}}class C3 extends x0{constructor(z){super(z);this.name="WebSocketUnsupportedError"}}class e5 extends x0{constructor(z){super(z);this.name="WebSocketError"}}class h3 extends x0{status;constructor(z,V){super(z);this.status=V,this.name="HttpServerError"}}class A8 extends x0{constructor(z){super(z);this.name="ProtocolVersionError"}}class Y6 extends x0{constructor(z){super(z);this.name="InternalError"}}class _8 extends x0{constructor(z){super(z);this.name="MisuseError"}}function a6(z){if(typeof z==="string")return z;throw z7(z,"string")}function V8(z){if(z===null||z===void 0)return;else if(typeof z==="string")return z;throw z7(z,"string or null")}function a8(z){if(typeof z==="number")return z;throw z7(z,"number")}function A4(z){if(typeof z==="boolean")return z;throw z7(z,"boolean")}function W3(z){if(Array.isArray(z))return z;throw z7(z,"array")}function B6(z){if(z!==null&&typeof z==="object"&&!Array.isArray(z))return z;throw z7(z,"object")}function E8(z,V){return W3(z).map((K)=>V(B6(K)))}var z7=function(z,V){if(z===void 0)return new N0(`Expected ${V}, but the property was missing`);let K=typeof z;if(z===null)K="null";else if(Array.isArray(z))K="array";return new N0(`Expected ${V}, received ${K}`)};function H5(z,V){return V(B6(z))}function R3(z,V){const K=[],J=new gm(K);return J.begin(),V(J,z),J.end(),K.join("")}class gm{#z;#V;constructor(z){this.#z=z,this.#V=!1}begin(){this.#z.push("{"),this.#V=!0}end(){this.#z.push("}"),this.#V=!1}#K(z){if(this.#V)this.#z.push('"'),this.#V=!1;else this.#z.push(',"');this.#z.push(z),this.#z.push('":')}string(z,V){this.#K(z),this.#z.push(JSON.stringify(V))}stringRaw(z,V){this.#K(z),this.#z.push('"'),this.#z.push(V),this.#z.push('"')}number(z,V){this.#K(z),this.#z.push(""+V)}boolean(z,V){this.#K(z),this.#z.push(V?"true":"false")}object(z,V,K){this.#K(z),this.begin(),K(this,V),this.end()}arrayObjects(z,V,K){this.#K(z),this.#z.push("[");for(let J=0;J<V.length;++J){if(J!==0)this.#z.push(",");this.begin(),K(this,V[J]),this.end()}this.#z.push("]")}}var Q5=0,k3=1,Y3=2;var um=5;function E4(z,V){const K=new dm(z),J=new mm(K);let Z=V.default();while(!K.eof()){const D=K.varint(),U=D>>3,j=D&7;J.setup(j);const B=V[U];if(B!==void 0){const H=B(J,Z);if(H!==void 0)Z=H}J.maybeSkip()}return Z}class dm{#z;#V;#K;constructor(z){this.#z=z,this.#V=new DataView(z.buffer,z.byteOffset,z.byteLength),this.#K=0}varint(){let z=0;for(let V=0;;V+=7){const K=this.#z[this.#K++];if(z|=(K&127)<<V,!(K&128))break}return z}varintBig(){let z=0n;for(let V=0n;;V+=7n){const K=this.#z[this.#K++];if(z|=BigInt(K&127)<<V,!(K&128))break}return z}bytes(z){const V=new Uint8Array(this.#z.buffer,this.#z.byteOffset+this.#K,z);return this.#K+=z,V}double(){const z=this.#V.getFloat64(this.#K,!0);return this.#K+=8,z}skipVarint(){for(;;)if(!(this.#z[this.#K++]&128))break}skip(z){this.#K+=z}eof(){return this.#K>=this.#z.byteLength}}class mm{#z;#V;constructor(z){this.#z=z,this.#V=-1}setup(z){this.#V=z}#K(z){if(this.#V!==z)throw new N0(`Expected wire type ${z}, got ${this.#V}`);this.#V=-1}bytes(){this.#K(Y3);const z=this.#z.varint();return this.#z.bytes(z)}string(){return(new TextDecoder()).decode(this.bytes())}message(z){return E4(this.bytes(),z)}int32(){return this.#K(Q5),this.#z.varint()}uint32(){return this.int32()}bool(){return this.int32()!==0}uint64(){return this.#K(Q5),this.#z.varintBig()}sint64(){const z=this.uint64();return z>>1n^-(z&1n)}double(){return this.#K(k3),this.#z.double()}maybeSkip(){if(this.#V<0)return;else if(this.#V===Q5)this.#z.skipVarint();else if(this.#V===k3)this.#z.skip(8);else if(this.#V===Y3){const z=this.#z.varint();this.#z.skip(z)}else if(this.#V===um)this.#z.skip(4);else throw new N0(`Unexpected wire type ${this.#V}`);this.#V=-1}}function b3(z,V){const K=new oZ;return V(K,z),K.data()}class oZ{#z;#V;#K;#J;constructor(){this.#z=new ArrayBuffer(256),this.#V=new Uint8Array(this.#z),this.#K=new DataView(this.#z),this.#J=0}#U(z){if(this.#J+z<=this.#z.byteLength)return;let V=this.#z.byteLength;while(V<this.#J+z)V*=2;const K=new ArrayBuffer(V),J=new Uint8Array(K),Z=new DataView(K);J.set(new Uint8Array(this.#z,0,this.#J)),this.#z=K,this.#V=J,this.#K=Z}#Z(z){this.#U(5),z=0|z;do{let V=z&127;z>>>=7,V|=z?128:0,this.#V[this.#J++]=V}while(z)}#D(z){this.#U(10),z=z&0xffffffffffffffffn;do{let V=Number(z&0x7fn);z>>=7n,V|=z?128:0,this.#V[this.#J++]=V}while(z)}#H(z,V){this.#Z(z<<3|V)}bytes(z,V){this.#H(z,Y3),this.#Z(V.byteLength),this.#U(V.byteLength),this.#V.set(V,this.#J),this.#J+=V.byteLength}string(z,V){this.bytes(z,(new TextEncoder()).encode(V))}message(z,V,K){const J=new oZ;K(J,V),this.bytes(z,J.data())}int32(z,V){this.#H(z,Q5),this.#Z(V)}uint32(z,V){this.int32(z,V)}bool(z,V){this.int32(z,V?1:0)}sint64(z,V){this.#H(z,Q5),this.#D(V<<1n^V>>63n)}double(z,V){this.#H(z,k3),this.#U(8),this.#K.setFloat64(this.#J,V,!0),this.#J+=8}data(){return new Uint8Array(this.#z,0,this.#J)}}class v4{#z;#V;constructor(){this.#z=new Set,this.#V=new Set}alloc(){for(let V of this.#V){if(this.#V.delete(V),this.#z.add(V),!this.#z.has(this.#z.size-1))this.#V.add(this.#z.size-1);return V}const z=this.#z.size;return this.#z.add(z),z}free(z){if(!this.#z.delete(z))throw new Y6("Freeing an id that is not allocated");if(this.#V.delete(this.#z.size),z<this.#z.size)this.#V.add(z)}}function Y0(z,V){throw new Y6(V)}function V7(z){if(z===null)return null;else if(typeof z==="string")return z;else if(typeof z==="number"){if(!Number.isFinite(z))throw new RangeError("Only finite numbers (not Infinity or NaN) can be passed as arguments");return z}else if(typeof z==="bigint"){if(z<FI0||z>II0)throw new RangeError("This bigint value is too large to be represented as a 64-bit integer and passed as argument");return z}else if(typeof z==="boolean")return z?1n:0n;else if(z instanceof ArrayBuffer)return new Uint8Array(z);else if(z instanceof Uint8Array)return z;else if(z instanceof Date)return+z.valueOf();else if(typeof z==="object")return""+z.toString();else throw new TypeError("Unsupported type of value")}function tZ(z,V){if(z===null)return null;else if(typeof z==="number")return z;else if(typeof z==="string")return z;else if(typeof z==="bigint")if(V==="number"){const K=Number(z);if(!Number.isSafeInteger(K))throw new RangeError("Received integer which is too large to be safely represented as a JavaScript number");return K}else if(V==="bigint")return z;else if(V==="string")return""+z;else throw new _8("Invalid value for IntMode");else if(z instanceof Uint8Array)return z.slice().buffer;else if(z===void 0)throw new N0("Received unrecognized type of Value");else throw Y0(z,"Impossible type of Value")}var FI0=-9223372036854775808n,II0=9223372036854775807n;function j5(z){return{affectedRowCount:z.affectedRowCount,lastInsertRowid:z.lastInsertRowid,columnNames:z.cols.map((V)=>V.name),columnDecltypes:z.cols.map((V)=>V.decltype)}}function bV(z,V){const K=j5(z),J=z.rows.map((Z)=>cm(K.columnNames,Z,V));return{...K,rows:J}}function fV(z,V){const K=j5(z);let J;if(z.rows.length>0)J=cm(K.columnNames,z.rows[0],V);return{...K,row:J}}function xV(z,V){const K=j5(z);let J;if(z.rows.length>0&&K.columnNames.length>0)J=tZ(z.rows[0][0],V);return{...K,value:J}}var cm=function(z,V,K){const J={};Object.defineProperty(J,"length",{value:V.length});for(let Z=0;Z<V.length;++Z){const D=tZ(V[Z],K);Object.defineProperty(J,Z,{value:D});const U=z[Z];if(U!==void 0&&!Object.hasOwn(J,U))Object.defineProperty(J,U,{value:D,enumerable:!0})}return J};function o8(z){return new v3(z.message,z)}function f3(z,V){if(V instanceof B5)return{sqlId:V._getSqlId(z)};else return{sql:""+V}}class B5{#z;#V;#K;constructor(z,V){this.#z=z,this.#V=V,this.#K=void 0}_getSqlId(z){if(this.#z!==z)throw new _8("Attempted to use SQL text opened with other object");else if(this.#K!==void 0)throw new U6("SQL text is closed",this.#K);return this.#V}close(){this._setClosed(new x0("SQL text was manually closed"))}_setClosed(z){if(this.#K===void 0)this.#K=z,this.#z._closeSql(this.#V)}get closed(){return this.#K!==void 0}}class C4{#z;#V;constructor(){this.#z=[],this.#V=[]}get length(){return this.#z.length+this.#V.length}push(z){this.#z.push(z)}shift(){if(this.#V.length===0&&this.#z.length>0)this.#V=this.#z.reverse(),this.#z=[];return this.#V.pop()}first(){return this.#V.length!==0?this.#V[this.#V.length-1]:this.#z[0]}}function SV(z,V,K){let J,Z=[],D=[];if(V instanceof K7){J=V.sql,Z=V._args;for(let[B,H]of V._namedArgs.entries())D.push({name:B,value:H})}else if(Array.isArray(V))if(J=V[0],Array.isArray(V[1]))Z=V[1].map((B)=>V7(B));else D=Object.entries(V[1]).map(([B,H])=>{return{name:B,value:V7(H)}});else J=V;const{sql:U,sqlId:j}=f3(z,J);return{sql:U,sqlId:j,args:Z,namedArgs:D,wantRows:K}}class K7{sql;_args;_namedArgs;constructor(z){this.sql=z,this._args=[],this._namedArgs=new Map}bindIndexes(z){this._args.length=0;for(let V of z)this._args.push(V7(V));return this}bindIndex(z,V){if(z!==(z|0)||z<=0)throw new RangeError("Index of a positional argument must be positive integer");while(this._args.length<z)this._args.push(null);return this._args[z-1]=V7(V),this}bindName(z,V){return this._namedArgs.set(z,V7(V)),this}unbindAll(){return this._args.length=0,this._namedArgs.clear(),this}}var XI0=function(z,V,K){return z._batch(K).then((J)=>{for(let Z=0;Z<V.length;++Z){const D=J.stepResults.get(Z),U=J.stepErrors.get(Z);V[Z].callback(D,U)}})};async function LI0(z,V,K){const J=await z._openCursor(K);try{let Z=0,D=void 0,U=[];for(;;){const j=await J.next();if(j===void 0)break;if(j.type==="step_begin"){if(j.step<Z||j.step>=V.length)throw new N0("Server produced StepBeginEntry for unexpected step");else if(D!==void 0)throw new N0("Server produced StepBeginEntry before terminating previous step");for(let B=Z;B<j.step;++B)V[B].callback(void 0,void 0);Z=j.step+1,D=j,U=[]}else if(j.type==="step_end"){if(D===void 0)throw new N0("Server produced StepEndEntry but no step is active");const B={cols:D.cols,rows:U,affectedRowCount:j.affectedRowCount,lastInsertRowid:j.lastInsertRowid};V[D.step].callback(B,void 0),D=void 0,U=[]}else if(j.type==="step_error"){if(D===void 0){if(j.step>=V.length)throw new N0("Server produced StepErrorEntry for unexpected step");for(let B=Z;B<j.step;++B)V[B].callback(void 0,void 0)}else{if(j.step!==D.step)throw new N0("Server produced StepErrorEntry for unexpected step");D=void 0,U=[]}V[j.step].callback(void 0,j.error),Z=j.step+1}else if(j.type==="row"){if(D===void 0)throw new N0("Server produced RowEntry but no step is active");U.push(j.row)}else if(j.type==="error")throw o8(j.error);else if(j.type==="none")throw new N0("Server produced unrecognized CursorEntry");else throw Y0(j,"Impossible CursorEntry")}if(D!==void 0)throw new N0("Server closed Cursor before terminating active step");for(let j=Z;j<V.length;++j)V[j].callback(void 0,void 0)}finally{J.close()}}var pm=function(z){if(z._index===void 0)throw new _8("Cannot add a condition referencing a step that has not been added to the batch");return z._index},lm=function(z,V){if(V._batch!==z)throw new _8("Cannot mix BatchCond objects for different Batch objects")};class yV{_stream;#z;_steps;#V;constructor(z,V){this._stream=z,this.#z=V,this._steps=[],this.#V=!1}step(){return new rZ(this)}execute(){if(this.#V)throw new _8("This batch has already been executed");this.#V=!0;const z={steps:this._steps.map((V)=>V.proto)};if(this.#z)return LI0(this._stream,this._steps,z);else return XI0(this._stream,this._steps,z)}}class rZ{_batch;#z;_index;constructor(z){this._batch=z,this.#z=[],this._index=void 0}condition(z){return this.#z.push(z._proto),this}query(z){return this.#V(z,!0,bV)}queryRow(z){return this.#V(z,!0,fV)}queryValue(z){return this.#V(z,!0,xV)}run(z){return this.#V(z,!1,j5)}#V(z,V,K){if(this._index!==void 0)throw new _8("This BatchStep has already been added to the batch");const J=SV(this._batch._stream._sqlOwner(),z,V);let Z;if(this.#z.length===0)Z=void 0;else if(this.#z.length===1)Z=this.#z[0];else Z={type:"and",conds:this.#z.slice()};const D={stmt:J,condition:Z};return new Promise((U,j)=>{const B=(H,G)=>{if(H!==void 0&&G!==void 0)j(new N0("Server returned both result and error"));else if(G!==void 0)j(o8(G));else if(H!==void 0)U(K(H,this._batch._stream.intMode));else U(void 0)};this._index=this._batch._steps.length,this._batch._steps.push({proto:D,callback:B})})}}class s0{_batch;_proto;constructor(z,V){this._batch=z,this._proto=V}static ok(z){return new s0(z._batch,{type:"ok",step:pm(z)})}static error(z){return new s0(z._batch,{type:"error",step:pm(z)})}static not(z){return new s0(z._batch,{type:"not",cond:z._proto})}static and(z,V){for(let K of V)lm(z,K);return new s0(z,{type:"and",conds:V.map((K)=>K._proto)})}static or(z,V){for(let K of V)lm(z,K);return new s0(z,{type:"or",conds:V.map((K)=>K._proto)})}static isAutocommit(z){return z._stream.client()._ensureVersion(3,"BatchCond.isAutocommit()"),new s0(z,{type:"is_autocommit"})}}function nm(z){return{paramNames:z.params.map((V)=>V.name),columns:z.cols,isExplain:z.isExplain,isReadonly:z.isReadonly}}class J7{constructor(z){this.intMode=z}query(z){return this.#z(z,!0,bV)}queryRow(z){return this.#z(z,!0,fV)}queryValue(z){return this.#z(z,!0,xV)}run(z){return this.#z(z,!1,j5)}#z(z,V,K){const J=SV(this._sqlOwner(),z,V);return this._execute(J).then((Z)=>K(Z,this.intMode))}batch(z=!1){return new yV(this,z)}describe(z){const V=f3(this._sqlOwner(),z);return this._describe(V).then(nm)}sequence(z){const V=f3(this._sqlOwner(),z);return this._sequence(V)}intMode}class x3{}var wI0=1000,NI0=10;class sZ extends x3{#z;#V;#K;#J;#U;#Z;#D;constructor(z,V,K){super();this.#z=z,this.#V=V,this.#K=K,this.#J=new C4,this.#U=new C4,this.#Z=void 0,this.#D=!1}async next(){for(;;){if(this.#Z!==void 0)throw new U6("Cursor is closed",this.#Z);while(!this.#D&&this.#U.length<NI0)this.#U.push(this.#H());const z=this.#J.shift();if(this.#D||z!==void 0)return z;await this.#U.shift().then((V)=>{if(V===void 0)return;for(let K of V.entries)this.#J.push(K);this.#D||=V.done})}}#H(){return this.#V._sendCursorRequest(this,{type:"fetch_cursor",cursorId:this.#K,maxCount:wI0}).then((z)=>z,(z)=>{this._setClosed(z);return})}_setClosed(z){if(this.#Z!==void 0)return;this.#Z=z,this.#V._sendCursorRequest(this,{type:"close_cursor",cursorId:this.#K}).catch(()=>{return}),this.#V._cursorClosed(this)}close(){this._setClosed(new x0("Cursor was manually closed"))}get closed(){return this.#Z!==void 0}}class S3 extends J7{#z;#V;#K;#J;#U;#Z;static open(z){const V=z._streamIdAlloc.alloc(),K=new S3(z,V),J=()=>{return},Z=(U)=>K.#j(U),D={type:"open_stream",streamId:V};return z._sendRequest(D,{responseCallback:J,errorCallback:Z}),K}constructor(z,V){super(z.intMode);this.#z=z,this.#V=V,this.#K=new C4,this.#J=void 0,this.#U=!1,this.#Z=void 0}client(){return this.#z}_sqlOwner(){return this.#z}_execute(z){return this.#D({type:"execute",streamId:this.#V,stmt:z}).then((V)=>{return V.result})}_batch(z){return this.#D({type:"batch",streamId:this.#V,batch:z}).then((V)=>{return V.result})}_describe(z){return this.#z._ensureVersion(2,"describe()"),this.#D({type:"describe",streamId:this.#V,sql:z.sql,sqlId:z.sqlId}).then((V)=>{return V.result})}_sequence(z){return this.#z._ensureVersion(2,"sequence()"),this.#D({type:"sequence",streamId:this.#V,sql:z.sql,sqlId:z.sqlId}).then((V)=>{return})}getAutocommit(){return this.#z._ensureVersion(3,"getAutocommit()"),this.#D({type:"get_autocommit",streamId:this.#V}).then((z)=>{return z.isAutocommit})}#D(z){return new Promise((V,K)=>{this.#H({type:"request",request:z,responseCallback:V,errorCallback:K})})}_openCursor(z){return this.#z._ensureVersion(3,"cursor"),new Promise((V,K)=>{this.#H({type:"cursor",batch:z,cursorCallback:V,errorCallback:K})})}_sendCursorRequest(z,V){if(z!==this.#J)throw new Y6("Cursor not associated with the stream attempted to execute a request");return new Promise((K,J)=>{if(this.#Z!==void 0)J(new U6("Stream is closed",this.#Z));else this.#z._sendRequest(V,{responseCallback:K,errorCallback:J})})}_cursorClosed(z){if(z!==this.#J)throw new Y6("Cursor was closed, but it was not associated with the stream");this.#J=void 0,this.#Q()}#H(z){if(this.#Z!==void 0)z.errorCallback(new U6("Stream is closed",this.#Z));else if(this.#U)z.errorCallback(new U6("Stream is closing",void 0));else this.#K.push(z),this.#Q()}#Q(){for(;;){const z=this.#K.first();if(z===void 0&&this.#J===void 0&&this.#U){this.#j(new x0("Stream was gracefully closed"));break}else if(z?.type==="request"&&this.#J===void 0){const{request:V,responseCallback:K,errorCallback:J}=z;this.#K.shift(),this.#z._sendRequest(V,{responseCallback:K,errorCallback:J})}else if(z?.type==="cursor"&&this.#J===void 0){const{batch:V,cursorCallback:K}=z;this.#K.shift();const J=this.#z._cursorIdAlloc.alloc(),Z=new sZ(this.#z,this,J),D={type:"open_cursor",streamId:this.#V,cursorId:J,batch:V},U=()=>{return},j=(B)=>Z._setClosed(B);this.#z._sendRequest(D,{responseCallback:U,errorCallback:j}),this.#J=Z,K(Z)}else break}}#j(z){if(this.#Z!==void 0)return;if(this.#Z=z,this.#J!==void 0)this.#J._setClosed(z);for(;;){const Z=this.#K.shift();if(Z!==void 0)Z.errorCallback(z);else break}const V={type:"close_stream",streamId:this.#V},K=()=>this.#z._streamIdAlloc.free(this.#V),J=()=>{return};this.#z._sendRequest(V,{responseCallback:K,errorCallback:J})}close(){this.#j(new x0("Stream was manually closed"))}closeGracefully(){this.#U=!0,this.#Q()}get closed(){return this.#Z!==void 0||this.#U}}function y3(z,V){if(V.sql!==void 0)z.string("sql",V.sql);if(V.sqlId!==void 0)z.number("sql_id",V.sqlId);z.arrayObjects("args",V.args,im),z.arrayObjects("named_args",V.namedArgs,qI0),z.boolean("want_rows",V.wantRows)}var qI0=function(z,V){z.string("name",V.name),z.object("value",V.value,im)};function Z7(z,V){z.arrayObjects("steps",V.steps,PI0)}var PI0=function(z,V){if(V.condition!==void 0)z.object("condition",V.condition,eZ);z.object("stmt",V.stmt,y3)},eZ=function(z,V){if(z.stringRaw("type",V.type),V.type==="ok"||V.type==="error")z.number("step",V.step);else if(V.type==="not")z.object("cond",V.cond,eZ);else if(V.type==="and"||V.type==="or")z.arrayObjects("conds",V.conds,eZ);else if(V.type==="is_autocommit");else throw Y0(V,"Impossible type of BatchCond")},im=function(z,V){if(V===null)z.stringRaw("type","null");else if(typeof V==="bigint")z.stringRaw("type","integer"),z.stringRaw("value",""+V);else if(typeof V==="number")z.stringRaw("type","float"),z.number("value",V);else if(typeof V==="string")z.stringRaw("type","text"),z.string("value",V);else if(V instanceof Uint8Array)z.stringRaw("type","blob"),z.stringRaw("base64",t5.fromUint8Array(V));else if(V===void 0);else throw Y0(V,"Impossible type of Value")};function am(z,V){if(z.stringRaw("type",V.type),V.type==="hello"){if(V.jwt!==void 0)z.string("jwt",V.jwt)}else if(V.type==="request")z.number("request_id",V.requestId),z.object("request",V.request,TI0);else throw Y0(V,"Impossible type of ClientMsg")}var TI0=function(z,V){if(z.stringRaw("type",V.type),V.type==="open_stream")z.number("stream_id",V.streamId);else if(V.type==="close_stream")z.number("stream_id",V.streamId);else if(V.type==="execute")z.number("stream_id",V.streamId),z.object("stmt",V.stmt,y3);else if(V.type==="batch")z.number("stream_id",V.streamId),z.object("batch",V.batch,Z7);else if(V.type==="open_cursor")z.number("stream_id",V.streamId),z.number("cursor_id",V.cursorId),z.object("batch",V.batch,Z7);else if(V.type==="close_cursor")z.number("cursor_id",V.cursorId);else if(V.type==="fetch_cursor")z.number("cursor_id",V.cursorId),z.number("max_count",V.maxCount);else if(V.type==="sequence"){if(z.number("stream_id",V.streamId),V.sql!==void 0)z.string("sql",V.sql);if(V.sqlId!==void 0)z.number("sql_id",V.sqlId)}else if(V.type==="describe"){if(z.number("stream_id",V.streamId),V.sql!==void 0)z.string("sql",V.sql);if(V.sqlId!==void 0)z.number("sql_id",V.sqlId)}else if(V.type==="store_sql")z.number("sql_id",V.sqlId),z.string("sql",V.sql);else if(V.type==="close_sql")z.number("sql_id",V.sqlId);else if(V.type==="get_autocommit")z.number("stream_id",V.streamId);else throw Y0(V,"Impossible type of Request")};function _3(z,V){if(V.sql!==void 0)z.string(1,V.sql);if(V.sqlId!==void 0)z.int32(2,V.sqlId);for(let K of V.args)z.message(3,K,tm);for(let K of V.namedArgs)z.message(4,K,AI0);z.bool(5,V.wantRows)}var AI0=function(z,V){z.string(1,V.name),z.message(2,V.value,tm)};function U7(z,V){for(let K of V.steps)z.message(1,K,EI0)}var EI0=function(z,V){if(V.condition!==void 0)z.message(1,V.condition,zU);z.message(2,V.stmt,_3)},zU=function(z,V){if(V.type==="ok")z.uint32(1,V.step);else if(V.type==="error")z.uint32(2,V.step);else if(V.type==="not")z.message(3,V.cond,zU);else if(V.type==="and")z.message(4,V.conds,om);else if(V.type==="or")z.message(5,V.conds,om);else if(V.type==="is_autocommit")z.message(6,void 0,rm);else throw Y0(V,"Impossible type of BatchCond")},om=function(z,V){for(let K of V)z.message(1,K,zU)},tm=function(z,V){if(V===null)z.message(1,void 0,rm);else if(typeof V==="bigint")z.sint64(2,V);else if(typeof V==="number")z.double(3,V);else if(typeof V==="string")z.string(4,V);else if(V instanceof Uint8Array)z.bytes(5,V);else if(V===void 0);else throw Y0(V,"Impossible type of Value")},rm=function(z,V){};function sm(z,V){if(V.type==="hello")z.message(1,V,vI0);else if(V.type==="request")z.message(2,V,CI0);else throw Y0(V,"Impossible type of ClientMsg")}var vI0=function(z,V){if(V.jwt!==void 0)z.string(1,V.jwt)},CI0=function(z,V){z.int32(1,V.requestId);const K=V.request;if(K.type==="open_stream")z.message(2,K,hI0);else if(K.type==="close_stream")z.message(3,K,WI0);else if(K.type==="execute")z.message(4,K,RI0);else if(K.type==="batch")z.message(5,K,kI0);else if(K.type==="open_cursor")z.message(6,K,YI0);else if(K.type==="close_cursor")z.message(7,K,bI0);else if(K.type==="fetch_cursor")z.message(8,K,fI0);else if(K.type==="sequence")z.message(9,K,xI0);else if(K.type==="describe")z.message(10,K,SI0);else if(K.type==="store_sql")z.message(11,K,yI0);else if(K.type==="close_sql")z.message(12,K,_I0);else if(K.type==="get_autocommit")z.message(13,K,$I0);else throw Y0(K,"Impossible type of Request")},hI0=function(z,V){z.int32(1,V.streamId)},WI0=function(z,V){z.int32(1,V.streamId)},RI0=function(z,V){z.int32(1,V.streamId),z.message(2,V.stmt,_3)},kI0=function(z,V){z.int32(1,V.streamId),z.message(2,V.batch,U7)},YI0=function(z,V){z.int32(1,V.streamId),z.int32(2,V.cursorId),z.message(3,V.batch,U7)},bI0=function(z,V){z.int32(1,V.cursorId)},fI0=function(z,V){z.int32(1,V.cursorId),z.uint32(2,V.maxCount)},xI0=function(z,V){if(z.int32(1,V.streamId),V.sql!==void 0)z.string(2,V.sql);if(V.sqlId!==void 0)z.int32(3,V.sqlId)},SI0=function(z,V){if(z.int32(1,V.streamId),V.sql!==void 0)z.string(2,V.sql);if(V.sqlId!==void 0)z.int32(3,V.sqlId)},yI0=function(z,V){z.int32(1,V.sqlId),z.string(2,V.sql)},_I0=function(z,V){z.int32(1,V.sqlId)},$I0=function(z,V){z.int32(1,V.streamId)};function h4(z){const V=a6(z.message),K=V8(z.code);return{message:V,code:K}}function $3(z){const V=E8(z.cols,em),K=W3(z.rows).map((U)=>E8(U,zc)),J=a8(z.affected_row_count),Z=V8(z.last_insert_rowid),D=Z!==void 0?BigInt(Z):void 0;return{cols:V,rows:K,affectedRowCount:J,lastInsertRowid:D}}var em=function(z){const V=V8(z.name),K=V8(z.decltype);return{name:V,decltype:K}};function _V(z){const V=new Map;W3(z.step_results).forEach((J,Z)=>{if(J!==null)V.set(Z,$3(B6(J)))});const K=new Map;return W3(z.step_errors).forEach((J,Z)=>{if(J!==null)K.set(Z,h4(B6(J)))}),{stepResults:V,stepErrors:K}}function $V(z){const V=a6(z.type);if(V==="step_begin"){const K=a8(z.step),J=E8(z.cols,em);return{type:"step_begin",step:K,cols:J}}else if(V==="step_end"){const K=a8(z.affected_row_count),J=V8(z.last_insert_rowid),Z=J!==void 0?BigInt(J):void 0;return{type:"step_end",affectedRowCount:K,lastInsertRowid:Z}}else if(V==="step_error"){const K=a8(z.step),J=h4(B6(z.error));return{type:"step_error",step:K,error:J}}else if(V==="row")return{type:"row",row:E8(z.row,zc)};else if(V==="error")return{type:"error",error:h4(B6(z.error))};else throw new N0("Unexpected type of CursorEntry")}function gV(z){const V=E8(z.params,gI0),K=E8(z.cols,uI0),J=A4(z.is_explain),Z=A4(z.is_readonly);return{params:V,cols:K,isExplain:J,isReadonly:Z}}var gI0=function(z){return{name:V8(z.name)}},uI0=function(z){const V=a6(z.name),K=V8(z.decltype);return{name:V,decltype:K}};function zc(z){const V=a6(z.type);if(V==="null")return null;else if(V==="integer"){const K=a6(z.value);return BigInt(K)}else if(V==="float")return a8(z.value);else if(V==="text")return a6(z.value);else if(V==="blob")return t5.toUint8Array(a6(z.base64));else throw new N0("Unexpected type of Value")}function Vc(z){const V=a6(z.type);if(V==="hello_ok")return{type:"hello_ok"};else if(V==="hello_error")return{type:"hello_error",error:h4(B6(z.error))};else if(V==="response_ok"){const K=a8(z.request_id),J=dI0(B6(z.response));return{type:"response_ok",requestId:K,response:J}}else if(V==="response_error"){const K=a8(z.request_id),J=h4(B6(z.error));return{type:"response_error",requestId:K,error:J}}else throw new N0("Unexpected type of ServerMsg")}var dI0=function(z){const V=a6(z.type);if(V==="open_stream")return{type:"open_stream"};else if(V==="close_stream")return{type:"close_stream"};else if(V==="execute")return{type:"execute",result:$3(B6(z.result))};else if(V==="batch")return{type:"batch",result:_V(B6(z.result))};else if(V==="open_cursor")return{type:"open_cursor"};else if(V==="close_cursor")return{type:"close_cursor"};else if(V==="fetch_cursor"){const K=E8(z.entries,$V),J=A4(z.done);return{type:"fetch_cursor",entries:K,done:J}}else if(V==="sequence")return{type:"sequence"};else if(V==="describe")return{type:"describe",result:gV(B6(z.result))};else if(V==="store_sql")return{type:"store_sql"};else if(V==="close_sql")return{type:"close_sql"};else if(V==="get_autocommit")return{type:"get_autocommit",isAutocommit:A4(z.is_autocommit)};else throw new N0("Unexpected type of Response")};var O8={default(){return{message:"",code:void 0}},1(z,V){V.message=z.string()},2(z,V){V.code=z.string()}},W4={default(){return{cols:[],rows:[],affectedRowCount:0,lastInsertRowid:void 0}},1(z,V){V.cols.push(z.message(Kc))},2(z,V){V.rows.push(z.message(Jc))},3(z,V){V.affectedRowCount=Number(z.uint64())},4(z,V){V.lastInsertRowid=z.sint64()}},Kc={default(){return{name:void 0,decltype:void 0}},1(z,V){V.name=z.string()},2(z,V){V.decltype=z.string()}},Jc={default(){return[]},1(z,V){V.push(z.message(oI0))}},D7={default(){return{stepResults:new Map,stepErrors:new Map}},1(z,V){const[K,J]=z.message(mI0);V.stepResults.set(K,J)},2(z,V){const[K,J]=z.message(cI0);V.stepErrors.set(K,J)}},mI0={default(){return[0,W4.default()]},1(z,V){V[0]=z.uint32()},2(z,V){V[1]=z.message(W4)}},cI0={default(){return[0,O8.default()]},1(z,V){V[0]=z.uint32()},2(z,V){V[1]=z.message(O8)}},uV={default(){return{type:"none"}},1(z){return z.message(pI0)},2(z){return z.message(lI0)},3(z){return z.message(nI0)},4(z){return{type:"row",row:z.message(Jc)}},5(z){return{type:"error",error:z.message(O8)}}},pI0={default(){return{type:"step_begin",step:0,cols:[]}},1(z,V){V.step=z.uint32()},2(z,V){V.cols.push(z.message(Kc))}},lI0={default(){return{type:"step_end",affectedRowCount:0,lastInsertRowid:void 0}},1(z,V){V.affectedRowCount=z.uint32()},2(z,V){V.lastInsertRowid=z.uint64()}},nI0={default(){return{type:"step_error",step:0,error:O8.default()}},1(z,V){V.step=z.uint32()},2(z,V){V.error=z.message(O8)}},H7={default(){return{params:[],cols:[],isExplain:!1,isReadonly:!1}},1(z,V){V.params.push(z.message(iI0))},2(z,V){V.cols.push(z.message(aI0))},3(z,V){V.isExplain=z.bool()},4(z,V){V.isReadonly=z.bool()}},iI0={default(){return{name:void 0}},1(z,V){V.name=z.string()}},aI0={default(){return{name:"",decltype:void 0}},1(z,V){V.name=z.string()},2(z,V){V.decltype=z.string()}},oI0={default(){return},1(z){return null},2(z){return z.sint64()},3(z){return z.double()},4(z){return z.string()},5(z){return z.bytes()}};var Zc={default(){return{type:"none"}},1(z){return{type:"hello_ok"}},2(z){return z.message(tI0)},3(z){return z.message(sI0)},4(z){return z.message(rI0)}},tI0={default(){return{type:"hello_error",error:O8.default()}},1(z,V){V.error=z.message(O8)}},rI0={default(){return{type:"response_error",requestId:0,error:O8.default()}},1(z,V){V.requestId=z.int32()},2(z,V){V.error=z.message(O8)}},sI0={default(){return{type:"response_ok",requestId:0,response:{type:"none"}}},1(z,V){V.requestId=z.int32()},2(z,V){V.response={type:"open_stream"}},3(z,V){V.response={type:"close_stream"}},4(z,V){V.response=z.message(eI0)},5(z,V){V.response=z.message(zX0)},6(z,V){V.response={type:"open_cursor"}},7(z,V){V.response={type:"close_cursor"}},8(z,V){V.response=z.message(VX0)},9(z,V){V.response={type:"sequence"}},10(z,V){V.response=z.message(KX0)},11(z,V){V.response={type:"store_sql"}},12(z,V){V.response={type:"close_sql"}},13(z,V){V.response=z.message(JX0)}},eI0={default(){return{type:"execute",result:W4.default()}},1(z,V){V.result=z.message(W4)}},zX0={default(){return{type:"batch",result:D7.default()}},1(z,V){V.result=z.message(D7)}},VX0={default(){return{type:"fetch_cursor",entries:[],done:!1}},1(z,V){V.entries.push(z.message(uV))},2(z,V){V.done=z.bool()}},KX0={default(){return{type:"describe",result:H7.default()}},1(z,V){V.result=z.message(H7)}},JX0={default(){return{type:"get_autocommit",isAutocommit:!1}},1(z,V){V.isAutocommit=z.bool()}};var Uc=new Map([["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]),VU=new Map([["hrana3-protobuf",{version:3,encoding:"protobuf"}],["hrana3",{version:3,encoding:"json"}],["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]);class dV extends s5{#z;#V;#K;#J;#U;#Z;#D;#H;#Q;_streamIdAlloc;_cursorIdAlloc;#j;constructor(z,V){super();this.#z=z,this.#V=[],this.#K=!1,this.#J=void 0,this.#U=!1,this.#Z=void 0,this.#D=!1,this.#H=new Map,this.#Q=new v4,this._streamIdAlloc=new v4,this._cursorIdAlloc=new v4,this.#j=new v4,this.#z.binaryType="arraybuffer",this.#z.addEventListener("open",()=>this.#F()),this.#z.addEventListener("close",(K)=>this.#O(K)),this.#z.addEventListener("error",(K)=>this.#I(K)),this.#z.addEventListener("message",(K)=>this.#L(K)),this.#M({type:"hello",jwt:V})}#M(z){if(this.#J!==void 0)throw new Y6("Trying to send a message on a closed client");if(this.#K)this.#G(z);else{const V=()=>this.#G(z),K=()=>{return};this.#V.push({openCallback:V,errorCallback:K})}}#F(){const z=this.#z.protocol;if(z===void 0){this.#B(new x0("The `WebSocket.protocol` property is undefined. This most likely means that the WebSocket implementation provided by the environment is broken. If you are using Miniflare 2, please update to Miniflare 3, which fixes this problem."));return}else if(z==="")this.#Z={version:1,encoding:"json"};else if(this.#Z=VU.get(z),this.#Z===void 0){this.#B(new N0(`Unrecognized WebSocket subprotocol: ${JSON.stringify(z)}`));return}for(let V of this.#V)V.openCallback();this.#V.length=0,this.#K=!0}#G(z){const V=this.#Z.encoding;if(V==="json"){const K=R3(z,am);this.#z.send(K)}else if(V==="protobuf"){const K=b3(z,sm);this.#z.send(K)}else throw Y0(V,"Impossible encoding")}getVersion(){return new Promise((z,V)=>{if(this.#D=!0,this.#J!==void 0)V(this.#J);else if(!this.#K){const K=()=>z(this.#Z.version);this.#V.push({openCallback:K,errorCallback:V})}else z(this.#Z.version)})}_ensureVersion(z,V){if(this.#Z===void 0||!this.#D)throw new A8(`${V} is supported only on protocol version ${z} and higher, `+"but the version supported by the WebSocket server is not yet known. Use Client.getVersion() to wait until the version is available.");else if(this.#Z.version<z)throw new A8(`${V} is supported on protocol version ${z} and higher, `+`but the WebSocket server only supports version ${this.#Z.version}`)}_sendRequest(z,V){if(this.#J!==void 0){V.errorCallback(new U6("Client is closed",this.#J));return}const K=this.#Q.alloc();this.#H.set(K,{...V,type:z.type}),this.#M({type:"request",requestId:K,request:z})}#I(z){const K=z.message??"WebSocket was closed due to an error";this.#B(new e5(K))}#O(z){let V=`WebSocket was closed with code ${z.code}`;if(z.reason)V+=`: ${z.reason}`;this.#B(new e5(V))}#B(z){if(this.#J!==void 0)return;this.#J=z;for(let V of this.#V)V.errorCallback(z);this.#V.length=0;for(let[V,K]of this.#H.entries())K.errorCallback(z),this.#Q.free(V);this.#H.clear(),this.#z.close()}#L(z){if(this.#J!==void 0)return;try{let V;const K=this.#Z.encoding;if(K==="json"){if(typeof z.data!=="string"){this.#z.close(3003,"Only text messages are accepted with JSON encoding"),this.#B(new N0("Received non-text message from server with JSON encoding"));return}V=H5(JSON.parse(z.data),Vc)}else if(K==="protobuf"){if(!(z.data instanceof ArrayBuffer)){this.#z.close(3003,"Only binary messages are accepted with Protobuf encoding"),this.#B(new N0("Received non-binary message from server with Protobuf encoding"));return}V=E4(new Uint8Array(z.data),Zc)}else throw Y0(K,"Impossible encoding");this.#X(V)}catch(V){this.#z.close(3007,"Could not handle message"),this.#B(V)}}#X(z){if(z.type==="none")throw new N0("Received an unrecognized ServerMsg");else if(z.type==="hello_ok"||z.type==="hello_error"){if(this.#U)throw new N0("Received a duplicated hello response");if(this.#U=!0,z.type==="hello_error")throw o8(z.error);return}else if(!this.#U)throw new N0("Received a non-hello message before a hello response");if(z.type==="response_ok"){const V=z.requestId,K=this.#H.get(V);if(this.#H.delete(V),K===void 0)throw new N0("Received unexpected OK response");this.#Q.free(V);try{if(K.type!==z.response.type)throw console.dir({responseState:K,msg:z}),new N0("Received unexpected type of response");K.responseCallback(z.response)}catch(J){throw K.errorCallback(J),J}}else if(z.type==="response_error"){const V=z.requestId,K=this.#H.get(V);if(this.#H.delete(V),K===void 0)throw new N0("Received unexpected error response");this.#Q.free(V),K.errorCallback(o8(z.error))}else throw Y0(z,"Impossible ServerMsg type")}openStream(){return S3.open(this)}storeSql(z){this._ensureVersion(2,"storeSql()");const V=this.#j.alloc(),K=new B5(this,V),J=()=>{return},Z=(U)=>K._setClosed(U),D={type:"store_sql",sqlId:V,sql:z};return this._sendRequest(D,{responseCallback:J,errorCallback:Z}),K}_closeSql(z){if(this.#J!==void 0)return;const V=()=>this.#j.free(z),K=(Z)=>this.#B(Z),J={type:"close_sql",sqlId:z};this._sendRequest(J,{responseCallback:V,errorCallback:K})}close(){this.#B(new x0("Client was manually closed"))}get closed(){return this.#J!==void 0}}var KU=fetch,g3=Request,JU=Headers;var M5;if(typeof queueMicrotask!=="undefined")M5=queueMicrotask;else{const z=Promise.resolve();M5=(V)=>{z.then(V)}}class ZU{#z;#V;#K;constructor(z){this.#z=new Uint8Array(new ArrayBuffer(z)),this.#V=0,this.#K=0}get length(){return this.#K-this.#V}data(){return this.#z.slice(this.#V,this.#K)}push(z){this.#J(z.byteLength),this.#z.set(z,this.#K),this.#K+=z.byteLength}#J(z){if(this.#K+z<=this.#z.byteLength)return;const V=this.#K-this.#V;if(V+z<=this.#z.byteLength&&2*this.#K>=this.#z.byteLength)this.#z.copyWithin(0,this.#V,this.#K);else{let K=this.#z.byteLength;do K*=2;while(V+z>K);const J=new Uint8Array(new ArrayBuffer(K));J.set(this.#z.slice(this.#V,this.#K),0),this.#z=J}this.#K=V,this.#V=0}shift(z){this.#V+=z}}function Dc(z){const V=V8(z.baton),K=V8(z.base_url),J=E8(z.results,ZX0);return{baton:V,baseUrl:K,results:J}}var ZX0=function(z){const V=a6(z.type);if(V==="ok")return{type:"ok",response:UX0(B6(z.response))};else if(V==="error")return{type:"error",error:h4(B6(z.error))};else throw new N0("Unexpected type of StreamResult")},UX0=function(z){const V=a6(z.type);if(V==="close")return{type:"close"};else if(V==="execute")return{type:"execute",result:$3(B6(z.result))};else if(V==="batch")return{type:"batch",result:_V(B6(z.result))};else if(V==="sequence")return{type:"sequence"};else if(V==="describe")return{type:"describe",result:gV(B6(z.result))};else if(V==="store_sql")return{type:"store_sql"};else if(V==="close_sql")return{type:"close_sql"};else if(V==="get_autocommit")return{type:"get_autocommit",isAutocommit:A4(z.is_autocommit)};else throw new N0("Unexpected type of StreamResponse")};function Hc(z){const V=V8(z.baton),K=V8(z.base_url);return{baton:V,baseUrl:K}}var Qc={default(){return{baton:void 0,baseUrl:void 0,results:[]}},1(z,V){V.baton=z.string()},2(z,V){V.baseUrl=z.string()},3(z,V){V.results.push(z.message(DX0))}},DX0={default(){return{type:"none"}},1(z){return{type:"ok",response:z.message(HX0)}},2(z){return{type:"error",error:z.message(O8)}}},HX0={default(){return{type:"none"}},1(z){return{type:"close"}},2(z){return z.message(QX0)},3(z){return z.message(jX0)},4(z){return{type:"sequence"}},5(z){return z.message(BX0)},6(z){return{type:"store_sql"}},7(z){return{type:"close_sql"}},8(z){return z.message(MX0)}},QX0={default(){return{type:"execute",result:W4.default()}},1(z,V){V.result=z.message(W4)}},jX0={default(){return{type:"batch",result:D7.default()}},1(z,V){V.result=z.message(D7)}},BX0={default(){return{type:"describe",result:H7.default()}},1(z,V){V.result=z.message(H7)}},MX0={default(){return{type:"get_autocommit",isAutocommit:!1}},1(z,V){V.isAutocommit=z.bool()}},jc={default(){return{baton:void 0,baseUrl:void 0}},1(z,V){V.baton=z.string()},2(z,V){V.baseUrl=z.string()}};class UU extends x3{#z;#V;#K;#J;#U;#Z;constructor(z,V){super();this.#z=z,this.#V=V,this.#K=void 0,this.#J=new ZU(16384),this.#U=void 0,this.#Z=!1}async open(z){if(z.body===null)throw new N0("No response body for cursor request");this.#K=z.body.getReader();const V=await this.#D(Hc,jc);if(V===void 0)throw new N0("Empty response to cursor request");return V}next(){return this.#D($V,uV)}close(){this._setClosed(new x0("Cursor was manually closed"))}_setClosed(z){if(this.#U!==void 0)return;if(this.#U=z,this.#z._cursorClosed(this),this.#K!==void 0)this.#K.cancel()}get closed(){return this.#U!==void 0}async#D(z,V){for(;;){if(this.#Z)return;else if(this.#U!==void 0)throw new U6("Cursor is closed",this.#U);if(this.#V==="json"){const Z=this.#H();if(Z!==void 0){const D=(new TextDecoder()).decode(Z),U=JSON.parse(D);return H5(U,z)}}else if(this.#V==="protobuf"){const Z=this.#Q();if(Z!==void 0)return E4(Z,V)}else throw Y0(this.#V,"Impossible encoding");if(this.#K===void 0)throw new Y6("Attempted to read from HTTP cursor before it was opened");const{value:K,done:J}=await this.#K.read();if(J&&this.#J.length===0)this.#Z=!0;else if(J)throw new N0("Unexpected end of cursor stream");else this.#J.push(K)}}#H(){const z=this.#J.data(),K=z.indexOf(10);if(K<0)return;const J=z.slice(0,K);return this.#J.shift(K+1),J}#Q(){const z=this.#J.data();let V=0,K=0;for(;;){if(K>=z.byteLength)return;const Z=z[K];if(V|=(Z&127)<<7*K,K+=1,!(Z&128))break}if(z.byteLength<K+V)return;const J=z.slice(K,K+V);return this.#J.shift(K+V),J}}function Bc(z,V){if(V.baton!==void 0)z.string("baton",V.baton);z.arrayObjects("requests",V.requests,GX0)}var GX0=function(z,V){if(z.stringRaw("type",V.type),V.type==="close");else if(V.type==="execute")z.object("stmt",V.stmt,y3);else if(V.type==="batch")z.object("batch",V.batch,Z7);else if(V.type==="sequence"){if(V.sql!==void 0)z.string("sql",V.sql);if(V.sqlId!==void 0)z.number("sql_id",V.sqlId)}else if(V.type==="describe"){if(V.sql!==void 0)z.string("sql",V.sql);if(V.sqlId!==void 0)z.number("sql_id",V.sqlId)}else if(V.type==="store_sql")z.number("sql_id",V.sqlId),z.string("sql",V.sql);else if(V.type==="close_sql")z.number("sql_id",V.sqlId);else if(V.type==="get_autocommit");else throw Y0(V,"Impossible type of StreamRequest")};function Mc(z,V){if(V.baton!==void 0)z.string("baton",V.baton);z.object("batch",V.batch,Z7)}function Gc(z,V){if(V.baton!==void 0)z.string(1,V.baton);for(let K of V.requests)z.message(2,K,OX0)}var OX0=function(z,V){if(V.type==="close")z.message(1,V,FX0);else if(V.type==="execute")z.message(2,V,IX0);else if(V.type==="batch")z.message(3,V,XX0);else if(V.type==="sequence")z.message(4,V,LX0);else if(V.type==="describe")z.message(5,V,wX0);else if(V.type==="store_sql")z.message(6,V,NX0);else if(V.type==="close_sql")z.message(7,V,qX0);else if(V.type==="get_autocommit")z.message(8,V,PX0);else throw Y0(V,"Impossible type of StreamRequest")},FX0=function(z,V){},IX0=function(z,V){z.message(1,V.stmt,_3)},XX0=function(z,V){z.message(1,V.batch,U7)},LX0=function(z,V){if(V.sql!==void 0)z.string(1,V.sql);if(V.sqlId!==void 0)z.int32(2,V.sqlId)},wX0=function(z,V){if(V.sql!==void 0)z.string(1,V.sql);if(V.sqlId!==void 0)z.int32(2,V.sqlId)},NX0=function(z,V){z.int32(1,V.sqlId),z.string(2,V.sql)},qX0=function(z,V){z.int32(1,V.sqlId)},PX0=function(z,V){};function Oc(z,V){if(V.baton!==void 0)z.string(1,V.baton);z.message(2,V.batch,U7)}var TX0=function(z,V){if(V.results.length!==z.length)throw new N0("Server returned unexpected number of pipeline results");for(let K=0;K<z.length;++K){const J=V.results[K],Z=z[K];if(J.type==="ok"){if(J.response.type!==Z.request.type)throw new N0("Received unexpected type of response");Z.responseCallback(J.response)}else if(J.type==="error")Z.errorCallback(o8(J.error));else if(J.type==="none")throw new N0("Received unrecognized type of StreamResult");else throw Y0(J,"Received impossible type of StreamResult")}};async function AX0(z,V){if(V==="json"){const K=await z.json();return H5(K,Dc)}else if(V==="protobuf"){const K=await z.arrayBuffer();return E4(new Uint8Array(K),Qc)}else throw Y0(V,"Impossible encoding")}async function EX0(z){const V=z.headers.get("content-type")??"text/plain";if(V==="application/json"){const J=await z.json();if("message"in J)return o8(J)}let K=`Server returned HTTP status ${z.status}`;if(V==="text/plain"){const J=(await z.text()).trim();if(J!=="")K+=`: ${J}`}if(z.status===404)K+=". It seems that the libsql server is outdated, please try updating the database.";return new h3(K,z.status)}class mV extends J7{#z;#V;#K;#J;#U;#Z;#D;#H;#Q;#j;#M;#F;constructor(z,V,K,J){super(z.intMode);this.#z=z,this.#V=V.toString(),this.#K=K,this.#J=J,this.#U=void 0,this.#Z=new C4,this.#D=!1,this.#Q=!1,this.#j=!1,this.#M=void 0,this.#F=new v4}client(){return this.#z}_sqlOwner(){return this}storeSql(z){const V=this.#F.alloc();return this.#G({type:"store_sql",sqlId:V,sql:z}).then(()=>{return},(K)=>this._setClosed(K)),new B5(this,V)}_closeSql(z){if(this.#M!==void 0)return;this.#G({type:"close_sql",sqlId:z}).then(()=>this.#F.free(z),(V)=>this._setClosed(V))}_execute(z){return this.#G({type:"execute",stmt:z}).then((V)=>{return V.result})}_batch(z){return this.#G({type:"batch",batch:z}).then((V)=>{return V.result})}_describe(z){return this.#G({type:"describe",sql:z.sql,sqlId:z.sqlId}).then((V)=>{return V.result})}_sequence(z){return this.#G({type:"sequence",sql:z.sql,sqlId:z.sqlId}).then((V)=>{return})}getAutocommit(){return this.#z._ensureVersion(3,"getAutocommit()"),this.#G({type:"get_autocommit"}).then((z)=>{return z.isAutocommit})}#G(z){return new Promise((V,K)=>{this.#I({type:"pipeline",request:z,responseCallback:V,errorCallback:K})})}_openCursor(z){return new Promise((V,K)=>{this.#I({type:"cursor",batch:z,cursorCallback:V,errorCallback:K})})}_cursorClosed(z){if(z!==this.#H)throw new Y6("Cursor was closed, but it was not associated with the stream");this.#H=void 0,M5(()=>this.#O())}close(){this._setClosed(new x0("Stream was manually closed"))}closeGracefully(){this.#Q=!0,M5(()=>this.#O())}get closed(){return this.#M!==void 0||this.#Q}_setClosed(z){if(this.#M!==void 0)return;if(this.#M=z,this.#H!==void 0)this.#H._setClosed(z);this.#z._streamClosed(this);for(;;){const V=this.#Z.shift();if(V!==void 0)V.errorCallback(z);else break}if((this.#U!==void 0||this.#D)&&!this.#j)this.#Z.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{return},errorCallback:()=>{return}}),this.#j=!0,M5(()=>this.#O())}#I(z){if(this.#M!==void 0)throw new U6("Stream is closed",this.#M);else if(this.#Q)throw new U6("Stream is closing",void 0);else this.#Z.push(z),M5(()=>this.#O())}#O(){if(this.#D||this.#H!==void 0)return;if(this.#Q&&this.#Z.length===0){this._setClosed(new x0("Stream was gracefully closed"));return}const z=this.#z._endpoint;if(z===void 0){this.#z._endpointPromise.then(()=>this.#O(),(K)=>this._setClosed(K));return}const V=this.#Z.shift();if(V===void 0)return;else if(V.type==="pipeline"){const K=[V];for(;;){const J=this.#Z.first();if(J!==void 0&&J.type==="pipeline")K.push(J),this.#Z.shift();else if(J===void 0&&this.#Q&&!this.#j){K.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{return},errorCallback:()=>{return}}),this.#j=!0;break}else break}this.#B(z,K)}else if(V.type==="cursor")this.#L(z,V);else throw Y0(V,"Impossible type of QueueEntry")}#B(z,V){this.#X(()=>this.#N(V,z),(K)=>AX0(K,z.encoding),(K)=>K.baton,(K)=>K.baseUrl,(K)=>TX0(V,K),(K)=>V.forEach((J)=>J.errorCallback(K)))}#L(z,V){const K=new UU(this,z.encoding);this.#H=K,this.#X(()=>this.#q(V,z),(J)=>K.open(J),(J)=>J.baton,(J)=>J.baseUrl,(J)=>V.cursorCallback(K),(J)=>V.errorCallback(J))}#X(z,V,K,J,Z,D){let U;try{const j=z(),B=this.#J;U=B(j)}catch(j){U=Promise.reject(j)}this.#D=!0,U.then((j)=>{if(!j.ok)return EX0(j).then((B)=>{throw B});return V(j)}).then((j)=>{this.#U=K(j),this.#V=J(j)??this.#V,Z(j)}).catch((j)=>{this._setClosed(j),D(j)}).finally(()=>{this.#D=!1,this.#O()})}#N(z,V){return this.#w(new URL(V.pipelinePath,this.#V),{baton:this.#U,requests:z.map((K)=>K.request)},V.encoding,Bc,Gc)}#q(z,V){if(V.cursorPath===void 0)throw new A8("Cursors are supported only on protocol version 3 and higher, "+`but the HTTP server only supports version ${V.version}.`);return this.#w(new URL(V.cursorPath,this.#V),{baton:this.#U,batch:z.batch},V.encoding,Mc,Oc)}#w(z,V,K,J,Z){let D,U;if(K==="json")D=R3(V,J),U="application/json";else if(K==="protobuf")D=b3(V,Z),U="application/x-protobuf";else throw Y0(K,"Impossible encoding");const j=new JU;if(j.set("content-type",U),this.#K!==void 0)j.set("authorization",`Bearer ${this.#K}`);return new g3(z.toString(),{method:"POST",headers:j,body:D})}}async function CX0(z,V){const K=z;for(let J of vX0){const Z=new URL(J.versionPath,V),D=new g3(Z.toString(),{method:"GET"}),U=await K(D);if(await U.arrayBuffer(),U.ok)return J}return DU}var vX0=[{versionPath:"v3-protobuf",pipelinePath:"v3-protobuf/pipeline",cursorPath:"v3-protobuf/cursor",version:3,encoding:"protobuf"}],DU={versionPath:"v2",pipelinePath:"v2/pipeline",cursorPath:void 0,version:2,encoding:"json"};class cV extends s5{#z;#V;#K;#J;#U;_endpointPromise;_endpoint;constructor(z,V,K,J=2){super();if(this.#z=z,this.#V=V,this.#K=K??KU,this.#J=void 0,this.#U=new Set,J==3)this._endpointPromise=CX0(this.#K,this.#z),this._endpointPromise.then((Z)=>this._endpoint=Z,(Z)=>this.#Z(Z));else this._endpointPromise=Promise.resolve(DU),this._endpointPromise.then((Z)=>this._endpoint=Z,(Z)=>this.#Z(Z))}async getVersion(){if(this._endpoint!==void 0)return this._endpoint.version;return(await this._endpointPromise).version}_ensureVersion(z,V){if(z<=DU.version)return;else if(this._endpoint===void 0)throw new A8(`${V} is supported only on protocol version ${z} and higher, `+"but the version supported by the HTTP server is not yet known. Use Client.getVersion() to wait until the version is available.");else if(this._endpoint.version<z)throw new A8(`${V} is supported only on protocol version ${z} and higher, `+`but the HTTP server only supports version ${this._endpoint.version}.`)}openStream(){if(this.#J!==void 0)throw new U6("Client is closed",this.#J);const z=new mV(this,this.#z,this.#V,this.#K);return this.#U.add(z),z}_streamClosed(z){this.#U.delete(z)}close(){this.#Z(new x0("Client was manually closed"))}get closed(){return this.#J!==void 0}#Z(z){if(this.#J!==void 0)return;this.#J=z;for(let V of Array.from(this.#U))V._setClosed(new U6("Client was closed",z))}}function HU(z,V,K=2){if(typeof T4==="undefined")throw new C3("WebSockets are not supported in this environment");var J=void 0;if(K==3)J=Array.from(VU.keys());else J=Array.from(Uc.keys());const Z=new T4(z,J);return new dV(Z,V)}function Fc(z,V,K,J=2){return new cV(z instanceof URL?z:new URL(z),V,K,J)}async function pV(z,V,K,J){const Z=K.step(),D=Z.run(U5(z));let U=Z;const j=J.map((b)=>{const w=K.step().condition(s0.ok(U));if(V>=3)w.condition(s0.not(s0.isAutocommit(K)));const v=w.query(b);return U=w,v}),B=K.step().condition(s0.ok(U));if(V>=3)B.condition(s0.not(s0.isAutocommit(K)));const H=B.run("COMMIT");K.step().condition(s0.not(s0.ok(B))).run("ROLLBACK").catch((b)=>{return}),await K.execute();const A=[];await D;for(let b of j){const w=await b;if(w===void 0)throw new E0("Statement in a batch was not executed, probably because the transaction has been rolled back","TRANSACTION_CLOSED");A.push(Q7(w))}return await H,A}function G5(z){if(typeof z==="string")return new K7(z);const V=new K7(z.sql);if(Array.isArray(z.args))V.bindIndexes(z.args);else for(let[K,J]of Object.entries(z.args))V.bindName(K,J);return V}function Q7(z){const V=z.columnNames.map((U)=>U??""),K=z.columnDecltypes.map((U)=>U??""),J=z.rows,Z=z.affectedRowCount,D=z.lastInsertRowid!==void 0?z.lastInsertRowid:void 0;return new r5(V,K,J,Z,D)}function M6(z){if(z instanceof x0){const V=Ic(z);return new E0(z.message,V,void 0,z)}return z}var Ic=function(z){if(z instanceof v3&&z.code!==void 0)return z.code;else if(z instanceof N0)return"HRANA_PROTO_ERROR";else if(z instanceof U6)return z.cause instanceof x0?Ic(z.cause):"HRANA_CLOSED_ERROR";else if(z instanceof e5)return"HRANA_WEBSOCKET_ERROR";else if(z instanceof h3)return"SERVER_ERROR";else if(z instanceof A8)return"PROTOCOL_VERSION_ERROR";else if(z instanceof Y6)return"INTERNAL_ERROR";else return"UNKNOWN"};class u3{#z;#V;#K;constructor(z,V){this.#z=z,this.#V=V,this.#K=void 0}execute(z){return this.batch([z]).then((V)=>V[0])}async batch(z){const V=this._getStream();if(V.closed)throw new E0("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{const K=z.map(G5);let J;if(this.#K===void 0){this._getSqlCache().apply(K);const D=V.batch(this.#V>=3),U=D.step(),j=U.run(U5(this.#z));let B=U;J=K.map((H)=>{const G=D.step().condition(s0.ok(B));if(this.#V>=3)G.condition(s0.not(s0.isAutocommit(D)));const A=G.query(H);return A.catch(()=>{return}),B=G,A}),this.#K=D.execute().then(()=>j).then(()=>{return});try{await this.#K}catch(H){throw this.close(),H}}else{if(this.#V<3)await this.#K;this._getSqlCache().apply(K);const D=V.batch(this.#V>=3);let U=void 0;J=K.map((j)=>{const B=D.step();if(U!==void 0)B.condition(s0.ok(U));if(this.#V>=3)B.condition(s0.not(s0.isAutocommit(D)));const H=B.query(j);return H.catch(()=>{return}),U=B,H}),await D.execute()}const Z=[];for(let D of J){const U=await D;if(U===void 0)throw new E0("Statement in a transaction was not executed, probably because the transaction has been rolled back","TRANSACTION_CLOSED");Z.push(Q7(U))}return Z}catch(K){throw M6(K)}}async executeMultiple(z){const V=this._getStream();if(V.closed)throw new E0("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{if(this.#K===void 0){this.#K=V.run(U5(this.#z)).then(()=>{return});try{await this.#K}catch(K){throw this.close(),K}}else await this.#K;await V.sequence(z)}catch(K){throw M6(K)}}async rollback(){try{const z=this._getStream();if(z.closed)return;if(this.#K!==void 0);else return;const V=z.run("ROLLBACK").catch((K)=>{throw M6(K)});z.closeGracefully(),await V}catch(z){throw M6(z)}finally{this.close()}}async commit(){try{const z=this._getStream();if(z.closed)throw new E0("Cannot commit the transaction because it is already closed","TRANSACTION_CLOSED");if(this.#K!==void 0)await this.#K;else return;const V=z.run("COMMIT").catch((K)=>{throw M6(K)});z.closeGracefully(),await V}catch(z){throw M6(z)}finally{this.close()}}}class j7{#z;#V;capacity;constructor(z,V){this.#z=z,this.#V=new Xc,this.capacity=V}apply(z){if(this.capacity<=0)return;const V=new Set;for(let K of z){if(typeof K.sql!=="string")continue;const J=K.sql;let Z=this.#V.get(J);if(Z===void 0){while(this.#V.size+1>this.capacity){const[D,U]=this.#V.peekLru();if(V.has(U))break;U.close(),this.#V.delete(D)}if(this.#V.size+1<=this.capacity)Z=this.#z.storeSql(J),this.#V.set(J,Z)}if(Z!==void 0)K.sql=Z,V.add(Z)}}}class Xc{#z;constructor(){this.#z=new Map}get(z){const V=this.#z.get(z);if(V!==void 0)this.#z.delete(z),this.#z.set(z,V);return V}set(z,V){this.#z.set(z,V)}peekLru(){for(let z of this.#z.entries())return z;return}delete(z){this.#z.delete(z)}get size(){return this.#z.size}}function Lc(z){if(z.scheme!=="wss"&&z.scheme!=="ws")throw new E0('The WebSocket client supports only "libsql:", "wss:" and "ws:" URLs, '+`got ${JSON.stringify(z.scheme+":")}. For more information, please read ${y8}`,"URL_SCHEME_NOT_SUPPORTED");if(z.scheme==="ws"&&z.tls)throw new E0('A "ws:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");else if(z.scheme==="wss"&&!z.tls)throw new E0('A "wss:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");const V=T3(z.scheme,z.authority,z.path);let K;try{K=HU(V,z.authToken)}catch(J){if(J instanceof C3){const Z=z.scheme==="wss"?"https":"http",D=T3(Z,z.authority,z.path);throw new E0("This environment does not support WebSockets, please switch to the HTTP client by using "+`a "${Z}:" URL (${JSON.stringify(D)}). `+`For more information, please read ${y8}`,"WEBSOCKETS_NOT_SUPPORTED")}throw M6(J)}return new wc(K,V,z.authToken,z.intMode)}var hX0=60000,WX0=100;class wc{#z;#V;#K;#J;#U;closed;protocol;constructor(z,V,K,J){this.#z=V,this.#V=K,this.#K=J,this.#J=this.#D(z),this.#U=void 0,this.closed=!1,this.protocol="ws"}async execute(z){const V=await this.#Z();try{const K=G5(z);V.conn.sqlCache.apply([K]);const J=V.stream.query(K);return V.stream.closeGracefully(),Q7(await J)}catch(K){throw M6(K)}finally{this._closeStream(V)}}async batch(z,V="deferred"){const K=await this.#Z();try{const J=z.map(G5),Z=await K.conn.client.getVersion();K.conn.sqlCache.apply(J);const D=K.stream.batch(Z>=3);return await pV(V,Z,D,J)}catch(J){throw M6(J)}finally{this._closeStream(K)}}async transaction(z="write"){const V=await this.#Z();try{const K=await V.conn.client.getVersion();return new Nc(this,V,z,K)}catch(K){throw this._closeStream(V),M6(K)}}async executeMultiple(z){const V=await this.#Z();try{const K=V.stream.sequence(z);V.stream.closeGracefully(),await K}catch(K){throw M6(K)}finally{this._closeStream(V)}}sync(){return Promise.resolve()}async#Z(){if(this.closed)throw new E0("The client is closed","CLIENT_CLOSED");if((new Date()).valueOf()-this.#J.openTime.valueOf()>hX0&&this.#U===void 0){const J=this.#D();this.#U=J,J.client.getVersion().then((Z)=>{if(this.#J!==J){if(this.#J.streamStates.size===0)this.#J.client.close()}this.#J=J,this.#U=void 0},(Z)=>{this.#U=void 0})}if(this.#J.client.closed)try{if(this.#U!==void 0)this.#J=this.#U;else this.#J=this.#D()}catch(J){throw M6(J)}const K=this.#J;try{if(K.useSqlCache===void 0){if(K.useSqlCache=await K.client.getVersion()>=2,K.useSqlCache)K.sqlCache.capacity=WX0}const J=K.client.openStream();J.intMode=this.#K;const Z={conn:K,stream:J};return K.streamStates.add(Z),Z}catch(J){throw M6(J)}}#D(z){try{return z??=HU(this.#z,this.#V),{client:z,useSqlCache:void 0,sqlCache:new j7(z,0),openTime:new Date,streamStates:new Set}}catch(V){throw M6(V)}}_closeStream(z){z.stream.close();const V=z.conn;if(V.streamStates.delete(z),V.streamStates.size===0&&V!==this.#J)V.client.close()}close(){this.#J.client.close(),this.closed=!0}}class Nc extends u3{#z;#V;constructor(z,V,K,J){super(K,J);this.#z=z,this.#V=V}_getStream(){return this.#V.stream}_getSqlCache(){return this.#V.conn.sqlCache}close(){this.#z._closeStream(this.#V)}get closed(){return this.#V.stream.closed}}function qc(z){if(z.scheme!=="https"&&z.scheme!=="http")throw new E0('The HTTP client supports only "libsql:", "https:" and "http:" URLs, '+`got ${JSON.stringify(z.scheme+":")}. For more information, please read ${y8}`,"URL_SCHEME_NOT_SUPPORTED");if(z.scheme==="http"&&z.tls)throw new E0('A "http:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");else if(z.scheme==="https"&&!z.tls)throw new E0('A "https:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");const V=T3(z.scheme,z.authority,z.path);return new Tc(V,z.authToken,z.intMode,z.fetch)}var Pc=30;class Tc{#z;protocol;constructor(z,V,K,J){this.#z=Fc(z,V,J),this.#z.intMode=K,this.protocol="http"}async execute(z){try{const V=G5(z);let K;const J=this.#z.openStream();try{K=J.query(V)}finally{J.closeGracefully()}return Q7(await K)}catch(V){throw M6(V)}}async batch(z,V="deferred"){try{const K=z.map(G5),J=await this.#z.getVersion();let Z;const D=this.#z.openStream();try{new j7(D,Pc).apply(K);const j=D.batch(!1);Z=pV(V,J,j,K)}finally{D.closeGracefully()}return await Z}catch(K){throw M6(K)}}async transaction(z="write"){try{const V=await this.#z.getVersion();return new Ac(this.#z.openStream(),z,V)}catch(V){throw M6(V)}}async executeMultiple(z){try{let V;const K=this.#z.openStream();try{V=K.sequence(z)}finally{K.closeGracefully()}await V}catch(V){throw M6(V)}}sync(){return Promise.resolve()}close(){this.#z.close()}get closed(){return this.#z.closed}}class Ac extends u3{#z;#V;constructor(z,V,K){super(V,K);this.#z=z,this.#V=new j7(z,Pc)}_getStream(){return this.#z}_getSqlCache(){return this.#V}close(){this.#z.close()}get closed(){return this.#z.closed}}function Ec(z){return RX0(E3(z,!0))}var RX0=function(z){if(z.scheme==="wss"||z.scheme==="ws")return Lc(z);else if(z.scheme==="https"||z.scheme==="http")return qc(z);else return xm(z)};var kX0=Ec({url:Bun.env.DATABASE_URL,authToken:Bun.env.DATABASE_AUTH_TOKEN}),vc=kX0;var YX0=eu(vc,{schema:mZ,logger:!0}),K6=YX0;var B7=crypto,lV=(z)=>z instanceof CryptoKey;function nV(...z){const V=z.reduce((Z,{length:D})=>Z+D,0),K=new Uint8Array(V);let J=0;return z.forEach((Z)=>{K.set(Z,J),J+=Z.length}),K}var o6=new TextEncoder,K8=new TextDecoder;var bX0=(z)=>{let V=z;if(typeof V==="string")V=o6.encode(V);const K=32768,J=[];for(let Z=0;Z<V.length;Z+=K)J.push(String.fromCharCode.apply(null,V.subarray(Z,Z+K)));return btoa(J.join(""))},d3=(z)=>{return bX0(z).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},fX0=(z)=>{const V=atob(z),K=new Uint8Array(V.length);for(let J=0;J<V.length;J++)K[J]=V.charCodeAt(J);return K},M7=(z)=>{let V=z;if(V instanceof Uint8Array)V=K8.decode(V);V=V.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return fX0(V)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class R4 extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(z){super(z);this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class F8 extends R4{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(z,V="unspecified",K="unspecified"){super(z);this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=V,this.reason=K}}class iV extends R4{static get code(){return"ERR_JWT_EXPIRED"}constructor(z,V="unspecified",K="unspecified"){super(z);this.code="ERR_JWT_EXPIRED",this.claim=V,this.reason=K}}class jU extends R4{constructor(){super(...arguments);this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class m3 extends R4{constructor(){super(...arguments);this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class c0 extends R4{constructor(){super(...arguments);this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class $6 extends R4{constructor(){super(...arguments);this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}Symbol.asyncIterator;class BU extends R4{constructor(){super(...arguments);this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}var t8=function(z,V="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${V} must be ${z}`)},aV=function(z,V){return z.name===V},MU=function(z){return parseInt(z.name.slice(4),10)},yX0=function(z){switch(z){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}},_X0=function(z,V){if(V.length&&!V.some((K)=>z.usages.includes(K))){let K="CryptoKey does not support this operation, its usages must include ";if(V.length>2){const J=V.pop();K+=`one of ${V.join(", ")}, or ${J}.`}else if(V.length===2)K+=`one of ${V[0]} or ${V[1]}.`;else K+=`${V[0]}.`;throw new TypeError(K)}};function Cc(z,V,...K){switch(V){case"HS256":case"HS384":case"HS512":{if(!aV(z.algorithm,"HMAC"))throw t8("HMAC");const J=parseInt(V.slice(2),10);if(MU(z.algorithm.hash)!==J)throw t8(`SHA-${J}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!aV(z.algorithm,"RSASSA-PKCS1-v1_5"))throw t8("RSASSA-PKCS1-v1_5");const J=parseInt(V.slice(2),10);if(MU(z.algorithm.hash)!==J)throw t8(`SHA-${J}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!aV(z.algorithm,"RSA-PSS"))throw t8("RSA-PSS");const J=parseInt(V.slice(2),10);if(MU(z.algorithm.hash)!==J)throw t8(`SHA-${J}`,"algorithm.hash");break}case"EdDSA":{if(z.algorithm.name!=="Ed25519"&&z.algorithm.name!=="Ed448")throw t8("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!aV(z.algorithm,"ECDSA"))throw t8("ECDSA");const J=yX0(V);if(z.algorithm.namedCurve!==J)throw t8(J,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}_X0(z,K)}var hc=function(z,V,...K){if(K.length>2){const J=K.pop();z+=`one of type ${K.join(", ")}, or ${J}.`}else if(K.length===2)z+=`one of type ${K[0]} or ${K[1]}.`;else z+=`of type ${K[0]}.`;if(V==null)z+=` Received ${V}`;else if(typeof V==="function"&&V.name)z+=` Received function ${V.name}`;else if(typeof V==="object"&&V!=null){if(V.constructor&&V.constructor.name)z+=` Received an instance of ${V.constructor.name}`}return z};function OU(z,V,...K){return hc(`Key for the ${z} algorithm must be `,V,...K)}var GU=(z,...V)=>{return hc("Key must be ",z,...V)};var FU=(z)=>{return lV(z)},I8=["CryptoKey"];var $X0=(...z)=>{const V=z.filter(Boolean);if(V.length===0||V.length===1)return!0;let K;for(let J of V){const Z=Object.keys(J);if(!K||K.size===0){K=new Set(Z);continue}for(let D of Z){if(K.has(D))return!1;K.add(D)}}return!0},oV=$X0;var gX0=function(z){return typeof z==="object"&&z!==null};function $8(z){if(!gX0(z)||Object.prototype.toString.call(z)!=="[object Object]")return!1;if(Object.getPrototypeOf(z)===null)return!0;let V=z;while(Object.getPrototypeOf(V)!==null)V=Object.getPrototypeOf(V);return Object.getPrototypeOf(z)===V}var tV=(z,V)=>{if(z.startsWith("RS")||z.startsWith("PS")){const{modulusLength:K}=V.algorithm;if(typeof K!=="number"||K<2048)throw new TypeError(`${z} requires key modulusLength to be 2048 bits or larger`)}};var uX0=(z,V)=>{if(V instanceof Uint8Array)return;if(!FU(V))throw new TypeError(OU(z,V,...I8,"Uint8Array"));if(V.type!=="secret")throw new TypeError(`${I8.join(" or ")} instances for symmetric algorithms must be of type "secret"`)},dX0=(z,V,K)=>{if(!FU(V))throw new TypeError(OU(z,V,...I8));if(V.type==="secret")throw new TypeError(`${I8.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(K==="sign"&&V.type==="public")throw new TypeError(`${I8.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(K==="decrypt"&&V.type==="public")throw new TypeError(`${I8.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(V.algorithm&&K==="verify"&&V.type==="private")throw new TypeError(`${I8.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(V.algorithm&&K==="encrypt"&&V.type==="private")throw new TypeError(`${I8.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},mX0=(z,V,K)=>{if(z.startsWith("HS")||z==="dir"||z.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(z))uX0(z,V);else dX0(z,V,K)},rV=mX0;var cX0=function(z,V,K,J,Z){if(Z.crit!==void 0&&J.crit===void 0)throw new z('"crit" (Critical) Header Parameter MUST be integrity protected');if(!J||J.crit===void 0)return new Set;if(!Array.isArray(J.crit)||J.crit.length===0||J.crit.some((U)=>typeof U!=="string"||U.length===0))throw new z('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let D;if(K!==void 0)D=new Map([...Object.entries(K),...V.entries()]);else D=V;for(let U of J.crit){if(!D.has(U))throw new m3(`Extension Header Parameter "${U}" is not recognized`);if(Z[U]===void 0)throw new z(`Extension Header Parameter "${U}" is missing`);else if(D.get(U)&&J[U]===void 0)throw new z(`Extension Header Parameter "${U}" MUST be integrity protected`)}return new Set(J.crit)},sV=cX0;var pX0=(z,V)=>{if(V!==void 0&&(!Array.isArray(V)||V.some((K)=>typeof K!=="string")))throw new TypeError(`"${z}" option must be an array of strings`);if(!V)return;return new Set(V)},Wc=pX0;function c3(z,V){const K=`SHA-${z.slice(-3)}`;switch(z){case"HS256":case"HS384":case"HS512":return{hash:K,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:K,name:"RSA-PSS",saltLength:z.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:K,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:K,name:"ECDSA",namedCurve:V.namedCurve};case"EdDSA":return{name:V.name};default:throw new m3(`alg ${z} is not supported either by JOSE or your javascript runtime`)}}function p3(z,V,K){if(lV(V))return Cc(V,z,K),V;if(V instanceof Uint8Array){if(!z.startsWith("HS"))throw new TypeError(GU(V,...I8));return B7.subtle.importKey("raw",V,{hash:`SHA-${z.slice(-3)}`,name:"HMAC"},!1,[K])}throw new TypeError(GU(V,...I8,"Uint8Array"))}var lX0=async(z,V,K,J)=>{const Z=await p3(z,V,"verify");tV(z,Z);const D=c3(z,Z.algorithm);try{return await B7.subtle.verify(D,Z,K,J)}catch{return!1}},Rc=lX0;async function kc(z,V,K){if(!$8(z))throw new c0("Flattened JWS must be an object");if(z.protected===void 0&&z.header===void 0)throw new c0('Flattened JWS must have either of the "protected" or "header" members');if(z.protected!==void 0&&typeof z.protected!=="string")throw new c0("JWS Protected Header incorrect type");if(z.payload===void 0)throw new c0("JWS Payload missing");if(typeof z.signature!=="string")throw new c0("JWS Signature missing or incorrect type");if(z.header!==void 0&&!$8(z.header))throw new c0("JWS Unprotected Header incorrect type");let J={};if(z.protected)try{const W=M7(z.protected);J=JSON.parse(K8.decode(W))}catch{throw new c0("JWS Protected Header is invalid")}if(!oV(J,z.header))throw new c0("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const Z={...J,...z.header},D=sV(c0,new Map([["b64",!0]]),K?.crit,J,Z);let U=!0;if(D.has("b64")){if(U=J.b64,typeof U!=="boolean")throw new c0('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}const{alg:j}=Z;if(typeof j!=="string"||!j)throw new c0('JWS "alg" (Algorithm) Header Parameter missing or invalid');const B=K&&Wc("algorithms",K.algorithms);if(B&&!B.has(j))throw new jU('"alg" (Algorithm) Header Parameter value not allowed');if(U){if(typeof z.payload!=="string")throw new c0("JWS Payload must be a string")}else if(typeof z.payload!=="string"&&!(z.payload instanceof Uint8Array))throw new c0("JWS Payload must be a string or an Uint8Array instance");let H=!1;if(typeof V==="function")V=await V(J,z),H=!0;rV(j,V,"verify");const G=nV(o6.encode(z.protected??""),o6.encode("."),typeof z.payload==="string"?o6.encode(z.payload):z.payload);let A;try{A=M7(z.signature)}catch{throw new c0("Failed to base64url decode the signature")}if(!await Rc(j,V,A,G))throw new BU;let w;if(U)try{w=M7(z.payload)}catch{throw new c0("Failed to base64url decode the payload")}else if(typeof z.payload==="string")w=o6.encode(z.payload);else w=z.payload;const v={payload:w};if(z.protected!==void 0)v.protectedHeader=J;if(z.header!==void 0)v.unprotectedHeader=z.header;if(H)return{...v,key:V};return v}async function Yc(z,V,K){if(z instanceof Uint8Array)z=K8.decode(z);if(typeof z!=="string")throw new c0("Compact JWS must be a string or Uint8Array");const{0:J,1:Z,2:D,length:U}=z.split(".");if(U!==3)throw new c0("Invalid Compact JWS");const j=await kc({payload:Z,protected:J,signature:D},V,K),B={payload:j.payload,protectedHeader:j.protectedHeader};if(typeof V==="function")return{...B,key:j.key};return B}var r8=(z)=>Math.floor(z.getTime()/1000);var nX0=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,G7=(z)=>{const V=nX0.exec(z);if(!V)throw new TypeError("Invalid time period format");const K=parseFloat(V[1]);switch(V[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(K);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(K*60);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(K*3600);case"day":case"days":case"d":return Math.round(K*86400);case"week":case"weeks":case"w":return Math.round(K*604800);default:return Math.round(K*31557600)}};var bc=(z)=>z.toLowerCase().replace(/^application\//,""),iX0=(z,V)=>{if(typeof z==="string")return V.includes(z);if(Array.isArray(z))return V.some(Set.prototype.has.bind(new Set(z)));return!1},fc=(z,V,K={})=>{const{typ:J}=K;if(J&&(typeof z.typ!=="string"||bc(z.typ)!==bc(J)))throw new F8('unexpected "typ" JWT header value',"typ","check_failed");let Z;try{Z=JSON.parse(K8.decode(V))}catch{}if(!$8(Z))throw new $6("JWT Claims Set must be a top-level JSON object");const{requiredClaims:D=[],issuer:U,subject:j,audience:B,maxTokenAge:H}=K;if(H!==void 0)D.push("iat");if(B!==void 0)D.push("aud");if(j!==void 0)D.push("sub");if(U!==void 0)D.push("iss");for(let w of new Set(D.reverse()))if(!(w in Z))throw new F8(`missing required "${w}" claim`,w,"missing");if(U&&!(Array.isArray(U)?U:[U]).includes(Z.iss))throw new F8('unexpected "iss" claim value',"iss","check_failed");if(j&&Z.sub!==j)throw new F8('unexpected "sub" claim value',"sub","check_failed");if(B&&!iX0(Z.aud,typeof B==="string"?[B]:B))throw new F8('unexpected "aud" claim value',"aud","check_failed");let G;switch(typeof K.clockTolerance){case"string":G=G7(K.clockTolerance);break;case"number":G=K.clockTolerance;break;case"undefined":G=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:A}=K,b=r8(A||new Date);if((Z.iat!==void 0||H)&&typeof Z.iat!=="number")throw new F8('"iat" claim must be a number',"iat","invalid");if(Z.nbf!==void 0){if(typeof Z.nbf!=="number")throw new F8('"nbf" claim must be a number',"nbf","invalid");if(Z.nbf>b+G)throw new F8('"nbf" claim timestamp check failed',"nbf","check_failed")}if(Z.exp!==void 0){if(typeof Z.exp!=="number")throw new F8('"exp" claim must be a number',"exp","invalid");if(Z.exp<=b-G)throw new iV('"exp" claim timestamp check failed',"exp","check_failed")}if(H){const w=b-Z.iat,v=typeof H==="number"?H:G7(H);if(w-G>v)throw new iV('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(w<0-G)throw new F8('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return Z};async function IU(z,V,K){const J=await Yc(z,V,K);if(J.protectedHeader.crit?.includes("b64")&&J.protectedHeader.b64===!1)throw new $6("JWTs MUST NOT use unencoded payload");const D={payload:fc(J.protectedHeader,J.payload,K),protectedHeader:J.protectedHeader};if(typeof V==="function")return{...D,key:J.key};return D}var aX0=async(z,V,K)=>{const J=await p3(z,V,"sign");tV(z,J);const Z=await B7.subtle.sign(c3(z,J.algorithm),J,K);return new Uint8Array(Z)},xc=aX0;class XU{constructor(z){if(!(z instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=z}setProtectedHeader(z){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=z,this}setUnprotectedHeader(z){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=z,this}async sign(z,V){if(!this._protectedHeader&&!this._unprotectedHeader)throw new c0("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!oV(this._protectedHeader,this._unprotectedHeader))throw new c0("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const K={...this._protectedHeader,...this._unprotectedHeader},J=sV(c0,new Map([["b64",!0]]),V?.crit,this._protectedHeader,K);let Z=!0;if(J.has("b64")){if(Z=this._protectedHeader.b64,typeof Z!=="boolean")throw new c0('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}const{alg:D}=K;if(typeof D!=="string"||!D)throw new c0('JWS "alg" (Algorithm) Header Parameter missing or invalid');rV(D,z,"sign");let U=this._payload;if(Z)U=o6.encode(d3(U));let j;if(this._protectedHeader)j=o6.encode(d3(JSON.stringify(this._protectedHeader)));else j=o6.encode("");const B=nV(j,o6.encode("."),U),H=await xc(D,z,B),G={signature:d3(H),payload:""};if(Z)G.payload=K8.decode(U);if(this._unprotectedHeader)G.header=this._unprotectedHeader;if(this._protectedHeader)G.protected=K8.decode(j);return G}}class LU{constructor(z){this._flattened=new XU(z)}setProtectedHeader(z){return this._flattened.setProtectedHeader(z),this}async sign(z,V){const K=await this._flattened.sign(z,V);if(K.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${K.protected}.${K.payload}.${K.signature}`}}var O7=function(z,V){if(!Number.isFinite(V))throw new TypeError(`Invalid ${z} input`);return V};class wU{constructor(z={}){if(!$8(z))throw new TypeError("JWT Claims Set MUST be an object");this._payload=z}setIssuer(z){return this._payload={...this._payload,iss:z},this}setSubject(z){return this._payload={...this._payload,sub:z},this}setAudience(z){return this._payload={...this._payload,aud:z},this}setJti(z){return this._payload={...this._payload,jti:z},this}setNotBefore(z){if(typeof z==="number")this._payload={...this._payload,nbf:O7("setNotBefore",z)};else if(z instanceof Date)this._payload={...this._payload,nbf:O7("setNotBefore",r8(z))};else this._payload={...this._payload,nbf:r8(new Date)+G7(z)};return this}setExpirationTime(z){if(typeof z==="number")this._payload={...this._payload,exp:O7("setExpirationTime",z)};else if(z instanceof Date)this._payload={...this._payload,exp:O7("setExpirationTime",r8(z))};else this._payload={...this._payload,exp:r8(new Date)+G7(z)};return this}setIssuedAt(z){if(typeof z==="undefined")this._payload={...this._payload,iat:r8(new Date)};else if(z instanceof Date)this._payload={...this._payload,iat:O7("setIssuedAt",r8(z))};else this._payload={...this._payload,iat:O7("setIssuedAt",z)};return this}}class eV extends wU{setProtectedHeader(z){return this._protectedHeader=z,this}async sign(z,V){const K=new LU(o6.encode(JSON.stringify(this._payload)));if(K.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new $6("JWTs MUST NOT use unencoded payload");return K.sign(z,V)}}var Sc=M7;function NU(z){if(typeof z!=="string")throw new $6("JWTs must use Compact JWS serialization, JWT must be a string");const{1:V,length:K}=z.split(".");if(K===5)throw new $6("Only JWTs using Compact JWS serialization can be decoded");if(K!==3)throw new $6("Invalid JWT");if(!V)throw new $6("JWTs must contain a payload");let J;try{J=Sc(V)}catch{throw new $6("Failed to base64url decode the payload")}let Z;try{Z=JSON.parse(K8.decode(J))}catch{throw new $6("Failed to parse the decoded payload as JSON")}if(!$8(Z))throw new $6("Invalid JWT Claims Set");return Z}var rX0=function(z,V,K){const J=new eV(z),Z=(new TextEncoder()).encode(V);if(J.setProtectedHeader({alg:K?.algorithm||"HS256"}),K?.expiresIn!=null)J.setExpirationTime(K.expiresIn);return J.sign(Z)};async function sX0(z,V){const K=(new TextEncoder()).encode(V);return(await IU(z,K)).payload}var eX0=function(z){return NU(z)},zL0={sign:rX0,verify:sX0,decode:eX0},O5=zL0;var VL0=new o0().use(f8).group("auth",(z)=>z.post("verify",async({headers:V,redis:K})=>{const J=V.authorization;if(J==null)throw new Error("Not authenticated");const Z=J.split(" ")[1];if(!Z)throw new Error("Token is empty");const D=await O5.verify(Z,"123123"),U=await K.get(`user:${D.username}`);if(D.sessionKey!==U)throw new Error("Invalid session");return{username:D.username}}).post("login",async({body:V,redis:K})=>{const{username:J}=V,Z=crypto.randomUUID(),D=await O5.sign({username:J,sessionKey:Z},"123123");if(await K.get(`user:${J}`))throw new Error("username exists");const j=await K6.select().from(i0).where(l0(i0.username,J));if(!j.length)await K6.insert(i0).values({username:J});return await K.set(`user:${J}`,Z),{id:j[0].id,username:j[0].username,token:D}},{body:n0.Object({username:n0.String()})}).post("logout",async({headers:V,redis:K})=>{const J=V.authorization;if(J==null)throw new Error("Not authenticated");const Z=J.split(" ")[1];if(!Z)throw new Error("Token is empty");const D=O5.decode(Z);await K.del(`user:${D.username}`)})),yc=VL0;var KL0=new o0({name:"middleware:auth"}).use(f8).derive(async({headers:z,redis:V})=>{const K=z.authorization;if(K==null)throw new Error("Not authenticated");const J=K.split(" ")[1];if(!J)throw new Error("Token is empty");const Z=await O5.verify(J,"123123"),D=await K6.select().from(i0).where(l0(i0.username,Z.username));if(!D.length)throw new Error("User does not exists");const U=await V.get(`user:${Z.username}`);if(Z.sessionKey!==U)throw new Error("Invalid session");return{user:{id:D[0].id,username:Z.username}}}),l3=KL0;var JL0=new o0().use(f8).group("user",(z)=>z.use(l3).get("list",async({user:V})=>{return await K6.select().from(i0).where(c5(l0(i0.username,V.username)))})),_c=JL0;var ZL0=new o0().use(f8).group("inbox",(z)=>z.use(l3).get(":inboxId",async({params:V,user:K})=>{const{inboxId:J}=V;if(!(await K6.select().from(q6).where(l0(q6.id,J))).length)throw new Error("Inbox does not exists");const D=await K6.select({id:i0.id,username:i0.username}).from(i6).innerJoin(i0,l0(i6.userId,i0.id)).where(J5(l0(i6.inboxId,J),c5(l0(i6.userId,K.id)))),U=await K6.select({id:S8.id,username:i0.username,message:S8.message}).from(S8).leftJoin(i0,l0(S8.userId,i0.id)).where(l0(S8.inboxId,J));return{friends:D,messages:U}},{params:n0.Object({inboxId:n0.String()})}).get("list",async({user:V})=>{return await K6.select({id:q6.id}).from(q6).leftJoin(i6,l0(i6.inboxId,q6.id)).where(l0(i6.userId,V.id))}).post("create",async({user:V})=>{const K=i8();return await K6.transaction(async(J)=>{await J.insert(q6).values({id:K,userId:V.id}),await J.insert(i6).values({userId:V.id,inboxId:K})}),{inboxId:K}}).post(":inboxId/invite",async({params:V,body:K,set:J})=>{const{inboxId:Z}=V,{userIds:D}=K;if(!(await K6.select().from(q6).where(l0(q6.id,Z))).length)throw new Error("Inbox does not exists");const j=await K6.select({id:i6.userId}).from(i6).where(l0(i6.inboxId,Z));for(let B=0;B<D.length;B++){const H=D[B],G=await K6.select().from(i0).where(l0(i0.id,H));if(!G.length)throw new Error(`User ${H} on list does not exists`);if(j.includes({id:G[0].id}))continue;await K6.insert(i6).values({userId:G[0].id,inboxId:Z})}J.status=201},{params:n0.Object({inboxId:n0.String()}),body:n0.Object({userIds:n0.Array(n0.String())})}).post(":inboxId/send-message",async({params:V,body:K,user:J,set:Z})=>{const{inboxId:D}=V,{message:U}=K;if(!(await K6.select().from(q6).where(l0(q6.id,D))).length)throw new Error("Inbox does not exists");await K6.insert(S8).values({inboxId:D,userId:J.id,message:U}),Z.status=201},{params:n0.Object({inboxId:n0.String()}),body:n0.Object({message:n0.String()})})),$c=ZL0;var UL0=new o0().use(yc).use(_c).use($c),gc=UL0;var DL0=process.env.PORT?Number(process.env.PORT):3000,HL0=new o0().ws("inbox/join",{body:n0.Object({inboxId:n0.String()}),message(z,{inboxId:V}){z.subscribe(V),z.send(V)}}).ws("inbox/send-message",{query:n0.Object({inboxId:n0.String(),userId:n0.String(),username:n0.String()}),body:n0.Object({message:n0.String()}),open(z){z.subscribe(z.data.query.inboxId)},async message(z,{message:V}){const{inboxId:K,userId:J,username:Z}=z.data.query,D=i8();if(!(await K6.select().from(q6).where(l0(q6.id,K))).length)throw new Error("Inbox does not exists");await K6.insert(S8).values({inboxId:K,userId:J,message:V}),z.send({id:D,username:Z,message:V}),z.publish(K,{id:D,username:Z,message:V})}}),QL0=new o0().use(f8).use(HL0).use(gc).listen(DL0);console.log(`\uD83E\uDD8A Elysia is running at ${QL0.server?.url}`);
